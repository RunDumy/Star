"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{172:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(7876);function o(e){var t=e.children,n=e.className,o=e.hover,a=e.glow;return(0,r.jsxs)("div",{className:"".concat("relative rounded-xl border backdrop-blur-sm bg-cosmic-deep/20 p-6"," ").concat(void 0!==a&&a?"shadow-cosmic border-cosmic-glow/30":"shadow-blue border-cosmic-purple/30"," ").concat(void 0!==o&&o?"hover:shadow-cosmic-lg hover:border-cosmic-accent/50 transition-all duration-300":""," ").concat(void 0===n?"":n),children:[t,(0,r.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-cosmic-purple/5 to-cosmic-blue/5 pointer-events-none"})]})}},386:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(2969),o=n(3857),a=n(3081),i=n.n(a),c=n(4232),s={single_card:{id:"single_card",name:"Single Card Insight",layout_type:"single_card",description:"A solitary card drawn for immediate guidance and clarity",cosmic_template:"Insight and intuition during moments of cosmic alignment",positions:[{id:"center",x:50,y:50,rotation:0,scale:1.2,label:"Present Moment",meaning_context:"Immediate energy and guidance from the universe"}]},three_card:{id:"three_card",name:"Past, Present, Future",layout_type:"three_card",description:"A linear spread revealing the flow of time and destiny",cosmic_template:"Mercury and Saturn alignment for temporal wisdom",positions:[{id:"past",x:20,y:50,rotation:-5,scale:1,label:"Past Influences",meaning_context:"Influences from your history shaping current reality"},{id:"present",x:50,y:50,rotation:0,scale:1.1,label:"Present Situation",meaning_context:"Current energies and challenges you face"},{id:"future",x:80,y:50,rotation:5,scale:1,label:"Future Potential",meaning_context:"Coming opportunities and potential outcomes"}]},horseshoe:{id:"horseshoe",name:"Horseshoe of Destiny",layout_type:"horseshoe",description:"Seven cards forming a protective arc of guidance",cosmic_template:"Venus and Moon conjunction for emotional guidance",positions:[{id:"situation",x:50,y:20,rotation:0,scale:1.1,label:"Situation",meaning_context:"The core challenge or focus of your inquiry"},{id:"challenges",x:25,y:35,rotation:-10,scale:1,label:"Challenges",meaning_context:"Obstacles or hidden factors affecting your path"},{id:"resources",x:75,y:35,rotation:10,scale:1,label:"Resources",meaning_context:"Your strengths and available support"},{id:"past",x:10,y:60,rotation:-20,scale:1,label:"Past Influences",meaning_context:"How your history influences your current situation"},{id:"conscious",x:50,y:65,rotation:0,scale:1,label:"Conscious Mind",meaning_context:"Your current mental state and rational approach"},{id:"unconscious",x:90,y:60,rotation:20,scale:1,label:"Unconscious Mind",meaning_context:"Subconscious motivations and deep emotions"},{id:"outcome",x:50,y:85,rotation:0,scale:1.05,label:"Likely Outcome",meaning_context:"The probable result if current courses remain steady"}]},celtic_cross:{id:"celtic_cross",name:"Celtic Cross",layout_type:"celtic_cross",description:"The sacred ten-card spread of ancient Celtic wisdom",cosmic_template:"Full moon timing for deep archetypal insights",positions:[{id:"present",x:50,y:50,rotation:0,scale:1.2,label:"Present Situation",meaning_context:"The heart of the matter - your current reality"},{id:"challenge",x:50,y:25,rotation:0,scale:1,label:"Immediate Challenge",meaning_context:"The obstacle crossing your path right now"},{id:"distant_past",x:75,y:37.5,rotation:90,scale:1,label:"Distant Past",meaning_context:"Foundational influences from your history"},{id:"possible_outcome",x:75,y:62.5,rotation:90,scale:1,label:"Possible Outcome",meaning_context:"What may emerge if current paths continue"},{id:"recent_past",x:25,y:37.5,rotation:90,scale:1,label:"Recent Past",meaning_context:"Recent events shaping your current situation"},{id:"near_future",x:25,y:62.5,rotation:90,scale:1,label:"Near Future",meaning_context:"Events developing in the coming months"},{id:"approach",x:37.5,y:75,rotation:0,scale:.9,label:"Your Approach",meaning_context:"Your attitude and how you are approaching the situation"},{id:"external",x:62.5,y:75,rotation:0,scale:.9,label:"External Influence",meaning_context:"People or forces outside your control"},{id:"hopes_fears",x:12.5,y:50,rotation:90,scale:.9,label:"Hopes & Fears",meaning_context:"Your deepest hopes and greatest fears"},{id:"final_outcome",x:87.5,y:50,rotation:90,scale:.95,label:"Final Outcome",meaning_context:"The ultimate result of following your true path"}]}};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=n(5794),m=n(5003);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c.useRef)([]),r=(0,c.useState)(!1),o=r[0],a=r[1],i=(0,c.useState)(null),s=i[0],l=i[1],u=(0,c.useCallback)(function(e,t){var n=(0,f.A)(t,2),r=n[0],o=180*Math.atan2(n[1],r)/Math.PI;return o>=-45&&o<45?"right":o>=45&&o<135?"down":o>=135||o<-135?"left":"up"},[]);return(0,m.useGesture)({onDrag:function(r){var o=r.active,i=(0,f.A)(r.movement,2),c=i[0],s=i[1],u=r.event;if(t.onDrag&&u){if(!(null==(d=e.current)?void 0:d.getBoundingClientRect()))return;var d,m={x:u.clientX||c,y:u.clientY||s};if(o&&0===n.current.length){var h={startPosition:m,currentPosition:m,fingerCount:1,gestureType:"pan"};n.current=[h],l(h),a(!0)}if(n.current.length>0){var p=n.current[0];p.currentPosition=m,o?t.onDrag(p):(a(!1),l(null),n.current=[])}}},onPinch:function(e){var n=e.active,r=(0,f.A)(e.offset,1)[0],o=(0,f.A)(e.origin,2),a=o[0],i=o[1];t.onPinch&&n&&t.onPinch(r,{x:a,y:i})},onDragEnd:function(e){var n=e.velocity,r=e.direction;if(t.onSwipe){var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(o>.5){var a=u(o,r);t.onSwipe(a,o)}}}},{target:e.current||void 0,drag:{threshold:10},pinch:{threshold:.5}}),{isGesturing:o,activeGesture:s,gestureState:n.current}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n,r,o,a){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],s=(0,c.useRef)(0),l=(0,c.useRef)(!1),u=[{key:"s",description:"Shuffle cards",action:function(){return null==n?void 0:n()}},{key:"r",description:"Reveal reading",action:function(){return null==r?void 0:r()}},{key:"R",ctrl:!0,description:"Reset spread",action:function(){return null==o?void 0:o()}},{key:"f",description:"Toggle focus mode",action:function(){l.current=!l.current}},{key:"?",description:"Show help",action:function(){return null==a?void 0:a()}},{key:"h",description:"Show help",action:function(){return null==a?void 0:a()}}],d=(0,c.useCallback)(function(e){if(l.current&&0!==i.length){var n=Math.ceil(Math.sqrt(i.length));s.current,s.current;var r=s.current;switch(e){case"up":r=Math.max(0,s.current-n);break;case"down":r=Math.min(i.length-1,s.current+n);break;case"left":r=Math.max(0,s.current-1);break;case"right":r=Math.min(i.length-1,s.current+1)}r!==s.current&&(s.current=r,null==t||t(i[r]))}},[i,t]),f=(0,c.useCallback)(function(){l.current&&i.length>0&&(null==e||e(i[s.current]))},[i,e]);return y(y({},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shortcuts,n=void 0===t?[]:t,r=e.onArrowKeys,o=e.onTabNavigation,a=e.onSpaceKey,i=e.onEnterKey,s=e.onEscapeKey,l=e.onShortcutKey,u=(0,c.useRef)(new Map),d=(0,c.useRef)(!1);(0,c.useEffect)(function(){var e=new Map;n.forEach(function(t){var n="".concat(t.ctrl?"ctrl+":"").concat(t.shift?"shift+":"").concat(t.alt?"alt+":"").concat(t.key.toLowerCase());e.set(n,t)}),u.current=e},[n]);var f=(0,c.useCallback)(function(e){var t="";return(e.ctrlKey||e.metaKey)&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),t+=e.key.toLowerCase()},[]),m=(0,c.useCallback)(function(){d.current=!0},[]),h=(0,c.useCallback)(function(){d.current=!1},[]),p=(0,c.useCallback)(function(e){if(!d.current){if((["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Space","Enter","Escape"].includes(e.key)||n.some(function(t){return t.key.toLowerCase()===e.key.toLowerCase()&&(t.ctrl&&(e.ctrlKey||e.metaKey)||t.shift&&e.shiftKey||t.alt&&e.altKey)}))&&(e.preventDefault(),e.stopPropagation()),r&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key))return void r(e.key.replace("Arrow","").toLowerCase());if(o&&"Tab"===e.key)return void o(e.shiftKey?"backward":"forward");if(a&&" "===e.key)return void a();if(i&&"Enter"===e.key)return void i();if(s&&"Escape"===e.key)return void s();if(n.length>0){var t=f(e),c=u.current.get(t);if(c){c.action(),null==l||l(c);return}}}},[n,r,o,a,i,s,l,f]);return(0,c.useEffect)(function(){var e=function(e){var t=e.target;("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"SELECT"!==t.tagName&&"true"!==t.contentEditable||["Escape","Tab"].includes(e.key))&&p(e)};return document.addEventListener("keydown",e),document.addEventListener("compositionstart",m),document.addEventListener("compositionend",h),function(){document.removeEventListener("keydown",e),document.removeEventListener("compositionstart",m),document.removeEventListener("compositionend",h)}},[p,m,h]),{shortcuts:n,shortcutMap:u.current}}({shortcuts:u,onArrowKeys:d,onTabNavigation:(0,c.useCallback)(function(e){l.current&&i.length>0&&("forward"===e?s.current=(s.current+1)%i.length:s.current=0===s.current?i.length-1:s.current-1,null==t||t(i[s.current]))},[i,t]),onEnterKey:f,onShortcutKey:function(e){console.log("Tarot shortcut used: ".concat(e.description))}})),{},{focusModeEnabled:l.current,currentFocusIndex:s.current,setFocusIndex:function(e){s.current=Math.max(0,Math.min(i.length-1,e))},toggleFocusMode:function(){l.current=!l.current}})}var b=n(2738),w=n(4590),j=n(6377),C=n(7876);function N(e){var t,n,r,o,a,i,s=e.width,l=e.height,u=e.energyFlows,d=e.cardPositions,f=e.onFlowClick,m=e.animated,h=void 0===m||m,x=(0,c.useRef)(),y=(0,c.useRef)(null),b=(0,c.useState)(0),w=b[0],N=b[1],k=(0,c.useState)(null),O=(k[0],k[1]),S=(0,c.useState)("select"),E=(S[0],S[1]),A=function(e,t,n){var r=t.x-e.x,o=t.y-e.y,a=Math.max(20,Math.floor(Math.sqrt(r*r+o*o)/5));switch(n.style){case"arc":return _(e,t,a);case"wave":return D(e,t,a);default:return P(e,t,a)}},P=function(e,t,n){for(var r=[],o=(t.x-e.x)/n,a=(t.y-e.y)/n,i=0;i<=n;i++)r.push({x:e.x+o*i,y:e.y+a*i});return r},_=function(e,t,n){var r=[];e.x,t.x,e.y,t.y;for(var o=.15*Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=0;a<=n;a++){var i=a/n,c=e.x+(t.x-e.x)*i,s=e.y+(t.y-e.y)*i,l=4*i*(1-i),u=t.y-e.y,d=-(t.x-e.x),f=Math.sqrt(u*u+d*d);r.push({x:c+u/f*o*l,y:s+d/f*o*l})}return r},D=function(e,t,n){for(var r=[],o=t.x-e.x,a=t.y-e.y,i=Math.sqrt(o*o+a*a),c=Math.max(i/4,20),s=Math.min(i/8,10),l=0;l<=n;l++){var u=l/n,d=e.x+o*u,f=e.y+a*u,m=i*u/c,h=Math.sin(m+w)*s,p=t.y-e.y,g=-(t.x-e.x),x=Math.sqrt(p*p+g*g);r.push({x:d+p/x*h,y:f+g/x*h,amplitude:s,phase:m})}return r},M=(0,c.useMemo)(function(){var e=new Map;return d.size&&u.forEach(function(t){var n="".concat(t.id,"-").concat(w.toFixed(1));if(!e.has(n)){var r=d.get(t.fromCardId),o=d.get(t.toCardId);r&&o&&e.set(n,A(r,o,t))}}),e},[u,d,w]);(0,c.useEffect)(function(){if(h){var e=function(){N(function(e){return(e+.02)%(2*Math.PI)}),x.current=requestAnimationFrame(e)};return e(),function(){x.current&&cancelAnimationFrame(x.current)}}},[h]);var T=(0,c.useCallback)(function(){return d.size?u.map(function(e){var t="".concat(e.id,"-").concat(w.toFixed(1)),n=M.get(t);if(!n)return null;var r=n.flatMap(function(e){return[e.x,e.y]}),o=Math.max(.2,e.strength/5),a=Math.max(1,Math.min(4,e.strength));return(0,C.jsx)(j.N1,{points:r,stroke:e.color,strokeWidth:a,opacity:o,dash:[5,5],shadowColor:e.color,shadowBlur:h?10+5*Math.sin(w):10,shadowOpacity:h?.5-.2*Math.sin(w):.5,tension:.3,lineCap:"round",lineJoin:"round",onClick:function(){return null==f?void 0:f(e)},onTap:function(){return null==f?void 0:f(e)}},"".concat(e.id,"-").concat(w.toFixed(1)))}):null},[u,d,M,w,h,f]),F=(0,c.useCallback)(function(e){var t=u.find(function(t){return t.id===e});t&&(O(t),null==f||f(t))},[u,f]),R=(0,c.useCallback)(function(e,t){console.log("Moving flow ".concat(e," to"),t)},[]),I=(0,c.useCallback)(function(e){E("zoom"),console.log("Energy field zoom scale:",e)},[]);return n=(t=(0,c.useState)(new Set))[0],r=t[1],a=(o=(0,c.useState)("select"))[0],i=o[1],p(p({},g(y,{onDrag:(0,c.useCallback)(function(e){"move"===a&&R&&n.forEach(function(t){R(t,e.currentPosition)})},[a,n,R]),onPinch:(0,c.useCallback)(function(e){"zoom"===a&&I&&I(e)},[a,I]),onTap:(0,c.useCallback)(function(e){},[a,F]),onSwipe:(0,c.useCallback)(function(e){"up"===e?i("zoom"):"down"===e?i("move"):("left"===e||"right"===e)&&i("select")},[]),onLongPress:(0,c.useCallback)(function(e){i("zoom")},[])})),{},{selectedCards:n,gestureMode:a,setGestureMode:i,addToSelection:function(e){return r(function(t){return new Set(t).add(e)})},removeFromSelection:function(e){return r(function(t){var n=new Set(t);return n.delete(e),n})},clearSelection:function(){return r(new Set)}}),v(function(e){var t=u.find(function(t){return t.id===e});t&&(O(t),null==f||f(t))},function(e){console.log("Focusing on flow:",e)},void 0,function(){console.log("Toggle energy flows")},function(){O(null)},function(){console.log("Energy Flow Help: Use arrow keys to navigate flows, Enter to select, Escape to deselect")},u.map(function(e){return e.id})),(0,C.jsx)("div",{ref:y,className:"energy-flow-visualizer",children:(0,C.jsx)(j.BI,{width:s,height:l,children:(0,C.jsxs)(j.Wd,{children:[(0,C.jsx)(j.jl,{x:s/2,y:l/2,radius:Math.max(s,l),fillRadialGradientStartPoint:{x:s/2,y:l/2},fillRadialGradientStartRadius:0,fillRadialGradientEndPoint:{x:s/2,y:l/2},fillRadialGradientEndRadius:Math.max(s,l),fillRadialGradientColorStops:[0,"rgba(0,0,0,0)",1,"rgba(50,50,50,0.1)"],opacity:h?.3+.1*Math.sin(.5*w):.3}),T(),d.size?u.map(function(e){var t=d.get(e.fromCardId),n=d.get(e.toCardId);if(!t||!n)return null;var r=(t.x+n.x)/2,o=(t.y+n.y)/2;return(0,C.jsx)(j.jl,{x:r,y:o,radius:2*e.strength,fill:e.color,opacity:h?.6+.4*Math.sin(2*w):.6,onClick:function(){return null==f?void 0:f(e)},onTap:function(){return null==f?void 0:f(e)}},"indicator-".concat(e.id))}):null,d.size?u.map(function(e){var t=d.get(e.fromCardId),n=d.get(e.toCardId);if(!t||!n)return null;var r=(t.x+n.x)/2,o=(t.y+n.y)/2;return e.strength<=3?null:(0,C.jsx)(j.EY,{x:r-20,y:o-20,text:"".concat(e.element),fontSize:10,fill:"white",fontFamily:"serif",opacity:.8,shadowColor:"black",shadowBlur:3,onClick:function(){return null==f?void 0:f(e)},onTap:function(){return null==f?void 0:f(e)}},"label-".concat(e.id))}):null]})})})}function k(e){var t=e.spread,n=e.cards,r=e.onDragEnd,o=e.onDragOver,a=e.canvasSize,i=void 0===a?{width:800,height:600}:a,c=e.energyFlows,s=void 0===c?[]:c,l=e.showEnergyFlows,u=e.onEnergyFlowClick,d={width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),background:"linear-gradient(135deg, rgba(23, 12, 61, 0.8) 0%, rgba(46, 24, 98, 0.6) 100%)",borderRadius:"12px",position:"relative",border:"1px solid rgba(139, 92, 246, 0.3)"};return(0,C.jsx)(b.Mp,{onDragEnd:r,onDragOver:o,children:(0,C.jsxs)("div",{style:d,className:"spread-canvas mx-auto my-4 overflow-hidden",children:[t.positions.map(function(e){return(0,C.jsxs)("div",{className:"absolute border-2 border-dashed border-cosmic-light/30 rounded-lg flex items-center justify-center text-cosmic-light text-xs font-mystical opacity-60 transition-all duration-500",style:{left:"".concat(e.x*i.width/100,"px"),top:"".concat(e.y*i.height/100,"px"),width:"120px",height:"180px",transform:"translate(-50%, -50%) rotate(".concat(e.rotation,"deg) scale(").concat(e.scale,")")},children:[(0,C.jsx)("div",{className:"absolute inset-0 rounded-lg bg-cosmic-accent/20 border-2 border-cosmic-accent/50 animate-pulse opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,C.jsx)("div",{className:"text-center px-2 py-1 bg-cosmic-deep/50 rounded backdrop-blur-sm relative",children:e.label})]},e.id)}),n.map(function(e){return(0,C.jsx)(w.A,{card:e},e.id)}),void 0!==l&&l&&s.length>0&&(0,C.jsx)("div",{className:"absolute inset-0 pointer-events-auto",children:(0,C.jsx)(N,{width:i.width,height:i.height,energyFlows:s,cardPositions:new Map(n.map(function(e){return[e.id,e.position]})),onFlowClick:u,animated:!0})}),(0,C.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,C.jsxs)("svg",{className:"w-full h-full opacity-20",children:[(0,C.jsx)("defs",{children:(0,C.jsxs)("radialGradient",{id:"cosmic-gradient",cx:"50%",cy:"50%",r:"50%",children:[(0,C.jsx)("stop",{offset:"0%",stopColor:"rgba(139, 92, 246, 0.3)"}),(0,C.jsx)("stop",{offset:"100%",stopColor:"transparent"})]})}),(0,C.jsx)("circle",{cx:i.width/2,cy:i.height/2,r:"100",fill:"url(#cosmic-gradient)"}),(0,C.jsx)("circle",{cx:i.width/4,cy:i.height/4,r:"50",fill:"url(#cosmic-gradient)"}),(0,C.jsx)("circle",{cx:3*i.width/4,cy:3*i.height/4,r:"50",fill:"url(#cosmic-gradient)"})]})})]})})}var O=n(6306),S=n(172);function E(e){var t=e.reading,n=e.selectedCard,r=e.onCardSelect,o=(0,c.useState)("positions"),a=o[0],i=o[1],s=(0,c.useState)(!1),l=s[0],u=s[1];(0,c.useEffect)(function(){u(!1)},[t]);var d=function(e){console.error("CardInterpretation error:",e),u(!0)},f=function(){var e,n,r,o=(null==(e=t.energy_flow)?void 0:e.reduce(function(e,t){return e+t.strength},0))||5,a=(null==(n=t.energy_flow)||null==(n=n[0])?void 0:n.element)||"Universal";return(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("h3",{className:"text-xl font-mystical text-cosmic-gold mb-2",children:"Cosmic Alignment Reading"}),(0,C.jsx)("p",{className:"text-cosmic-light/80",children:t.cosmic_alignment})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsx)("div",{className:"bg-gradient-to-br from-cosmic-purple/20 to-cosmic-blue/20 p-4 rounded-lg border border-cosmic-light/20",children:(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsxs)("div",{className:"text-3xl font-bold text-cosmic-gold mb-1",children:[o,"/10"]}),(0,C.jsx)("div",{className:"text-sm text-cosmic-light",children:"Energy Intensity"})]})}),(0,C.jsx)("div",{className:"bg-gradient-to-br from-cosmic-accent/20 to-cosmic-gold/20 p-4 rounded-lg border border-cosmic-light/20",children:(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("div",{className:"text-xl font-bold text-cosmic-light mb-1",children:a}),(0,C.jsx)("div",{className:"text-sm text-cosmic-light/80",children:"Dominant Element"})]})})]}),(0,C.jsxs)("div",{className:"space-y-3",children:[(0,C.jsx)("h4",{className:"text-lg font-mystical text-cosmic-gold",children:"Energy Flow Analysis"}),(null==(r=t.energy_flow)?void 0:r.slice(0,3).map(function(e,t){return(0,C.jsxs)("div",{className:"flex items-center justify-between p-2 bg-cosmic-deep/30 rounded",children:[(0,C.jsxs)("span",{className:"text-cosmic-light",children:["Card ",e.fromCardId," → Card ",e.toCardId]}),(0,C.jsxs)("span",{className:"text-sm px-2 py-1 rounded ".concat("Fire"===e.element?"bg-red-500/20 text-red-300":"Water"===e.element?"bg-blue-500/20 text-blue-300":"Earth"===e.element?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"),children:[e.element," • ",e.strength,"/5"]})]},t)}))||(0,C.jsx)("p",{className:"text-cosmic-light/60",children:"Analyzing cosmic connections..."})]})]})};return(0,C.jsxs)(S.A,{className:"w-full max-w-2xl",children:[(0,C.jsxs)("div",{className:"mb-6",children:[(0,C.jsx)("h2",{className:"text-2xl font-mystical text-cosmic-gold mb-4 text-center",children:"Reading Interpretation"}),(0,C.jsxs)("div",{className:"flex justify-center space-x-2 mb-4",children:[(0,C.jsx)("button",{onClick:function(){return i("positions")},className:"px-4 py-2 rounded-lg font-mystical transition-all ".concat("positions"===a?"bg-cosmic-accent text-cosmic-deep":"text-cosmic-light hover:bg-cosmic-purple/20"),children:"Position Analysis"}),(0,C.jsx)("button",{onClick:function(){return i("cosmic")},className:"px-4 py-2 rounded-lg font-mystical transition-all ".concat("cosmic"===a?"bg-cosmic-accent text-cosmic-deep":"text-cosmic-light hover:bg-cosmic-purple/20"),children:"Cosmic Flow"})]})]}),(0,C.jsx)("div",{className:"interpretation-content overflow-y-auto max-h-96",children:l?(0,C.jsxs)("div",{className:"text-center py-8",children:[(0,C.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF19"}),(0,C.jsx)("p",{className:"text-cosmic-light mb-2",children:"Cosmic alignment disrupted"}),(0,C.jsx)("button",{onClick:function(){return u(!1)},className:"px-4 py-2 bg-cosmic-accent text-cosmic-deep rounded-lg text-sm hover:opacity-80 transition-opacity",children:"Try Again"})]}):t?(0,C.jsx)(C.Fragment,{children:function(){try{return"positions"===a?(0,C.jsx)("div",{className:"space-y-4",children:t.spread.positions.map(function(e){var o=t.cards.find(function(t){var n=Math.abs(8*e.x-t.position.x),r=Math.abs(6*e.y-t.position.y);return n<50&&r<50});return(0,C.jsxs)("div",{className:"p-4 rounded-lg border transition-all duration-300 ".concat(o?"border-cosmic-accent bg-cosmic-light/5 cursor-pointer hover:bg-cosmic-light/10":"border-cosmic-purple/30 bg-cosmic-deep/20"),onClick:function(){return o&&r(o)},children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,C.jsx)("h4",{className:"text-lg font-mystical text-cosmic-gold",children:e.label}),o&&(0,C.jsxs)("span",{className:"text-sm text-cosmic-light bg-cosmic-purple/20 px-2 py-1 rounded",children:["Card #",o.number]})]}),(0,C.jsx)("p",{className:"text-sm text-cosmic-light mb-3",children:e.meaning_context}),o?(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsxs)("p",{className:"text-sm italic text-cosmic-light/80",children:["“",t.interpretations[e.id],"”"]}),o===n&&(0,C.jsx)("div",{className:"mt-4 p-3 bg-cosmic-accent/20 rounded border border-cosmic-accent/50",children:(0,C.jsxs)("p",{className:"text-sm text-cosmic-light",children:[(0,C.jsx)("strong",{children:"Card:"})," ",o.cardName,(0,C.jsx)("br",{}),(0,C.jsx)("strong",{children:"Cosmic Influence:"})," Active pattern modifications"]})})]}):(0,C.jsx)("p",{className:"text-sm text-cosmic-light/60",children:"Position empty - awaiting your cosmic placement ✨"})]},e.id)})}):f()}catch(e){return d(e),null}}()}):(0,C.jsxs)("div",{className:"text-center py-8",children:[(0,C.jsx)("div",{className:"animate-spin text-2xl mb-4",children:"✨"}),(0,C.jsx)("p",{className:"text-cosmic-light/60",children:"Preparing your cosmic reading..."})]})}),(0,C.jsx)("div",{className:"mt-4 text-center text-cosmic-light/60 text-sm",children:"✨ Click cards to see their cosmic positioning ✨"})]})}var A=n(1755),P=n(8931),_=n(8982);let D=function(e){var t=e.spread,n=e.spreadType,r=e.energyFlows,a=e.isOpen,s=e.onClose,l=(0,c.useRef)(null),u=(0,c.useState)({});u[0],u[1];var d=(0,c.useState)(""),m=d[0],h=d[1],p=(0,c.useState)(null),g=p[0],x=p[1],y=(0,c.useState)(""),v=y[0],b=y[1],w=(0,c.useState)(!1),N=w[0],k=w[1],S=(0,c.useState)(null),E=S[0],D=S[1],M=(0,A.zh)({opacity:+!!a,transform:a?"translateY(0)":"translateY(20px)",config:{tension:200,friction:20}}),T=function(e,t){var r="celtic-cross"===n?3:2,o=250*Math.floor(t/r)+50;return{x:t%r*180+50,y:o}},F=(0,c.useCallback)((0,o.A)(i().mark(function e(){var o;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),D(null),e.prev=2,e.next=5,(0,_.jc)(t,n,null);case 5:return h(e.sent.share_url||"".concat(window.location.origin,"/spread/").concat(Date.now())),e.next=9,(0,_.U4)(r,n);case 9:return(o=e.sent).playlist&&x(o.playlist),e.next=13,(0,_.pG)("auto");case 13:b(e.sent.astrological_note||""),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),D("Unable to load cosmic data. Please try again."),console.error("Failed to generate share data:",e.t0);case 21:return e.prev=21,k(!1),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[2,17,21,24]])})),[t,n,r]);(0,c.useEffect)(function(){a&&F()},[a,F]);var R=Object.entries(t).filter(function(e){return(0,f.A)(e,2)[1].card}).map(function(e){var t=(0,f.A)(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r.card.name," - ").concat(r.interpretation)}).join("\n");return a?(0,C.jsx)(A.CS.div,{style:M,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 ".concat(a?"block":"hidden"),role:"dialog","aria-label":"Share Your Tarot Spread","aria-modal":"true",children:(0,C.jsxs)("div",{className:"bg-void rounded-xl p-6 max-w-3xl w-full mx-4 border border-yellow-400 shadow-lg shadow-yellow-400/50",children:[(0,C.jsx)("h2",{className:"text-2xl font-bold text-solarflare mb-4",children:"Share Your Cosmic Spread"}),(0,C.jsxs)(C.Fragment,{children:[N?(0,C.jsx)(P.A,{}):(0,C.jsx)(j.BI,{width:600,height:600,ref:l,className:"w-full bg-gray-900/50 rounded-lg border border-yellow-400",children:(0,C.jsxs)(j.Wd,{children:[(0,C.jsx)(j.rw,{x:0,y:0,width:600,height:600,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:600,y:600},fillLinearGradientColorStops:[0,"#1A1A2E",1,"#16213E"]}),(0,C.jsx)(j.EY,{x:20,y:20,text:"Cosmic ".concat(n.replace("-"," ").toUpperCase()," Spread"),fontSize:24,fill:"#FACC15",fontStyle:"bold"}),r.map(function(e,t){var n=2*r.indexOf(e),o=(r.indexOf(e)+1)*2,a=T("pos".concat(n),n),i=T("pos".concat(o),o);return(0,C.jsx)(j.N1,{points:[a.x+75,a.y+112.5,i.x+75,i.y+112.5],stroke:e.color,strokeWidth:e.strength/2,dash:[10,5],opacity:.7},t)})]})}),(0,C.jsxs)("div",{className:"mt-4 text-starlight text-sm max-h-40 overflow-y-auto",children:[(0,C.jsx)("p",{children:R}),!E&&v&&(0,C.jsx)("p",{className:"mt-2 italic",children:v}),g&&(0,C.jsx)("p",{className:"mt-2",children:(0,C.jsxs)("a",{href:g.uri,target:"_blank",rel:"noopener noreferrer",className:"text-yellow-400 hover:underline",children:["Listen to your ",g.name," on Spotify"]})})]}),(0,C.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,C.jsx)(O.A,{onClick:function(){navigator.clipboard.writeText(m||"").then(function(){"function"==typeof window.alert&&window.alert("Share link copied to clipboard!")})},className:"px-4 py-2",disabled:!m,children:"Copy Shareable Link"}),(0,C.jsx)(O.A,{onClick:function(){if(l.current){var e=l.current.toDataURL({pixelRatio:2}),t=document.createElement("a");t.href=e,t.download="cosmic_tarot_spread_".concat(n.replace("-","_"),".png"),t.click();return}},className:"px-4 py-2",disabled:!1,children:"Download Spread Image"}),(0,C.jsx)("button",{onClick:s,className:"bg-gray-700 text-starlight px-4 py-2 rounded-lg hover:bg-gray-600 transition",children:"Close"})]})]}),(0,C.jsx)("div",{className:"sr-only",children:"Shareable tarot spread available."})]})}):null};var M=n(7251),T=new((0,n(3745).A)(function e(){(0,M.A)(this,e),(0,r.A)(this,"audioContext",null),(0,r.A)(this,"isEnabled",!0),(0,r.A)(this,"volume",.3),document.addEventListener("click",this.initializeAudio.bind(this),{once:!0}),document.addEventListener("touchstart",this.initializeAudio.bind(this),{once:!0})},[{key:"initializeAudio",value:function(){if(!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported in this browser"),this.isEnabled=!1}}},{key:"playTone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine";if(this.isEnabled&&this.audioContext){var r=this.audioContext.createOscillator(),o=this.audioContext.createGain();r.connect(o),o.connect(this.audioContext.destination),r.frequency.setValueAtTime(e,this.audioContext.currentTime),r.type=n;var a=this.audioContext.currentTime;o.gain.setValueAtTime(0,a),o.gain.linearRampToValueAtTime(.8*this.volume,a+.01),o.gain.setValueAtTime(.6*this.volume,a+.7*t),o.gain.exponentialRampToValueAtTime(.01,a+t),r.start(a),r.stop(a+t)}}},{key:"playChord",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.forEach(function(e,r){setTimeout(function(){return t.playTone(e,n)},50*r)})}},{key:"playCardMove",value:function(){this.playTone(220,.2,"triangle")}},{key:"playCardPlace",value:function(){this.playChord([261.63,329.63,392],.6)}},{key:"playCardReveal",value:function(){this.playChord([146.83,174.61,196,220,246.94],.8)}},{key:"playEnergyFlow",value:function(){var e=this;this.playTone(55,1,"sine"),setTimeout(function(){return e.playTone(75,.8,"triangle")},200)}},{key:"playReadingStart",value:function(){var e=this;[110,138.59,164.81,196,220].forEach(function(t,n){setTimeout(function(){return e.playTone(t,.3+.1*n)},150*n)})}},{key:"playReadingComplete",value:function(){this.playChord([220,277.18,329.63,415.3],1.2)}},{key:"playButtonClick",value:function(){this.playTone(800,.1,"square")}},{key:"playError",value:function(){this.playChord([311.13,392,466.16],.8)}},{key:"playSuccess",value:function(){var e=this;[392,493.88,587.33,783.99].forEach(function(t,n){setTimeout(function(){return e.playTone(t,.2)},80*n)})}},{key:"setEnabled",value:function(e){this.isEnabled=e}},{key:"setVolume",value:function(e){this.volume=Math.max(0,Math.min(1,e))}},{key:"getVolume",value:function(){return this.volume}},{key:"getIsEnabled",value:function(){return this.isEnabled}},{key:"dispose",value:function(){this.audioContext&&(this.audioContext.close(),this.audioContext=null)}}])),F=n(3696);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function z(){var e,t,n,a,l,f,m,h,p,x,y,b,w,j,N,A=(0,c.useState)(s.three_card),P=A[0],_=A[1],M=(0,c.useState)(null),R=M[0],z=M[1],L=(0,c.useState)(!1),G=L[0],K=L[1],U=(0,c.useState)(null),Y=U[0],q=U[1],H=(0,c.useState)(!1),V=H[0],W=H[1],B=(0,c.useState)([]),J=B[0],X=B[1],$=(0,c.useState)(new Map),Q=($[0],$[1]),Z=(0,c.useState)(!1),ee=Z[0],et=Z[1],en=(0,c.useState)(null),er=en[0],eo=en[1],ea=(0,c.useState)(!1),ei=ea[0],ec=ea[1],es=(0,c.useRef)(null);(0,c.useRef)(null);var el=(a=(n={initialCards:(e=s[P.layout_type].positions.map(function(e,t){return{id:"card-".concat(t),cardName:"Card ".concat(t+1),number:t+1,position:{x:8*e.x,y:6*e.y},rotation:e.rotation,isFaceDown:!0,cosmic_properties:{colors:{primary:"#8b5cf6",secondary:"#3b82f6",glow:"#8b5cf6"},animation:"glow-pulse",gradient:"linear-gradient(135deg, #6366f1, #8b5cf6)",glow_effect:"glow-purple",constellation_pattern:"ursa-major"}}}),t=new Map,e.forEach(function(e){return t.set(e.id,e.position)}),Q(t),e),spread:P}).initialCards,l=n.spread,m=void 0===(f=n.snapDistance)?50:f,p=(h=(0,c.useState)(a))[0],x=h[1],b=(y=(0,c.useState)(!1))[0],w=y[1],{cards:p,isDragging:b,handleDragStart:(0,c.useCallback)(function(){w(!0)},[]),handleDragEnd:(0,c.useCallback)(function(e){w(!1);var t=e.active,n=e.delta;t.id&&n&&x(function(e){return e.map(function(e){if(e.id!==t.id)return e;var r,o=e.position.x+n.x,a=e.position.y+n.y,i={x:o,y:a},c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(l.positions);try{for(c.s();!(r=c.n()).done;){var s=r.value,f=1e3*s.x,h=1e3*s.y;if(Math.sqrt(Math.pow(f-o,2)+Math.pow(h-a,2))<m){i={x:f,y:h};break}}}catch(e){c.e(e)}finally{c.f()}return u(u({},e),{},{position:i})})})},[l.positions,m]),handleDragOver:(0,c.useCallback)(function(e){console.log("Drag over:",e)},[]),updateCardPosition:(0,c.useCallback)(function(e,t){x(function(n){return n.map(function(n){return n.id===e?u(u({},n),{},{position:t}):n})})},[]),rotateCard:(0,c.useCallback)(function(e,t){x(function(n){return n.map(function(n){return n.id===e?u(u({},n),{},{rotation:t}):n})})},[]),flipCard:(0,c.useCallback)(function(e){x(function(t){return t.map(function(t){return t.id===e?u(u({},t),{},{isFaceDown:!t.isFaceDown}):t})})},[]),resetCards:(0,c.useCallback)(function(){x(a)},[a])});(0,c.useRef)(new Map);var eu=(j=(0,o.A)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/tarot/calculate-energy-flow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:t.map(function(e){return{id:e.id,cardName:e.cardName,position:e.position}}),spread:P})});case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:X(e.sent.energy_flows||[]);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Failed to calculate energy flows:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(e){return j.apply(this,arguments)}),ed=(N=(0,o.A)(i().mark(function e(){var t,n,r,o,a,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.playReadingStart(),F.TH.readingStart(),W(!0),eo(null),e.prev=4,e.next=7,eu(el.cards);case 7:return e.next=9,fetch("/api/v1/tarot/enhanced-interpretation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:el.cards.map(function(e){return{id:e.id,cardName:e.cardName,position:e.position}}),spread:P}),signal:AbortSignal.timeout(1e4)});case 9:if(t=e.sent,n={},r="Venus and Mercury alignment for clear communication",!t.ok){e.next=21;break}return e.next=15,t.json();case 15:n=(o=e.sent).interpretations||{},r=o.cosmic_alignment||r,o.energy_flows&&o.energy_flows.length>0&&(X(o.energy_flows),et(!0)),e.next=24;break;case 21:throw a="Failed to connect with cosmic energies",429===t.status?a="Cosmic energies are overcharged. Please wait a moment.":t.status>=500?a="The cosmic realm is temporarily unreachable.":400===t.status&&(a="Invalid card configuration detected."),Error(a);case 24:z({id:"reading-".concat(Date.now()),spread:P,cards:el.cards,interpretations:n,cosmic_alignment:r,timestamp:new Date,energy_flow:J}),T.playReadingComplete(),F.TH.readingComplete(),K(!0),e.next=39;break;case 31:e.prev=31,e.t0=e.catch(4),T.playError(),F.TH.error(),console.error("Failed to generate reading:",e.t0),c="An unexpected cosmic disruption occurred.",e.t0 instanceof Error?c=e.t0.message:e.t0 instanceof DOMException&&"AbortError"===e.t0.name&&(c="Connection to the cosmos timed out."),eo(c);case 39:return e.prev=39,W(!1),e.finish(39);case 42:case"end":return e.stop()}},e,null,[[4,31,39,42]])})),function(){return N.apply(this,arguments)}),ef=function(){el.resetCards(),X([]),et(!1),z(null),K(!1)};g(es,{onDrag:function(e){e.fingerCount},onPinch:function(e){console.log("Pinch zoom:",e)},onSwipe:function(e){"left"===e?ef():"right"===e&&R&&K(!G)}}),v(function(e){var t=el.cards.find(function(t){return t.id===e});t&&q(t)},function(e){console.log("Focusing card:",e)},ef,ed,function(){z(null),K(!1),X([]),el.resetCards()},function(){console.log("Help: Use arrow keys to navigate, S to shuffle, R to reveal")},el.cards.map(function(e){return e.id}));var em=function(e){var t=s[e];t&&(_(t),z(null),K(!1),X([]),et(!1),el.resetCards())};return(0,C.jsxs)("div",{className:"interactive-tarot-reader w-full max-w-6xl mx-auto p-6 space-y-6",children:[(0,C.jsxs)(S.A,{className:"p-4",children:[(0,C.jsx)("h2",{className:"text-2xl font-mystical text-cosmic-gold mb-4 text-center",children:"Choose Your Spread"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:Object.values(s).map(function(e){return(0,C.jsx)(O.A,{onClick:function(){return em(e.id)},className:P.id===e.id?"ring-2 ring-cosmic-accent":"",disabled:el.isDragging,children:(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("div",{className:"font-mystical",children:e.name}),(0,C.jsxs)("div",{className:"text-sm opacity-80",children:[e.positions.length," cards"]})]})},e.id)})})]}),er&&(0,C.jsx)(S.A,{className:"border-red-500/30 bg-red-900/20",children:(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)("span",{className:"text-red-400 text-xl",children:"⚠️"}),(0,C.jsx)("p",{className:"text-red-300",children:er})]}),(0,C.jsx)("button",{onClick:function(){return eo(null)},className:"text-red-400 hover:text-red-200 text-xl","aria-label":"Dismiss error",children:"✕"})]})}),(0,C.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,C.jsx)(O.A,{onClick:ef,className:"px-6 py-2",disabled:el.isDragging||V,children:"\uD83D\uDD2E Shuffle Cards"}),(0,C.jsx)(O.A,{onClick:ed,className:"px-6 py-2",disabled:el.isDragging||V,children:V?"Generating...":"Reveal Reading ✨"}),R&&J.length>0&&(0,C.jsxs)(O.A,{onClick:function(){return et(!ee)},className:"px-6 py-2 ".concat(ee?"ring-2 ring-energy-flow-active":""),disabled:V,children:["⚡ ",ee?"Hide Energy Flows":"Show Energy Flows"]}),R&&(0,C.jsx)(O.A,{onClick:function(){return ec(!0)},className:"px-6 py-2",disabled:V,children:"\uD83C\uDF0C Share Spread"})]}),(0,C.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,C.jsx)("div",{className:"flex-1",children:(0,C.jsx)(k,{spread:P,cards:el.cards,onDragEnd:el.handleDragEnd,onDragOver:el.handleDragOver,canvasSize:{width:G?600:800,height:500},energyFlows:J,showEnergyFlows:ee,onEnergyFlowClick:function(e){return console.log("Energy flow clicked:",e)}})}),G&&R&&(0,C.jsx)("div",{className:"lg:w-80",children:(0,C.jsx)(E,{reading:R,selectedCard:Y,onCardSelect:q})})]}),V&&(0,C.jsx)("div",{className:"fixed inset-0 bg-cosmic-deep/90 flex items-center justify-center z-50",children:(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("div",{className:"text-6xl animate-spin mb-4",children:"\uD83C\uDF19"}),(0,C.jsx)("div",{className:"text-cosmic-gold font-mystical",children:"Consulting the Cosmos..."})]})}),R&&(0,C.jsx)(D,{spread:R.spread.positions.reduce(function(e,t){return I(I({},e),{},(0,r.A)({},t.label,{card:R.cards.find(function(e){return e.id==="card-".concat(R.spread.positions.indexOf(t))})||null,interpretation:R.interpretations[t.id]||""}))},{}),spreadType:P.id,energyFlows:J,isOpen:ei,onClose:function(){return ec(!1)}})]})}},4590:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(2969),o=n(2738),a=n(172),i=n(7876);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e){var t=e.card,n=e.size,r=(0,o.PM)({id:t.id}),c=r.attributes,l=r.listeners,u=r.setNodeRef,d=r.transform,f=r.isDragging,m=t.isFaceDown?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-cosmic-deep to-cosmic-purple rounded-lg border-2 border-cosmic-glow/50",children:(0,i.jsx)("div",{className:"text-cosmic-gold text-xs font-mystical tracking-wider rotate-90",children:"✨\uD83C\uDF19✨"})}):(0,i.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-2",children:[(0,i.jsx)("div",{className:"text-cosmic-gold text-center text-sm font-mystical mb-2",children:t.cardName}),(0,i.jsxs)("div",{className:"text-cosmic-light text-xs",children:["#",t.number]})]});return(0,i.jsx)("div",s(s(s({ref:u,style:{"--tarot-card-rotation":"".concat(t.rotation,"deg"),"--tarot-card-x":d?"".concat(d.x,"px"):"0px","--tarot-card-y":d?"".concat(d.y,"px"):"0px"}},l),c),{},{className:"absolute cursor-grab ".concat(f?"cursor-grabbing z-50 scale-110":""," transition-transform duration-200 ").concat({sm:"w-24 h-36",md:"w-32 h-48",lg:"w-40 h-60"}[void 0===n?"md":n]," ").concat(d?"tarot-card-dragging":"tarot-card-transform"),children:(0,i.jsx)(a.A,{className:"w-full h-full overflow-hidden ".concat(t.cosmic_properties.glow_effect),glow:!0,hover:!0,children:(0,i.jsxs)("div",{className:"w-full h-full rounded-xl relative overflow-hidden tarot-card-background",style:{"--tarot-card-gradient":t.cosmic_properties.gradient,"--tarot-card-glow":t.cosmic_properties.glow_effect.replace("glow-effect-","0 0 20px ")},children:[m,(0,i.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{"--tarot-card-color-primary":t.cosmic_properties.colors.primary,"--tarot-card-color-secondary":t.cosmic_properties.colors.secondary},children:(0,i.jsxs)("svg",{className:"w-full h-full",children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("pattern",{id:"constellation-".concat(t.id),patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[(0,i.jsx)("circle",{cx:"2",cy:"2",r:"0.5",className:"tarot-card-constellation-primary",opacity:"0.3"}),(0,i.jsx)("circle",{cx:"18",cy:"18",r:"0.3",className:"tarot-card-constellation-secondary",opacity:"0.2"})]})}),(0,i.jsx)("rect",{width:"100%",height:"100%",fill:"url(#constellation-".concat(t.id,")")})]})})]})})}))}},8931:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1755),o=n(7876);let a=function(){var e=(0,r.zh)({from:{rotate:0},to:{rotate:360},loop:!0,config:{duration:2e3}});return(0,o.jsxs)("output",{className:"flex items-center justify-center p-4","aria-label":"Loading cosmic data",children:[(0,o.jsxs)(r.CS.div,{style:{transform:e.rotate.to(function(e){return"rotate(".concat(e,"deg)")})},className:"relative w-16 h-16",children:[(0,o.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-yellow-400/20 to-transparent"}),(0,o.jsx)("div",{className:"absolute w-4 h-4 rounded-full bg-yellow-400 shadow-lg shadow-yellow-400/50 top-0 left-6"}),(0,o.jsx)("div",{className:"absolute w-3 h-3 rounded-full bg-yellow-300 shadow-md shadow-yellow-300/50 bottom-2 right-4"}),(0,o.jsx)("div",{className:"absolute w-2 h-2 rounded-full bg-yellow-200 shadow-sm shadow-yellow-200/50 top-4 right-2"})]}),(0,o.jsx)("span",{children:"Generating cosmic insights"})]})}}}]);