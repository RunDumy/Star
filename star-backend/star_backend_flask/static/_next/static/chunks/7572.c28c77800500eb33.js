"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7572],{7572:(e,t,r)=>{r.r(t),r.d(t,{LiveStreamCreation:()=>l});var a=r(3857),n=r(3081),s=r.n(n),o=r(5251),i=r(4232),c=r(7876);function l(e){var t,r=e.onStreamCreated,n=(0,i.useState)(""),l=n[0],u=n[1],d=(0,i.useState)(""),p=d[0],m=d[1],b=(0,i.useState)(!1),h=b[0],f=b[1],x=(t=(0,a.A)(s().mark(function e(t){var a,n,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l.trim()){e.next=3;break}return e.abrupt("return");case 3:return f(!0),e.next=6,o.ND.auth.getSession();case 6:if(a=e.sent.data.session){e.next=11;break}return f(!1),e.abrupt("return");case 11:return e.prev=11,e.next=14,fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/live-stream"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.access_token)},body:JSON.stringify({title:l,description:p})});case 14:if(!(n=e.sent).ok){e.next=22;break}return e.next=18,n.json();case 18:i=e.sent,u(""),m(""),r(i.stream);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(11),console.error("Error creating live stream:",e.t0);case 27:return e.prev=27,f(!1),e.finish(27);case 30:case"end":return e.stop()}},e,null,[[11,24,27,30]])})),function(e){return t.apply(this,arguments)});return(0,c.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"stream-title",className:"block text-sm font-medium mb-1",children:"Stream Title"}),(0,c.jsx)("input",{id:"stream-title",type:"text",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Enter stream title...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-purple-500",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"stream-description",className:"block text-sm font-medium mb-1",children:"Description"}),(0,c.jsx)("textarea",{id:"stream-description",value:p,onChange:function(e){return m(e.target.value)},placeholder:"Describe your cosmic stream...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-purple-500",rows:3})]}),(0,c.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed px-4 py-2 rounded-lg font-semibold transition-colors",children:h?"Creating Stream...":"\uD83C\uDF1F Start Live Stream"})]})}}}]);