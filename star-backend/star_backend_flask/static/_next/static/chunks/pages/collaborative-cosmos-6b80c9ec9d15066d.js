(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2032],{1610:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>el});var a=s(7876),o=s(4563),r=s(3191),n=s(9070),i=s(5062),l=s.n(i),c=s(4232),d=s(4796);let m=e=>{let{constellationId:t,onStarClick:s,onLineClick:i,interactive:l=!0,showLabels:m=!0,...u}=e,p=(0,c.useRef)(),[h,x]=(0,c.useState)(null),[f,b]=(0,c.useState)(null),{constellations:g}=(0,o.T)(),v=g.get(t);return v?((0,n.F)(e=>{if(p.current){let t=.02*Math.sin(.5*e.clock.elapsedTime)+1;p.current.scale.setScalar(t)}}),(0,a.jsxs)("group",{ref:p,...u,children:[v.stars.map((e,t)=>{let o=h===t;return(0,a.jsxs)("group",{position:e.position,children:[(0,a.jsxs)("mesh",{onClick:a=>((e,t,a)=>{a.stopPropagation(),l&&s&&s(e,t,v,a)})(e,t,a),onPointerOver:()=>l&&x(t),onPointerOut:()=>l&&x(null),castShadow:!0,receiveShadow:!0,children:[(0,a.jsx)("sphereGeometry",{args:[e.size,16,16]}),(0,a.jsx)("meshStandardMaterial",{color:e.color,emissive:e.color,emissiveIntensity:o?.4:.2,roughness:.3,metalness:.1})]}),m&&(0,a.jsx)(r.E,{position:[0,e.size+.3,0],fontSize:.15,color:e.color,anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:"#000000",children:e.name}),o&&(0,a.jsxs)("mesh",{position:[0,-e.size-.2,0],children:[(0,a.jsx)("ringGeometry",{args:[1.5*e.size,1.8*e.size,16]}),(0,a.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:.6,side:d.DoubleSide})]})]},e.id)}),v.connections.map((e,t)=>{let[s,o]=e,r=v.stars[s],n=v.stars[o];if(!r||!n)return null;let c=new d.Vector3(...r.position),m=new d.Vector3(...n.position),u=c.distanceTo(m),p=m.clone().sub(c).normalize(),h=c.clone().add(p.clone().multiplyScalar(.5*u)),x=new d.Quaternion;x.setFromUnitVectors(new d.Vector3(0,0,1),p);let g=f===t;return(0,a.jsxs)("group",{children:[(0,a.jsxs)("mesh",{position:h,quaternion:x,onClick:s=>((e,t,s)=>{s.stopPropagation(),l&&i&&i(e,t,v,s)})(e,t,s),onPointerOver:()=>l&&b(t),onPointerOut:()=>l&&b(null),children:[(0,a.jsx)("cylinderGeometry",{args:[.01,.01,u,8]}),(0,a.jsx)("meshStandardMaterial",{color:v.lineColor||"#ffffff",emissive:v.lineColor||"#ffffff",emissiveIntensity:g?.3:.1,transparent:!0,opacity:.8})]}),(0,a.jsxs)("mesh",{position:h,quaternion:x,children:[(0,a.jsx)("cylinderGeometry",{args:[.02,.02,u,8]}),(0,a.jsx)("meshBasicMaterial",{color:v.lineColor||"#ffffff",transparent:!0,opacity:g?.2:.1})]})]},"".concat(s,"-").concat(o))}),m&&v.name&&(0,a.jsx)(r.E,{position:[0,2,0],fontSize:.3,color:"#ffffff",anchorX:"center",anchorY:"middle",outlineWidth:.02,outlineColor:"#000000",children:v.name})]})):null};m.propTypes={constellationId:l().string.isRequired,onStarClick:l().func,onLineClick:l().func,interactive:l().bool,showLabels:l().bool};var u=s(7211),p=s(3335),h=s(7386),x=s(4516),f=s(5302),b=s(5784),g=s(6848),v=s(8477),j=s(8225);let y=e=>{let{posts:t=[]}=e,[s,o]=(0,c.useState)(null);return(0,a.jsxs)("div",{className:"w-full h-screen relative",children:[(0,a.jsxs)(f.Hl,{camera:{position:[0,0,15],fov:60},children:[(0,a.jsx)("color",{attach:"background",args:["#0a0a1f"]}),(0,a.jsx)(h.A,{radius:100,depth:50,count:5e3,factor:4}),(0,a.jsx)("ambientLight",{intensity:.3}),(0,a.jsx)("pointLight",{position:[10,10,10],intensity:1.5}),(0,a.jsx)(j.m,{children:(0,a.jsx)(N,{posts:t,onPostSelect:o})}),(0,a.jsx)(x.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:50})]}),s&&(0,a.jsx)(w,{post:s,onClose:()=>o(null)})]})},N=e=>{let{posts:t,onPostSelect:s}=e,o=(0,c.useMemo)(()=>t.map((e,t)=>{let s=8+12*Math.random(),a=Math.random()*Math.PI*2,o=Math.acos(2*Math.random()-1);return[s*Math.sin(o)*Math.cos(a),s*Math.sin(o)*Math.sin(a),s*Math.cos(o)]}),[t.length]);return(0,a.jsx)(a.Fragment,{children:o.map((e,o)=>(0,a.jsx)(C,{post:t[o],position:e,onClick:()=>s(t[o]),index:o},t[o].id))})},C=e=>{let{post:t,position:s,onClick:o,index:i}=e,l=(0,c.useRef)(null),[d,m]=(0,c.useState)(!1),{scale:u,rotationY:h}=(0,p.zh)({scale:d?1.2:1,rotationY:d?Math.PI:0,config:{mass:1,tension:280,friction:60}});(0,n.F)(e=>{l.current&&(l.current.rotation.y+=.002,l.current.position.y=s[1]+.3*Math.sin(e.clock.elapsedTime+i))});let x={joyful:"#ffd700",contemplative:"#4a90e2",passionate:"#ff6b6b",peaceful:"#9b59b6",mysterious:"#2ecc71"}[t.emotionalTone]||"#ffffff";return(0,a.jsxs)(p.CS.mesh,{ref:l,position:s,scale:u,"rotation-y":h,onClick:o,onPointerOver:()=>m(!0),onPointerOut:()=>m(!1),children:[(0,a.jsx)("icosahedronGeometry",{args:[1,1]}),(0,a.jsx)("meshStandardMaterial",{color:x,emissive:x,emissiveIntensity:.3,roughness:.7,metalness:.3}),(0,a.jsx)(r.E,{position:[0,0,1.2],fontSize:.3,color:"#ffffff",anchorX:"center",anchorY:"middle",children:t.zodiacEmoji})]})},w=e=>{let{post:t,onClose:s}=e;return(0,v.createPortal)((0,a.jsx)(b.N,{children:(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:(0,a.jsxs)(g.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border border-cyan-500/30 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:t.zodiacEmoji}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:t.author}),(0,a.jsx)("p",{className:"text-cyan-200 text-sm",children:t.timestamp})]})]}),(0,a.jsx)("button",{onClick:s,className:"text-cyan-200 hover:text-white transition-colors",children:"✕"})]}),(0,a.jsx)("div",{className:"text-white mb-4 leading-relaxed",children:t.content}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex space-x-4 text-cyan-200",children:[(0,a.jsx)("button",{className:"hover:text-white transition-colors",children:"\uD83D\uDCAB Resonate"}),(0,a.jsx)("button",{className:"hover:text-white transition-colors",children:"\uD83D\uDD17 Thread"}),(0,a.jsx)("button",{className:"hover:text-white transition-colors",children:"⭐ Save"})]}),(0,a.jsx)("div",{className:"text-purple-300",children:t.emotionalTone})]})]})})}),document.body)};function k(){let[e,t]=(0,c.useState)([]),s=async()=>{try{let e=await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/posts"));if(e.ok){let s=await e.json();t(s.posts||[])}}catch(e){console.error("Error fetching posts:",e)}};return(0,c.useEffect)(()=>{s()},[]),(0,a.jsxs)("div",{className:"relative w-full h-screen",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,a.jsx)(u.PostCreation,{onPostCreated:()=>{s()}})}),(0,a.jsx)(y,{posts:e})]})}let S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gazeThreshold:t=1e3,gazeRadius:s=50,updateInterval:a=100}=e,[o,r]=(0,c.useState)({x:0,y:0}),[n,i]=(0,c.useState)(null),[l,d]=(0,c.useState)(!1),m=(0,c.useRef)(null),u=(0,c.useRef)(null),p=(0,c.useRef)(Date.now()),h=(0,c.useCallback)(e=>{let o=Date.now();if(o-p.current>=a){let a={x:e.clientX,y:e.clientY};r(a),p.current=o,n?Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2))>s&&(d(!1),i(null),m.current=null,u.current&&(clearTimeout(u.current),u.current=null)):(i(a),m.current=o,u.current=setTimeout(()=>{d(!0)},t))}},[t,s,a,n]),x=(0,c.useCallback)(()=>{d(!1),i(null),m.current=null,u.current&&(clearTimeout(u.current),u.current=null)},[]);(0,c.useEffect)(()=>(document.addEventListener("mousemove",h),document.addEventListener("mouseleave",x),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseleave",x),u.current&&clearTimeout(u.current)}),[h,x]);let f=(0,c.useMemo)(()=>m.current&&n?Math.min((Date.now()-m.current)/t,1):0,[n,t]),b=(0,c.useMemo)(()=>{if(!n)return{x:0,y:0};let e=window.innerWidth/2,t=window.innerHeight/2;return{x:(n.x-e)/e,y:(n.y-t)/t}},[n]);return{mousePosition:o,gazeTarget:n,isGazing:l,gazeProgress:f,gazeDirection:b,resetGaze:()=>{d(!1),i(null),m.current=null,u.current&&(clearTimeout(u.current),u.current=null)}}},z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{continuous:t=!0,interimResults:s=!1,lang:a="en-US",commands:o={},onCommandRecognized:r,onError:n}=e,[i,l]=(0,c.useState)(!1),[d,m]=(0,c.useState)(""),[u,p]=(0,c.useState)(!1),[h,x]=(0,c.useState)(null),f=(0,c.useRef)(null),b=(0,c.useRef)([]);(0,c.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(p(!!e),e){f.current=new e;let o=f.current;o.continuous=t,o.interimResults=s,o.lang=a,o.onstart=()=>{l(!0)},o.onend=()=>{l(!1)},o.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;s++){let a=e.results[s];a.isFinal&&(t+=a[0].transcript)}t&&(m(t),g(t.trim().toLowerCase()))},o.onerror=e=>{console.error("Speech recognition error:",e.error),l(!1),n&&n(e.error)}}return()=>{f.current&&f.current.stop()}},[t,s,a,n]);let g=(0,c.useCallback)(e=>{let t=e.trim().toLowerCase(),s=v(t);if(s)return void j(s.command,t,1);let a=y(t,Object.keys(o));a.length>0&&j(a[0],t,.8)},[o,r]),v=(0,c.useCallback)(e=>{for(let[t]of Object.entries(o))if(e.includes(t.toLowerCase()))return{command:t};return null},[o]),j=(0,c.useCallback)((e,t,s)=>{let a={command:e,transcript:t,timestamp:Date.now(),confidence:s,fuzzy:s<1};x(a),b.current.push(a),b.current.length>10&&b.current.shift(),r&&r(a);let n=o[e];"function"==typeof n&&n(a)},[o,r]),y=(e,t)=>{let s=[];for(let a of t){let t=a.toLowerCase().split(" "),o=e.split(" "),r=0;for(let e of o)for(let s of t)if(s.includes(e)||e.includes(s)){r++;break}r>0&&s.push({command:a,score:r/Math.max(t.length,o.length)})}return s.sort((e,t)=>t.score-e.score).map(e=>e.command)},N=(0,c.useCallback)(()=>{if(f.current&&!i)try{f.current.start()}catch(e){console.error("Failed to start speech recognition:",e),n&&n("Failed to start recognition")}},[i,n]),C=(0,c.useCallback)(()=>{f.current&&i&&f.current.stop()},[i]);return{isListening:i,transcript:d,isSupported:u,lastCommand:h,startListening:N,stopListening:C,clearTranscript:(0,c.useCallback)(()=>{m("")},[]),getCommandHistory:(0,c.useCallback)(()=>[...b.current],[])}};var E=s(5003);let T=e=>{var t;let{children:s,onNavigate:o,onCommand:r,gazeOptions:n={},voiceOptions:i={},className:l="",showDebug:d=!1}=e,[m,u]=(0,c.useState)("gaze"),[p,h]=(0,c.useState)(!1),x=S({...n}),f=z({...i,commands:{"start navigation":()=>h(!0),"stop navigation":()=>h(!1),"gaze mode":()=>u("gaze"),"voice mode":()=>u("voice"),"combined mode":()=>u("combined"),"go up":e=>b("up",e),"go down":e=>b("down",e),"go left":e=>b("left",e),"go right":e=>b("right",e),"zoom in":e=>b("zoomIn",e),"zoom out":e=>b("zoomOut",e),center:e=>b("center",e),next:e=>b("next",e),previous:e=>b("previous",e),select:e=>b("select",e),...i.commands},onCommandRecognized:e=>{r&&r(e)}}),b=(0,c.useCallback)((e,t)=>{if(!p)return;let s={type:m,direction:e,source:t.fuzzy?"voice-fuzzy":"voice-exact",timestamp:t.timestamp,confidence:t.confidence,gazePosition:x.gazeTarget};o&&o(s)},[p,m,o,x.gazeTarget]),g=(0,E.useGesture)({onDrag:e=>{let{movement:[t,s],velocity:a}=e;if(!p||"voice"===m)return;let r=Math.abs(t),n=Math.abs(s);if(r>50||n>50){let e,i;r>n?(e=t>0?"right":"left",i=Math.min(r/200,1)):(e=s>0?"down":"up",i=Math.min(n/200,1));let l={type:"gesture",direction:e,source:"gesture-drag",timestamp:Date.now(),confidence:i,velocity:a};o&&o(l)}},onPinch:e=>{let{offset:[t]}=e;if(!p||"voice"===m)return;let s={type:"gesture",direction:t>1?"zoomIn":"zoomOut",source:"gesture-pinch",timestamp:Date.now(),confidence:Math.min(Math.abs(t-1),1),scale:t};o&&o(s)},onWheel:e=>{let{movement:[,t]}=e;if(!p||"voice"===m)return;let s={type:"gesture",direction:t>0?"zoomOut":"zoomIn",source:"gesture-wheel",timestamp:Date.now(),confidence:Math.min(Math.abs(t)/100,1),delta:t};o&&o(s)}}),v=(0,c.useCallback)(e=>{if(!e)return null;let{x:t,y:s}=e;if(Math.abs(t)>Math.abs(s)){if(t>.3)return"right";if(t<-.3)return"left"}else{if(s>.3)return"down";if(s<-.3)return"up"}return null},[]);return(0,c.useEffect)(()=>{if(!p||"voice"===m)return;let e=v(x.gazeDirection);if(x.isGazing&&e){let t={type:"gaze",direction:e,source:"gaze",timestamp:Date.now(),confidence:x.gazeProgress,gazePosition:x.gazeTarget};o&&o(t)}},[x.isGazing,x.gazeDirection,x.gazeProgress,x.gazeTarget,p,m,o,v]),(0,c.useEffect)(()=>{p&&("voice"===m||"combined"===m)?f.startListening():f.stopListening()},[p,m,f]),(0,a.jsxs)("div",{className:"gaze-voice-navigator ".concat(l),...g(),children:[(0,a.jsxs)("div",{className:"navigation-controls",style:{position:"fixed",top:20,right:20,zIndex:1e3},children:[(0,a.jsx)("button",{onClick:()=>h(!p),className:"nav-toggle ".concat(p?"active":""),style:{padding:"8px 16px",margin:"4px",border:"1px solid #ccc",borderRadius:"4px",background:p?"#4CAF50":"#f5f5f5",color:p?"white":"black",cursor:"pointer"},children:p?"Stop Navigation":"Start Navigation"}),p&&(0,a.jsxs)("div",{className:"mode-controls",children:[(0,a.jsx)("button",{onClick:()=>u("gaze"),className:"gaze"===m?"active":"",style:{padding:"4px 8px",margin:"2px",border:"1px solid #ccc",borderRadius:"4px",background:"gaze"===m?"#2196F3":"#f5f5f5",color:"gaze"===m?"white":"black",cursor:"pointer",fontSize:"12px"},children:"Gaze"}),(0,a.jsx)("button",{onClick:()=>u("voice"),className:"voice"===m?"active":"",style:{padding:"4px 8px",margin:"2px",border:"1px solid #ccc",borderRadius:"4px",background:"voice"===m?"#2196F3":"#f5f5f5",color:"voice"===m?"white":"black",cursor:"pointer",fontSize:"12px"},children:"Voice"}),(0,a.jsx)("button",{onClick:()=>u("combined"),className:"combined"===m?"active":"",style:{padding:"4px 8px",margin:"2px",border:"1px solid #ccc",borderRadius:"4px",background:"combined"===m?"#2196F3":"#f5f5f5",color:"combined"===m?"white":"black",cursor:"pointer",fontSize:"12px"},children:"Combined"})]})]}),d&&p&&(0,a.jsxs)("div",{className:"debug-info",style:{position:"fixed",bottom:20,left:20,background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"10px",borderRadius:"4px",fontSize:"12px",maxWidth:"300px",zIndex:1e3},children:[(0,a.jsxs)("div",{children:["Mode: ",m]}),(0,a.jsxs)("div",{children:["Gaze: ",x.isGazing?"Active":"Inactive"]}),(0,a.jsxs)("div",{children:["Voice: ",f.isListening?"Listening":"Inactive"]}),(0,a.jsxs)("div",{children:["Transcript: ",f.transcript||"None"]}),(0,a.jsxs)("div",{children:["Last Command: ",(null==(t=f.lastCommand)?void 0:t.command)||"None"]}),x.gazeTarget&&(0,a.jsxs)("div",{children:["Gaze Position: (",x.gazeTarget.x.toFixed(0),", ",x.gazeTarget.y.toFixed(0),")"]})]}),p&&("gaze"===m||"combined"===m)&&x.gazeTarget&&(0,a.jsx)("div",{className:"gaze-indicator",style:{position:"fixed",left:x.gazeTarget.x-25,top:x.gazeTarget.y-25,width:"50px",height:"50px",border:"2px solid ".concat(x.isGazing?"#4CAF50":"#FFC107"),borderRadius:"50%",pointerEvents:"none",zIndex:999,opacity:.7,transition:"border-color 0.2s ease"},children:(0,a.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:"radial-gradient(circle, transparent 40%, ".concat(x.isGazing?"#4CAF50":"#FFC107"," 70%)"),animation:x.isGazing?"pulse 1s infinite":"none"}})}),s]})};T.propTypes={children:l().node,onNavigate:l().func,onCommand:l().func,gazeOptions:l().object,voiceOptions:l().object,className:l().string,showDebug:l().bool};let P=()=>{var e,t,s,r;let[n,i]=(0,c.useState)(!1),{currentUser:l,updateAvatar:d}=(0,o.T)(),m=[{name:"Cosmic Blue",color:"#4a90e2",description:"Deep ocean serenity"},{name:"Nebula Purple",color:"#9b59b6",description:"Mystical energy"},{name:"Solar Gold",color:"#f1c40f",description:"Radiant warmth"},{name:"Void Black",color:"#2c3e50",description:"Infinite depth"},{name:"Plasma Red",color:"#e74c3c",description:"Fiery passion"},{name:"Crystal White",color:"#ecf0f1",description:"Pure light"},{name:"Emerald Green",color:"#27ae60",description:"Life essence"},{name:"Amber Orange",color:"#e67e22",description:"Ancient wisdom"}],u=[{value:"sphere",label:"\uD83E\uDE90 Sphere",description:"Smooth planetary form"},{value:"cube",label:"⬜ Cube",description:"Geometric crystal"},{value:"pyramid",label:"\uD83D\uDD3A Pyramid",description:"Ancient monument"},{value:"octahedron",label:"\uD83D\uDC8E Octahedron",description:"Eight-faced crystal"},{value:"tetrahedron",label:"\uD83D\uDD36 Tetrahedron",description:"Four-faced gem"},{value:"dodecahedron",label:"⭐ Dodecahedron",description:"Twelve-faced star"}],p=[{value:.3,label:"Mini",description:"Compact presence"},{value:.5,label:"Standard",description:"Balanced form"},{value:.8,label:"Large",description:"Commanding presence"},{value:1.2,label:"Giant",description:"Cosmic scale"}];return l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.P.button,{className:"fixed top-16 right-4 bg-black/50 backdrop-blur-sm border border-purple-500/30 text-purple-200 px-4 py-2 rounded-full z-50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),children:"\uD83D\uDC64 Avatar"}),(0,a.jsx)(b.N,{children:n&&(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>i(!1),children:(0,a.jsxs)(g.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border border-purple-500/30 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-purple-200",children:"Customize Your Avatar"}),(0,a.jsx)("button",{onClick:()=>i(!1),className:"text-purple-400 hover:text-purple-200 text-2xl",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-black/30 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-2",children:"Current Avatar"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"text-4xl",children:(null==(e=u.find(e=>{var t;return e.value===(null==(t=l.avatar)?void 0:t.shape)}))?void 0:e.label)||"\uD83E\uDE90"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-sm text-purple-300",children:["Shape: ",(null==(t=u.find(e=>{var t;return e.value===(null==(t=l.avatar)?void 0:t.shape)}))?void 0:t.description)||"Sphere"]}),(0,a.jsxs)("div",{className:"text-sm text-purple-300",children:["Color: ",(null==(s=m.find(e=>{var t;return e.color===(null==(t=l.avatar)?void 0:t.color)}))?void 0:s.name)||"Cosmic Blue"]}),(0,a.jsxs)("div",{className:"text-sm text-purple-300",children:["Size: ",(null==(r=p.find(e=>{var t;return e.value===(null==(t=l.avatar)?void 0:t.size)}))?void 0:r.label)||"Standard"]})]})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(g.P.button,{onClick:()=>{let e=m[Math.floor(Math.random()*m.length)].color;d({color:e,shape:u[Math.floor(Math.random()*u.length)].value,size:p[Math.floor(Math.random()*p.length)].value})},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-6 rounded-lg font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"\uD83C\uDFB2 Randomize Avatar"})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-3",children:"Choose Your Color"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-3",children:m.map(e=>{var t;return(0,a.jsxs)(g.P.button,{onClick:()=>{d({color:e.color})},className:"p-3 rounded-lg border-2 transition-all ".concat((null==(t=l.avatar)?void 0:t.color)===e.color?"border-purple-400 bg-purple-500/20":"border-purple-500/30 hover:border-purple-400"),whileHover:{scale:1.05},whileTap:{scale:.95},title:e.description,children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:e.color}}),(0,a.jsx)("div",{className:"text-xs text-center text-purple-200",children:e.name})]},e.color)})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-3",children:"Choose Your Shape"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:u.map(e=>{var t;return(0,a.jsxs)(g.P.button,{onClick:()=>{d({shape:e.value})},className:"p-4 rounded-lg border-2 transition-all ".concat((null==(t=l.avatar)?void 0:t.shape)===e.value?"border-purple-400 bg-purple-500/20":"border-purple-500/30 hover:border-purple-400"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:e.label}),(0,a.jsx)("div",{className:"text-sm text-purple-200 font-medium",children:e.description})]},e.value)})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-3",children:"Choose Your Size"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:p.map(e=>{var t;return(0,a.jsxs)(g.P.button,{onClick:()=>{d({size:e.value})},className:"p-4 rounded-lg border-2 transition-all ".concat((null==(t=l.avatar)?void 0:t.size)===e.value?"border-purple-400 bg-purple-500/20":"border-purple-500/30 hover:border-purple-400"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsxs)("div",{className:"text-2xl mb-2",children:[.3===e.value&&"\uD83D\uDD0D",.5===e.value&&"⚖️",.8===e.value&&"\uD83D\uDCCF",1.2===e.value&&"\uD83C\uDF1F"]}),(0,a.jsx)("div",{className:"text-sm text-purple-200 font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-purple-300",children:e.description})]},e.value)})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(g.P.button,{onClick:()=>i(!1),className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-6 rounded-lg font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})})]})})})]}):null},D=()=>{let[e,t]=(0,c.useState)(!1),[s,r]=(0,c.useState)(null),[n,i]=(0,c.useState)(""),[l,d]=(0,c.useState)(null),[m,u]=(0,c.useState)(null),{constellations:p,createConstellation:h,updateConstellation:x,deleteConstellation:f,currentUser:v}=(0,o.T)(),j=[{name:"Golden",color:"#ffd700"},{name:"Blue",color:"#4a90e2"},{name:"Red",color:"#e74c3c"},{name:"Green",color:"#27ae60"},{name:"Purple",color:"#9b59b6"},{name:"White",color:"#ecf0f1"},{name:"Orange",color:"#e67e22"},{name:"Pink",color:"#e91e63"}],y=(0,c.useCallback)(()=>{let e={name:"Constellation ".concat(p.size+1),stars:[],connections:[],lineColor:"#ffffff",theme:"default",creatorId:null==v?void 0:v.id,isActive:!0};h(e),r(e)},[p.size,h,v]),N=(0,c.useCallback)(()=>{if(!s||!n.trim())return;let e={id:"star-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:n.trim(),position:[(Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10],color:j[Math.floor(Math.random()*j.length)].color,size:.1+.1*Math.random()},t={...s,stars:[...s.stars,e]};x(t),r(t),i("")},[s,n,x]),C=(0,c.useCallback)((e,t)=>{if(!s)return;let a=s.stars.map(s=>s.id===e?{...s,...t}:s),o={...s,stars:a};x(o),r(o)},[s,x]),w=(0,c.useCallback)(e=>{if(!s)return;let t=s.stars.filter(t=>t.id!==e),a=s.connections.filter(t=>{let[a,o]=t,r=s.stars.findIndex(t=>t.id===e),n=s.stars.findIndex(t=>t.id===e);return a!==r&&o!==n}),o={...s,stars:t,connections:a};x(o),r(o),d(null)},[s,x]),k=(0,c.useCallback)(e=>{if(!s)return;let t=s.connections.filter((t,s)=>s!==e),a={...s,connections:t};x(a),r(a),u(null)},[s,x]),S=(0,c.useCallback)((e,t)=>{if(!s)return;let a={...s,[e]:t};x(a),r(a)},[s,x]),z=(0,c.useCallback)(e=>{let t="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({...e,exportedAt:new Date().toISOString(),exportedBy:(null==v?void 0:v.name)||"Anonymous",version:"1.0"},null,2)),s="".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_constellation.json"),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",s),a.click()},[v]),E=(0,c.useCallback)(e=>{let t=e.target.files[0];if(!t)return;let s=new FileReader;s.onload=e=>{try{let t=JSON.parse(e.target.result);if(!t.name||!t.stars||!t.connections)return void alert("Invalid constellation file format");let s={...t,id:"constellation-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(t.name," (Imported)"),creatorId:null==v?void 0:v.id,importedAt:new Date().toISOString(),isActive:!0};h(s),alert("Successfully imported constellation: ".concat(s.name))}catch(e){alert("Error importing constellation: "+e.message)}},s.readAsText(t)},[h,v]),T=(0,c.useCallback)(e=>{let t={title:e.name,text:"Check out this constellation: ".concat(e.name),url:"".concat(window.location.origin,"/collaborative-cosmos?constellation=").concat(encodeURIComponent(JSON.stringify(e)))};navigator.share?navigator.share(t):navigator.clipboard.writeText(t.url).then(()=>{alert("Constellation link copied to clipboard!")})},[]),P=(0,c.useCallback)(e=>{let t={...e,id:"constellation-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(e.name," (Copy)"),creatorId:null==v?void 0:v.id,createdAt:new Date().toISOString()};h(t),r(t)},[h,v]);return v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.P.button,{className:"fixed top-20 right-4 bg-black/50 backdrop-blur-sm border border-green-500/30 text-green-200 px-4 py-2 rounded-full z-50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!0),children:"✨ Constellations"}),(0,a.jsx)(b.N,{children:e&&(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>t(!1),children:(0,a.jsxs)(g.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-green-900/90 to-blue-900/90 border border-green-500/30 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-green-200",children:"Constellation Editor"}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-green-400 hover:text-green-200 text-2xl",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-200",children:"Your Constellations"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(g.P.button,{onClick:y,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"+ New Constellation"}),(0,a.jsx)(g.P.button,{onClick:()=>document.getElementById("constellation-import").click(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uD83D\uDCC1 Import"}),(0,a.jsx)("input",{id:"constellation-import",type:"file",accept:".json",onChange:E,className:"hidden"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Array.from(p.values()).map(e=>(0,a.jsx)(g.P.div,{className:"p-4 rounded-lg border-2 transition-all ".concat((null==s?void 0:s.id)===e.id?"border-green-400 bg-green-500/20":"border-green-500/30 hover:border-green-400"),whileHover:{scale:1.02},children:(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)(g.P.button,{className:"flex-1 text-left p-2 -m-2 rounded hover:bg-green-500/10 transition-colors",onClick:()=>r(e),whileHover:{scale:1.01},children:[(0,a.jsx)("h4",{className:"font-semibold text-green-200",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-green-300",children:[e.stars.length," stars, ",e.connections.length," connections"]})]}),(0,a.jsxs)("div",{className:"flex space-x-1 ml-2",children:[(0,a.jsx)(g.P.button,{onClick:t=>{t.stopPropagation(),P(e)},className:"text-green-400 hover:text-green-200 text-sm p-1 rounded hover:bg-green-500/20 transition-colors",whileHover:{scale:1.1},title:"Duplicate",children:"\uD83D\uDCCB"}),(0,a.jsx)(g.P.button,{onClick:t=>{t.stopPropagation(),T(e)},className:"text-green-400 hover:text-green-200 text-sm p-1 rounded hover:bg-green-500/20 transition-colors",whileHover:{scale:1.1},title:"Share",children:"\uD83D\uDD17"}),(0,a.jsx)(g.P.button,{onClick:t=>{t.stopPropagation(),z(e)},className:"text-green-400 hover:text-green-200 text-sm p-1 rounded hover:bg-green-500/20 transition-colors",whileHover:{scale:1.1},title:"Export",children:"\uD83D\uDCBE"})]})]})},e.id))})]}),s&&(0,a.jsxs)("div",{className:"border-t border-green-500/30 pt-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-green-200",children:["Editing: ",s.name]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(g.P.button,{onClick:()=>f(s.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Delete"}),(0,a.jsx)(g.P.button,{onClick:()=>r(null),className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Close"})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"constellation-name",className:"block text-sm font-medium text-green-300 mb-1",children:"Name"}),(0,a.jsx)("input",{id:"constellation-name",type:"text",value:s.name,onChange:e=>S("name",e.target.value),className:"w-full bg-black/50 border border-green-500/30 rounded px-3 py-2 text-green-200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"line-color",className:"block text-sm font-medium text-green-300 mb-1",children:"Line Color"}),(0,a.jsx)("input",{id:"line-color",type:"color",value:s.lineColor,onChange:e=>S("lineColor",e.target.value),className:"w-full bg-black/50 border border-green-500/30 rounded px-3 py-2 h-10"})]})]})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-green-200 mb-3",children:"Add Star"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Star name",value:n,onChange:e=>i(e.target.value),className:"flex-1 bg-black/50 border border-green-500/30 rounded px-3 py-2 text-green-200",onKeyPress:e=>"Enter"===e.key&&N()}),(0,a.jsx)(g.P.button,{onClick:N,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Add Star"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-green-200 mb-3",children:["Stars (",s.stars.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:s.stars.map((e,t)=>(0,a.jsxs)(g.P.div,{onClick:()=>d(l===t?null:t),className:"p-3 rounded-lg border cursor-pointer transition-all ".concat(l===t?"border-green-400 bg-green-500/20":"border-green-500/30 hover:border-green-400"),whileHover:{scale:1.01},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-green-200 font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-green-300 text-sm",children:["(",e.position.map(e=>e.toFixed(1)).join(", "),")"]})]}),(0,a.jsx)(g.P.button,{onClick:t=>{t.stopPropagation(),w(e.id)},className:"text-red-400 hover:text-red-300 text-sm",whileHover:{scale:1.1},children:"✕"})]}),l===t&&(0,a.jsx)(g.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-green-500/30",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"star-color-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"Color"}),(0,a.jsx)("input",{id:"star-color-".concat(e.id),type:"color",value:e.color,onChange:t=>C(e.id,{color:t.target.value}),className:"w-full h-8 bg-black/50 border border-green-500/30 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"star-size-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"Size"}),(0,a.jsx)("input",{id:"star-size-".concat(e.id),type:"range",min:"0.05",max:"0.3",step:"0.01",value:e.size,onChange:t=>C(e.id,{size:parseFloat(t.target.value)}),className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"star-x-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"X"}),(0,a.jsx)("input",{id:"star-x-".concat(e.id),type:"number",step:"0.1",value:e.position[0],onChange:t=>C(e.id,{position:[parseFloat(t.target.value),e.position[1],e.position[2]]}),className:"w-full bg-black/50 border border-green-500/30 rounded px-2 py-1 text-green-200 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"star-y-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"Y"}),(0,a.jsx)("input",{id:"star-y-".concat(e.id),type:"number",step:"0.1",value:e.position[1],onChange:t=>C(e.id,{position:[e.position[0],parseFloat(t.target.value),e.position[2]]}),className:"w-full bg-black/50 border border-green-500/30 rounded px-2 py-1 text-green-200 text-sm"})]})]})})]},e.id))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-green-200 mb-3",children:["Connections (",s.connections.length,")"]}),(0,a.jsx)("div",{className:"text-sm text-green-300 mb-3",children:"Click two stars to create a connection, or click a connection to remove it."}),(0,a.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:s.connections.map((e,t)=>{let o=s.stars[e[0]],r=s.stars[e[1]];return(0,a.jsx)(g.P.div,{onClick:()=>u(m===t?null:t),className:"p-2 rounded cursor-pointer transition-all ".concat(m===t?"border border-red-400 bg-red-500/20":"hover:bg-green-500/10"),whileHover:{scale:1.01},children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-green-200 text-sm",children:[null==o?void 0:o.name," ↔ ",null==r?void 0:r.name]}),m===t&&(0,a.jsx)(g.P.button,{onClick:e=>{e.stopPropagation(),k(t)},className:"text-red-400 hover:text-red-300 text-sm ml-2",whileHover:{scale:1.1},children:"Remove"})]})},"".concat(e[0],"-").concat(e[1]))})})]})]})]})})})]}):null},M=(0,c.createContext)(),A=(e,t)=>{switch(t.type){case"UPDATE_THEME":case"SET_PRESET":return{...e,...t.payload};case"RESET_THEME":return I;default:return e}},I={backgroundColor:"#000011",fogColor:"#000033",ambientColor:"#ffffff",pointLightColor:"#ffffff",terrainColor:"#4a4a8a",terrainEmissive:"#2a2a5a",starDensity:8e3,starSize:6,animationSpeed:1,ambientIntensity:.3,pointLightIntensity:.8,skySettings:{turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.7},particleColors:["#ff4444","#87CEEB","#4361ee","#8B4513"]},_=e=>{let{children:t}=e,[s,o]=(0,c.useReducer)(A,I);return(0,a.jsx)(M.Provider,{value:{theme:s,updateTheme:e=>{o({type:"UPDATE_THEME",payload:e})},setPreset:e=>{o({type:"SET_PRESET",payload:{nebula:{backgroundColor:"#110033",fogColor:"#330066",starDensity:12e3,particleColors:["#ff00ff","#00ffff","#ffff00","#ff0080"]},galaxy:{backgroundColor:"#000022",fogColor:"#001144",starDensity:15e3,animationSpeed:2},aurora:{backgroundColor:"#001122",fogColor:"#004466",ambientColor:"#00ff88",particleColors:["#00ff88","#0088ff","#88ff00"]}}[e]})}},children:t})},F=()=>{let e=(0,c.useContext)(M);if(!e)throw Error("useCosmicTheme must be used within CosmicThemeProvider");return e},R=()=>{let[e,t]=(0,c.useState)(!1),{theme:s,dispatch:o}=F();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.P.button,{className:"fixed top-4 right-4 bg-black/50 backdrop-blur-sm border border-cyan-500/30 text-cyan-200 px-4 py-2 rounded-full z-50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!0),children:"\uD83C\uDFA8 Customize Cosmos"}),(0,a.jsx)(b.N,{children:e&&(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>t(!1),children:(0,a.jsxs)(g.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border border-cyan-500/30 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Cosmic Personalization"}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-cyan-200 hover:text-white transition-colors",children:"✕"})]}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Color Palette"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[{name:"Cosmic Ocean",colors:["#4a90e2","#667eea","#764ba2"]},{name:"Nebula Dream",colors:["#9b59b6","#e74c3c","#f1c40f"]},{name:"Deep Space",colors:["#2c3e50","#34495e","#16a085"]},{name:"Solar Flare",colors:["#e67e22","#d35400","#f39c12"]}].map((e,t)=>(0,a.jsxs)("button",{onClick:()=>o({type:"SET_PALETTE",payload:{...s.palette,primary:e.colors[0],secondary:e.colors[1],nebula:[e.colors[0],e.colors[1]]}}),className:"p-3 rounded-lg border border-cyan-500/30 bg-black/30 text-left hover:border-cyan-400 transition-colors",children:[(0,a.jsx)("div",{className:"flex space-x-1 mb-2",children:e.colors.map((t,s)=>(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border border-white/20",style:{backgroundColor:t}},"".concat(e.name,"-").concat(t,"-").concat(s)))}),(0,a.jsx)("div",{className:"text-cyan-200 text-sm font-medium",children:e.name})]},e.name))}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"primary-color",className:"text-cyan-200 text-sm block mb-2",children:"Primary Color"}),(0,a.jsx)("input",{id:"primary-color",type:"color",value:s.palette.primary,onChange:e=>o({type:"SET_PALETTE",payload:{...s.palette,primary:e.target.value}}),className:"w-full h-10 rounded-lg cursor-pointer"})]})})]}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Planet Shapes"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"sphere",label:"\uD83E\uDE90 Spheres",description:"Smooth planetary bodies"},{value:"icosahedron",label:"\uD83D\uDD3A Crystals",description:"Geometric crystal forms"},{value:"dodecahedron",label:"✨ Stars",description:"Complex star shapes"},{value:"torus",label:"\uD83C\uDF00 Rings",description:"Orbital ring structures"},{value:"asteroid",label:"\uD83C\uDF11 Asteroids",description:"Organic rocky forms"}].map(e=>(0,a.jsxs)("button",{onClick:()=>o({type:"SET_GEOMETRY",payload:{...s.geometry,planetShape:e.value}}),className:"p-3 rounded-lg border-2 text-left transition-all ".concat(s.geometry.planetShape===e.value?"border-cyan-400 bg-cyan-400/20":"border-cyan-500/30 hover:border-cyan-400"),children:[(0,a.jsx)("div",{className:"text-lg mb-1",children:e.label.split(" ")[0]}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:e.description})]},e.value))})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Cosmic Density"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-cyan-200 text-sm block mb-2",children:["Star Density: ",s.density.stars]}),(0,a.jsx)("input",{type:"range",min:"1000",max:"10000",step:"1000",value:s.density.stars,onChange:e=>o({type:"SET_DENSITY",payload:{...s.density,stars:parseInt(e.target.value)}}),className:"w-full accent-cyan-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"ui-density",className:"text-cyan-200 text-sm block mb-2",children:"UI Density"}),(0,a.jsxs)("select",{id:"ui-density",value:s.geometry.uiDensity,onChange:e=>o({type:"SET_GEOMETRY",payload:{...s.geometry,uiDensity:e.target.value}}),className:"w-full bg-black/30 border border-cyan-500/30 rounded-lg p-2 text-cyan-200",children:[(0,a.jsx)("option",{value:"compact",children:"Compact"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"spacious",children:"Spacious"})]})]})]})]})]})})})]})},O=e=>{var t,s,i,l;let{position:d=[-4,0,-3],scale:m=1}=e,[u,p]=(0,c.useState)("navigation"),[h,x]=(0,c.useState)(!1),{theme:f,dispatch:g}=F(),{currentUser:v,updateUserSettings:j}=(0,o.T)(),y=[{id:"navigation",name:"Navigation",icon:"\uD83E\uDDED",description:"Move through the cosmos",color:"#00d4ff"},{id:"social",name:"Social",icon:"\uD83D\uDC65",description:"Connect with others",color:"#ff6b6b"},{id:"creation",name:"Create",icon:"✨",description:"Build constellations",color:"#4ecdc4"},{id:"analysis",name:"Analyze",icon:"\uD83D\uDD0D",description:"Explore cosmic data",color:"#45b7d1"},{id:"settings",name:"Settings",icon:"⚙️",description:"Customize experience",color:"#f9ca24"}],N=e=>{p(e),window.cosmicEventEmitter&&window.cosmicEventEmitter.emit("toolChanged",{toolId:e,tool:y.find(t=>t.id===e)})},C=e=>{var t,s;let{tool:o,isActive:i,onClick:l,position:d}=e,m=(0,c.useRef)();return(0,n.F)(e=>{m.current&&i&&m.current.scale.setScalar(1+.1*Math.sin(3*e.clock.elapsedTime))}),(0,a.jsxs)("group",{ref:m,position:d,onClick:()=>l(o.id),children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("cylinderGeometry",{args:[.3,.3,.1,16]}),(0,a.jsx)("meshStandardMaterial",{color:i?o.color:(null==(t=f.colors)?void 0:t.secondary)||"#333333",emissive:i?o.color:"#000000",emissiveIntensity:.3*!!i})]}),(0,a.jsx)(r.E,{position:[0,0,.06],fontSize:.2,color:"white",anchorX:"center",anchorY:"middle",children:o.icon}),(0,a.jsx)(r.E,{position:[0,-.4,0],fontSize:.08,color:(null==(s=f.colors)?void 0:s.text)||"#ffffff",anchorX:"center",anchorY:"middle",children:o.name}),i&&(0,a.jsxs)("mesh",{position:[0,0,-.1],children:[(0,a.jsx)("ringGeometry",{args:[.35,.4,16]}),(0,a.jsx)("meshStandardMaterial",{color:o.color,emissive:o.color,emissiveIntensity:.5})]})]})};return(0,a.jsxs)("group",{position:d,scale:m,children:[(0,a.jsxs)(e=>{let{children:t,onClick:s}=e,o=(0,c.useRef)();return(0,n.F)(e=>{o.current&&(o.current.rotation.y=.05*Math.sin(.5*e.clock.elapsedTime),o.current.position.y+=.002*Math.sin(2*e.clock.elapsedTime))}),(0,a.jsx)("group",{ref:o,onClick:s,children:t})},{children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("boxGeometry",{args:[2.5,4,.1]}),(0,a.jsx)("meshStandardMaterial",{color:(null==(t=f.colors)?void 0:t.background)||"#1a1a2e",transparent:!0,opacity:.9})]}),(0,a.jsx)(r.E,{position:[0,1.8,.06],fontSize:.15,color:(null==(s=f.colors)?void 0:s.accent)||"#00d4ff",anchorX:"center",anchorY:"middle",children:"\uD83D\uDEE0️ Control Panel"}),y.map((e,t)=>(0,a.jsx)(C,{tool:e,isActive:u===e.id,onClick:N,position:[0,1.2-.6*t,.06]},e.id)),(0,a.jsxs)("mesh",{position:[0,-1.8,.06],onClick:()=>x(!h),children:[(0,a.jsx)("cylinderGeometry",{args:[.2,.2,.05,16]}),(0,a.jsx)("meshStandardMaterial",{color:"#4ade80"})]}),(0,a.jsx)(r.E,{position:[0,-1.8,.11],fontSize:.1,color:"white",anchorX:"center",anchorY:"middle",children:h?"−":"+"})]}),(0,a.jsx)(b.N,{children:h&&"settings"===u&&(0,a.jsx)(()=>{var e,t,s,o,n;let i=["nebula","galaxy","aurora","void"],l=["low","medium","high","ultra"];return(0,a.jsxs)("group",{position:[2,0,0],children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("planeGeometry",{args:[3,4]}),(0,a.jsx)("meshStandardMaterial",{color:(null==(e=f.colors)?void 0:e.background)||"#1a1a2e",transparent:!0,opacity:.9})]}),(0,a.jsx)(r.E,{position:[0,1.8,.1],fontSize:.2,color:(null==(t=f.colors)?void 0:t.accent)||"#00d4ff",anchorX:"center",anchorY:"middle",children:"⚙️ Settings"}),(0,a.jsx)(r.E,{position:[-1.2,1.2,.1],fontSize:.12,color:(null==(s=f.colors)?void 0:s.text)||"#ffffff",anchorX:"left",anchorY:"middle",children:"Theme:"}),i.map((e,t)=>{var s;return(0,a.jsxs)("mesh",{position:[-1+.8*t,.8,.05],onClick:()=>{g({type:"SET_PRESET",payload:e})},children:[(0,a.jsx)("planeGeometry",{args:[.7,.3]}),(0,a.jsx)("meshStandardMaterial",{color:f.name===e?"#4ade80":(null==(s=f.colors)?void 0:s.secondary)||"#333333",transparent:!0,opacity:.8})]},e)}),i.map((e,t)=>(0,a.jsx)(r.E,{position:[-1+.8*t,.8,.1],fontSize:.08,color:"white",anchorX:"center",anchorY:"middle",children:e.charAt(0).toUpperCase()+e.slice(1)},"text-".concat(e))),(0,a.jsx)(r.E,{position:[-1.2,.2,.1],fontSize:.12,color:(null==(o=f.colors)?void 0:o.text)||"#ffffff",anchorX:"left",anchorY:"middle",children:"Quality:"}),l.map((e,t)=>{var s,o;return(0,a.jsxs)("mesh",{position:[-1+.8*t,-.2,.05],onClick:()=>{j&&j({graphicsQuality:e})},children:[(0,a.jsx)("planeGeometry",{args:[.7,.3]}),(0,a.jsx)("meshStandardMaterial",{color:(null==v||null==(s=v.settings)?void 0:s.graphicsQuality)===e?"#4ade80":(null==(o=f.colors)?void 0:o.secondary)||"#333333",transparent:!0,opacity:.8})]},e)}),l.map((e,t)=>(0,a.jsx)(r.E,{position:[-1+.8*t,-.2,.1],fontSize:.08,color:"white",anchorX:"center",anchorY:"middle",children:e.charAt(0).toUpperCase()+e.slice(1)},"quality-".concat(e))),(0,a.jsx)(r.E,{position:[0,-1.2,.1],fontSize:.1,color:(null==(n=f.colors)?void 0:n.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:(null==v?void 0:v.name)||"Cosmic Explorer"})]})},{})}),(0,a.jsxs)(r.E,{position:[0,-2.5,0],fontSize:.08,color:(null==(i=f.colors)?void 0:i.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:["Active: ",null==(l=y.find(e=>e.id===u))?void 0:l.name]})]})},L=e=>{var t,s;let{position:i=[0,0,-5],scale:l=1}=e,[d,m]=(0,c.useState)([]),[u,p]=(0,c.useState)(null),[h,x]=(0,c.useState)(!1),{theme:f}=F(),{currentUser:g}=(0,o.T)();(0,c.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/posts"));if(e.ok){let t=await e.json();m(t.posts||[])}}catch(e){console.error("Error fetching posts:",e)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let v=e=>({aries:"♈",taurus:"♉",gemini:"♊",cancer:"♋",leo:"♌",virgo:"♍",libra:"♎",scorpio:"♏",sagittarius:"♐",capricorn:"♑",aquarius:"♒",pisces:"♓"})[null==e?void 0:e.toLowerCase()]||"⭐",j=e=>["aries","leo","sagittarius"].includes(null==e?void 0:e.toLowerCase())?"#ff6b35":["taurus","virgo","capricorn"].includes(null==e?void 0:e.toLowerCase())?"#4ade80":["gemini","libra","aquarius"].includes(null==e?void 0:e.toLowerCase())?"#60a5fa":["cancer","scorpio","pisces"].includes(null==e?void 0:e.toLowerCase())?"#a78bfa":"#fbbf24",y=e=>{var t,s,o;let{post:i,index:l,onClick:d}=e,m=(0,c.useRef)();(0,n.F)(e=>{m.current&&(m.current.position.y+=.001*Math.sin(e.clock.elapsedTime+l),m.current.rotation.y+=.005)});let u=j(i.zodiacSign),p=v(i.zodiacSign);return(0,a.jsxs)("group",{ref:m,position:[0,-1.5*l,0],onClick:()=>d(i),children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,a.jsx)("meshStandardMaterial",{color:u,emissive:u,emissiveIntensity:.2,transparent:!0,opacity:.8})]}),(0,a.jsx)(r.E,{position:[0,0,.35],fontSize:.2,color:"white",anchorX:"center",anchorY:"middle",children:p}),(0,a.jsx)(r.E,{position:[0,-.5,0],fontSize:.08,color:(null==(t=f.colors)?void 0:t.text)||"#ffffff",anchorX:"center",anchorY:"middle",children:i.author}),(0,a.jsxs)(r.E,{position:[0,-.7,0],fontSize:.06,color:(null==(s=f.colors)?void 0:s.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",maxWidth:2,children:[null==(o=i.content)?void 0:o.substring(0,50),"..."]})]})};return(0,a.jsxs)("group",{position:i,scale:l,children:[(0,a.jsx)(r.E,{position:[0,3,0],fontSize:.3,color:(null==(t=f.colors)?void 0:t.accent)||"#00d4ff",anchorX:"center",anchorY:"middle",children:"\uD83C\uDF1F Cosmic Feed \uD83C\uDF1F"}),(0,a.jsx)("group",{position:[0,2,0],children:d.slice(0,8).map((e,t)=>(0,a.jsx)(y,{post:e,index:t,onClick:p},e.id))}),(0,a.jsx)(b.N,{children:u&&(0,a.jsx)(e=>{var t,s,o,n;let{post:i,onClose:l}=e;if(!i)return null;let c=j(i.zodiacSign),d=v(i.zodiacSign);return(0,a.jsxs)("group",{position:[3,0,0],children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("planeGeometry",{args:[4,6]}),(0,a.jsx)("meshStandardMaterial",{color:(null==(t=f.colors)?void 0:t.background)||"#1a1a2e",transparent:!0,opacity:.9})]}),(0,a.jsxs)("mesh",{position:[1.8,2.8,.1],onClick:l,children:[(0,a.jsx)("planeGeometry",{args:[.3,.3]}),(0,a.jsx)("meshStandardMaterial",{color:"#ff4757"})]}),(0,a.jsx)(r.E,{position:[1.8,2.8,.2],fontSize:.15,color:"white",anchorX:"center",anchorY:"middle",children:"✕"}),(0,a.jsx)(r.E,{position:[0,2.5,.1],fontSize:.4,color:c,anchorX:"center",anchorY:"middle",children:d}),(0,a.jsx)(r.E,{position:[0,2,.1],fontSize:.15,color:(null==(s=f.colors)?void 0:s.text)||"#ffffff",anchorX:"center",anchorY:"middle",children:i.author}),(0,a.jsx)(r.E,{position:[0,1,.1],fontSize:.12,color:(null==(o=f.colors)?void 0:o.text)||"#ffffff",anchorX:"center",anchorY:"middle",maxWidth:3.5,children:i.content}),(0,a.jsx)(r.E,{position:[0,-2.5,.1],fontSize:.08,color:(null==(n=f.colors)?void 0:n.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:new Date(i.timestamp).toLocaleString()}),i.emotionalTone&&(0,a.jsx)(r.E,{position:[0,-2.8,.1],fontSize:.1,color:c,anchorX:"center",anchorY:"middle",children:i.emotionalTone})]})},{post:u,onClose:()=>p(null)})}),(0,a.jsxs)(r.E,{position:[0,-6,0],fontSize:.1,color:(null==(s=f.colors)?void 0:s.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:[d.length," posts in the cosmos"]})]})};var G=s(660),Y=s(37),U=s(3148),X=s(8847),H=s.n(X),B=s(4301);async function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat("https://star-backend.azurewebsites.net").concat(e),a={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(s,a);if(!e.ok)throw Error("API call failed: ".concat(e.status," ").concat(e.statusText));return await e.json()}catch(t){throw console.error("API call to ".concat(e," failed:"),t),t}}s(3754);let q={getPosts:async()=>W("/api/v1/posts")},V={getNumbers:async()=>W("/api/v1/zodiac/numbers")},K={getConstellations:async()=>W("/api/v1/constellations")},J=H()(()=>s.e(9439).then(s.bind(s,9439)).then(e=>({default:e.NotificationPanel})),{loadableGenerated:{webpack:()=>[9439]},ssr:!1}),Q=H()(()=>s.e(2123).then(s.bind(s,2123)).then(e=>({default:e.LiveStreamCreation})),{loadableGenerated:{webpack:()=>[2123]},ssr:!1}),Z=H()(()=>Promise.resolve().then(s.bind(s,7211)).then(e=>({default:e.PostCreation})),{loadableGenerated:{webpack:()=>[7211]},ssr:!1}),$=H()(()=>Promise.all([s.e(8669),s.e(3260),s.e(4141),s.e(3542)]).then(s.bind(s,3542)).then(e=>({default:e.AgoraUIKitLiveStream})),{loadableGenerated:{webpack:()=>[3542]},ssr:!1}),ee=H()(()=>Promise.all([s.e(8143),s.e(795)]).then(s.bind(s,795)).then(e=>({default:e.CollaborativeAvatar})),{loadableGenerated:{webpack:()=>[795]},ssr:!1}),et=H()(()=>Promise.all([s.e(8143),s.e(1968)]).then(s.bind(s,1968)).then(e=>({default:e.default})),{loadableGenerated:{webpack:()=>[1968]},ssr:!1}),es=()=>{let{theme:e}=F();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.m,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25,...e.skySettings}),(0,a.jsx)(h.A,{radius:300,depth:60,count:e.starDensity||8e3,factor:e.starSize||6,saturation:.2,fade:!0,speed:e.animationSpeed||1}),(0,a.jsx)("fog",{attach:"fog",args:[e.fogColor||"#000033",10,200]}),(0,a.jsx)("ambientLight",{intensity:e.ambientIntensity||.3,color:e.ambientColor||"#ffffff"}),(0,a.jsx)("pointLight",{position:[10,10,10],intensity:e.pointLightIntensity||.8,color:e.pointLightColor||"#ffffff"}),(0,a.jsx)("pointLight",{position:[-10,5,-10],intensity:.4,color:"#ff4444"})," ",(0,a.jsx)("pointLight",{position:[10,5,-10],intensity:.4,color:"#87CEEB"})," ",(0,a.jsx)("pointLight",{position:[0,-5,10],intensity:.4,color:"#4361ee"})," "]})},ea=()=>{let[e]=(0,G.ON)(()=>({rotation:[-Math.PI/2,0,0],position:[0,-2,0]}));return(0,a.jsxs)("mesh",{ref:e,receiveShadow:!0,children:[(0,a.jsx)("planeGeometry",{args:[100,100]}),(0,a.jsx)("meshStandardMaterial",{color:"#1a1a2e",emissive:"#16213e",emissiveIntensity:.1,transparent:!0,opacity:.8})]})},eo=()=>[{position:[8,0,5],size:[3,.5,2],rotation:[0,.5,0]},{position:[-6,1,-4],size:[2,.3,1.5],rotation:[0,-.3,0]},{position:[3,2,-8],size:[2.5,.4,1.8],rotation:[.1,.7,-.1]}].map((e,t)=>(0,a.jsx)(er,{...e},t)),er=e=>{let{position:t,size:s,rotation:o}=e,[r]=(0,G.z9)(()=>({mass:0,position:t,rotation:o,args:s})),{theme:n}=F();return(0,a.jsxs)("mesh",{ref:r,castShadow:!0,receiveShadow:!0,children:[(0,a.jsx)("boxGeometry",{args:s}),(0,a.jsx)("meshStandardMaterial",{color:n.terrainColor||"#4a4a8a",emissive:n.terrainEmissive||"#2a2a5a",emissiveIntensity:.2,roughness:.8,metalness:.2})]})},en=()=>{let{theme:e}=F(),t=(0,c.useRef)();(0,n.F)(e=>{t.current&&(t.current.rotation.y=.05*e.clock.elapsedTime,t.current.rotation.x=.1*Math.sin(.03*e.clock.elapsedTime))});let s=Array.from({length:200},(t,s)=>{var a;return{position:[(Math.random()-.5)*50,(Math.random()-.5)*50,(Math.random()-.5)*50],color:(null==(a=e.particleColors)?void 0:a[s%e.particleColors.length])||"#ffffff",size:.5*Math.random()+.1}});return(0,a.jsx)("group",{ref:t,children:s.map((e,t)=>(0,a.jsxs)("mesh",{position:e.position,castShadow:!0,children:[(0,a.jsx)("sphereGeometry",{args:[e.size,8,8]}),(0,a.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:.6})]},t))})},ei=()=>{var e,t,s,r;let{onlineUsers:n,constellations:i,currentUser:l,createConstellation:d,socket:u}=(0,o.T)(),{theme:p}=F(),[h,b]=(0,c.useState)(null),[g,v]=(0,c.useState)(null),[j,y]=(0,c.useState)(!1),[N,C]=(0,c.useState)(!1),[w,S]=(0,c.useState)(!1),[z,E]=(0,c.useState)(null),[M,A]=(0,c.useState)([]),[I,Y]=(0,c.useState)(null),[X,H]=(0,c.useState)("navigate"),[W,er]=(0,c.useState)(!1),ei=(0,c.useRef)(),el=(e,t)=>{var s;return(null==(s=({aries:{like:"#ff4444",comment:"#ff8888",share:"#ffaaaa"},taurus:{like:"#44ff44",comment:"#88ff88",share:"#aaffaa"},gemini:{like:"#ffff44",comment:"#ffff88",share:"#ffffaa"},cancer:{like:"#4444ff",comment:"#8888ff",share:"#aaaaff"},leo:{like:"#ffaa44",comment:"#ffcc88",share:"#ffddaa"},virgo:{like:"#44ffaa",comment:"#88ffcc",share:"#aaffdd"},libra:{like:"#aa44ff",comment:"#cc88ff",share:"#ddaafe"},scorpio:{like:"#ff44aa",comment:"#ff88cc",share:"#ffaafe"},sagittarius:{like:"#44aaff",comment:"#88ccff",share:"#aaddff"},capricorn:{like:"#aaaaaa",comment:"#cccccc",share:"#dddddd"},aquarius:{like:"#44ffff",comment:"#88ffff",share:"#aaffff"},pisces:{like:"#aa44aa",comment:"#cc88cc",share:"#ddaadd"}})[null==e?void 0:e.toLowerCase()])?void 0:s[t])||"#ffffff"},ec=(e,t)=>{b(e),v(null)},ed=(e,t,s,a)=>{v({...s,selectedStar:e,selectedStarIndex:t}),b(null)},em=(e,t,s,a)=>{v({...s,selectedConnection:e,selectedConnectionIndex:t}),b(null)};return(0,c.useEffect)(()=>{0===i.size&&l&&[{name:"Ursa Major",stars:[{id:"dubhe",name:"Dubhe",position:[-2,1,0],color:"#ffd700",size:.15},{id:"merak",name:"Merak",position:[-1,.5,0],color:"#ffd700",size:.12},{id:"phekda",name:"Phekda",position:[0,0,0],color:"#ffd700",size:.13},{id:"megrez",name:"Megrez",position:[1,.3,0],color:"#ffd700",size:.11},{id:"alioth",name:"Alioth",position:[2,.8,0],color:"#ffd700",size:.14},{id:"mizar",name:"Mizar",position:[3,1.2,0],color:"#ffd700",size:.13},{id:"alkaid",name:"Alkaid",position:[4,1.5,0],color:"#ffd700",size:.12}],connections:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],lineColor:"#ffffff",isActive:!0},{name:"Orion",stars:[{id:"betelgeuse",name:"Betelgeuse",position:[3,2,1],color:"#ff6b6b",size:.2},{id:"rigel",name:"Rigel",position:[2,-1,1],color:"#87ceeb",size:.18}],connections:[[0,1]],lineColor:"#4a90e2",isActive:!0}].forEach(e=>{d(e)})},[i.size,l,d]),(0,c.useEffect)(()=>{(async()=>{try{let e=await q.getPosts();A(e.data.posts||[]);let t=await V.getNumbers();Y(t.data);let s=await K.getConstellations();s.data&&s.data.forEach(e=>{d(e)})}catch(e){console.error("Failed to fetch initial data:",e)}})()},[d]),(0,a.jsxs)("div",{className:"w-full h-screen relative bg-black overflow-hidden",children:[(0,a.jsx)(f.Hl,{ref:ei,className:"w-full h-full",shadows:!0,camera:{position:[0,5,15],fov:60},children:(0,a.jsx)(_,{children:(0,a.jsx)(o.p,{children:(0,a.jsxs)(G.AQ,{gravity:[0,-2,0],children:[(0,a.jsx)(es,{}),(0,a.jsx)(ea,{}),(0,a.jsx)(eo,{}),(0,a.jsx)(en,{}),(0,a.jsx)(U.u,{makeDefault:!0}),(0,a.jsx)(x.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxDistance:100,minDistance:3,enableDamping:!0,dampingFactor:.05}),Array.from(n.keys()).map(e=>(0,a.jsx)(ee,{userId:e,onClick:ec},e)),Array.from(i.keys()).map(e=>(0,a.jsx)(m,{constellationId:e,onStarClick:ed,onLineClick:em},e)),(0,a.jsx)(T,{}),(0,a.jsx)(L,{position:[5,2,-8],scale:.8}),(0,a.jsx)(O,{position:[-6,1,-6],scale:.9})]})})})}),(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 right-4 pointer-events-auto",children:(0,a.jsx)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 text-white border border-white/10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Cosmic Collaboration"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,a.jsxs)("span",{children:["Online: ",n.size]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Constellations: ",i.size]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:l&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-white/10 rounded-full px-3 py-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:el(l.zodiacSign,"like")}}),(0,a.jsx)("span",{className:"text-sm",children:l.username}),(0,a.jsx)("span",{className:"text-xs opacity-60",children:l.zodiacSign})]})})]})})}),(0,a.jsx)("div",{className:"absolute left-4 top-24 pointer-events-auto",children:(0,a.jsx)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-3 border border-white/10",children:(0,a.jsx)("div",{className:"space-y-2",children:["navigate","create","social","stream"].map(e=>(0,a.jsx)("button",{onClick:()=>H(e),className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all ".concat(X===e?"bg-blue-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"),title:e.charAt(0).toUpperCase()+e.slice(1),children:(0,a.jsxs)("span",{className:"text-lg",children:["navigate"===e&&"\uD83E\uDDED","create"===e&&"✨","social"===e&&"\uD83D\uDCAC","stream"===e&&"\uD83D\uDCF9"]})},e))})})}),(0,a.jsx)("div",{className:"absolute right-4 top-24 pointer-events-auto",children:(0,a.jsxs)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 border border-white/10 max-w-sm",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Cosmic Information"}),h&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:el(h.zodiacSign,"like")}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:h.name}),(0,a.jsx)("p",{className:"text-sm opacity-60",children:h.zodiacSign})]})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{children:["Status: ",(0,a.jsx)("span",{className:"text-green-400",children:"Online"})]}),(0,a.jsxs)("p",{children:["Element: ",(0,a.jsx)("span",{className:"text-blue-400",children:(e=>({aries:"Fire",taurus:"Earth",gemini:"Air",cancer:"Water",leo:"Fire",virgo:"Earth",libra:"Air",scorpio:"Water",sagittarius:"Fire",capricorn:"Earth",aquarius:"Air",pisces:"Water"})[null==e?void 0:e.toLowerCase()]||"Unknown")(h.zodiacSign)})]})]})]}),g&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:g.name}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{children:["Stars: ",(null==(e=g.stars)?void 0:e.length)||0]}),(0,a.jsxs)("p",{children:["Connections: ",(null==(t=g.connections)?void 0:t.length)||0]}),g.selectedStar&&(0,a.jsxs)("p",{className:"text-yellow-400",children:["Selected: ",g.selectedStar.name]})]})]}),!h&&!g&&(0,a.jsxs)("div",{className:"text-sm text-white/60 space-y-2",children:[(0,a.jsx)("p",{children:"Click on avatars or constellations to view details"}),(0,a.jsx)("p",{children:"Use mouse to navigate"}),(0,a.jsx)("p",{children:'Try voice commands: "look at north"'})]})]})}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4 right-4 pointer-events-auto",children:(0,a.jsx)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 border border-white/10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(R,{}),(0,a.jsx)(P,{}),(0,a.jsx)(D,{})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[W&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm",children:"Voice Active"})]}),(0,a.jsx)("button",{className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 rounded-xl text-sm font-medium transition-colors",children:"Create Post"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded-xl text-sm font-medium transition-colors",children:"Start Stream"})]})]})})}),l&&(0,a.jsx)("div",{className:"absolute top-24 left-20 pointer-events-auto",children:(0,a.jsxs)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 border border-white/10",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Your Zodiac Actions"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries({like:"Heart",comment:"Speak",share:"Connect",create:"Build"}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:el(l.zodiacSign,t)}}),(0,a.jsxs)("span",{className:"capitalize text-white/80",children:[t,":"]}),(0,a.jsx)("span",{className:"text-blue-300 font-medium",children:s})]},t)})})]})})]}),j&&(0,a.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,a.jsx)(R,{})}),(0,a.jsx)(P,{}),(0,a.jsx)(D,{}),(h||g)&&(0,a.jsx)("div",{className:"absolute bottom-4 left-4 z-10",children:(0,a.jsxs)("div",{className:"bg-black/80 text-white p-4 rounded-lg backdrop-blur-sm max-w-md",children:[h&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold mb-2",children:["User: ",h.name]}),(0,a.jsxs)("p",{className:"text-sm opacity-80",children:["ID: ",h.id]}),(0,a.jsx)("p",{className:"text-sm opacity-80",children:"Status: Online"}),avatars.has(h.id)&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm",children:"Avatar Position:"}),(0,a.jsx)("p",{className:"text-xs opacity-60",children:avatars.get(h.id).position.map(e=>e.toFixed(2)).join(", ")})]})]}),g&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold mb-2",children:["Constellation: ",g.name]}),(0,a.jsxs)("p",{className:"text-sm opacity-80",children:["Stars: ",(null==(s=g.stars)?void 0:s.length)||0]}),(0,a.jsxs)("p",{className:"text-sm opacity-80",children:["Connections: ",(null==(r=g.connections)?void 0:r.length)||0]}),g.selectedStar&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-sm",children:["Selected Star: ",g.selectedStar.name]}),(0,a.jsxs)("p",{className:"text-xs opacity-60",children:["Position: ",g.selectedStar.position.map(e=>e.toFixed(2)).join(", ")]})]})]}),(0,a.jsx)("button",{onClick:()=>{b(null),v(null)},className:"mt-3 px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-sm",children:"Close"})]})}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4 z-10",children:(0,a.jsxs)("div",{className:"bg-black/80 text-white p-3 rounded-lg backdrop-blur-sm text-sm max-w-xs",children:[(0,a.jsx)("p",{className:"font-bold mb-1",children:"Controls:"}),(0,a.jsx)("p",{children:"• Click avatars to select users"}),(0,a.jsx)("p",{children:"• Click constellation stars/lines"}),(0,a.jsx)("p",{children:"• Use mouse to orbit camera"}),(0,a.jsx)("p",{children:"• Scroll to zoom in/out"}),(0,a.jsx)("p",{children:'• Try voice commands: "look at [direction]"'})]})}),(0,a.jsx)(et,{}),(0,a.jsx)(k,{posts:[]}),N&&(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20",children:(0,a.jsxs)("div",{className:"bg-black/90 text-white p-6 rounded-lg backdrop-blur-sm border border-purple-500/30",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Create Cosmic Post"}),(0,a.jsx)(Z,{onPostCreated:()=>C(!1)}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded",children:"Close"})]})}),w&&(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20",children:(0,a.jsxs)("div",{className:"bg-black/90 text-white p-6 rounded-lg backdrop-blur-sm border border-green-500/30 max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Live Stream Controls"}),z?(0,a.jsxs)("div",{children:[(0,a.jsx)($,{streamId:z.id,isHost:!0}),(0,a.jsx)("button",{onClick:()=>E(null),className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded",children:"End Stream"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(Q,{onStreamCreated:e=>E(e)}),(0,a.jsx)("button",{onClick:()=>S(!1),className:"mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded",children:"Close"})]})]})}),(0,a.jsx)(J,{}),(0,a.jsx)(B.N9,{})]})};ei.propTypes={};let el=()=>(0,a.jsx)(_,{children:(0,a.jsx)(o.p,{children:(0,a.jsx)(ei,{})})})},4510:(e,t,s)=>{"use strict";s.d(t,{ND:()=>a});let a=(0,s(6958).UU)("https://dummy.supabase.co","dummy_key")},4563:(e,t,s)=>{"use strict";s.d(t,{T:()=>p,p:()=>u});var a=s(7876),o=s(1040),r=s(5062),n=s.n(r),i=s(4232),l=s(2692),c=s(5364);let d=(0,i.createContext)(),m=(e,t)=>{switch(t.type){case"SET_ONLINE_USERS":return{...e,onlineUsers:new Map(t.payload)};case"UPDATE_USER_POSITION":let s=new Map(e.onlineUsers);return s.set(t.payload.userId,t.payload),{...e,onlineUsers:s};case"ADD_CONSTELLATION":let a=new Map(e.constellations);return a.set(t.payload.id,t.payload),{...e,constellations:a};case"SET_CURRENT_USER":return{...e,currentUser:t.payload};case"SET_SOCKET":return{...e,socket:t.payload};case"SET_CONNECTED":return{...e,isConnected:t.payload};case"ADD_RECENT_ACTION":return{...e,recentActions:[t.payload,...e.recentActions.slice(0,9)]};default:return e}},u=e=>{let{children:t}=e,[s,r]=(0,i.useReducer)(m,{onlineUsers:new Map,constellations:new Map,currentUser:null,socket:null,isConnected:!1,recentActions:[]});(0,i.useEffect)(()=>{let e=(0,l.io)(c.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:5000");return e.on("connect",()=>{console.log("Connected to collaboration server"),r({type:"SET_CONNECTED",payload:!0}),e.emit("join_cosmic_collaboration",{user_id:localStorage.getItem("userId")||"anonymous"})}),e.on("disconnect",()=>{console.log("Disconnected from collaboration server"),r({type:"SET_CONNECTED",payload:!1})}),e.on("user_position_update",e=>{r({type:"UPDATE_USER_POSITION",payload:{userId:e.user_id,name:e.username,position:e.position,rotation:e.rotation}})}),e.on("constellation_created",e=>{r({type:"ADD_CONSTELLATION",payload:e.constellation})}),e.on("collaboration_state",e=>{if(e.online_users){let t=new Map;e.online_users.forEach(e=>{t.set(e.user_id,{userId:e.user_id,name:"User ".concat(e.user_id.slice(-4)),position:[e.x||0,e.y||0,e.z||0],rotation:e.rotation||0})}),r({type:"SET_ONLINE_USERS",payload:t})}if(e.constellations){let t=new Map;e.constellations.forEach(e=>{t.set(e.id,e)}),e.constellations.forEach(e=>{r({type:"ADD_CONSTELLATION",payload:e})})}}),e.on("cosmic_collaboration_joined",e=>{console.log("Joined cosmic collaboration:",e)}),e.on("action_notification",e=>{r({type:"ADD_RECENT_ACTION",payload:{id:Date.now(),userId:e.user_id,username:e.username,action:e.action,actionType:e.action_type,timestamp:e.timestamp}})}),r({type:"SET_SOCKET",payload:e}),()=>e.disconnect()},[]);let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(s.currentUser)try{await o.A.post("/api/v1/collaboration/position",{x:e[0],y:e[1],z:e[2],rotation:t},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})}catch(e){console.error("Failed to update position:",e)}},u=async e=>{try{return(await o.A.post("/api/v1/constellations",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(e){throw console.error("Failed to create constellation:",e),e}},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cosmos";try{return(await o.A.post("/api/v1/action",{action_type:e,room:t},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data}catch(e){throw console.error("Failed to trigger zodiac action:",e),e}};return(0,a.jsx)(d.Provider,{value:{...s,updateUserPosition:n,createConstellation:u,triggerZodiacAction:p,getUsersInRoom:()=>Array.from(s.onlineUsers.values()),getConstellations:()=>Array.from(s.constellations.values())},children:t})};u.propTypes={children:n().node.isRequired};let p=()=>{let e=(0,i.useContext)(d);if(!e)throw Error("useCollaboration must be used within CollaborationProvider");return e}},6298:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/collaborative-cosmos",function(){return s(1610)}])},7211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PostCreation:()=>n});var a=s(7876),o=s(4510),r=s(4232);function n(e){let{onPostCreated:t}=e,[s,n]=(0,r.useState)(""),[i,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(""),[x,f]=(0,r.useState)(!1),b=()=>{p.trim()&&!m.includes(p.trim())&&(u([...m,p.trim()]),h(""))},g=async e=>{if(e.preventDefault(),!s&&!i&&!c)return;if(f(!0),!o.ND){console.error("Supabase client not available"),f(!1);return}let{data:a,error:r}=await o.ND.auth.getSession();if(r||!a.session){console.error("No session found:",r),f(!1);return}let p=a.session,x=new FormData;x.append("content",s),i&&x.append("image",i),c&&x.append("video",c),m.length>0&&x.append("tags",JSON.stringify(m));try{if(!(await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/posts"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.access_token)},body:x})).ok)throw Error("Failed to create post");n(""),l(null),d(null),u([]),h(""),t()}catch(e){console.error("Error creating post:",e)}finally{f(!1)}};return(0,a.jsxs)("form",{onSubmit:g,className:"mb-8 parallax-layer cosmic-post-creation",children:[(0,a.jsx)("textarea",{value:s,onChange:e=>n(e.target.value),placeholder:"Share your cosmic thoughts...",className:"bg-black/50 border border-purple-500/30 rounded-lg p-3 text-white w-full max-w-xs cosmic-float-3d focus:outline-none focus:ring-2 focus:ring-purple-400",rows:4}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)("input",{type:"text",value:p,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),b())},placeholder:"Add zodiac tags (e.g., Aries, Taurus)...",className:"bg-black/50 border border-purple-500/30 rounded-lg px-3 py-2 text-white text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-purple-400"}),(0,a.jsx)("button",{type:"button",onClick:b,className:"bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded-lg text-sm font-semibold transition-colors",children:"Add"})]}),m.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:m.map(e=>(0,a.jsxs)("span",{className:"bg-purple-600/50 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{u(m.filter(t=>t!==e))},className:"hover:text-red-400",children:"\xd7"})]},e))})]}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-2",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 text-gray-400 hover:text-purple-400 cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return l((null==(t=e.target.files)?void 0:t[0])||null)},className:"hidden"}),(0,a.jsx)("span",{children:"\uD83D\uDCF7 Image"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 text-gray-400 hover:text-purple-400 cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:"video/mp4,video/webm",onChange:e=>{var t;return d((null==(t=e.target.files)?void 0:t[0])||null)},className:"hidden"}),(0,a.jsx)("span",{children:"\uD83C\uDFA5 Video"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"mt-4 bg-purple-500 text-white px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-110 hover:translateZ(10px) ".concat(x?"opacity-50 cursor-not-allowed":""),children:x?"Posting...":"\uD83C\uDF1F Post"})]})}},8225:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var a=s(7876),o=s(9070),r=s(4232);let n=e=>{let{children:t,enableDrag:s=!0,dragSpeed:n=.01,autoRotate:i=!0,autoRotateSpeed:l=.001}=e,c=(0,r.useRef)(null),{gl:d}=(0,o.D)(),[m,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)({x:0,y:0}),x=()=>{s&&(u(!1),d.domElement.style.cursor="grab")};return(0,o.F)(()=>{i&&!m&&c.current&&(c.current.rotation.y+=l)}),(0,a.jsx)("group",{ref:c,onPointerDown:e=>{e.stopPropagation(),s&&(u(!0),h({x:e.clientX,y:e.clientY}),d.domElement.style.cursor="grabbing")},onPointerMove:e=>{if(!m||!s||!c.current)return;let t=e.clientX-p.x,a=e.clientY-p.y;c.current.rotation.y+=t*n,c.current.rotation.x+=a*n,h({x:e.clientX,y:e.clientY})},onPointerUp:x,onPointerLeave:()=>{m&&x()},children:t})}}},e=>{e.O(0,[7391,5037,779,2909,1040,6958,6848,5095,2041,5003,3116,2704,636,6593,8792],()=>e(e.s=6298)),_N_E=e.O()}]);