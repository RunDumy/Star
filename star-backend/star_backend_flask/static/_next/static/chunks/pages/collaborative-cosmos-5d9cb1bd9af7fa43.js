(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2032],{84:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n(9070),o=n(4232),a=n(7876),i=function(e){var t=e.children,n=e.enableDrag,i=void 0===n||n,s=e.dragSpeed,c=void 0===s?.01:s,l=e.autoRotate,u=void 0===l||l,d=e.autoRotateSpeed,p=void 0===d?.001:d,f=(0,o.useRef)(null),m=(0,r.D)().gl,h=(0,o.useState)(!1),x=h[0],b=h[1],v=(0,o.useState)({x:0,y:0}),g=v[0],j=v[1],y=function(){i&&(b(!1),m.domElement.style.cursor="grab")};return(0,r.F)(function(){u&&!x&&f.current&&(f.current.rotation.y+=p)}),(0,a.jsx)("group",{ref:f,onPointerDown:function(e){e.stopPropagation(),i&&(b(!0),j({x:e.clientX,y:e.clientY}),m.domElement.style.cursor="grabbing")},onPointerMove:function(e){if(x&&i&&f.current){var t=e.clientX-g.x,n=e.clientY-g.y;f.current.rotation.y+=t*c,f.current.rotation.x+=n*c,j({x:e.clientX,y:e.clientY})}},onPointerUp:y,onPointerLeave:function(){x&&y()},children:t})}},5361:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n(3857),o=n(3081),a=n.n(o),i={auth:{getUser:function(){return(0,r.A)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:{user:null}});case 1:case"end":return e.stop()}},e)}))()},signOut:function(){return(0,r.A)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)}))()},onAuthStateChange:function(e){return{data:{subscription:null},unsubscribe:function(){}}}},from:function(e){return{select:function(e){return{eq:function(e,t){return{single:function(){return Promise.resolve({data:null,error:null})}}}}},insert:function(e){return Promise.resolve({data:null,error:null})},update:function(e){return{eq:function(e,t){return Promise.resolve({data:null,error:null})}}},delete:function(){return{eq:function(e,t){return Promise.resolve({data:null,error:null})}}}}},channel:function(e){return{on:function(e,t){return this},subscribe:function(e){return e&&e(),this},unsubscribe:function(){return Promise.resolve()}}},removeChannel:function(e){return Promise.resolve()}}},6298:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/collaborative-cosmos",function(){return n(8962)}])},7534:(e,t,n)=>{"use strict";n.d(t,{T:()=>v,p:()=>b});var r=n(3857),o=n(236),a=n(2969),i=n(3081),s=n.n(i),c=n(1040),l=n(4232),u=n(2692),d=n(7876),p=n(5364);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,l.createContext)(),x=function(e,t){switch(t.type){case"SET_ONLINE_USERS":return m(m({},e),{},{onlineUsers:new Map(t.payload)});case"UPDATE_USER_POSITION":var n=new Map(e.onlineUsers);return n.set(t.payload.userId,t.payload),m(m({},e),{},{onlineUsers:n});case"ADD_CONSTELLATION":var r=new Map(e.constellations);return r.set(t.payload.id,t.payload),m(m({},e),{},{constellations:r});case"SET_CURRENT_USER":return m(m({},e),{},{currentUser:t.payload});case"SET_SOCKET":return m(m({},e),{},{socket:t.payload});case"SET_CONNECTED":return m(m({},e),{},{isConnected:t.payload});case"ADD_RECENT_ACTION":return m(m({},e),{},{recentActions:[t.payload].concat((0,o.A)(e.recentActions.slice(0,9)))});default:return e}},b=function(e){var t,n,o,a=e.children,i=(0,l.useReducer)(x,{onlineUsers:new Map,constellations:new Map,currentUser:null,socket:null,isConnected:!1,recentActions:[]}),f=i[0],b=i[1];(0,l.useEffect)(function(){var e=(0,u.io)(p.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:5000");return e.on("connect",function(){console.log("Connected to collaboration server"),b({type:"SET_CONNECTED",payload:!0}),e.emit("join_cosmic_collaboration",{user_id:localStorage.getItem("userId")||"anonymous"})}),e.on("disconnect",function(){console.log("Disconnected from collaboration server"),b({type:"SET_CONNECTED",payload:!1})}),e.on("user_position_update",function(e){b({type:"UPDATE_USER_POSITION",payload:{userId:e.user_id,name:e.username,position:e.position,rotation:e.rotation}})}),e.on("constellation_created",function(e){b({type:"ADD_CONSTELLATION",payload:e.constellation})}),e.on("collaboration_state",function(e){if(e.online_users){var t=new Map;e.online_users.forEach(function(e){t.set(e.user_id,{userId:e.user_id,name:"User ".concat(e.user_id.slice(-4)),position:[e.x||0,e.y||0,e.z||0],rotation:e.rotation||0})}),b({type:"SET_ONLINE_USERS",payload:t})}if(e.constellations){var n=new Map;e.constellations.forEach(function(e){n.set(e.id,e)}),e.constellations.forEach(function(e){b({type:"ADD_CONSTELLATION",payload:e})})}}),e.on("cosmic_collaboration_joined",function(e){console.log("Joined cosmic collaboration:",e)}),e.on("action_notification",function(e){b({type:"ADD_RECENT_ACTION",payload:{id:Date.now(),userId:e.user_id,username:e.username,action:e.action,actionType:e.action_type,timestamp:e.timestamp}})}),b({type:"SET_SOCKET",payload:e}),function(){return e.disconnect()}},[]);var v=(t=(0,r.A)(s().mark(function e(t){var n,r=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:0,f.currentUser){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,c.A.post("/api/v1/collaboration/position",{x:t[0],y:t[1],z:t[2],rotation:n},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Failed to update position:",e.t0);case 11:case"end":return e.stop()}},e,null,[[3,8]])})),function(e){return t.apply(this,arguments)}),g=(n=(0,r.A)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.A.post("/api/v1/constellations",t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Failed to create constellation:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return n.apply(this,arguments)}),j=(o=(0,r.A)(s().mark(function e(t){var n,r,o=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"cosmos",e.prev=1,e.next=4,c.A.post("/api/v1/action",{action_type:t,room:n},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Failed to trigger zodiac action:",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return o.apply(this,arguments)});return(0,d.jsx)(h.Provider,{value:m(m({},f),{},{updateUserPosition:v,createConstellation:g,triggerZodiacAction:j,getUsersInRoom:function(){return Array.from(f.onlineUsers.values())},getConstellations:function(){return Array.from(f.constellations.values())}}),children:a})},v=function(){var e=(0,l.useContext)(h);if(!e)throw Error("useCollaboration must be used within CollaborationProvider");return e}},8962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eS});var r=n(3857),o=n(5794),a=n(2969),i=n(3081),s=n.n(i),c=n(8133),l=n(236),u=n(9860),d=n(7534),p=n(3191),f=n(9070),m=n(4232),h=n(4796),x=n(7876),b=["constellationId","onStarClick","onLineClick","interactive","showLabels"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t=e.constellationId,n=e.onStarClick,r=e.onLineClick,a=e.interactive,i=void 0===a||a,s=e.showLabels,v=void 0===s||s,j=(0,u.A)(e,b),y=(0,m.useRef)(),w=(0,m.useState)(null),N=w[0],C=w[1],k=(0,m.useState)(null),S=k[0],P=k[1],O=(0,d.T)().constellations.get(t);if(!O)return null;(0,f.F)(function(e){if(y.current){var t=.02*Math.sin(.5*e.clock.elapsedTime)+1;y.current.scale.setScalar(t)}});var z=function(e,t,r){r.stopPropagation(),i&&n&&n(e,t,O,r)},E=function(e,t,n){n.stopPropagation(),i&&r&&r(e,t,O,n)};return(0,x.jsxs)("group",g(g({ref:y},j),{},{children:[O.stars.map(function(e,t){var n=N===t;return(0,x.jsxs)("group",{position:e.position,children:[(0,x.jsxs)("mesh",{onClick:function(n){return z(e,t,n)},onPointerOver:function(){return i&&C(t)},onPointerOut:function(){return i&&C(null)},castShadow:!0,receiveShadow:!0,children:[(0,x.jsx)("sphereGeometry",{args:[e.size,16,16]}),(0,x.jsx)("meshStandardMaterial",{color:e.color,emissive:e.color,emissiveIntensity:n?.4:.2,roughness:.3,metalness:.1})]}),v&&(0,x.jsx)(p.E,{position:[0,e.size+.3,0],fontSize:.15,color:e.color,anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:"#000000",children:e.name}),n&&(0,x.jsxs)("mesh",{position:[0,-e.size-.2,0],children:[(0,x.jsx)("ringGeometry",{args:[1.5*e.size,1.8*e.size,16]}),(0,x.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:.6,side:h.DoubleSide})]})]},e.id)}),O.connections.map(function(e,t){var n=(0,o.A)(e,2),r=n[0],a=n[1],s=O.stars[r],u=O.stars[a];if(!s||!u)return null;var d=(0,c.A)(h.Vector3,(0,l.A)(s.position)),p=(0,c.A)(h.Vector3,(0,l.A)(u.position)),f=d.distanceTo(p),m=p.clone().sub(d).normalize(),b=d.clone().add(m.clone().multiplyScalar(.5*f)),v=new h.Quaternion;v.setFromUnitVectors(new h.Vector3(0,0,1),m);var g=S===t;return(0,x.jsxs)("group",{children:[(0,x.jsxs)("mesh",{position:b,quaternion:v,onClick:function(n){return E(e,t,n)},onPointerOver:function(){return i&&P(t)},onPointerOut:function(){return i&&P(null)},children:[(0,x.jsx)("cylinderGeometry",{args:[.01,.01,f,8]}),(0,x.jsx)("meshStandardMaterial",{color:O.lineColor||"#ffffff",emissive:O.lineColor||"#ffffff",emissiveIntensity:g?.3:.1,transparent:!0,opacity:.8})]}),(0,x.jsxs)("mesh",{position:b,quaternion:v,children:[(0,x.jsx)("cylinderGeometry",{args:[.02,.02,f,8]}),(0,x.jsx)("meshBasicMaterial",{color:O.lineColor||"#ffffff",transparent:!0,opacity:g?.2:.1})]})]},"".concat(r,"-").concat(a))}),v&&O.name&&(0,x.jsx)(p.E,{position:[0,2,0],fontSize:.3,color:"#ffffff",anchorX:"center",anchorY:"middle",outlineWidth:.02,outlineColor:"#000000",children:O.name})]}))},y=n(9196),w=n(3335),N=n(7386),C=n(4516),k=n(5302),S=n(5784),P=n(6848),O=n(8477),z=n(84),E=function(e){var t=e.posts,n=(0,m.useState)(null),r=n[0],o=n[1];return(0,x.jsxs)("div",{className:"w-full h-screen relative",children:[(0,x.jsxs)(k.Hl,{camera:{position:[0,0,15],fov:60},children:[(0,x.jsx)("color",{attach:"background",args:["#0a0a1f"]}),(0,x.jsx)(N.A,{radius:100,depth:50,count:5e3,factor:4}),(0,x.jsx)("ambientLight",{intensity:.3}),(0,x.jsx)("pointLight",{position:[10,10,10],intensity:1.5}),(0,x.jsx)(z.m,{children:(0,x.jsx)(D,{posts:void 0===t?[]:t,onPostSelect:o})}),(0,x.jsx)(C.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:50})]}),r&&(0,x.jsx)(T,{post:r,onClose:function(){return o(null)}})]})},D=function(e){var t=e.posts,n=e.onPostSelect,r=(0,m.useMemo)(function(){return t.map(function(e,t){var n=8+12*Math.random(),r=Math.random()*Math.PI*2,o=Math.acos(2*Math.random()-1);return[n*Math.sin(o)*Math.cos(r),n*Math.sin(o)*Math.sin(r),n*Math.cos(o)]})},[t.length]);return(0,x.jsx)(x.Fragment,{children:r.map(function(e,r){return(0,x.jsx)(A,{post:t[r],position:e,onClick:function(){return n(t[r])},index:r},t[r].id)})})},A=function(e){var t=e.post,n=e.position,r=e.onClick,o=e.index,a=(0,m.useRef)(null),i=(0,m.useState)(!1),s=i[0],c=i[1],l=(0,w.zh)({scale:s?1.2:1,rotationY:s?Math.PI:0,config:{mass:1,tension:280,friction:60}}),u=l.scale,d=l.rotationY;(0,f.F)(function(e){a.current&&(a.current.rotation.y+=.002,a.current.position.y=n[1]+.3*Math.sin(e.clock.elapsedTime+o))});var h={joyful:"#ffd700",contemplative:"#4a90e2",passionate:"#ff6b6b",peaceful:"#9b59b6",mysterious:"#2ecc71"}[t.emotionalTone]||"#ffffff";return(0,x.jsxs)(w.CS.mesh,{ref:a,position:n,scale:u,"rotation-y":d,onClick:r,onPointerOver:function(){return c(!0)},onPointerOut:function(){return c(!1)},children:[(0,x.jsx)("icosahedronGeometry",{args:[1,1]}),(0,x.jsx)("meshStandardMaterial",{color:h,emissive:h,emissiveIntensity:.3,roughness:.7,metalness:.3}),(0,x.jsx)(p.E,{position:[0,0,1.2],fontSize:.3,color:"#ffffff",anchorX:"center",anchorY:"middle",children:t.zodiacEmoji})]})},T=function(e){var t=e.post,n=e.onClose;return(0,O.createPortal)((0,x.jsx)(S.N,{children:(0,x.jsx)(P.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:(0,x.jsxs)(P.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border border-cyan-500/30 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:function(e){return e.stopPropagation()},children:[(0,x.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"text-2xl",children:t.zodiacEmoji}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-white font-semibold",children:t.author}),(0,x.jsx)("p",{className:"text-cyan-200 text-sm",children:t.timestamp})]})]}),(0,x.jsx)("button",{onClick:n,className:"text-cyan-200 hover:text-white transition-colors",children:"✕"})]}),(0,x.jsx)("div",{className:"text-white mb-4 leading-relaxed",children:t.content}),(0,x.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,x.jsxs)("div",{className:"flex space-x-4 text-cyan-200",children:[(0,x.jsx)("button",{className:"hover:text-white transition-colors",children:"\uD83D\uDCAB Resonate"}),(0,x.jsx)("button",{className:"hover:text-white transition-colors",children:"\uD83D\uDD17 Thread"}),(0,x.jsx)("button",{className:"hover:text-white transition-colors",children:"⭐ Save"})]}),(0,x.jsx)("div",{className:"text-purple-300",children:t.emotionalTone})]})]})})}),document.body)};function M(){var e,t=(0,m.useState)([]),n=t[0],o=t[1],a=(e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000","/api/v1/posts"));case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:o(e.sent.posts||[]);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching posts:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(){return e.apply(this,arguments)});return(0,m.useEffect)(function(){a()},[]),(0,x.jsxs)("div",{className:"relative w-full h-screen",children:[(0,x.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,x.jsx)(y.PostCreation,{onPostCreated:function(){a()}})}),(0,x.jsx)(E,{posts:n})]})}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gazeThreshold,n=void 0===t?1e3:t,r=e.gazeRadius,o=void 0===r?50:r,a=e.updateInterval,i=void 0===a?100:a,s=(0,m.useState)({x:0,y:0}),c=s[0],l=s[1],u=(0,m.useState)(null),d=u[0],p=u[1],f=(0,m.useState)(!1),h=f[0],x=f[1],b=(0,m.useRef)(null),v=(0,m.useRef)(null),g=(0,m.useRef)(Date.now()),j=(0,m.useCallback)(function(e){var t=Date.now();if(t-g.current>=i){var r={x:e.clientX,y:e.clientY};l(r),g.current=t,p(function(e){return e?Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))>o?(x(!1),b.current=null,v.current&&(clearTimeout(v.current),v.current=null),null):e:(b.current=t,v.current=setTimeout(function(){x(!0)},n),r)})}},[n,o,i]),y=(0,m.useCallback)(function(){x(!1),p(null),b.current=null,v.current&&(clearTimeout(v.current),v.current=null)},[]);(0,m.useEffect)(function(){return document.addEventListener("mousemove",j),document.addEventListener("mouseleave",y),function(){document.removeEventListener("mousemove",j),document.removeEventListener("mouseleave",y),v.current&&clearTimeout(v.current)}},[j,y]);var w=(0,m.useMemo)(function(){return b.current&&d?Math.min((Date.now()-b.current)/n,1):0},[d,n]),N=(0,m.useMemo)(function(){if(!d)return{x:0,y:0};var e=window.innerWidth/2,t=window.innerHeight/2;return{x:(d.x-e)/e,y:(d.y-t)/t}},[d]);return{mousePosition:c,gazeTarget:d,isGazing:h,gazeProgress:w,gazeDirection:N,resetGaze:function(){x(!1),p(null),b.current=null,v.current&&(clearTimeout(v.current),v.current=null)}}};function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.continuous,n=void 0===t||t,r=e.interimResults,a=void 0!==r&&r,i=e.lang,s=void 0===i?"en-US":i,c=e.commands,u=void 0===c?{}:c,d=e.onCommandRecognized,p=e.onError,f=(0,m.useState)(!1),h=f[0],x=f[1],b=(0,m.useState)(""),v=b[0],g=b[1],j=(0,m.useState)(!1),y=j[0],w=j[1],N=(0,m.useState)(null),C=N[0],k=N[1],S=(0,m.useRef)(null),P=(0,m.useRef)([]);(0,m.useEffect)(function(){var e=window.SpeechRecognition||window.webkitSpeechRecognition;if(w(!!e),e){S.current=new e;var t=S.current;t.continuous=n,t.interimResults=a,t.lang=s,t.onstart=function(){x(!0)},t.onend=function(){x(!1)},t.onresult=function(e){for(var t="",n=e.resultIndex;n<e.results.length;n++){var r=e.results[n];r.isFinal&&(t+=r[0].transcript)}t&&(g(t),O(t.trim().toLowerCase()))},t.onerror=function(e){console.error("Speech recognition error:",e.error),x(!1),p&&p(e.error)}}return function(){S.current&&S.current.stop()}},[n,a,s,p]);var O=(0,m.useCallback)(function(e){var t=e.trim().toLowerCase(),n=z(t);if(n)return void E(n.command,t,1);var r=D(t,Object.keys(u));r.length>0&&E(r[0],t,.8)},[u,d]),z=(0,m.useCallback)(function(e){for(var t=0,n=Object.entries(u);t<n.length;t++){var r=(0,o.A)(n[t],1)[0];if(e.includes(r.toLowerCase()))return{command:r}}return null},[u]),E=(0,m.useCallback)(function(e,t,n){var r={command:e,transcript:t,timestamp:Date.now(),confidence:n,fuzzy:n<1};k(r),P.current.push(r),P.current.length>10&&P.current.shift(),d&&d(r);var o=u[e];"function"==typeof o&&o(r)},[u,d]),D=function(e,t){var n,r=[],o=_(t);try{for(o.s();!(n=o.n()).done;){var a,i=n.value,s=i.toLowerCase().split(" "),c=e.split(" "),l=0,u=_(c);try{for(u.s();!(a=u.n()).done;){var d,p=a.value,f=_(s);try{for(f.s();!(d=f.n()).done;){var m=d.value;if(m.includes(p)||p.includes(m)){l++;break}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){u.e(e)}finally{u.f()}l>0&&r.push({command:i,score:l/Math.max(s.length,c.length)})}}catch(e){o.e(e)}finally{o.f()}return r.sort(function(e,t){return t.score-e.score}).map(function(e){return e.command})},A=(0,m.useCallback)(function(){if(S.current&&!h)try{S.current.start()}catch(e){console.error("Failed to start speech recognition:",e),p&&p("Failed to start recognition")}},[h,p]),T=(0,m.useCallback)(function(){S.current&&h&&S.current.stop()},[h]);return{isListening:h,transcript:v,isSupported:y,lastCommand:C,startListening:A,stopListening:T,clearTranscript:(0,m.useCallback)(function(){g("")},[]),getCommandHistory:(0,m.useCallback)(function(){return(0,l.A)(P.current)},[])}},L=n(5003);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=function(e){var t,n=e.children,r=e.onNavigate,a=e.onCommand,i=e.gazeOptions,s=e.voiceOptions,c=void 0===s?{}:s,l=e.className,u=e.showDebug,d=(0,m.useState)("gaze"),p=d[0],f=d[1],h=(0,m.useState)(!1),b=h[0],v=h[1],g=I(G({},void 0===i?{}:i)),j=R(G(G({},c),{},{commands:G(G({},{"start navigation":function(){return v(!0)},"stop navigation":function(){return v(!1)},"gaze mode":function(){return f("gaze")},"voice mode":function(){return f("voice")},"combined mode":function(){return f("combined")},"go up":function(e){return y("up",e)},"go down":function(e){return y("down",e)},"go left":function(e){return y("left",e)},"go right":function(e){return y("right",e)},"zoom in":function(e){return y("zoomIn",e)},"zoom out":function(e){return y("zoomOut",e)},center:function(e){return y("center",e)},next:function(e){return y("next",e)},previous:function(e){return y("previous",e)},select:function(e){return y("select",e)}}),c.commands),onCommandRecognized:function(e){a&&a(e)}})),y=(0,m.useCallback)(function(e,t){if(b){var n={type:p,direction:e,source:t.fuzzy?"voice-fuzzy":"voice-exact",timestamp:t.timestamp,confidence:t.confidence,gazePosition:g.gazeTarget};r&&r(n)}},[b,p,r,g.gazeTarget]),w=(0,L.useGesture)({onDrag:function(e){var t=(0,o.A)(e.movement,2),n=t[0],a=t[1],i=e.velocity;if(b&&"voice"!==p){var s=Math.abs(n),c=Math.abs(a);if(s>50||c>50){s>c?(l=n>0?"right":"left",u=Math.min(s/200,1)):(l=a>0?"down":"up",u=Math.min(c/200,1));var l,u,d={type:"gesture",direction:l,source:"gesture-drag",timestamp:Date.now(),confidence:u,velocity:i};r&&r(d)}}},onPinch:function(e){var t=(0,o.A)(e.offset,1)[0];if(b&&"voice"!==p){var n={type:"gesture",direction:t>1?"zoomIn":"zoomOut",source:"gesture-pinch",timestamp:Date.now(),confidence:Math.min(Math.abs(t-1),1),scale:t};r&&r(n)}},onWheel:function(e){var t=(0,o.A)(e.movement,2)[1];if(b&&"voice"!==p){var n={type:"gesture",direction:t>0?"zoomOut":"zoomIn",source:"gesture-wheel",timestamp:Date.now(),confidence:Math.min(Math.abs(t)/100,1),delta:t};r&&r(n)}}}),N=(0,m.useCallback)(function(e){if(!e)return null;var t=e.x,n=e.y;if(Math.abs(t)>Math.abs(n)){if(t>.3)return"right";if(t<-.3)return"left"}else{if(n>.3)return"down";if(n<-.3)return"up"}return null},[]);return(0,m.useEffect)(function(){if(b&&"voice"!==p){var e=N(g.gazeDirection);if(g.isGazing&&e){var t={type:"gaze",direction:e,source:"gaze",timestamp:Date.now(),confidence:g.gazeProgress,gazePosition:g.gazeTarget};r&&r(t)}}},[g.isGazing,g.gazeDirection,g.gazeProgress,g.gazeTarget,b,p,r,N]),(0,m.useEffect)(function(){b&&("voice"===p||"combined"===p)?j.startListening():j.stopListening()},[b,p,j]),(0,x.jsxs)("div",G(G({className:"gaze-voice-navigator ".concat(void 0===l?"":l)},w()),{},{children:[(0,x.jsxs)("div",{className:"navigation-controls",style:{position:"fixed",top:20,right:20,zIndex:1e3},children:[(0,x.jsx)("button",{onClick:function(){return v(!b)},className:"nav-toggle ".concat(b?"active":""),style:{padding:"8px 16px",margin:"4px",border:"1px solid #ccc",borderRadius:"4px",background:b?"#4CAF50":"#f5f5f5",color:b?"white":"black",cursor:"pointer"},children:b?"Stop Navigation":"Start Navigation"}),b&&(0,x.jsxs)("div",{className:"mode-controls",children:[(0,x.jsx)("button",{onClick:function(){return f("gaze")},className:"gaze"===p?"active":"",style:{padding:"4px 8px",margin:"2px",border:"1px solid #ccc",borderRadius:"4px",background:"gaze"===p?"#2196F3":"#f5f5f5",color:"gaze"===p?"white":"black",cursor:"pointer",fontSize:"12px"},children:"Gaze"}),(0,x.jsx)("button",{onClick:function(){return f("voice")},className:"voice"===p?"active":"",style:{padding:"4px 8px",margin:"2px",border:"1px solid #ccc",borderRadius:"4px",background:"voice"===p?"#2196F3":"#f5f5f5",color:"voice"===p?"white":"black",cursor:"pointer",fontSize:"12px"},children:"Voice"}),(0,x.jsx)("button",{onClick:function(){return f("combined")},className:"combined"===p?"active":"",style:{padding:"4px 8px",margin:"2px",border:"1px solid #ccc",borderRadius:"4px",background:"combined"===p?"#2196F3":"#f5f5f5",color:"combined"===p?"white":"black",cursor:"pointer",fontSize:"12px"},children:"Combined"})]})]}),void 0!==u&&u&&b&&(0,x.jsxs)("div",{className:"debug-info",style:{position:"fixed",bottom:20,left:20,background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"10px",borderRadius:"4px",fontSize:"12px",maxWidth:"300px",zIndex:1e3},children:[(0,x.jsxs)("div",{children:["Mode: ",p]}),(0,x.jsxs)("div",{children:["Gaze: ",g.isGazing?"Active":"Inactive"]}),(0,x.jsxs)("div",{children:["Voice: ",j.isListening?"Listening":"Inactive"]}),(0,x.jsxs)("div",{children:["Transcript: ",j.transcript||"None"]}),(0,x.jsxs)("div",{children:["Last Command: ",(null==(t=j.lastCommand)?void 0:t.command)||"None"]}),g.gazeTarget&&(0,x.jsxs)("div",{children:["Gaze Position: (",g.gazeTarget.x.toFixed(0),", ",g.gazeTarget.y.toFixed(0),")"]})]}),b&&("gaze"===p||"combined"===p)&&g.gazeTarget&&(0,x.jsx)("div",{className:"gaze-indicator",style:{position:"fixed",left:g.gazeTarget.x-25,top:g.gazeTarget.y-25,width:"50px",height:"50px",border:"2px solid ".concat(g.isGazing?"#4CAF50":"#FFC107"),borderRadius:"50%",pointerEvents:"none",zIndex:999,opacity:.7,transition:"border-color 0.2s ease"},children:(0,x.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:"radial-gradient(circle, transparent 40%, ".concat(g.isGazing?"#4CAF50":"#FFC107"," 70%)"),animation:g.isGazing?"pulse 1s infinite":"none"}})}),n]}))},X=function(){var e,t,n,r,o=(0,m.useState)(!1),a=o[0],i=o[1],s=(0,d.T)(),c=s.currentUser,l=s.updateAvatar,u=[{name:"Cosmic Blue",color:"#4a90e2",description:"Deep ocean serenity"},{name:"Nebula Purple",color:"#9b59b6",description:"Mystical energy"},{name:"Solar Gold",color:"#f1c40f",description:"Radiant warmth"},{name:"Void Black",color:"#2c3e50",description:"Infinite depth"},{name:"Plasma Red",color:"#e74c3c",description:"Fiery passion"},{name:"Crystal White",color:"#ecf0f1",description:"Pure light"},{name:"Emerald Green",color:"#27ae60",description:"Life essence"},{name:"Amber Orange",color:"#e67e22",description:"Ancient wisdom"}],p=[{value:"sphere",label:"\uD83E\uDE90 Sphere",description:"Smooth planetary form"},{value:"cube",label:"⬜ Cube",description:"Geometric crystal"},{value:"pyramid",label:"\uD83D\uDD3A Pyramid",description:"Ancient monument"},{value:"octahedron",label:"\uD83D\uDC8E Octahedron",description:"Eight-faced crystal"},{value:"tetrahedron",label:"\uD83D\uDD36 Tetrahedron",description:"Four-faced gem"},{value:"dodecahedron",label:"⭐ Dodecahedron",description:"Twelve-faced star"}],f=[{value:.3,label:"Mini",description:"Compact presence"},{value:.5,label:"Standard",description:"Balanced form"},{value:.8,label:"Large",description:"Commanding presence"},{value:1.2,label:"Giant",description:"Cosmic scale"}],h=function(e){l({color:e})},b=function(e){l({shape:e})},v=function(e){l({size:e})};return c?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.P.button,{className:"fixed top-16 right-4 bg-black/50 backdrop-blur-sm border border-purple-500/30 text-purple-200 px-4 py-2 rounded-full z-50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:function(){return i(!0)},children:"\uD83D\uDC64 Avatar"}),(0,x.jsx)(S.N,{children:a&&(0,x.jsx)(P.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:function(){return i(!1)},children:(0,x.jsxs)(P.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border border-purple-500/30 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:function(e){return e.stopPropagation()},children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-purple-200",children:"Customize Your Avatar"}),(0,x.jsx)("button",{onClick:function(){return i(!1)},className:"text-purple-400 hover:text-purple-200 text-2xl",children:"✕"})]}),(0,x.jsxs)("div",{className:"mb-6 p-4 bg-black/30 rounded-lg",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-2",children:"Current Avatar"}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsx)("div",{className:"text-4xl",children:(null==(e=p.find(function(e){var t;return e.value===(null==(t=c.avatar)?void 0:t.shape)}))?void 0:e.label)||"\uD83E\uDE90"}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("div",{className:"text-sm text-purple-300",children:["Shape: ",(null==(t=p.find(function(e){var t;return e.value===(null==(t=c.avatar)?void 0:t.shape)}))?void 0:t.description)||"Sphere"]}),(0,x.jsxs)("div",{className:"text-sm text-purple-300",children:["Color: ",(null==(n=u.find(function(e){var t;return e.color===(null==(t=c.avatar)?void 0:t.color)}))?void 0:n.name)||"Cosmic Blue"]}),(0,x.jsxs)("div",{className:"text-sm text-purple-300",children:["Size: ",(null==(r=f.find(function(e){var t;return e.value===(null==(t=c.avatar)?void 0:t.size)}))?void 0:r.label)||"Standard"]})]})]})]}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsx)(P.P.button,{onClick:function(){l({color:u[Math.floor(Math.random()*u.length)].color,shape:p[Math.floor(Math.random()*p.length)].value,size:f[Math.floor(Math.random()*f.length)].value})},className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-6 rounded-lg font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"\uD83C\uDFB2 Randomize Avatar"})}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-3",children:"Choose Your Color"}),(0,x.jsx)("div",{className:"grid grid-cols-4 gap-3",children:u.map(function(e){var t;return(0,x.jsxs)(P.P.button,{onClick:function(){return h(e.color)},className:"p-3 rounded-lg border-2 transition-all ".concat((null==(t=c.avatar)?void 0:t.color)===e.color?"border-purple-400 bg-purple-500/20":"border-purple-500/30 hover:border-purple-400"),whileHover:{scale:1.05},whileTap:{scale:.95},title:e.description,children:[(0,x.jsx)("div",{className:"w-8 h-8 rounded-full mx-auto mb-2",style:{backgroundColor:e.color}}),(0,x.jsx)("div",{className:"text-xs text-center text-purple-200",children:e.name})]},e.color)})})]}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-3",children:"Choose Your Shape"}),(0,x.jsx)("div",{className:"grid grid-cols-2 gap-3",children:p.map(function(e){var t;return(0,x.jsxs)(P.P.button,{onClick:function(){return b(e.value)},className:"p-4 rounded-lg border-2 transition-all ".concat((null==(t=c.avatar)?void 0:t.shape)===e.value?"border-purple-400 bg-purple-500/20":"border-purple-500/30 hover:border-purple-400"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,x.jsx)("div",{className:"text-3xl mb-2",children:e.label}),(0,x.jsx)("div",{className:"text-sm text-purple-200 font-medium",children:e.description})]},e.value)})})]}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-purple-200 mb-3",children:"Choose Your Size"}),(0,x.jsx)("div",{className:"grid grid-cols-2 gap-3",children:f.map(function(e){var t;return(0,x.jsxs)(P.P.button,{onClick:function(){return v(e.value)},className:"p-4 rounded-lg border-2 transition-all ".concat((null==(t=c.avatar)?void 0:t.size)===e.value?"border-purple-400 bg-purple-500/20":"border-purple-500/30 hover:border-purple-400"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,x.jsxs)("div",{className:"text-2xl mb-2",children:[.3===e.value&&"\uD83D\uDD0D",.5===e.value&&"⚖️",.8===e.value&&"\uD83D\uDCCF",1.2===e.value&&"\uD83C\uDF1F"]}),(0,x.jsx)("div",{className:"text-sm text-purple-200 font-medium",children:e.label}),(0,x.jsx)("div",{className:"text-xs text-purple-300",children:e.description})]},e.value)})})]}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)(P.P.button,{onClick:function(){return i(!1)},className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-6 rounded-lg font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})})]})})})]}):null};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(){var e=(0,m.useState)(!1),t=e[0],n=e[1],r=(0,m.useState)(null),i=r[0],s=r[1],c=(0,m.useState)(""),u=c[0],p=c[1],f=(0,m.useState)(null),h=f[0],b=f[1],v=(0,m.useState)(null),g=v[0],j=v[1],y=(0,d.T)(),w=y.constellations,N=y.createConstellation,C=y.updateConstellation,k=y.deleteConstellation,O=y.currentUser,z=[{name:"Golden",color:"#ffd700"},{name:"Blue",color:"#4a90e2"},{name:"Red",color:"#e74c3c"},{name:"Green",color:"#27ae60"},{name:"Purple",color:"#9b59b6"},{name:"White",color:"#ecf0f1"},{name:"Orange",color:"#e67e22"},{name:"Pink",color:"#e91e63"}],E=(0,m.useCallback)(function(){var e={name:"Constellation ".concat(w.size+1),stars:[],connections:[],lineColor:"#ffffff",theme:"default",creatorId:null==O?void 0:O.id,isActive:!0};N(e),s(e)},[w.size,N,O]),D=(0,m.useCallback)(function(){if(i&&u.trim()){var e={id:"star-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:u.trim(),position:[(Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10],color:z[Math.floor(Math.random()*z.length)].color,size:.1+.1*Math.random()},t=B(B({},i),{},{stars:[].concat((0,l.A)(i.stars),[e])});C(t),s(t),p("")}},[i,u,C]),A=(0,m.useCallback)(function(e,t){if(i){var n=i.stars.map(function(n){return n.id===e?B(B({},n),t):n}),r=B(B({},i),{},{stars:n});C(r),s(r)}},[i,C]),T=(0,m.useCallback)(function(e){if(i){var t=i.stars.filter(function(t){return t.id!==e}),n=i.connections.filter(function(t){var n=(0,o.A)(t,2),r=n[0],a=n[1],s=i.stars.findIndex(function(t){return t.id===e}),c=i.stars.findIndex(function(t){return t.id===e});return r!==s&&a!==c}),r=B(B({},i),{},{stars:t,connections:n});C(r),s(r),b(null)}},[i,C]),M=(0,m.useCallback)(function(e){if(i){var t=i.connections.filter(function(t,n){return n!==e}),n=B(B({},i),{},{connections:t});C(n),s(n),j(null)}},[i,C]),I=(0,m.useCallback)(function(e,t){if(i){var n=B(B({},i),{},(0,a.A)({},e,t));C(n),s(n)}},[i,C]),_=(0,m.useCallback)(function(e){var t="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(B(B({},e),{},{exportedAt:new Date().toISOString(),exportedBy:(null==O?void 0:O.name)||"Anonymous",version:"1.0"}),null,2)),n="".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_constellation.json"),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",n),r.click()},[O]),F=(0,m.useCallback)(function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){try{var t=JSON.parse(e.target.result);if(!t.name||!t.stars||!t.connections)return void alert("Invalid constellation file format");var n=B(B({},t),{},{id:"constellation-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(t.name," (Imported)"),creatorId:null==O?void 0:O.id,importedAt:new Date().toISOString(),isActive:!0});N(n),alert("Successfully imported constellation: ".concat(n.name))}catch(e){alert("Error importing constellation: "+e.message)}},n.readAsText(t)}},[N,O]),R=(0,m.useCallback)(function(e){var t={title:e.name,text:"Check out this constellation: ".concat(e.name),url:"".concat(window.location.origin,"/collaborative-cosmos?constellation=").concat(encodeURIComponent(JSON.stringify(e)))};navigator.share?navigator.share(t):navigator.clipboard.writeText(t.url).then(function(){alert("Constellation link copied to clipboard!")})},[]),L=(0,m.useCallback)(function(e){var t=B(B({},e),{},{id:"constellation-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(e.name," (Copy)"),creatorId:null==O?void 0:O.id,createdAt:new Date().toISOString()});N(t),s(t)},[N,O]);return O?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.P.button,{className:"fixed top-20 right-4 bg-black/50 backdrop-blur-sm border border-green-500/30 text-green-200 px-4 py-2 rounded-full z-50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:function(){return n(!0)},children:"✨ Constellations"}),(0,x.jsx)(S.N,{children:t&&(0,x.jsx)(P.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:function(){return n(!1)},children:(0,x.jsxs)(P.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-green-900/90 to-blue-900/90 border border-green-500/30 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:function(e){return e.stopPropagation()},children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-green-200",children:"Constellation Editor"}),(0,x.jsx)("button",{onClick:function(){return n(!1)},className:"text-green-400 hover:text-green-200 text-2xl",children:"✕"})]}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-green-200",children:"Your Constellations"}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)(P.P.button,{onClick:E,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"+ New Constellation"}),(0,x.jsx)(P.P.button,{onClick:function(){return document.getElementById("constellation-import").click()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"\uD83D\uDCC1 Import"}),(0,x.jsx)("input",{id:"constellation-import",type:"file",accept:".json",onChange:F,className:"hidden"})]})]}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Array.from(w.values()).map(function(e){return(0,x.jsx)(P.P.div,{className:"p-4 rounded-lg border-2 transition-all ".concat((null==i?void 0:i.id)===e.id?"border-green-400 bg-green-500/20":"border-green-500/30 hover:border-green-400"),whileHover:{scale:1.02},children:(0,x.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,x.jsxs)(P.P.button,{className:"flex-1 text-left p-2 -m-2 rounded hover:bg-green-500/10 transition-colors",onClick:function(){return s(e)},whileHover:{scale:1.01},children:[(0,x.jsx)("h4",{className:"font-semibold text-green-200",children:e.name}),(0,x.jsxs)("p",{className:"text-sm text-green-300",children:[e.stars.length," stars, ",e.connections.length," connections"]})]}),(0,x.jsxs)("div",{className:"flex space-x-1 ml-2",children:[(0,x.jsx)(P.P.button,{onClick:function(t){t.stopPropagation(),L(e)},className:"text-green-400 hover:text-green-200 text-sm p-1 rounded hover:bg-green-500/20 transition-colors",whileHover:{scale:1.1},title:"Duplicate",children:"\uD83D\uDCCB"}),(0,x.jsx)(P.P.button,{onClick:function(t){t.stopPropagation(),R(e)},className:"text-green-400 hover:text-green-200 text-sm p-1 rounded hover:bg-green-500/20 transition-colors",whileHover:{scale:1.1},title:"Share",children:"\uD83D\uDD17"}),(0,x.jsx)(P.P.button,{onClick:function(t){t.stopPropagation(),_(e)},className:"text-green-400 hover:text-green-200 text-sm p-1 rounded hover:bg-green-500/20 transition-colors",whileHover:{scale:1.1},title:"Export",children:"\uD83D\uDCBE"})]})]})},e.id)})})]}),i&&(0,x.jsxs)("div",{className:"border-t border-green-500/30 pt-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,x.jsxs)("h3",{className:"text-xl font-semibold text-green-200",children:["Editing: ",i.name]}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)(P.P.button,{onClick:function(){return k(i.id)},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Delete"}),(0,x.jsx)(P.P.button,{onClick:function(){return s(null)},className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Close"})]})]}),(0,x.jsx)("div",{className:"mb-6",children:(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"constellation-name",className:"block text-sm font-medium text-green-300 mb-1",children:"Name"}),(0,x.jsx)("input",{id:"constellation-name",type:"text",value:i.name,onChange:function(e){return I("name",e.target.value)},className:"w-full bg-black/50 border border-green-500/30 rounded px-3 py-2 text-green-200"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"line-color",className:"block text-sm font-medium text-green-300 mb-1",children:"Line Color"}),(0,x.jsx)("input",{id:"line-color",type:"color",value:i.lineColor,onChange:function(e){return I("lineColor",e.target.value)},className:"w-full bg-black/50 border border-green-500/30 rounded px-3 py-2 h-10"})]})]})}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h4",{className:"text-lg font-semibold text-green-200 mb-3",children:"Add Star"}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("input",{type:"text",placeholder:"Star name",value:u,onChange:function(e){return p(e.target.value)},className:"flex-1 bg-black/50 border border-green-500/30 rounded px-3 py-2 text-green-200",onKeyPress:function(e){return"Enter"===e.key&&D()}}),(0,x.jsx)(P.P.button,{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Add Star"})]})]}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsxs)("h4",{className:"text-lg font-semibold text-green-200 mb-3",children:["Stars (",i.stars.length,")"]}),(0,x.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:i.stars.map(function(e,t){return(0,x.jsxs)(P.P.div,{onClick:function(){return b(h===t?null:t)},className:"p-3 rounded-lg border cursor-pointer transition-all ".concat(h===t?"border-green-400 bg-green-500/20":"border-green-500/30 hover:border-green-400"),whileHover:{scale:1.01},children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,x.jsx)("span",{className:"text-green-200 font-medium",children:e.name}),(0,x.jsxs)("span",{className:"text-green-300 text-sm",children:["(",e.position.map(function(e){return e.toFixed(1)}).join(", "),")"]})]}),(0,x.jsx)(P.P.button,{onClick:function(t){t.stopPropagation(),T(e.id)},className:"text-red-400 hover:text-red-300 text-sm",whileHover:{scale:1.1},children:"✕"})]}),h===t&&(0,x.jsx)(P.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-green-500/30",children:(0,x.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"star-color-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"Color"}),(0,x.jsx)("input",{id:"star-color-".concat(e.id),type:"color",value:e.color,onChange:function(t){return A(e.id,{color:t.target.value})},className:"w-full h-8 bg-black/50 border border-green-500/30 rounded"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"star-size-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"Size"}),(0,x.jsx)("input",{id:"star-size-".concat(e.id),type:"range",min:"0.05",max:"0.3",step:"0.01",value:e.size,onChange:function(t){return A(e.id,{size:parseFloat(t.target.value)})},className:"w-full"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"star-x-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"X"}),(0,x.jsx)("input",{id:"star-x-".concat(e.id),type:"number",step:"0.1",value:e.position[0],onChange:function(t){return A(e.id,{position:[parseFloat(t.target.value),e.position[1],e.position[2]]})},className:"w-full bg-black/50 border border-green-500/30 rounded px-2 py-1 text-green-200 text-sm"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"star-y-".concat(e.id),className:"block text-xs text-green-300 mb-1",children:"Y"}),(0,x.jsx)("input",{id:"star-y-".concat(e.id),type:"number",step:"0.1",value:e.position[1],onChange:function(t){return A(e.id,{position:[e.position[0],parseFloat(t.target.value),e.position[2]]})},className:"w-full bg-black/50 border border-green-500/30 rounded px-2 py-1 text-green-200 text-sm"})]})]})})]},e.id)})})]}),(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsxs)("h4",{className:"text-lg font-semibold text-green-200 mb-3",children:["Connections (",i.connections.length,")"]}),(0,x.jsx)("div",{className:"text-sm text-green-300 mb-3",children:"Click two stars to create a connection, or click a connection to remove it."}),(0,x.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:i.connections.map(function(e,t){var n=i.stars[e[0]],r=i.stars[e[1]];return(0,x.jsx)(P.P.div,{onClick:function(){return j(g===t?null:t)},className:"p-2 rounded cursor-pointer transition-all ".concat(g===t?"border border-red-400 bg-red-500/20":"hover:bg-green-500/10"),whileHover:{scale:1.01},children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("span",{className:"text-green-200 text-sm",children:[null==n?void 0:n.name," ↔ ",null==r?void 0:r.name]}),g===t&&(0,x.jsx)(P.P.button,{onClick:function(e){e.stopPropagation(),M(t)},className:"text-red-400 hover:text-red-300 text-sm ml-2",whileHover:{scale:1.1},children:"Remove"})]})},"".concat(e[0],"-").concat(e[1]))})})]})]})]})})})]}):null},W=n(9288);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=function(){var e=(0,m.useState)(!1),t=e[0],n=e[1],r=(0,W.V)(),o=r.theme,a=r.dispatch;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.P.button,{className:"fixed top-4 right-4 bg-black/50 backdrop-blur-sm border border-cyan-500/30 text-cyan-200 px-4 py-2 rounded-full z-50",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:function(){return n(!0)},children:"\uD83C\uDFA8 Customize Cosmos"}),(0,x.jsx)(S.N,{children:t&&(0,x.jsx)(P.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:function(){return n(!1)},children:(0,x.jsxs)(P.P.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border border-cyan-500/30 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:function(e){return e.stopPropagation()},children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Cosmic Personalization"}),(0,x.jsx)("button",{onClick:function(){return n(!1)},className:"text-cyan-200 hover:text-white transition-colors",children:"✕"})]}),(0,x.jsxs)("section",{className:"mb-8",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Color Palette"}),(0,x.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[{name:"Cosmic Ocean",colors:["#4a90e2","#667eea","#764ba2"]},{name:"Nebula Dream",colors:["#9b59b6","#e74c3c","#f1c40f"]},{name:"Deep Space",colors:["#2c3e50","#34495e","#16a085"]},{name:"Solar Flare",colors:["#e67e22","#d35400","#f39c12"]}].map(function(e,t){return(0,x.jsxs)("button",{onClick:function(){return a({type:"SET_PALETTE",payload:J(J({},o.palette),{},{primary:e.colors[0],secondary:e.colors[1],nebula:[e.colors[0],e.colors[1]]})})},className:"p-3 rounded-lg border border-cyan-500/30 bg-black/30 text-left hover:border-cyan-400 transition-colors",children:[(0,x.jsx)("div",{className:"flex space-x-1 mb-2",children:e.colors.map(function(t,n){return(0,x.jsx)("div",{className:"w-6 h-6 rounded-full border border-white/20",style:{backgroundColor:t}},"".concat(e.name,"-").concat(t,"-").concat(n))})}),(0,x.jsx)("div",{className:"text-cyan-200 text-sm font-medium",children:e.name})]},e.name)})}),(0,x.jsx)("div",{className:"space-y-3",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"primary-color",className:"text-cyan-200 text-sm block mb-2",children:"Primary Color"}),(0,x.jsx)("input",{id:"primary-color",type:"color",value:o.palette.primary,onChange:function(e){return a({type:"SET_PALETTE",payload:J(J({},o.palette),{},{primary:e.target.value})})},className:"w-full h-10 rounded-lg cursor-pointer"})]})})]}),(0,x.jsxs)("section",{className:"mb-8",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Planet Shapes"}),(0,x.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"sphere",label:"\uD83E\uDE90 Spheres",description:"Smooth planetary bodies"},{value:"icosahedron",label:"\uD83D\uDD3A Crystals",description:"Geometric crystal forms"},{value:"dodecahedron",label:"✨ Stars",description:"Complex star shapes"},{value:"torus",label:"\uD83C\uDF00 Rings",description:"Orbital ring structures"},{value:"asteroid",label:"\uD83C\uDF11 Asteroids",description:"Organic rocky forms"}].map(function(e){return(0,x.jsxs)("button",{onClick:function(){return a({type:"SET_GEOMETRY",payload:J(J({},o.geometry),{},{planetShape:e.value})})},className:"p-3 rounded-lg border-2 text-left transition-all ".concat(o.geometry.planetShape===e.value?"border-cyan-400 bg-cyan-400/20":"border-cyan-500/30 hover:border-cyan-400"),children:[(0,x.jsx)("div",{className:"text-lg mb-1",children:e.label.split(" ")[0]}),(0,x.jsx)("div",{className:"text-sm opacity-80",children:e.description})]},e.value)})})]}),(0,x.jsxs)("section",{children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Cosmic Density"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("label",{className:"text-cyan-200 text-sm block mb-2",children:["Star Density: ",o.density.stars]}),(0,x.jsx)("input",{type:"range",min:"1000",max:"10000",step:"1000",value:o.density.stars,onChange:function(e){return a({type:"SET_DENSITY",payload:J(J({},o.density),{},{stars:parseInt(e.target.value)})})},className:"w-full accent-cyan-400"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"ui-density",className:"text-cyan-200 text-sm block mb-2",children:"UI Density"}),(0,x.jsxs)("select",{id:"ui-density",value:o.geometry.uiDensity,onChange:function(e){return a({type:"SET_GEOMETRY",payload:J(J({},o.geometry),{},{uiDensity:e.target.value})})},className:"w-full bg-black/30 border border-cyan-500/30 rounded-lg p-2 text-cyan-200",children:[(0,x.jsx)("option",{value:"compact",children:"Compact"}),(0,x.jsx)("option",{value:"medium",children:"Medium"}),(0,x.jsx)("option",{value:"spacious",children:"Spacious"})]})]})]})]})]})})})]})},Q=function(e){var t,n,r,o,a=e.position,i=e.scale,s=(0,m.useState)("navigation"),c=s[0],l=s[1],u=(0,m.useState)(!1),h=u[0],b=u[1],v=(0,W.V)(),g=v.theme,j=v.dispatch,y=(0,d.T)(),w=y.currentUser,N=y.updateUserSettings,C=[{id:"navigation",name:"Navigation",icon:"\uD83E\uDDED",description:"Move through the cosmos",color:"#00d4ff"},{id:"social",name:"Social",icon:"\uD83D\uDC65",description:"Connect with others",color:"#ff6b6b"},{id:"creation",name:"Create",icon:"✨",description:"Build constellations",color:"#4ecdc4"},{id:"analysis",name:"Analyze",icon:"\uD83D\uDD0D",description:"Explore cosmic data",color:"#45b7d1"},{id:"settings",name:"Settings",icon:"⚙️",description:"Customize experience",color:"#f9ca24"}],k=function(e){l(e),window.cosmicEventEmitter&&window.cosmicEventEmitter.emit("toolChanged",{toolId:e,tool:C.find(function(t){return t.id===e})})},P=function(e){j({type:"SET_PRESET",payload:e})},O=function(e){N&&N({graphicsQuality:e})},z=function(e){var t,n,r=e.tool,o=e.isActive,a=e.onClick,i=e.position,s=(0,m.useRef)();return(0,f.F)(function(e){s.current&&o&&s.current.scale.setScalar(1+.1*Math.sin(3*e.clock.elapsedTime))}),(0,x.jsxs)("group",{ref:s,position:i,onClick:function(){return a(r.id)},children:[(0,x.jsxs)("mesh",{children:[(0,x.jsx)("cylinderGeometry",{args:[.3,.3,.1,16]}),(0,x.jsx)("meshStandardMaterial",{color:o?r.color:(null==(t=g.colors)?void 0:t.secondary)||"#333333",emissive:o?r.color:"#000000",emissiveIntensity:.3*!!o})]}),(0,x.jsx)(p.E,{position:[0,0,.06],fontSize:.2,color:"white",anchorX:"center",anchorY:"middle",children:r.icon}),(0,x.jsx)(p.E,{position:[0,-.4,0],fontSize:.08,color:(null==(n=g.colors)?void 0:n.text)||"#ffffff",anchorX:"center",anchorY:"middle",children:r.name}),o&&(0,x.jsxs)("mesh",{position:[0,0,-.1],children:[(0,x.jsx)("ringGeometry",{args:[.35,.4,16]}),(0,x.jsx)("meshStandardMaterial",{color:r.color,emissive:r.color,emissiveIntensity:.5})]})]})};return(0,x.jsxs)("group",{position:void 0===a?[-4,0,-3]:a,scale:void 0===i?1:i,children:[(0,x.jsxs)(function(e){var t=e.children,n=e.onClick,r=(0,m.useRef)();return(0,f.F)(function(e){r.current&&(r.current.rotation.y=.05*Math.sin(.5*e.clock.elapsedTime),r.current.position.y+=.002*Math.sin(2*e.clock.elapsedTime))}),(0,x.jsx)("group",{ref:r,onClick:n,children:t})},{children:[(0,x.jsxs)("mesh",{children:[(0,x.jsx)("boxGeometry",{args:[2.5,4,.1]}),(0,x.jsx)("meshStandardMaterial",{color:(null==(t=g.colors)?void 0:t.background)||"#1a1a2e",transparent:!0,opacity:.9})]}),(0,x.jsx)(p.E,{position:[0,1.8,.06],fontSize:.15,color:(null==(n=g.colors)?void 0:n.accent)||"#00d4ff",anchorX:"center",anchorY:"middle",children:"\uD83D\uDEE0️ Control Panel"}),C.map(function(e,t){return(0,x.jsx)(z,{tool:e,isActive:c===e.id,onClick:k,position:[0,1.2-.6*t,.06]},e.id)}),(0,x.jsxs)("mesh",{position:[0,-1.8,.06],onClick:function(){return b(!h)},children:[(0,x.jsx)("cylinderGeometry",{args:[.2,.2,.05,16]}),(0,x.jsx)("meshStandardMaterial",{color:"#4ade80"})]}),(0,x.jsx)(p.E,{position:[0,-1.8,.11],fontSize:.1,color:"white",anchorX:"center",anchorY:"middle",children:h?"−":"+"})]}),(0,x.jsx)(S.N,{children:h&&"settings"===c&&(0,x.jsx)(function(){var e,t,n,r,o,a=["nebula","galaxy","aurora","void"],i=["low","medium","high","ultra"];return(0,x.jsxs)("group",{position:[2,0,0],children:[(0,x.jsxs)("mesh",{children:[(0,x.jsx)("planeGeometry",{args:[3,4]}),(0,x.jsx)("meshStandardMaterial",{color:(null==(e=g.colors)?void 0:e.background)||"#1a1a2e",transparent:!0,opacity:.9})]}),(0,x.jsx)(p.E,{position:[0,1.8,.1],fontSize:.2,color:(null==(t=g.colors)?void 0:t.accent)||"#00d4ff",anchorX:"center",anchorY:"middle",children:"⚙️ Settings"}),(0,x.jsx)(p.E,{position:[-1.2,1.2,.1],fontSize:.12,color:(null==(n=g.colors)?void 0:n.text)||"#ffffff",anchorX:"left",anchorY:"middle",children:"Theme:"}),a.map(function(e,t){var n;return(0,x.jsxs)("mesh",{position:[-1+.8*t,.8,.05],onClick:function(){return P(e)},children:[(0,x.jsx)("planeGeometry",{args:[.7,.3]}),(0,x.jsx)("meshStandardMaterial",{color:g.name===e?"#4ade80":(null==(n=g.colors)?void 0:n.secondary)||"#333333",transparent:!0,opacity:.8})]},e)}),a.map(function(e,t){return(0,x.jsx)(p.E,{position:[-1+.8*t,.8,.1],fontSize:.08,color:"white",anchorX:"center",anchorY:"middle",children:e.charAt(0).toUpperCase()+e.slice(1)},"text-".concat(e))}),(0,x.jsx)(p.E,{position:[-1.2,.2,.1],fontSize:.12,color:(null==(r=g.colors)?void 0:r.text)||"#ffffff",anchorX:"left",anchorY:"middle",children:"Quality:"}),i.map(function(e,t){var n,r;return(0,x.jsxs)("mesh",{position:[-1+.8*t,-.2,.05],onClick:function(){return O(e)},children:[(0,x.jsx)("planeGeometry",{args:[.7,.3]}),(0,x.jsx)("meshStandardMaterial",{color:(null==w||null==(n=w.settings)?void 0:n.graphicsQuality)===e?"#4ade80":(null==(r=g.colors)?void 0:r.secondary)||"#333333",transparent:!0,opacity:.8})]},e)}),i.map(function(e,t){return(0,x.jsx)(p.E,{position:[-1+.8*t,-.2,.1],fontSize:.08,color:"white",anchorX:"center",anchorY:"middle",children:e.charAt(0).toUpperCase()+e.slice(1)},"quality-".concat(e))}),(0,x.jsx)(p.E,{position:[0,-1.2,.1],fontSize:.1,color:(null==(o=g.colors)?void 0:o.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:(null==w?void 0:w.name)||"Cosmic Explorer"})]})},{})}),(0,x.jsxs)(p.E,{position:[0,-2.5,0],fontSize:.08,color:(null==(r=g.colors)?void 0:r.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:["Active: ",null==(o=C.find(function(e){return e.id===c}))?void 0:o.name]})]})},Z=function(e){var t,n,o=e.position,a=e.scale,i=(0,m.useState)([]),c=i[0],l=i[1],u=(0,m.useState)(null),h=u[0],b=u[1],v=(0,m.useState)(!1);v[0],v[1];var g=(0,W.V)().theme;(0,d.T)().currentUser,(0,m.useEffect)(function(){var e,t=(e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("http://localhost:5000","/api/v1/posts"));case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:l(e.sent.posts||[]);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching posts:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(){return e.apply(this,arguments)});t();var n=setInterval(t,3e4);return function(){return clearInterval(n)}},[]);var j=function(e){return({aries:"♈",taurus:"♉",gemini:"♊",cancer:"♋",leo:"♌",virgo:"♍",libra:"♎",scorpio:"♏",sagittarius:"♐",capricorn:"♑",aquarius:"♒",pisces:"♓"})[null==e?void 0:e.toLowerCase()]||"⭐"},y=function(e){return["aries","leo","sagittarius"].includes(null==e?void 0:e.toLowerCase())?"#ff6b35":["taurus","virgo","capricorn"].includes(null==e?void 0:e.toLowerCase())?"#4ade80":["gemini","libra","aquarius"].includes(null==e?void 0:e.toLowerCase())?"#60a5fa":["cancer","scorpio","pisces"].includes(null==e?void 0:e.toLowerCase())?"#a78bfa":"#fbbf24"},w=function(e){var t,n,r,o=e.post,a=e.index,i=e.onClick,s=(0,m.useRef)();(0,f.F)(function(e){s.current&&(s.current.position.y+=.001*Math.sin(e.clock.elapsedTime+a),s.current.rotation.y+=.005)});var c=y(o.zodiacSign),l=j(o.zodiacSign);return(0,x.jsxs)("group",{ref:s,position:[0,-1.5*a,0],onClick:function(){return i(o)},children:[(0,x.jsxs)("mesh",{children:[(0,x.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,x.jsx)("meshStandardMaterial",{color:c,emissive:c,emissiveIntensity:.2,transparent:!0,opacity:.8})]}),(0,x.jsx)(p.E,{position:[0,0,.35],fontSize:.2,color:"white",anchorX:"center",anchorY:"middle",children:l}),(0,x.jsx)(p.E,{position:[0,-.5,0],fontSize:.08,color:(null==(t=g.colors)?void 0:t.text)||"#ffffff",anchorX:"center",anchorY:"middle",children:o.author}),(0,x.jsxs)(p.E,{position:[0,-.7,0],fontSize:.06,color:(null==(n=g.colors)?void 0:n.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",maxWidth:2,children:[null==(r=o.content)?void 0:r.substring(0,50),"..."]})]})};return(0,x.jsxs)("group",{position:void 0===o?[0,0,-5]:o,scale:void 0===a?1:a,children:[(0,x.jsx)(p.E,{position:[0,3,0],fontSize:.3,color:(null==(t=g.colors)?void 0:t.accent)||"#00d4ff",anchorX:"center",anchorY:"middle",children:"\uD83C\uDF1F Cosmic Feed \uD83C\uDF1F"}),(0,x.jsx)("group",{position:[0,2,0],children:c.slice(0,8).map(function(e,t){return(0,x.jsx)(w,{post:e,index:t,onClick:b},e.id)})}),(0,x.jsx)(S.N,{children:h&&(0,x.jsx)(function(e){var t,n,r,o,a=e.post,i=e.onClose;if(!a)return null;var s=y(a.zodiacSign),c=j(a.zodiacSign);return(0,x.jsxs)("group",{position:[3,0,0],children:[(0,x.jsxs)("mesh",{children:[(0,x.jsx)("planeGeometry",{args:[4,6]}),(0,x.jsx)("meshStandardMaterial",{color:(null==(t=g.colors)?void 0:t.background)||"#1a1a2e",transparent:!0,opacity:.9})]}),(0,x.jsxs)("mesh",{position:[1.8,2.8,.1],onClick:i,children:[(0,x.jsx)("planeGeometry",{args:[.3,.3]}),(0,x.jsx)("meshStandardMaterial",{color:"#ff4757"})]}),(0,x.jsx)(p.E,{position:[1.8,2.8,.2],fontSize:.15,color:"white",anchorX:"center",anchorY:"middle",children:"✕"}),(0,x.jsx)(p.E,{position:[0,2.5,.1],fontSize:.4,color:s,anchorX:"center",anchorY:"middle",children:c}),(0,x.jsx)(p.E,{position:[0,2,.1],fontSize:.15,color:(null==(n=g.colors)?void 0:n.text)||"#ffffff",anchorX:"center",anchorY:"middle",children:a.author}),(0,x.jsx)(p.E,{position:[0,1,.1],fontSize:.12,color:(null==(r=g.colors)?void 0:r.text)||"#ffffff",anchorX:"center",anchorY:"middle",maxWidth:3.5,children:a.content}),(0,x.jsx)(p.E,{position:[0,-2.5,.1],fontSize:.08,color:(null==(o=g.colors)?void 0:o.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:new Date(a.timestamp).toLocaleString()}),a.emotionalTone&&(0,x.jsx)(p.E,{position:[0,-2.8,.1],fontSize:.1,color:s,anchorX:"center",anchorY:"middle",children:a.emotionalTone})]})},{post:h,onClose:function(){return b(null)}})}),(0,x.jsxs)(p.E,{position:[0,-6,0],fontSize:.1,color:(null==(n=g.colors)?void 0:n.textSecondary)||"#cccccc",anchorX:"center",anchorY:"middle",children:[c.length," posts in the cosmos"]})]})},$=n(660),ee=n(37),et=n(3148),en=n(8847),er=n.n(en),eo=n(4301);function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function es(e){return ec.apply(this,arguments)}function ec(){return(ec=(0,r.A)(s().mark(function e(t){var n,r,o,a,i=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r="".concat("http://localhost:5000").concat(t),o=ei({headers:ei({"Content-Type":"application/json"},n.headers)},n),e.prev=3,e.next=6,fetch(r,o);case 6:if((a=e.sent).ok){e.next=9;break}throw Error("API call failed: ".concat(a.status," ").concat(a.statusText));case 9:return e.next=11,a.json();case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(3),console.error("API call to ".concat(t," failed:"),e.t0),e.t0;case 18:case"end":return e.stop()}},e,null,[[3,14]])}))).apply(this,arguments)}n(3754);var el={getPosts:function(){return(0,r.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es("/api/v1/posts"));case 1:case"end":return e.stop()}},e)}))()}},eu={getNumbers:function(){return(0,r.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es("/api/v1/zodiac/numbers"));case 1:case"end":return e.stop()}},e)}))()}},ed={getConstellations:function(){return(0,r.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es("/api/v1/constellations"));case 1:case"end":return e.stop()}},e)}))()}};function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var em=er()(function(){return n.e(6698).then(n.bind(n,6698)).then(function(e){return{default:e.NotificationPanel}})},{ssr:!1,loadableGenerated:{webpack:function(){return[6698]}}}),eh=er()(function(){return n.e(7572).then(n.bind(n,7572)).then(function(e){return{default:e.LiveStreamCreation}})},{ssr:!1,loadableGenerated:{webpack:function(){return[7572]}}}),ex=er()(function(){return Promise.resolve().then(n.bind(n,9196)).then(function(e){return{default:e.PostCreation}})},{ssr:!1,loadableGenerated:{webpack:function(){return[9196]}}}),eb=er()(function(){return Promise.all([n.e(8669),n.e(3260),n.e(4141),n.e(725)]).then(n.bind(n,725)).then(function(e){return{default:e.AgoraUIKitLiveStream}})},{ssr:!1,loadableGenerated:{webpack:function(){return[725]}}}),ev=er()(function(){return Promise.all([n.e(6438),n.e(1232)]).then(n.bind(n,1232)).then(function(e){return{default:e.CollaborativeAvatar}})},{ssr:!1,loadableGenerated:{webpack:function(){return[1232]}}}),eg=er()(function(){return Promise.all([n.e(6438),n.e(467)]).then(n.bind(n,467)).then(function(e){return{default:e.default}})},{ssr:!1,loadableGenerated:{webpack:function(){return[467]}}}),ej=function(){var e=(0,W.V)().theme;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ee.m,ef({distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25},e.skySettings)),(0,x.jsx)(N.A,{radius:300,depth:60,count:e.starDensity||8e3,factor:e.starSize||6,saturation:.2,fade:!0,speed:e.animationSpeed||1}),(0,x.jsx)("fog",{attach:"fog",args:[e.fogColor||"#000033",10,200]}),(0,x.jsx)("ambientLight",{intensity:e.ambientIntensity||.3,color:e.ambientColor||"#ffffff"}),(0,x.jsx)("pointLight",{position:[10,10,10],intensity:e.pointLightIntensity||.8,color:e.pointLightColor||"#ffffff"}),(0,x.jsx)("pointLight",{position:[-10,5,-10],intensity:.4,color:"#ff4444"})," ",(0,x.jsx)("pointLight",{position:[10,5,-10],intensity:.4,color:"#87CEEB"})," ",(0,x.jsx)("pointLight",{position:[0,-5,10],intensity:.4,color:"#4361ee"})," "]})},ey=function(){var e=(0,$.ON)(function(){return{rotation:[-Math.PI/2,0,0],position:[0,-2,0]}}),t=(0,o.A)(e,1)[0];return(0,x.jsxs)("mesh",{ref:t,receiveShadow:!0,children:[(0,x.jsx)("planeGeometry",{args:[100,100]}),(0,x.jsx)("meshStandardMaterial",{color:"#1a1a2e",emissive:"#16213e",emissiveIntensity:.1,transparent:!0,opacity:.8})]})},ew=function(){return[{position:[8,0,5],size:[3,.5,2],rotation:[0,.5,0]},{position:[-6,1,-4],size:[2,.3,1.5],rotation:[0,-.3,0]},{position:[3,2,-8],size:[2.5,.4,1.8],rotation:[.1,.7,-.1]}].map(function(e,t){return(0,x.jsx)(eN,ef({},e),t)})},eN=function(e){var t=e.position,n=e.size,r=e.rotation,a=(0,$.z9)(function(){return{mass:0,position:t,rotation:r,args:n}}),i=(0,o.A)(a,1)[0],s=(0,W.V)().theme;return(0,x.jsxs)("mesh",{ref:i,castShadow:!0,receiveShadow:!0,children:[(0,x.jsx)("boxGeometry",{args:n}),(0,x.jsx)("meshStandardMaterial",{color:s.terrainColor||"#4a4a8a",emissive:s.terrainEmissive||"#2a2a5a",emissiveIntensity:.2,roughness:.8,metalness:.2})]})},eC=function(){var e=(0,W.V)().theme,t=(0,m.useRef)();(0,f.F)(function(e){t.current&&(t.current.rotation.y=.05*e.clock.elapsedTime,t.current.rotation.x=.1*Math.sin(.03*e.clock.elapsedTime))});var n=Array.from({length:200},function(t,n){var r;return{position:[(Math.random()-.5)*50,(Math.random()-.5)*50,(Math.random()-.5)*50],color:(null==(r=e.particleColors)?void 0:r[n%e.particleColors.length])||"#ffffff",size:.5*Math.random()+.1}});return(0,x.jsx)("group",{ref:t,children:n.map(function(e,t){return(0,x.jsxs)("mesh",{position:e.position,castShadow:!0,children:[(0,x.jsx)("sphereGeometry",{args:[e.size,8,8]}),(0,x.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:.6})]},t)})})},ek=function(){var e,t,n,a,i,c=(0,d.T)(),l=c.onlineUsers,u=c.constellations,p=c.currentUser,f=c.createConstellation;c.socket,(0,W.V)().theme;var h=(0,m.useState)(null),b=h[0],v=h[1],g=(0,m.useState)(null),y=g[0],w=g[1],N=(0,m.useState)(!1),S=N[0];N[1];var P=(0,m.useState)(!1),O=P[0],z=P[1],E=(0,m.useState)(!1),D=E[0],A=E[1],T=(0,m.useState)(null),I=T[0],_=T[1],F=(0,m.useState)([]),R=(F[0],F[1]),L=(0,m.useState)(null),U=(L[0],L[1]),G=(0,m.useState)("navigate"),H=G[0],B=G[1],q=(0,m.useState)(!1),J=q[0];q[1];var ee=(0,m.useRef)(),en=function(e,t){var n;return(null==(n=({aries:{like:"#ff4444",comment:"#ff8888",share:"#ffaaaa"},taurus:{like:"#44ff44",comment:"#88ff88",share:"#aaffaa"},gemini:{like:"#ffff44",comment:"#ffff88",share:"#ffffaa"},cancer:{like:"#4444ff",comment:"#8888ff",share:"#aaaaff"},leo:{like:"#ffaa44",comment:"#ffcc88",share:"#ffddaa"},virgo:{like:"#44ffaa",comment:"#88ffcc",share:"#aaffdd"},libra:{like:"#aa44ff",comment:"#cc88ff",share:"#ddaafe"},scorpio:{like:"#ff44aa",comment:"#ff88cc",share:"#ffaafe"},sagittarius:{like:"#44aaff",comment:"#88ccff",share:"#aaddff"},capricorn:{like:"#aaaaaa",comment:"#cccccc",share:"#dddddd"},aquarius:{like:"#44ffff",comment:"#88ffff",share:"#aaffff"},pisces:{like:"#aa44aa",comment:"#cc88cc",share:"#ddaadd"}})[null==e?void 0:e.toLowerCase()])?void 0:n[t])||"#ffffff"},er=function(e,t){v(e),w(null)},ea=function(e,t,n,r){w(ef(ef({},n),{},{selectedStar:e,selectedStarIndex:t})),v(null)},ei=function(e,t,n,r){w(ef(ef({},n),{},{selectedConnection:e,selectedConnectionIndex:t})),v(null)};return(0,m.useEffect)(function(){0===u.size&&p&&[{name:"Ursa Major",stars:[{id:"dubhe",name:"Dubhe",position:[-2,1,0],color:"#ffd700",size:.15},{id:"merak",name:"Merak",position:[-1,.5,0],color:"#ffd700",size:.12},{id:"phekda",name:"Phekda",position:[0,0,0],color:"#ffd700",size:.13},{id:"megrez",name:"Megrez",position:[1,.3,0],color:"#ffd700",size:.11},{id:"alioth",name:"Alioth",position:[2,.8,0],color:"#ffd700",size:.14},{id:"mizar",name:"Mizar",position:[3,1.2,0],color:"#ffd700",size:.13},{id:"alkaid",name:"Alkaid",position:[4,1.5,0],color:"#ffd700",size:.12}],connections:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],lineColor:"#ffffff",isActive:!0},{name:"Orion",stars:[{id:"betelgeuse",name:"Betelgeuse",position:[3,2,1],color:"#ff6b6b",size:.2},{id:"rigel",name:"Rigel",position:[2,-1,1],color:"#87ceeb",size:.18}],connections:[[0,1]],lineColor:"#4a90e2",isActive:!0}].forEach(function(e){f(e)})},[u.size,p,f]),(0,m.useEffect)(function(){var e;(e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,el.getPosts();case 3:return R(e.sent.data.posts||[]),e.next=7,eu.getNumbers();case 7:return U(e.sent.data),e.next=11,ed.getConstellations();case 11:(t=e.sent).data&&t.data.forEach(function(e){f(e)}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Failed to fetch initial data:",e.t0);case 18:case"end":return e.stop()}},e,null,[[0,15]])})),function(){return e.apply(this,arguments)})()},[f]),(0,x.jsxs)("div",{className:"w-full h-screen relative bg-black overflow-hidden",children:[(0,x.jsx)(k.Hl,{ref:ee,className:"w-full h-full",shadows:!0,camera:{position:[0,5,15],fov:60},children:(0,x.jsx)(W.J,{children:(0,x.jsx)(d.p,{children:(0,x.jsxs)($.AQ,{gravity:[0,-2,0],children:[(0,x.jsx)(ej,{}),(0,x.jsx)(ey,{}),(0,x.jsx)(ew,{}),(0,x.jsx)(eC,{}),(0,x.jsx)(et.u,{makeDefault:!0}),(0,x.jsx)(C.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxDistance:100,minDistance:3,enableDamping:!0,dampingFactor:.05}),Array.from(l.keys()).map(function(e){return(0,x.jsx)(ev,{userId:e,onClick:er},e)}),Array.from(u.keys()).map(function(e){return(0,x.jsx)(j,{constellationId:e,onStarClick:ea,onLineClick:ei},e)}),(0,x.jsx)(Y,{}),(0,x.jsx)(Z,{position:[5,2,-8],scale:.8}),(0,x.jsx)(Q,{position:[-6,1,-6],scale:.9})]})})})}),(0,x.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,x.jsx)("div",{className:"absolute top-4 left-4 right-4 pointer-events-auto",children:(0,x.jsx)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 text-white border border-white/10",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Cosmic Collaboration"}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,x.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,x.jsxs)("span",{children:["Online: ",l.size]}),(0,x.jsx)("span",{children:"•"}),(0,x.jsxs)("span",{children:["Constellations: ",u.size]})]})]}),(0,x.jsx)("div",{className:"flex items-center space-x-2",children:p&&(0,x.jsxs)("div",{className:"flex items-center space-x-2 bg-white/10 rounded-full px-3 py-1",children:[(0,x.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:en(p.zodiacSign,"like")}}),(0,x.jsx)("span",{className:"text-sm",children:p.username}),(0,x.jsx)("span",{className:"text-xs opacity-60",children:p.zodiacSign})]})})]})})}),(0,x.jsx)("div",{className:"absolute left-4 top-24 pointer-events-auto",children:(0,x.jsx)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-3 border border-white/10",children:(0,x.jsx)("div",{className:"space-y-2",children:["navigate","create","social","stream"].map(function(e){return(0,x.jsx)("button",{onClick:function(){return B(e)},className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all ".concat(H===e?"bg-blue-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"),title:e.charAt(0).toUpperCase()+e.slice(1),children:(0,x.jsxs)("span",{className:"text-lg",children:["navigate"===e&&"\uD83E\uDDED","create"===e&&"✨","social"===e&&"\uD83D\uDCAC","stream"===e&&"\uD83D\uDCF9"]})},e)})})})}),(0,x.jsx)("div",{className:"absolute right-4 top-24 pointer-events-auto",children:(0,x.jsxs)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 border border-white/10 max-w-sm",children:[(0,x.jsx)("h3",{className:"font-semibold mb-3 text-white",children:"Cosmic Information"}),b&&(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:en(b.zodiacSign,"like")}}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"font-medium",children:b.name}),(0,x.jsx)("p",{className:"text-sm opacity-60",children:b.zodiacSign})]})]}),(0,x.jsxs)("div",{className:"text-sm space-y-1",children:[(0,x.jsxs)("p",{children:["Status: ",(0,x.jsx)("span",{className:"text-green-400",children:"Online"})]}),(0,x.jsxs)("p",{children:["Element: ",(0,x.jsx)("span",{className:"text-blue-400",children:{aries:"Fire",taurus:"Earth",gemini:"Air",cancer:"Water",leo:"Fire",virgo:"Earth",libra:"Air",scorpio:"Water",sagittarius:"Fire",capricorn:"Earth",aquarius:"Air",pisces:"Water"}[null==(e=b.zodiacSign)?void 0:e.toLowerCase()]||"Unknown"})]})]})]}),y&&(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsx)("h4",{className:"font-medium",children:y.name}),(0,x.jsxs)("div",{className:"text-sm space-y-1",children:[(0,x.jsxs)("p",{children:["Stars: ",(null==(t=y.stars)?void 0:t.length)||0]}),(0,x.jsxs)("p",{children:["Connections: ",(null==(n=y.connections)?void 0:n.length)||0]}),y.selectedStar&&(0,x.jsxs)("p",{className:"text-yellow-400",children:["Selected: ",y.selectedStar.name]})]})]}),!b&&!y&&(0,x.jsxs)("div",{className:"text-sm text-white/60 space-y-2",children:[(0,x.jsx)("p",{children:"Click on avatars or constellations to view details"}),(0,x.jsx)("p",{children:"Use mouse to navigate"}),(0,x.jsx)("p",{children:'Try voice commands: "look at north"'})]})]})}),(0,x.jsx)("div",{className:"absolute bottom-4 left-4 right-4 pointer-events-auto",children:(0,x.jsx)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 border border-white/10",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)(K,{}),(0,x.jsx)(X,{}),(0,x.jsx)(V,{})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[J&&(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,x.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,x.jsx)("span",{className:"text-sm",children:"Voice Active"})]}),(0,x.jsx)("button",{className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 rounded-xl text-sm font-medium transition-colors",children:"Create Post"}),(0,x.jsx)("button",{className:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded-xl text-sm font-medium transition-colors",children:"Start Stream"})]})]})})}),p&&(0,x.jsx)("div",{className:"absolute top-24 left-20 pointer-events-auto",children:(0,x.jsxs)("div",{className:"bg-black/80 backdrop-blur-lg rounded-2xl p-4 border border-white/10",children:[(0,x.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Your Zodiac Actions"}),(0,x.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries({like:"Heart",comment:"Speak",share:"Connect",create:"Build"}).map(function(e){var t=(0,o.A)(e,2),n=t[0],r=t[1];return(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:en(p.zodiacSign,n)}}),(0,x.jsxs)("span",{className:"capitalize text-white/80",children:[n,":"]}),(0,x.jsx)("span",{className:"text-blue-300 font-medium",children:r})]},n)})})]})})]}),S&&(0,x.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,x.jsx)(K,{})}),(0,x.jsx)(X,{}),(0,x.jsx)(V,{}),(b||y)&&(0,x.jsx)("div",{className:"absolute bottom-4 left-4 z-10",children:(0,x.jsxs)("div",{className:"bg-black/80 text-white p-4 rounded-lg backdrop-blur-sm max-w-md",children:[b&&(0,x.jsxs)("div",{children:[(0,x.jsxs)("h3",{className:"font-bold mb-2",children:["User: ",b.name]}),(0,x.jsxs)("p",{className:"text-sm opacity-80",children:["ID: ",b.id]}),(0,x.jsx)("p",{className:"text-sm opacity-80",children:"Status: Online"}),avatars.has(b.id)&&(0,x.jsxs)("div",{className:"mt-2",children:[(0,x.jsx)("p",{className:"text-sm",children:"Avatar Position:"}),(0,x.jsx)("p",{className:"text-xs opacity-60",children:avatars.get(b.id).position.map(function(e){return e.toFixed(2)}).join(", ")})]})]}),y&&(0,x.jsxs)("div",{children:[(0,x.jsxs)("h3",{className:"font-bold mb-2",children:["Constellation: ",y.name]}),(0,x.jsxs)("p",{className:"text-sm opacity-80",children:["Stars: ",(null==(a=y.stars)?void 0:a.length)||0]}),(0,x.jsxs)("p",{className:"text-sm opacity-80",children:["Connections: ",(null==(i=y.connections)?void 0:i.length)||0]}),y.selectedStar&&(0,x.jsxs)("div",{className:"mt-2",children:[(0,x.jsxs)("p",{className:"text-sm",children:["Selected Star: ",y.selectedStar.name]}),(0,x.jsxs)("p",{className:"text-xs opacity-60",children:["Position: ",y.selectedStar.position.map(function(e){return e.toFixed(2)}).join(", ")]})]})]}),(0,x.jsx)("button",{onClick:function(){v(null),w(null)},className:"mt-3 px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-sm",children:"Close"})]})}),(0,x.jsx)("div",{className:"absolute bottom-4 right-4 z-10",children:(0,x.jsxs)("div",{className:"bg-black/80 text-white p-3 rounded-lg backdrop-blur-sm text-sm max-w-xs",children:[(0,x.jsx)("p",{className:"font-bold mb-1",children:"Controls:"}),(0,x.jsx)("p",{children:"• Click avatars to select users"}),(0,x.jsx)("p",{children:"• Click constellation stars/lines"}),(0,x.jsx)("p",{children:"• Use mouse to orbit camera"}),(0,x.jsx)("p",{children:"• Scroll to zoom in/out"}),(0,x.jsx)("p",{children:'• Try voice commands: "look at [direction]"'})]})}),(0,x.jsx)(eg,{}),(0,x.jsx)(M,{posts:[]}),O&&(0,x.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20",children:(0,x.jsxs)("div",{className:"bg-black/90 text-white p-6 rounded-lg backdrop-blur-sm border border-purple-500/30",children:[(0,x.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Create Cosmic Post"}),(0,x.jsx)(ex,{onPostCreated:function(){return z(!1)}}),(0,x.jsx)("button",{onClick:function(){return z(!1)},className:"mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded",children:"Close"})]})}),D&&(0,x.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20",children:(0,x.jsxs)("div",{className:"bg-black/90 text-white p-6 rounded-lg backdrop-blur-sm border border-green-500/30 max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[(0,x.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Live Stream Controls"}),I?(0,x.jsxs)("div",{children:[(0,x.jsx)(eb,{streamId:I.id,isHost:!0}),(0,x.jsx)("button",{onClick:function(){return _(null)},className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded",children:"End Stream"})]}):(0,x.jsxs)("div",{children:[(0,x.jsx)(eh,{onStreamCreated:function(e){return _(e)}}),(0,x.jsx)("button",{onClick:function(){return A(!1)},className:"mt-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded",children:"Close"})]})]})}),(0,x.jsx)(em,{}),(0,x.jsx)(eo.N9,{})]})};let eS=function(){return(0,x.jsx)(W.J,{children:(0,x.jsx)(d.p,{children:(0,x.jsx)(ek,{})})})}},9196:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PostCreation:()=>u});var r=n(3857),o=n(236),a=n(3081),i=n.n(a),s=n(5361),c=n(4232),l=n(7876);function u(e){var t,n=e.onPostCreated,a=(0,c.useState)(""),u=a[0],d=a[1],p=(0,c.useState)(null),f=p[0],m=p[1],h=(0,c.useState)(null),x=h[0],b=h[1],v=(0,c.useState)([]),g=v[0],j=v[1],y=(0,c.useState)(""),w=y[0],N=y[1],C=(0,c.useState)(!1),k=C[0],S=C[1],P=function(){w.trim()&&!g.includes(w.trim())&&(j([].concat((0,o.A)(g),[w.trim()])),N(""))},O=function(e){j(g.filter(function(t){return t!==e}))},z=(t=(0,r.A)(i().mark(function e(t){var r,o,a,c,l;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(!u&&!f&&!x)){e.next=3;break}return e.abrupt("return");case 3:if(S(!0),s.N){e.next=8;break}return console.error("Supabase client not available"),S(!1),e.abrupt("return");case 8:return e.next=10,s.N.auth.getSession();case 10:if(o=(r=e.sent).data,!((a=r.error)||!o.session)){e.next=17;break}return console.error("No session found:",a),S(!1),e.abrupt("return");case 17:return c=o.session,(l=new FormData).append("content",u),f&&l.append("image",f),x&&l.append("video",x),g.length>0&&l.append("tags",JSON.stringify(g)),e.prev=23,e.next=26,fetch("".concat("http://localhost:5000","/api/v1/posts"),{method:"POST",headers:{Authorization:"Bearer ".concat(c.access_token)},body:l});case 26:if(e.sent.ok){e.next=29;break}throw Error("Failed to create post");case 29:d(""),m(null),b(null),j([]),N(""),n(),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(23),console.error("Error creating post:",e.t0);case 40:return e.prev=40,S(!1),e.finish(40);case 43:case"end":return e.stop()}},e,null,[[23,37,40,43]])})),function(e){return t.apply(this,arguments)});return(0,l.jsxs)("form",{onSubmit:z,className:"mb-8 parallax-layer cosmic-post-creation",children:[(0,l.jsx)("textarea",{value:u,onChange:function(e){return d(e.target.value)},placeholder:"Share your cosmic thoughts...",className:"bg-black/50 border border-purple-500/30 rounded-lg p-3 text-white w-full max-w-xs cosmic-float-3d focus:outline-none focus:ring-2 focus:ring-purple-400",rows:4}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,l.jsx)("input",{type:"text",value:w,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),P())},placeholder:"Add zodiac tags (e.g., Aries, Taurus)...",className:"bg-black/50 border border-purple-500/30 rounded-lg px-3 py-2 text-white text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-purple-400"}),(0,l.jsx)("button",{type:"button",onClick:P,className:"bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded-lg text-sm font-semibold transition-colors",children:"Add"})]}),g.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:g.map(function(e){return(0,l.jsxs)("span",{className:"bg-purple-600/50 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[e,(0,l.jsx)("button",{type:"button",onClick:function(){return O(e)},className:"hover:text-red-400",children:"\xd7"})]},e)})})]}),(0,l.jsxs)("div",{className:"flex space-x-4 mt-2",children:[(0,l.jsxs)("label",{className:"flex items-center space-x-2 text-gray-400 hover:text-purple-400 cursor-pointer",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t;return m((null==(t=e.target.files)?void 0:t[0])||null)},className:"hidden"}),(0,l.jsx)("span",{children:"\uD83D\uDCF7 Image"})]}),(0,l.jsxs)("label",{className:"flex items-center space-x-2 text-gray-400 hover:text-purple-400 cursor-pointer",children:[(0,l.jsx)("input",{type:"file",accept:"video/mp4,video/webm",onChange:function(e){var t;return b((null==(t=e.target.files)?void 0:t[0])||null)},className:"hidden"}),(0,l.jsx)("span",{children:"\uD83C\uDFA5 Video"})]})]}),(0,l.jsx)("button",{type:"submit",disabled:k,className:"mt-4 bg-purple-500 text-white px-4 py-2 rounded-lg transition-all duration-300 transform hover:scale-110 hover:translateZ(10px) ".concat(k?"opacity-50 cursor-not-allowed":""),children:k?"Posting...":"\uD83C\uDF1F Post"})]})}},9288:(e,t,n)=>{"use strict";n.d(t,{J:()=>d,V:()=>p});var r=n(2969),o=n(4232),a=n(7876);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c=(0,o.createContext)(),l=function(e,t){switch(t.type){case"UPDATE_THEME":case"SET_PRESET":return s(s({},e),t.payload);case"RESET_THEME":return u;default:return e}},u={backgroundColor:"#000011",fogColor:"#000033",ambientColor:"#ffffff",pointLightColor:"#ffffff",terrainColor:"#4a4a8a",terrainEmissive:"#2a2a5a",starDensity:8e3,starSize:6,animationSpeed:1,ambientIntensity:.3,pointLightIntensity:.8,skySettings:{turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.7},particleColors:["#ff4444","#87CEEB","#4361ee","#8B4513"]},d=function(e){var t=e.children,n=(0,o.useReducer)(l,u),r=n[0],i=n[1];return(0,a.jsx)(c.Provider,{value:{theme:r,updateTheme:function(e){i({type:"UPDATE_THEME",payload:e})},setPreset:function(e){i({type:"SET_PRESET",payload:{nebula:{backgroundColor:"#110033",fogColor:"#330066",starDensity:12e3,particleColors:["#ff00ff","#00ffff","#ffff00","#ff0080"]},galaxy:{backgroundColor:"#000022",fogColor:"#001144",starDensity:15e3,animationSpeed:2},aurora:{backgroundColor:"#001122",fogColor:"#004466",ambientColor:"#00ff88",particleColors:["#00ff88","#0088ff","#88ff00"]}}[e]})}},children:t})},p=function(){var e=(0,o.useContext)(c);if(!e)throw Error("useCosmicTheme must be used within CosmicThemeProvider");return e}}},e=>{e.O(0,[7391,5037,779,1040,7577,5095,1927,5464,3609,1319,636,6593,8792],()=>e(e.s=6298)),_N_E=e.O()}]);