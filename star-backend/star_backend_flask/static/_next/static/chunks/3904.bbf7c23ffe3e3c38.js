"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3904],{3904:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(7876),r=a(4232);let i={single_card:{id:"single_card",name:"Single Card Insight",layout_type:"single_card",description:"A solitary card drawn for immediate guidance and clarity",cosmic_template:"Insight and intuition during moments of cosmic alignment",positions:[{id:"center",x:50,y:50,rotation:0,scale:1.2,label:"Present Moment",meaning_context:"Immediate energy and guidance from the universe"}]},three_card:{id:"three_card",name:"Past, Present, Future",layout_type:"three_card",description:"A linear spread revealing the flow of time and destiny",cosmic_template:"Mercury and Saturn alignment for temporal wisdom",positions:[{id:"past",x:20,y:50,rotation:-5,scale:1,label:"Past Influences",meaning_context:"Influences from your history shaping current reality"},{id:"present",x:50,y:50,rotation:0,scale:1.1,label:"Present Situation",meaning_context:"Current energies and challenges you face"},{id:"future",x:80,y:50,rotation:5,scale:1,label:"Future Potential",meaning_context:"Coming opportunities and potential outcomes"}]},horseshoe:{id:"horseshoe",name:"Horseshoe of Destiny",layout_type:"horseshoe",description:"Seven cards forming a protective arc of guidance",cosmic_template:"Venus and Moon conjunction for emotional guidance",positions:[{id:"situation",x:50,y:20,rotation:0,scale:1.1,label:"Situation",meaning_context:"The core challenge or focus of your inquiry"},{id:"challenges",x:25,y:35,rotation:-10,scale:1,label:"Challenges",meaning_context:"Obstacles or hidden factors affecting your path"},{id:"resources",x:75,y:35,rotation:10,scale:1,label:"Resources",meaning_context:"Your strengths and available support"},{id:"past",x:10,y:60,rotation:-20,scale:1,label:"Past Influences",meaning_context:"How your history influences your current situation"},{id:"conscious",x:50,y:65,rotation:0,scale:1,label:"Conscious Mind",meaning_context:"Your current mental state and rational approach"},{id:"unconscious",x:90,y:60,rotation:20,scale:1,label:"Unconscious Mind",meaning_context:"Subconscious motivations and deep emotions"},{id:"outcome",x:50,y:85,rotation:0,scale:1.05,label:"Likely Outcome",meaning_context:"The probable result if current courses remain steady"}]},celtic_cross:{id:"celtic_cross",name:"Celtic Cross",layout_type:"celtic_cross",description:"The sacred ten-card spread of ancient Celtic wisdom",cosmic_template:"Full moon timing for deep archetypal insights",positions:[{id:"present",x:50,y:50,rotation:0,scale:1.2,label:"Present Situation",meaning_context:"The heart of the matter - your current reality"},{id:"challenge",x:50,y:25,rotation:0,scale:1,label:"Immediate Challenge",meaning_context:"The obstacle crossing your path right now"},{id:"distant_past",x:75,y:37.5,rotation:90,scale:1,label:"Distant Past",meaning_context:"Foundational influences from your history"},{id:"possible_outcome",x:75,y:62.5,rotation:90,scale:1,label:"Possible Outcome",meaning_context:"What may emerge if current paths continue"},{id:"recent_past",x:25,y:37.5,rotation:90,scale:1,label:"Recent Past",meaning_context:"Recent events shaping your current situation"},{id:"near_future",x:25,y:62.5,rotation:90,scale:1,label:"Near Future",meaning_context:"Events developing in the coming months"},{id:"approach",x:37.5,y:75,rotation:0,scale:.9,label:"Your Approach",meaning_context:"Your attitude and how you are approaching the situation"},{id:"external",x:62.5,y:75,rotation:0,scale:.9,label:"External Influence",meaning_context:"People or forces outside your control"},{id:"hopes_fears",x:12.5,y:50,rotation:90,scale:.9,label:"Hopes & Fears",meaning_context:"Your deepest hopes and greatest fears"},{id:"final_outcome",x:87.5,y:50,rotation:90,scale:.95,label:"Final Outcome",meaning_context:"The ultimate result of following your true path"}]}};var o=a(5003);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,r.useRef)([]),[n,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null),c=(0,r.useCallback)((e,t)=>{let[a,n]=t,r=180*Math.atan2(n,a)/Math.PI;return r>=-45&&r<45?"right":r>=45&&r<135?"down":r>=135||r<-135?"left":"up"},[]);return(0,o.useGesture)({onDrag:n=>{let{active:r,movement:[o,s],event:c}=n;if(t.onDrag&&c){var d;if(!(null==(d=e.current)?void 0:d.getBoundingClientRect()))return;let n={x:c.clientX||o,y:c.clientY||s};if(r&&0===a.current.length){let e={startPosition:n,currentPosition:n,fingerCount:1,gestureType:"pan"};a.current=[e],l(e),i(!0)}if(a.current.length>0){let e=a.current[0];e.currentPosition=n,r?t.onDrag(e):(i(!1),l(null),a.current=[])}}},onPinch:e=>{let{active:a,offset:[n],origin:[r,i]}=e;t.onPinch&&a&&t.onPinch(n,{x:r,y:i})},onDragEnd:e=>{let{velocity:a,direction:n}=e;if(t.onSwipe){let e=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(e>.5){let a=c(e,n);t.onSwipe(a,e)}}}},{target:e.current||void 0,drag:{threshold:10},pinch:{threshold:.5}}),{isGesturing:n,activeGesture:s,gestureState:a.current}}function l(e,t,a,n,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=(0,r.useRef)(0),c=(0,r.useRef)(!1),d=[{key:"s",description:"Shuffle cards",action:()=>null==a?void 0:a()},{key:"r",description:"Reveal reading",action:()=>null==n?void 0:n()},{key:"R",ctrl:!0,description:"Reset spread",action:()=>null==i?void 0:i()},{key:"f",description:"Toggle focus mode",action:()=>{c.current=!c.current}},{key:"?",description:"Show help",action:()=>null==o?void 0:o()},{key:"h",description:"Show help",action:()=>null==o?void 0:o()}],u=(0,r.useCallback)(e=>{if(!c.current||0===s.length)return;let a=Math.ceil(Math.sqrt(s.length));l.current,l.current;let n=l.current;switch(e){case"up":n=Math.max(0,l.current-a);break;case"down":n=Math.min(s.length-1,l.current+a);break;case"left":n=Math.max(0,l.current-1);break;case"right":n=Math.min(s.length-1,l.current+1)}n!==l.current&&(l.current=n,null==t||t(s[n]))},[s,t]),m=(0,r.useCallback)(()=>{c.current&&s.length>0&&(null==e||e(s[l.current]))},[s,e]);return{...function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shortcuts:t=[],onArrowKeys:a,onTabNavigation:n,onSpaceKey:i,onEnterKey:o,onEscapeKey:s,onShortcutKey:l}=e,c=(0,r.useRef)(new Map),d=(0,r.useRef)(!1);(0,r.useEffect)(()=>{let e=new Map;t.forEach(t=>{let a="".concat(t.ctrl?"ctrl+":"").concat(t.shift?"shift+":"").concat(t.alt?"alt+":"").concat(t.key.toLowerCase());e.set(a,t)}),c.current=e},[t]);let u=(0,r.useCallback)(e=>{let t="";return(e.ctrlKey||e.metaKey)&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),t+=e.key.toLowerCase()},[]),m=(0,r.useCallback)(()=>{d.current=!0},[]),h=(0,r.useCallback)(()=>{d.current=!1},[]),x=(0,r.useCallback)(e=>{if(!d.current){if((["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Space","Enter","Escape"].includes(e.key)||t.some(t=>t.key.toLowerCase()===e.key.toLowerCase()&&(t.ctrl&&(e.ctrlKey||e.metaKey)||t.shift&&e.shiftKey||t.alt&&e.altKey)))&&(e.preventDefault(),e.stopPropagation()),a&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key))return void a(e.key.replace("Arrow","").toLowerCase());if(n&&"Tab"===e.key)return void n(e.shiftKey?"backward":"forward");if(i&&" "===e.key)return void i();if(o&&"Enter"===e.key)return void o();if(s&&"Escape"===e.key)return void s();if(t.length>0){let t=u(e),a=c.current.get(t);if(a){a.action(),null==l||l(a);return}}}},[t,a,n,i,o,s,l,u]);return(0,r.useEffect)(()=>{let e=e=>{let t=e.target;("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"SELECT"!==t.tagName&&"true"!==t.contentEditable||["Escape","Tab"].includes(e.key))&&x(e)};return document.addEventListener("keydown",e),document.addEventListener("compositionstart",m),document.addEventListener("compositionend",h),()=>{document.removeEventListener("keydown",e),document.removeEventListener("compositionstart",m),document.removeEventListener("compositionend",h)}},[x,m,h]),{shortcuts:t,shortcutMap:c.current}}({shortcuts:d,onArrowKeys:u,onTabNavigation:(0,r.useCallback)(e=>{c.current&&s.length>0&&("forward"===e?l.current=(l.current+1)%s.length:l.current=0===l.current?s.length-1:l.current-1,null==t||t(s[l.current]))},[s,t]),onEnterKey:m,onShortcutKey:e=>{console.log("Tarot shortcut used: ".concat(e.description))}}),focusModeEnabled:c.current,currentFocusIndex:l.current,setFocusIndex:e=>{l.current=Math.max(0,Math.min(s.length-1,e))},toggleFocusMode:()=>{c.current=!c.current}}}var c=a(2738),d=a(4233),u=a(6377);function m(e){let{width:t,height:a,energyFlows:i,cardPositions:o,onFlowClick:c,animated:d=!0}=e,m=(0,r.useRef)(),h=(0,r.useRef)(null),[x,p]=(0,r.useState)(0),[g,y]=(0,r.useState)(null),[f,b]=(0,r.useState)("select"),w=(0,r.useMemo)(()=>{let e=new Map;return o.size&&i.forEach(t=>{let a="".concat(t.id,"-").concat(x.toFixed(1));if(!e.has(a)){let n=o.get(t.fromCardId),r=o.get(t.toCardId);n&&r&&e.set(a,((e,t,a)=>{let n=t.x-e.x,r=t.y-e.y,i=Math.max(20,Math.floor(Math.sqrt(n*n+r*r)/5));switch(a.style){case"arc":return((e,t,a)=>{let n=[];e.x,t.x,e.y,t.y;let r=.15*Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);for(let i=0;i<=a;i++){let o=i/a,s=e.x+(t.x-e.x)*o,l=e.y+(t.y-e.y)*o,c=4*o*(1-o),d=t.y-e.y,u=-(t.x-e.x),m=Math.sqrt(d*d+u*u);n.push({x:s+d/m*r*c,y:l+u/m*r*c})}return n})(e,t,i);case"wave":return((e,t,a)=>{let n=[],r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i),s=Math.max(o/4,20),l=Math.min(o/8,10);for(let c=0;c<=a;c++){let d=c/a,u=e.x+r*d,m=e.y+i*d,h=o*d/s,p=Math.sin(h+x)*l,g=t.y-e.y,y=-(t.x-e.x),f=Math.sqrt(g*g+y*y);n.push({x:u+g/f*p,y:m+y/f*p,amplitude:l,phase:h})}return n})(e,t,i);default:var o=e,s=t,l=i;let c=[],d=(s.x-o.x)/l,u=(s.y-o.y)/l;for(let e=0;e<=l;e++)c.push({x:o.x+d*e,y:o.y+u*e});return c}})(n,r,t))}}),e},[i,o,x]);(0,r.useEffect)(()=>{if(!d)return;let e=()=>{p(e=>(e+.02)%(2*Math.PI)),m.current=requestAnimationFrame(e)};return e(),()=>{m.current&&cancelAnimationFrame(m.current)}},[d]);let v=(0,r.useCallback)(()=>o.size?i.map(e=>{let t="".concat(e.id,"-").concat(x.toFixed(1)),a=w.get(t);if(!a)return null;let r=a.flatMap(e=>[e.x,e.y]),i=Math.max(.2,e.strength/5),o=Math.max(1,Math.min(4,e.strength));return(0,n.jsx)(u.N1,{points:r,stroke:e.color,strokeWidth:o,opacity:i,dash:[5,5],shadowColor:e.color,shadowBlur:d?10+5*Math.sin(x):10,shadowOpacity:d?.5-.2*Math.sin(x):.5,tension:.3,lineCap:"round",lineJoin:"round",onClick:()=>null==c?void 0:c(e),onTap:()=>null==c?void 0:c(e)},"".concat(e.id,"-").concat(x.toFixed(1)))}):null,[i,o,w,x,d,c]),j=(0,r.useCallback)(e=>{let t=i.find(t=>t.id===e);t&&(y(t),null==c||c(t))},[i,c]);return!function(e,t,a,n,i){let[o,l]=(0,r.useState)(new Set),[c,d]=(0,r.useState)("select"),u=(0,r.useCallback)(e=>{"move"===c&&a&&o.forEach(t=>{a(t,e.currentPosition)})},[c,o,a]),m=(0,r.useCallback)(e=>{"zoom"===c&&n&&n(e)},[c,n]),h=(0,r.useCallback)(e=>{},[c,t]);({...s(e,{onDrag:u,onPinch:m,onTap:h,onSwipe:(0,r.useCallback)(e=>{"up"===e?d("zoom"):"down"===e?d("move"):("left"===e||"right"===e)&&d("select")},[]),onLongPress:(0,r.useCallback)(e=>{d("zoom")},[])}),selectedCards:o,gestureMode:c,setGestureMode:d,addToSelection:e=>l(t=>new Set(t).add(e)),removeFromSelection:e=>l(t=>{let a=new Set(t);return a.delete(e),a}),clearSelection:()=>l(new Set)})}(h,j,(0,r.useCallback)((e,t)=>{console.log("Moving flow ".concat(e," to"),t)},[]),(0,r.useCallback)(e=>{b("zoom"),console.log("Energy field zoom scale:",e)},[])),l(e=>{let t=i.find(t=>t.id===e);t&&(y(t),null==c||c(t))},e=>{console.log("Focusing on flow:",e)},void 0,()=>{console.log("Toggle energy flows")},()=>{y(null)},()=>{console.log("Energy Flow Help: Use arrow keys to navigate flows, Enter to select, Escape to deselect")},i.map(e=>e.id)),(0,n.jsx)("div",{ref:h,className:"energy-flow-visualizer",children:(0,n.jsx)(u.BI,{width:t,height:a,children:(0,n.jsxs)(u.Wd,{children:[(0,n.jsx)(u.jl,{x:t/2,y:a/2,radius:Math.max(t,a),fillRadialGradientStartPoint:{x:t/2,y:a/2},fillRadialGradientStartRadius:0,fillRadialGradientEndPoint:{x:t/2,y:a/2},fillRadialGradientEndRadius:Math.max(t,a),fillRadialGradientColorStops:[0,"rgba(0,0,0,0)",1,"rgba(50,50,50,0.1)"],opacity:d?.3+.1*Math.sin(.5*x):.3}),v(),o.size?i.map(e=>{let t=o.get(e.fromCardId),a=o.get(e.toCardId);if(!t||!a)return null;let r=(t.x+a.x)/2,i=(t.y+a.y)/2;return(0,n.jsx)(u.jl,{x:r,y:i,radius:2*e.strength,fill:e.color,opacity:d?.6+.4*Math.sin(2*x):.6,onClick:()=>null==c?void 0:c(e),onTap:()=>null==c?void 0:c(e)},"indicator-".concat(e.id))}):null,o.size?i.map(e=>{let t=o.get(e.fromCardId),a=o.get(e.toCardId);if(!t||!a)return null;let r=(t.x+a.x)/2,i=(t.y+a.y)/2;return e.strength<=3?null:(0,n.jsx)(u.EY,{x:r-20,y:i-20,text:"".concat(e.element),fontSize:10,fill:"white",fontFamily:"serif",opacity:.8,shadowColor:"black",shadowBlur:3,onClick:()=>null==c?void 0:c(e),onTap:()=>null==c?void 0:c(e)},"label-".concat(e.id))}):null]})})})}function h(e){let{spread:t,cards:a,onDragEnd:r,onDragOver:i,canvasSize:o={width:800,height:600},energyFlows:s=[],showEnergyFlows:l=!1,onEnergyFlowClick:u}=e,h={width:"".concat(o.width,"px"),height:"".concat(o.height,"px"),background:"linear-gradient(135deg, rgba(23, 12, 61, 0.8) 0%, rgba(46, 24, 98, 0.6) 100%)",borderRadius:"12px",position:"relative",border:"1px solid rgba(139, 92, 246, 0.3)"};return(0,n.jsx)(c.Mp,{onDragEnd:r,onDragOver:i,children:(0,n.jsxs)("div",{style:h,className:"spread-canvas mx-auto my-4 overflow-hidden",children:[t.positions.map(e=>(0,n.jsxs)("div",{className:"absolute border-2 border-dashed border-cosmic-light/30 rounded-lg flex items-center justify-center text-cosmic-light text-xs font-mystical opacity-60 transition-all duration-500",style:{left:"".concat(e.x*o.width/100,"px"),top:"".concat(e.y*o.height/100,"px"),width:"120px",height:"180px",transform:"translate(-50%, -50%) rotate(".concat(e.rotation,"deg) scale(").concat(e.scale,")")},children:[(0,n.jsx)("div",{className:"absolute inset-0 rounded-lg bg-cosmic-accent/20 border-2 border-cosmic-accent/50 animate-pulse opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,n.jsx)("div",{className:"text-center px-2 py-1 bg-cosmic-deep/50 rounded backdrop-blur-sm relative",children:e.label})]},e.id)),a.map(e=>(0,n.jsx)(d.A,{card:e},e.id)),l&&s.length>0&&(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-auto",children:(0,n.jsx)(m,{width:o.width,height:o.height,energyFlows:s,cardPositions:new Map(a.map(e=>[e.id,e.position])),onFlowClick:u,animated:!0})}),(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,n.jsxs)("svg",{className:"w-full h-full opacity-20",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"cosmic-gradient",cx:"50%",cy:"50%",r:"50%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"rgba(139, 92, 246, 0.3)"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"transparent"})]})}),(0,n.jsx)("circle",{cx:o.width/2,cy:o.height/2,r:"100",fill:"url(#cosmic-gradient)"}),(0,n.jsx)("circle",{cx:o.width/4,cy:o.height/4,r:"50",fill:"url(#cosmic-gradient)"}),(0,n.jsx)("circle",{cx:3*o.width/4,cy:3*o.height/4,r:"50",fill:"url(#cosmic-gradient)"})]})})]})})}var x=a(4871),p=a(4521);function g(e){let{reading:t,selectedCard:a,onCardSelect:i}=e,[o,s]=(0,r.useState)("positions"),[l,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{c(!1)},[t]),(0,n.jsxs)(p.A,{className:"w-full max-w-2xl",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-mystical text-cosmic-gold mb-4 text-center",children:"Reading Interpretation"}),(0,n.jsxs)("div",{className:"flex justify-center space-x-2 mb-4",children:[(0,n.jsx)("button",{onClick:()=>s("positions"),className:"px-4 py-2 rounded-lg font-mystical transition-all ".concat("positions"===o?"bg-cosmic-accent text-cosmic-deep":"text-cosmic-light hover:bg-cosmic-purple/20"),children:"Position Analysis"}),(0,n.jsx)("button",{onClick:()=>s("cosmic"),className:"px-4 py-2 rounded-lg font-mystical transition-all ".concat("cosmic"===o?"bg-cosmic-accent text-cosmic-deep":"text-cosmic-light hover:bg-cosmic-purple/20"),children:"Cosmic Flow"})]})]}),(0,n.jsx)("div",{className:"interpretation-content overflow-y-auto max-h-96",children:l?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF19"}),(0,n.jsx)("p",{className:"text-cosmic-light mb-2",children:"Cosmic alignment disrupted"}),(0,n.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-cosmic-accent text-cosmic-deep rounded-lg text-sm hover:opacity-80 transition-opacity",children:"Try Again"})]}):t?(0,n.jsx)(n.Fragment,{children:(()=>{try{return"positions"===o?(0,n.jsx)("div",{className:"space-y-4",children:t.spread.positions.map(e=>{let r=t.cards.find(t=>{let a=Math.abs(8*e.x-t.position.x),n=Math.abs(6*e.y-t.position.y);return a<50&&n<50});return(0,n.jsxs)("div",{className:"p-4 rounded-lg border transition-all duration-300 ".concat(r?"border-cosmic-accent bg-cosmic-light/5 cursor-pointer hover:bg-cosmic-light/10":"border-cosmic-purple/30 bg-cosmic-deep/20"),onClick:()=>r&&i(r),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h4",{className:"text-lg font-mystical text-cosmic-gold",children:e.label}),r&&(0,n.jsxs)("span",{className:"text-sm text-cosmic-light bg-cosmic-purple/20 px-2 py-1 rounded",children:["Card #",r.number]})]}),(0,n.jsx)("p",{className:"text-sm text-cosmic-light mb-3",children:e.meaning_context}),r?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("p",{className:"text-sm italic text-cosmic-light/80",children:["“",t.interpretations[e.id],"”"]}),r===a&&(0,n.jsx)("div",{className:"mt-4 p-3 bg-cosmic-accent/20 rounded border border-cosmic-accent/50",children:(0,n.jsxs)("p",{className:"text-sm text-cosmic-light",children:[(0,n.jsx)("strong",{children:"Card:"})," ",r.cardName,(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Cosmic Influence:"})," Active pattern modifications"]})})]}):(0,n.jsx)("p",{className:"text-sm text-cosmic-light/60",children:"Position empty - awaiting your cosmic placement ✨"})]},e.id)})}):(()=>{var e,a,r,i;let o=(null==(e=t.energy_flow)?void 0:e.reduce((e,t)=>e+t.strength,0))||5,s=(null==(r=t.energy_flow)||null==(a=r[0])?void 0:a.element)||"Universal";return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-xl font-mystical text-cosmic-gold mb-2",children:"Cosmic Alignment Reading"}),(0,n.jsx)("p",{className:"text-cosmic-light/80",children:t.cosmic_alignment})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)("div",{className:"bg-gradient-to-br from-cosmic-purple/20 to-cosmic-blue/20 p-4 rounded-lg border border-cosmic-light/20",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("div",{className:"text-3xl font-bold text-cosmic-gold mb-1",children:[o,"/10"]}),(0,n.jsx)("div",{className:"text-sm text-cosmic-light",children:"Energy Intensity"})]})}),(0,n.jsx)("div",{className:"bg-gradient-to-br from-cosmic-accent/20 to-cosmic-gold/20 p-4 rounded-lg border border-cosmic-light/20",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-xl font-bold text-cosmic-light mb-1",children:s}),(0,n.jsx)("div",{className:"text-sm text-cosmic-light/80",children:"Dominant Element"})]})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h4",{className:"text-lg font-mystical text-cosmic-gold",children:"Energy Flow Analysis"}),(null==(i=t.energy_flow)?void 0:i.slice(0,3).map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 bg-cosmic-deep/30 rounded",children:[(0,n.jsxs)("span",{className:"text-cosmic-light",children:["Card ",e.fromCardId," → Card ",e.toCardId]}),(0,n.jsxs)("span",{className:"text-sm px-2 py-1 rounded ".concat("Fire"===e.element?"bg-red-500/20 text-red-300":"Water"===e.element?"bg-blue-500/20 text-blue-300":"Earth"===e.element?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"),children:[e.element," • ",e.strength,"/5"]})]},t)))||(0,n.jsx)("p",{className:"text-cosmic-light/60",children:"Analyzing cosmic connections..."})]})]})})()}catch(e){return console.error("CardInterpretation error:",e),c(!0),null}})()}):(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"animate-spin text-2xl mb-4",children:"✨"}),(0,n.jsx)("p",{className:"text-cosmic-light/60",children:"Preparing your cosmic reading..."})]})}),(0,n.jsx)("div",{className:"mt-4 text-center text-cosmic-light/60 text-sm",children:"✨ Click cards to see their cosmic positioning ✨"})]})}var y=a(1755),f=a(9286),b=a(4614);let w=e=>{let{spread:t,spreadType:a,energyFlows:i,isOpen:o,onClose:s}=e,l=(0,r.useRef)(null),[c,d]=(0,r.useState)({}),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[w,v]=(0,r.useState)(""),[j,C]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),S=(0,y.zh)({opacity:+!!o,transform:o?"translateY(0)":"translateY(20px)",config:{tension:200,friction:20}}),_=(e,t)=>{let n="celtic-cross"===a?3:2;return{x:t%n*180+50,y:250*Math.floor(t/n)+50}},E=(0,r.useCallback)(async()=>{C(!0),k(null);try{let e=await (0,b.jc)(t,a,null);h(e.share_url||"".concat(window.location.origin,"/spread/").concat(Date.now()));let n=await (0,b.U4)(i,a);n.playlist&&g(n.playlist);let r=await (0,b.pG)("auto");v(r.astrological_note||"")}catch(e){k("Unable to load cosmic data. Please try again."),console.error("Failed to generate share data:",e)}finally{C(!1)}},[t,a,i]);(0,r.useEffect)(()=>{o&&E()},[o,E]);let M=Object.entries(t).filter(e=>{let[,t]=e;return t.card}).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a.card.name," - ").concat(a.interpretation)}).join("\n");return o?(0,n.jsx)(y.CS.div,{style:S,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 ".concat(o?"block":"hidden"),role:"dialog","aria-label":"Share Your Tarot Spread","aria-modal":"true",children:(0,n.jsxs)("div",{className:"bg-void rounded-xl p-6 max-w-3xl w-full mx-4 border border-yellow-400 shadow-lg shadow-yellow-400/50",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-solarflare mb-4",children:"Share Your Cosmic Spread"}),(0,n.jsxs)(n.Fragment,{children:[j?(0,n.jsx)(f.A,{}):(0,n.jsx)(u.BI,{width:600,height:600,ref:l,className:"w-full bg-gray-900/50 rounded-lg border border-yellow-400",children:(0,n.jsxs)(u.Wd,{children:[(0,n.jsx)(u.rw,{x:0,y:0,width:600,height:600,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:600,y:600},fillLinearGradientColorStops:[0,"#1A1A2E",1,"#16213E"]}),(0,n.jsx)(u.EY,{x:20,y:20,text:"Cosmic ".concat(a.replace("-"," ").toUpperCase()," Spread"),fontSize:24,fill:"#FACC15",fontStyle:"bold"}),i.map((e,t)=>{let a=2*i.indexOf(e),r=(i.indexOf(e)+1)*2,o=_("pos".concat(a),a),s=_("pos".concat(r),r);return(0,n.jsx)(u.N1,{points:[o.x+75,o.y+112.5,s.x+75,s.y+112.5],stroke:e.color,strokeWidth:e.strength/2,dash:[10,5],opacity:.7},t)})]})}),(0,n.jsxs)("div",{className:"mt-4 text-starlight text-sm max-h-40 overflow-y-auto",children:[(0,n.jsx)("p",{children:M}),!N&&w&&(0,n.jsx)("p",{className:"mt-2 italic",children:w}),p&&(0,n.jsx)("p",{className:"mt-2",children:(0,n.jsxs)("a",{href:p.uri,target:"_blank",rel:"noopener noreferrer",className:"text-yellow-400 hover:underline",children:["Listen to your ",p.name," on Spotify"]})})]}),(0,n.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,n.jsx)(x.A,{onClick:()=>{navigator.clipboard.writeText(m||"").then(()=>{"function"==typeof window.alert&&window.alert("Share link copied to clipboard!")})},className:"px-4 py-2",disabled:!m,children:"Copy Shareable Link"}),(0,n.jsx)(x.A,{onClick:()=>{if(l.current){let e=l.current.toDataURL({pixelRatio:2}),t=document.createElement("a");t.href=e,t.download="cosmic_tarot_spread_".concat(a.replace("-","_"),".png"),t.click();return}},className:"px-4 py-2",disabled:!1,children:"Download Spread Image"}),(0,n.jsx)("button",{onClick:s,className:"bg-gray-700 text-starlight px-4 py-2 rounded-lg hover:bg-gray-600 transition",children:"Close"})]})]}),(0,n.jsx)("div",{className:"sr-only",children:"Shareable tarot spread available."})]})}):null};class v{initializeAudio(){if(!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Web Audio API not supported in this browser"),this.isEnabled=!1}}playTone(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine";if(!this.isEnabled||!this.audioContext)return;let n=this.audioContext.createOscillator(),r=this.audioContext.createGain();n.connect(r),r.connect(this.audioContext.destination),n.frequency.setValueAtTime(e,this.audioContext.currentTime),n.type=a;let i=this.audioContext.currentTime;r.gain.setValueAtTime(0,i),r.gain.linearRampToValueAtTime(.8*this.volume,i+.01),r.gain.setValueAtTime(.6*this.volume,i+.7*t),r.gain.exponentialRampToValueAtTime(.01,i+t),n.start(i),n.stop(i+t)}playChord(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.forEach((e,a)=>{setTimeout(()=>this.playTone(e,t),50*a)})}playCardMove(){this.playTone(220,.2,"triangle")}playCardPlace(){this.playChord([261.63,329.63,392],.6)}playCardReveal(){this.playChord([146.83,174.61,196,220,246.94],.8)}playEnergyFlow(){this.playTone(55,1,"sine"),setTimeout(()=>this.playTone(75,.8,"triangle"),200)}playReadingStart(){[110,138.59,164.81,196,220].forEach((e,t)=>{setTimeout(()=>this.playTone(e,.3+.1*t),150*t)})}playReadingComplete(){this.playChord([220,277.18,329.63,415.3],1.2)}playButtonClick(){this.playTone(800,.1,"square")}playError(){this.playChord([311.13,392,466.16],.8)}playSuccess(){[392,493.88,587.33,783.99].forEach((e,t)=>{setTimeout(()=>this.playTone(e,.2),80*t)})}setEnabled(e){this.isEnabled=e}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}getVolume(){return this.volume}getIsEnabled(){return this.isEnabled}dispose(){this.audioContext&&(this.audioContext.close(),this.audioContext=null)}constructor(){this.audioContext=null,this.isEnabled=!0,this.volume=.3,document.addEventListener("click",this.initializeAudio.bind(this),{once:!0}),document.addEventListener("touchstart",this.initializeAudio.bind(this),{once:!0})}}let j=new v;var C=a(4463);function N(){let[e,t]=(0,r.useState)(i.three_card),[a,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)([]),[N,k]=(0,r.useState)(new Map),[S,_]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null),[A,T]=(0,r.useState)(!1),F=(0,r.useRef)(null);(0,r.useRef)(null);let D=function(e){let{initialCards:t,spread:a,snapDistance:n=50}=e,[i,o]=(0,r.useState)(t),[s,l]=(0,r.useState)(!1),c=(0,r.useCallback)(()=>{l(!0)},[]),d=(0,r.useCallback)(e=>{l(!1);let{active:t,delta:r}=e;t.id&&r&&o(e=>e.map(e=>{if(e.id!==t.id)return e;let i=e.position.x+r.x,o=e.position.y+r.y,s={x:i,y:o};for(let e of a.positions){let t=1e3*e.x,a=1e3*e.y;if(Math.sqrt((t-i)**2+(a-o)**2)<n){s={x:t,y:a};break}}return{...e,position:s}}))},[a.positions,n]),u=(0,r.useCallback)(e=>{console.log("Drag over:",e)},[]),m=(0,r.useCallback)((e,t)=>{o(a=>a.map(a=>a.id===e?{...a,position:t}:a))},[]),h=(0,r.useCallback)((e,t)=>{o(a=>a.map(a=>a.id===e?{...a,rotation:t}:a))},[]);return{cards:i,isDragging:s,handleDragStart:c,handleDragEnd:d,handleDragOver:u,updateCardPosition:m,rotateCard:h,flipCard:(0,r.useCallback)(e=>{o(t=>t.map(t=>t.id===e?{...t,isFaceDown:!t.isFaceDown}:t))},[]),resetCards:(0,r.useCallback)(()=>{o(t)},[t])}}({initialCards:(e=>{let t=i[e].positions.map((e,t)=>({id:"card-".concat(t),cardName:"Card ".concat(t+1),number:t+1,position:{x:8*e.x,y:6*e.y},rotation:e.rotation,isFaceDown:!0,cosmic_properties:{colors:{primary:"#8b5cf6",secondary:"#3b82f6",glow:"#8b5cf6"},animation:"glow-pulse",gradient:"linear-gradient(135deg, #6366f1, #8b5cf6)",glow_effect:"glow-purple",constellation_pattern:"ursa-major"}})),a=new Map;return t.forEach(e=>a.set(e.id,e.position)),k(a),t})(e.layout_type),spread:e});(0,r.useRef)(new Map);let R=async t=>{try{let a=await fetch("/api/v1/tarot/calculate-energy-flow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:t.map(e=>({id:e.id,cardName:e.cardName,position:e.position})),spread:e})});if(a.ok){let e=await a.json();v(e.energy_flows||[])}}catch(e){console.error("Failed to calculate energy flows:",e)}},P=async()=>{j.playReadingStart(),C.TH.readingStart(),f(!0),M(null);try{await R(D.cards);let t=await fetch("/api/v1/tarot/enhanced-interpretation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:D.cards.map(e=>({id:e.id,cardName:e.cardName,position:e.position})),spread:e}),signal:AbortSignal.timeout(1e4)}),a={},n="Venus and Mercury alignment for clear communication";if(t.ok){let e=await t.json();a=e.interpretations||{},n=e.cosmic_alignment||n,e.energy_flows&&e.energy_flows.length>0&&(v(e.energy_flows),_(!0))}else{let e="Failed to connect with cosmic energies";throw 429===t.status?e="Cosmic energies are overcharged. Please wait a moment.":t.status>=500?e="The cosmic realm is temporarily unreachable.":400===t.status&&(e="Invalid card configuration detected."),Error(e)}let r={id:"reading-".concat(Date.now()),spread:e,cards:D.cards,interpretations:a,cosmic_alignment:n,timestamp:new Date,energy_flow:b};o(r),j.playReadingComplete(),C.TH.readingComplete(),d(!0)}catch(t){j.playError(),C.TH.error(),console.error("Failed to generate reading:",t);let e="An unexpected cosmic disruption occurred.";t instanceof Error?e=t.message:t instanceof DOMException&&"AbortError"===t.name&&(e="Connection to the cosmos timed out."),M(e)}finally{f(!1)}},I=()=>{D.resetCards(),v([]),_(!1),o(null),d(!1)};return s(F,{onDrag:e=>{e.fingerCount},onPinch:e=>{console.log("Pinch zoom:",e)},onSwipe:e=>{"left"===e?I():"right"===e&&a&&d(!c)}}),l(e=>{let t=D.cards.find(t=>t.id===e);t&&m(t)},e=>{console.log("Focusing card:",e)},I,P,()=>{o(null),d(!1),v([]),D.resetCards()},()=>{console.log("Help: Use arrow keys to navigate, S to shuffle, R to reveal")},D.cards.map(e=>e.id)),(0,n.jsxs)("div",{className:"interactive-tarot-reader w-full max-w-6xl mx-auto p-6 space-y-6",children:[(0,n.jsxs)(p.A,{className:"p-4",children:[(0,n.jsx)("h2",{className:"text-2xl font-mystical text-cosmic-gold mb-4 text-center",children:"Choose Your Spread"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:Object.values(i).map(a=>(0,n.jsx)(x.A,{onClick:()=>(e=>{let a=i[e];a&&(t(a),o(null),d(!1),v([]),_(!1),D.resetCards())})(a.id),className:e.id===a.id?"ring-2 ring-cosmic-accent":"",disabled:D.isDragging,children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"font-mystical",children:a.name}),(0,n.jsxs)("div",{className:"text-sm opacity-80",children:[a.positions.length," cards"]})]})},a.id))})]}),E&&(0,n.jsx)(p.A,{className:"border-red-500/30 bg-red-900/20",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-red-400 text-xl",children:"⚠️"}),(0,n.jsx)("p",{className:"text-red-300",children:E})]}),(0,n.jsx)("button",{onClick:()=>M(null),className:"text-red-400 hover:text-red-200 text-xl","aria-label":"Dismiss error",children:"✕"})]})}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,n.jsx)(x.A,{onClick:I,className:"px-6 py-2",disabled:D.isDragging||y,children:"\uD83D\uDD2E Shuffle Cards"}),(0,n.jsx)(x.A,{onClick:P,className:"px-6 py-2",disabled:D.isDragging||y,children:y?"Generating...":"Reveal Reading ✨"}),a&&b.length>0&&(0,n.jsxs)(x.A,{onClick:()=>_(!S),className:"px-6 py-2 ".concat(S?"ring-2 ring-energy-flow-active":""),disabled:y,children:["⚡ ",S?"Hide Energy Flows":"Show Energy Flows"]}),a&&(0,n.jsx)(x.A,{onClick:()=>T(!0),className:"px-6 py-2",disabled:y,children:"\uD83C\uDF0C Share Spread"})]}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(h,{spread:e,cards:D.cards,onDragEnd:D.handleDragEnd,onDragOver:D.handleDragOver,canvasSize:{width:c?600:800,height:500},energyFlows:b,showEnergyFlows:S,onEnergyFlowClick:e=>console.log("Energy flow clicked:",e)})}),c&&a&&(0,n.jsx)("div",{className:"lg:w-80",children:(0,n.jsx)(g,{reading:a,selectedCard:u,onCardSelect:m})})]}),y&&(0,n.jsx)("div",{className:"fixed inset-0 bg-cosmic-deep/90 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-6xl animate-spin mb-4",children:"\uD83C\uDF19"}),(0,n.jsx)("div",{className:"text-cosmic-gold font-mystical",children:"Consulting the Cosmos..."})]})}),a&&(0,n.jsx)(w,{spread:a.spread.positions.reduce((e,t)=>({...e,[t.label]:{card:a.cards.find(e=>e.id==="card-".concat(a.spread.positions.indexOf(t)))||null,interpretation:a.interpretations[t.id]||""}}),{}),spreadType:e.id,energyFlows:b,isOpen:A,onClose:()=>T(!1)})]})}},4233:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(7876),r=a(2738),i=a(4521);function o(e){let{card:t,size:a="md"}=e,{attributes:o,listeners:s,setNodeRef:l,transform:c,isDragging:d}=(0,r.PM)({id:t.id}),u=t.isFaceDown?(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-cosmic-deep to-cosmic-purple rounded-lg border-2 border-cosmic-glow/50",children:(0,n.jsx)("div",{className:"text-cosmic-gold text-xs font-mystical tracking-wider rotate-90",children:"✨\uD83C\uDF19✨"})}):(0,n.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-2",children:[(0,n.jsx)("div",{className:"text-cosmic-gold text-center text-sm font-mystical mb-2",children:t.cardName}),(0,n.jsxs)("div",{className:"text-cosmic-light text-xs",children:["#",t.number]})]});return(0,n.jsx)("div",{ref:l,style:{"--tarot-card-rotation":"".concat(t.rotation,"deg"),"--tarot-card-x":c?"".concat(c.x,"px"):"0px","--tarot-card-y":c?"".concat(c.y,"px"):"0px"},...s,...o,className:"absolute cursor-grab ".concat(d?"cursor-grabbing z-50 scale-110":""," transition-transform duration-200 ").concat({sm:"w-24 h-36",md:"w-32 h-48",lg:"w-40 h-60"}[a]," ").concat(c?"tarot-card-dragging":"tarot-card-transform"),children:(0,n.jsx)(i.A,{className:"w-full h-full overflow-hidden ".concat(t.cosmic_properties.glow_effect),glow:!0,hover:!0,children:(0,n.jsxs)("div",{className:"w-full h-full rounded-xl relative overflow-hidden tarot-card-background",style:{"--tarot-card-gradient":t.cosmic_properties.gradient,"--tarot-card-glow":t.cosmic_properties.glow_effect.replace("glow-effect-","0 0 20px ")},children:[u,(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{"--tarot-card-color-primary":t.cosmic_properties.colors.primary,"--tarot-card-color-secondary":t.cosmic_properties.colors.secondary},children:(0,n.jsxs)("svg",{className:"w-full h-full",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("pattern",{id:"constellation-".concat(t.id),patternUnits:"userSpaceOnUse",width:"20",height:"20",children:[(0,n.jsx)("circle",{cx:"2",cy:"2",r:"0.5",className:"tarot-card-constellation-primary",opacity:"0.3"}),(0,n.jsx)("circle",{cx:"18",cy:"18",r:"0.3",className:"tarot-card-constellation-secondary",opacity:"0.2"})]})}),(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"url(#constellation-".concat(t.id,")")})]})})]})})})}},4521:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(7876);function r(e){let{children:t,className:a="",hover:r=!1,glow:i=!1}=e;return(0,n.jsxs)("div",{className:"".concat("relative rounded-xl border backdrop-blur-sm bg-cosmic-deep/20 p-6"," ").concat(i?"shadow-cosmic border-cosmic-glow/30":"shadow-blue border-cosmic-purple/30"," ").concat(r?"hover:shadow-cosmic-lg hover:border-cosmic-accent/50 transition-all duration-300":""," ").concat(a),children:[t,(0,n.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-cosmic-purple/5 to-cosmic-blue/5 pointer-events-none"})]})}},9286:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(7876),r=a(1755);let i=()=>{let e=(0,r.zh)({from:{rotate:0},to:{rotate:360},loop:!0,config:{duration:2e3}});return(0,n.jsxs)("output",{className:"flex items-center justify-center p-4","aria-label":"Loading cosmic data",children:[(0,n.jsxs)(r.CS.div,{style:{transform:e.rotate.to(e=>"rotate(".concat(e,"deg)"))},className:"relative w-16 h-16",children:[(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-yellow-400/20 to-transparent"}),(0,n.jsx)("div",{className:"absolute w-4 h-4 rounded-full bg-yellow-400 shadow-lg shadow-yellow-400/50 top-0 left-6"}),(0,n.jsx)("div",{className:"absolute w-3 h-3 rounded-full bg-yellow-300 shadow-md shadow-yellow-300/50 bottom-2 right-4"}),(0,n.jsx)("div",{className:"absolute w-2 h-2 rounded-full bg-yellow-200 shadow-sm shadow-yellow-200/50 top-4 right-2"})]}),(0,n.jsx)("span",{children:"Generating cosmic insights"})]})}}}]);