"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2232],{2232:(t,e,n)=>{n.d(e,{A:()=>P});var o=n(7876),i=n(4232),r=n(8205),a=n(1648),s=n(3191),l=n(9745),c=n(4516),f=n(9070),u=n(5302),d=n(5003),m=n(8230),h=n.n(m),y=n(4796);let v=(0,a.b)({time:0,color:new y.Color(1,1,1),distortionStrength:.2,zodiacType:0},"\n    varying vec2 vUv;\n    varying vec3 vNormal;\n    void main() {\n      vUv = uv;\n      vNormal = normalize(normalMatrix * normal);\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ","\n    uniform float time;\n    uniform vec3 color;\n    uniform float distortionStrength;\n    uniform int zodiacType;\n    varying vec2 vUv;\n    varying vec3 vNormal;\n    void main() {\n      vec2 uv = vUv;\n      float t = time * 0.5;\n      float distortion = 0.0;\n      if (zodiacType == 0) {\n        distortion = sin(uv.x * 10.0 + t) * cos(uv.y * 10.0 + t) * distortionStrength;\n      } else if (zodiacType == 1) {\n        float angle = atan(uv.y - 0.5, uv.x - 0.5);\n        distortion = sin(angle * 5.0 + t) * distortionStrength;\n      } else if (zodiacType == 2) {\n        distortion = sin(length(uv - 0.5) * 20.0 + t) * distortionStrength;\n      } else {\n        distortion = sin(uv.y * 15.0 + t) * distortionStrength;\n      }\n      uv += vNormal.xy * distortion;\n      float intensity = 0.5 + 0.5 * sin(t + uv.x * 5.0);\n      gl_FragColor = vec4(color * intensity, intensity * 0.3);\n    }\n  "),p=(0,a.b)({time:0,baseColor:new y.Color(1,1,1),secondaryColor:new y.Color(1,1,1),strength:.5,zodiacType:0,tarotBurst:0,transitBurst:0,glowBurst:0,moodIntensity:.5},"\n    varying vec2 vUv;\n    varying vec3 vPosition;\n    void main() {\n      vUv = uv;\n      vPosition = position;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ","\n    uniform float time;\n    uniform vec3 baseColor;\n    uniform vec3 secondaryColor;\n    uniform float strength;\n    uniform int zodiacType;\n    uniform float tarotBurst;\n    uniform float transitBurst;\n    uniform float glowBurst;\n    uniform float moodIntensity;\n    varying vec2 vUv;\n    varying vec3 vPosition;\n\n    float noise(vec2 p) {\n      return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);\n    }\n\n    void main() {\n      vec2 uv = vUv;\n      float t = time * 0.8;\n      float glow = strength;\n      float pulse = 0.5 + 0.5 * sin(t * (1.0 + moodIntensity)); // Mood-specific pulsing\n\n      if (zodiacType == 0) { // Passionate\n        float n = noise(uv * 10.0 + t);\n        glow *= 0.5 + 0.5 * sin(t + n * 2.0);\n      } else if (zodiacType == 1) { // Curious\n        float angle = atan(uv.y - 0.5, uv.x - 0.5);\n        glow *= 0.6 + 0.4 * cos(angle * 5.0 + t);\n      } else if (zodiacType == 2) { // Reflective\n        float n = noise(uv * 5.0 + t);\n        glow *= 0.5 + 0.5 * sin(length(uv - 0.5) * 15.0 + t + n);\n      } else if (zodiacType == 3) { // Serene\n        glow *= 0.6 + 0.4 * sin(uv.y * 10.0 + t);\n      } else { // Neutral\n        glow *= 0.5 + 0.5 * sin(t + uv.x * 5.0);\n      }\n\n      // Color blending\n      vec3 color = mix(baseColor, secondaryColor, 0.5 + 0.5 * sin(t * 0.5));\n      glow += tarotBurst * (0.5 + 0.5 * sin(t * 2.0));\n      glow += transitBurst * (0.7 + 0.3 * sin(t * 3.0));\n      glow += glowBurst * (1.0 + 0.5 * sin(t * 4.0));\n      gl_FragColor = vec4(color * glow * pulse, glow * 0.7);\n    }\n  "),g=(0,a.b)({time:0,color:new y.Color(1,1,1),opacity:.8},"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ","\n    uniform float time;\n    uniform vec3 color;\n    uniform float opacity;\n    varying vec2 vUv;\n\n    void main() {\n      float shimmer = 0.5 + 0.5 * sin(vUv.x * 10.0 + time * 2.0);\n      gl_FragColor = vec4(color, opacity * shimmer);\n    }\n  "),w=(0,a.b)({time:0,color:new y.Color(1,1,1),moodType:0},"\n    attribute vec3 velocity;\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position + velocity * 0.05;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(vPosition, 1.0);\n      gl_PointSize = 2.0;\n    }\n  ","\n    uniform float time;\n    uniform vec3 color;\n    uniform int moodType;\n    varying vec3 vPosition;\n\n    void main() {\n      float t = time * 0.7;\n      float intensity = 0.5;\n\n      if (moodType == 0) { // Passionate\n        intensity = 0.5 + 0.5 * sin(t + vPosition.x * 6.0);\n      } else if (moodType == 1) { // Curious\n        intensity = 0.6 + 0.4 * cos(atan(vPosition.y, vPosition.x) * 4.0 + t);\n      } else if (moodType == 2) { // Reflective\n        intensity = 0.5 + 0.5 * sin(length(vPosition.xy) * 12.0 + t);\n      } else if (moodType == 3) { // Serene\n        intensity = 0.6 + 0.4 * sin(vPosition.y * 8.0 + t);\n      } else { // Neutral\n        intensity = 0.5 + 0.5 * sin(t + vPosition.z * 5.0);\n      }\n\n      gl_FragColor = vec4(color * intensity, intensity * 0.7);\n    }\n  "),x=(0,a.b)({time:0,color:new y.Color(1,1,1),zodiacType:0},"\n    attribute vec3 velocity;\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position + velocity * 0.1;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(vPosition, 1.0);\n      gl_PointSize = 3.0;\n    }\n  ","\n    uniform float time;\n    uniform vec3 color;\n    uniform int zodiacType;\n    varying vec3 vPosition;\n\n    void main() {\n      float t = time * 0.5;\n      float intensity = 0.5;\n\n      if (zodiacType == 0) {\n        intensity = 0.5 + 0.5 * sin(t + vPosition.x * 5.0);\n      } else if (zodiacType == 1) {\n        intensity = 0.6 + 0.4 * cos(atan(vPosition.y, vPosition.x) * 3.0 + t);\n      } else if (zodiacType == 2) {\n        intensity = 0.5 + 0.5 * sin(length(vPosition.xy) * 10.0 + t);\n      } else {\n        intensity = 0.6 + 0.4 * sin(vPosition.y * 5.0 + t);\n      }\n\n      gl_FragColor = vec4(color * intensity, intensity * 0.8);\n    }\n  ");function b(){let t=(0,i.useRef)(null),e=new Float32Array(3e3);for(let t=0;t<1e3;t++)e[3*t]=(Math.random()-.5)*100,e[3*t+1]=(Math.random()-.5)*100,e[3*t+2]=(Math.random()-.5)*100;return(0,f.F)(()=>{t.current&&(t.current.rotation.y+=5e-4)}),(0,o.jsx)("primitive",{object:t.current})}function z(){let t=(0,i.useRef)(null);return(0,f.F)(e=>{let{clock:n}=e;t.current&&(t.current.rotation.y+=.001,t.current.material.uniforms.time.value=n.getElapsedTime())}),(0,o.jsxs)("mesh",{ref:t,children:[(0,o.jsx)("sphereGeometry",{args:[50,32,32]}),(0,o.jsx)(v,{color:new y.Color("#4a0e4e"),distortionStrength:.1,zodiacType:2})]})}function j(t){let{position:e,text:n,href:a,zodiac:l,size:c=.5,color:u="#00f",isMoon:d=!1}=t,m=(0,i.useRef)(null),p=(0,i.useRef)(null),[g,w]=(0,i.useState)(!1),{user:x}=(0,r.A)(),b={Aries:new y.Color("#ff4500"),Leo:new y.Color("#ffd700"),Virgo:new y.Color("#00ff7f"),Libra:new y.Color("#1e90ff")};(0,f.F)(t=>{let{clock:e}=t;m.current&&(m.current.rotation.y+=d?.02:.01,m.current.scale.setScalar(g?1.2*c:c)),p.current&&(p.current.scale.setScalar(g?1.6*c:1.4*c),p.current.material.uniforms.time.value=e.getElapsedTime(),p.current.material.uniforms.distortionStrength.value=g?.4:.2)});let z=async()=>{try{await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/interactions"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==x?void 0:x.id),"Content-Type":"application/json"},body:JSON.stringify({interaction_type:"aura_click",zodiac_sign:l})})}catch(t){console.error("Failed to log aura interaction")}};return(0,o.jsxs)("group",{position:e,children:[(0,o.jsxs)("mesh",{ref:m,onPointerOver:()=>w(!0),onPointerOut:()=>w(!1),onClick:z,children:[(0,o.jsx)("sphereGeometry",{args:[c,32,32]}),(0,o.jsx)("meshStandardMaterial",{color:g?"#ff5555":u,emissive:d?"#aaa":"#333",roughness:d?.8:.4})]}),(0,o.jsxs)("mesh",{ref:p,children:[(0,o.jsx)("sphereGeometry",{args:[1.4*c,32,32]}),(0,o.jsx)(v,{color:b[l]||new y.Color("#ffffff"),zodiacType:{Aries:0,Leo:1,Virgo:2,Libra:3}[l]||0})]}),(0,o.jsx)(s.E,{position:[0,c+.3,0],fontSize:.2,color:"white",anchorX:"center",anchorY:"middle",children:"".concat(n," (").concat(l,")")}),(0,o.jsx)(h(),{href:a,className:"absolute inset-0"})]})}function C(t){let{position:e,user:n}=t,r=(0,i.useRef)(null),a=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)([]),[m,h]=(0,i.useState)(null),[v,w]=(0,i.useState)({}),[b,z]=(0,i.useState)({}),[j,C]=(0,i.useState)({}),[_,S]=(0,i.useState)([{trait_name:"Courage",zodiac_sign:"Aries",strength:.8},{trait_name:"Creativity",zodiac_sign:"Leo",strength:.6},{trait_name:"Precision",zodiac_sign:"Virgo",strength:.7},{trait_name:"Harmony",zodiac_sign:"Libra",strength:.5}]),P={Courage:new y.Color("#ff4500"),Creativity:new y.Color("#ffd700"),Precision:new y.Color("#00ff7f"),Harmony:new y.Color("#1e90ff")},T={Courage:0,Creativity:1,Precision:2,Harmony:3},M=(0,d.useDrag)(t=>{let{offset:[e,n],down:o}=t;r.current&&o&&(r.current.rotation.y+=.005*e)});(0,i.useEffect)(()=>{n&&fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/zodiac-dna"),{headers:{Authorization:"Bearer ".concat(n.id)}}).then(t=>t.json()).then(t=>S(t.dna))},[n]);let k=async()=>{try{let t=await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/tarot-pull"),{method:"POST",headers:{Authorization:"Bearer ".concat(n.id),"Content-Type":"application/json"}}),{card:e,trait:o,strength:i}=await t.json();S(t=>t.map(t=>t.trait_name===o?{...t,strength:i}:t)),w(t=>({...t,[o]:1})),C(t=>({...t,[o]:1})),setTimeout(()=>{w(t=>({...t,[o]:0})),C(t=>({...t,[o]:0}))},1e3)}catch(t){console.error("Failed to perform tarot pull")}},A=async()=>{try{let t=await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/transit"),{method:"GET",headers:{Authorization:"Bearer ".concat(n.id)}}),{transit:e,trait:o,strength:i}=await t.json();S(t=>t.map(t=>t.trait_name===o?{...t,strength:i}:t)),z(t=>({...t,[o]:1})),C(t=>({...t,[o]:1})),setTimeout(()=>{z(t=>({...t,[o]:0})),C(t=>({...t,[o]:0}))},1e3)}catch(t){console.error("Failed to fetch transit")}},B=_.map((t,e)=>{let n=e*Math.PI*.5;return new y.Vector3(.3*Math.sin(n),.3*e-(_.length-1)*.15,.3*Math.cos(n))}),F=new Float32Array(300),N=new Float32Array(300);for(let t=0;t<100;t++){let e=t/99,n=Math.floor(e*(B.length-1)),o=Math.min(n+1,B.length-1),i=e*(B.length-1)-n,r=B[n].clone().lerp(B[o],i);F[3*t]=r.x+(Math.random()-.5)*.05,F[3*t+1]=r.y+(Math.random()-.5)*.05,F[3*t+2]=r.z+(Math.random()-.5)*.05,N[3*t]=(Math.random()-.5)*.01,N[3*t+1]=(Math.random()-.5)*.01,N[3*t+2]=(Math.random()-.5)*.01}(0,f.F)(t=>{let{clock:e}=t;if(a.current&&(a.current.rotation.y+=.01),c.current){let t=c.current.geometry.attributes.position.array,e=c.current.geometry.attributes.velocity.array,n=Object.values(b).some(t=>t>0)||Object.values(j).some(t=>t>0)?3:m?2:1;for(let o=0;o<100;o++){t[3*o]+=e[3*o]*n,t[3*o+1]+=e[3*o+1]*n,t[3*o+2]+=e[3*o+2]*n;let i=o/99,r=Math.floor(i*(B.length-1)),a=Math.min(r+1,B.length-1),s=i*(B.length-1)-r,l=B[r].clone().lerp(B[a],s);Math.sqrt((t[3*o]-l.x)**2+(t[3*o+1]-l.y)**2+(t[3*o+2]-l.z)**2)>.1&&(t[3*o]+=(l.x-3*t.i)*.05,t[3*o+1]+=(l.y-t[3*o+1])*.05,t[3*o+2]+=(l.z-t[3*o+2])*.05)}c.current.geometry.attributes.position.needsUpdate=!0}});let O=async t=>{try{await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/zodiac-dna"),{method:"POST",headers:{Authorization:"Bearer ".concat(n.id),"Content-Type":"application/json"},body:JSON.stringify({trait_name:t.trait_name,zodiac_sign:t.zodiac_sign,strength:Math.min(t.strength+.1,1)})}),await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/interactions"),{method:"POST",headers:{Authorization:"Bearer ".concat(n.id),"Content-Type":"application/json"},body:JSON.stringify({interaction_type:"trail_click",zodiac_sign:t.zodiac_sign})}),S(e=>e.map(e=>e.trait_name===t.trait_name?{...e,strength:Math.min(e.strength+.1,1)}:e)),C(e=>({...e,[t.trait_name]:1})),setTimeout(()=>C(e=>({...e,[t.trait_name]:0})),1e3)}catch(t){console.error("Failed to update DNA trait or log interaction")}};return(0,o.jsxs)("group",{position:e,ref:r,...M(),children:[(0,o.jsx)(l.N,{ref:a,points:B,color:"#ffffff",lineWidth:2}),(0,o.jsxs)("points",{ref:c,children:[(0,o.jsxs)("bufferGeometry",{children:[(0,o.jsx)("bufferAttribute",{attach:"attributes-position",array:F,count:100,itemSize:3}),(0,o.jsx)("bufferAttribute",{attach:"attributes-velocity",array:N,count:100,itemSize:3})]}),(0,o.jsx)(x,{color:P[_[0].trait_name]||new y.Color("#ffffff"),zodiacType:T[_[0].trait_name]||0,time:Date.now()/1e3})]}),_.map((t,e)=>(0,o.jsxs)("group",{children:[(0,o.jsxs)("mesh",{position:B[e],ref:t=>u.current[e]=t,onPointerOver:()=>h(t.trait_name),onPointerOut:()=>h(null),onClick:()=>O(t),children:[(0,o.jsx)("sphereGeometry",{args:[.1*t.strength,16,16]}),(0,o.jsx)(p,{color:P[t.trait_name]||new y.Color("#ffffff"),strength:t.strength,zodiacType:T[t.trait_name]||0,tarotBurst:v[t.trait_name]||0,transitBurst:b[t.trait_name]||0,glowBurst:j[t.trait_name]||0,time:Date.now()/1e3})]}),(0,o.jsx)(s.E,{position:[B[e].x,B[e].y+.15,B[e].z],fontSize:.12,anchorX:"center",material:new g({color:P[t.trait_name]||new y.Color("#ffffff"),opacity:.8,time:Date.now()/1e3}),children:"".concat(t.trait_name,": ").concat(t.strength.toFixed(2))})]},t.trait_name)),(0,o.jsx)(s.E,{position:[0,-.5,0],fontSize:.2,color:"white",anchorX:"center",onClick:k,children:"Draw Tarot"}),(0,o.jsx)(s.E,{position:[0,-.8,0],fontSize:.2,color:"white",anchorX:"center",onClick:A,children:"View Transits"})]})}function _(t){let{position:e,user:n}=t,r=(0,i.useRef)(null),a=(0,i.useRef)(null),c=(0,i.useRef)([]),[u,m]=(0,i.useState)([]),[h,v]=(0,i.useState)(null),[g,w]=(0,i.useState)({}),x={tarot_pull:new y.Color("#ffd700"),transit_view:new y.Color("#1e90ff"),trail_click:new y.Color("#ff4500")},b={tarot_pull:0,transit_view:1,trail_click:2};(0,i.useEffect)(()=>{n&&fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/timeline"),{headers:{Authorization:"Bearer ".concat(n.id)}}).then(t=>t.json()).then(t=>m(t.timeline))},[n]);let z=u.map((t,e)=>{let n=e*Math.PI*.4;return new y.Vector3(.5*Math.sin(n),.4*e-(u.length-1)*.2,.5*Math.cos(n))}),j=(0,d.useDrag)(t=>{let{offset:[e,n],down:o}=t;r.current&&o&&(r.current.rotation.y+=.005*e)});(0,f.F)(t=>{let{clock:e}=t;a.current&&(a.current.rotation.y+=.01)});let C=async t=>{try{await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/interactions"),{method:"POST",headers:{Authorization:"Bearer ".concat(n.id),"Content-Type":"application/json"},body:JSON.stringify({interaction_type:"timeline_click",zodiac_sign:t.zodiac_sign})}),w(e=>({...e,[t.id]:1})),setTimeout(()=>w(e=>({...e,[t.id]:0})),1e3)}catch(t){console.error("Failed to log timeline interaction")}};return(0,o.jsxs)("group",{position:e,ref:r,...j(),children:[(0,o.jsx)(l.N,{ref:a,points:z,color:"#ffffff",lineWidth:1.5}),u.map((t,e)=>(0,o.jsxs)("group",{children:[(0,o.jsxs)("mesh",{position:z[e],ref:t=>c.current[e]=t,onPointerOver:()=>v(t.id),onPointerOut:()=>v(null),onClick:()=>C(t),children:[(0,o.jsx)("sphereGeometry",{args:[.08,16,16]}),(0,o.jsx)(p,{color:x[t.type]||new y.Color("#ffffff"),strength:.7,zodiacType:b[t.type]||0,tarotBurst:0,transitBurst:0,glowBurst:g[t.id]||0,time:Date.now()/1e3})]}),(0,o.jsx)(s.E,{position:[z[e].x,z[e].y+.15,z[e].z],fontSize:.1,color:x[t.type]||new y.Color("#ffffff"),children:"tarot_pull"===t.type?"Tarot: ".concat(t.details.card):"transit_view"===t.type?"Transit: ".concat(t.details.transit):"Trait Click: ".concat(t.zodiac_sign)})]},t.id)),(0,o.jsx)(s.E,{position:[0,-.5,0],fontSize:.2,color:"white",children:"Cosmic Timeline"})]})}function S(t){let{position:e,user:n}=t,r=(0,i.useRef)(null),a=(0,i.useRef)([]),l=(0,i.useRef)(null),[c,u]=(0,i.useState)({mood:"Neutral",intensity:.5}),[m,h]=(0,i.useState)(null),[v,x]=(0,i.useState)({}),b={Passionate:{base:new y.Color("#ff4500"),secondary:new y.Color("#ff8c00")},Curious:{base:new y.Color("#ffd700"),secondary:new y.Color("#ffa500")},Reflective:{base:new y.Color("#00ff7f"),secondary:new y.Color("#00cc66")},Serene:{base:new y.Color("#1e90ff"),secondary:new y.Color("#87ceeb")},Neutral:{base:new y.Color("#ffffff"),secondary:new y.Color("#cccccc")}},z={Passionate:0,Curious:1,Reflective:2,Serene:3,Neutral:4};(0,i.useEffect)(()=>{n&&fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/mood"),{headers:{Authorization:"Bearer ".concat(n.id)}}).then(t=>t.json()).then(t=>u({mood:t.mood,intensity:t.intensity}))},[n]);let j=[{mood:c.mood,intensity:c.intensity,offset:0}],C=new Float32Array(150),_=new Float32Array(150);for(let t=0;t<50;t++){let e=t/50*Math.PI*2;C[3*t]=.5*Math.sin(e),C[3*t+1]=0,C[3*t+2]=.5*Math.cos(e),_[3*t]=(Math.random()-.5)*.02,_[3*t+1]=(Math.random()-.5)*.02,_[3*t+2]=(Math.random()-.5)*.02}let S=(0,d.useDrag)(t=>{let{offset:[e,n],down:o}=t;r.current&&o&&(r.current.rotation.y+=.005*e)});(0,f.F)(t=>{let{clock:e}=t,n=e.getElapsedTime();if(a.current.forEach((t,e)=>{t&&(t.rotation.y+=.02+.01*c.intensity,t.rotation.x=.1*Math.sin(.5*n),t.scale.setScalar(1+.3*c.intensity*Math.sin(n*(2+c.intensity))))}),l.current){let t=l.current.geometry.attributes.position.array,e=l.current.geometry.attributes.velocity.array;for(let o=0;o<50;o++){let i=o/50*Math.PI*2+.5*n,r=.5+.1*c.intensity,a=Math.sin(i)*r,s=Math.cos(i)*r;t[3*o]+=e[3*o]+(a-t[3*o])*.05,t[3*o+1]+=e[3*o+1]+(0-t[3*o+1])*.05,t[3*o+2]+=e[3*o+2]+(s-t[3*o+2])*.05}l.current.geometry.attributes.position.needsUpdate=!0}});let P=async t=>{try{await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/interactions"),{method:"POST",headers:{Authorization:"Bearer ".concat(n.id),"Content-Type":"application/json"},body:JSON.stringify({interaction_type:"mood_click",zodiac_sign:null,details:{mood:t}})}),x(e=>({...e,[t]:1})),setTimeout(()=>x(e=>({...e,[t]:0})),1500)}catch(t){console.error("Failed to log mood interaction")}};return(0,o.jsxs)("group",{position:e,ref:r,...S(),children:[j.map((t,e)=>{var n,i,r,c;return(0,o.jsxs)("group",{children:[(0,o.jsxs)("mesh",{position:[0,.2*e,0],ref:t=>a.current[e]=t,onPointerOver:()=>h(t.mood),onPointerOut:()=>h(null),onClick:()=>P(t.mood),children:[(0,o.jsx)("torusGeometry",{args:[.5,.02,16,32]}),(0,o.jsx)(p,{baseColor:(null==(n=b[t.mood])?void 0:n.base)||new y.Color("#ffffff"),secondaryColor:(null==(i=b[t.mood])?void 0:i.secondary)||new y.Color("#cccccc"),strength:t.intensity,zodiacType:z[t.mood]||4,tarotBurst:0,transitBurst:0,glowBurst:v[t.mood]||0,moodIntensity:t.intensity,time:Date.now()/1e3})]}),(0,o.jsxs)("points",{ref:l,children:[(0,o.jsxs)("bufferGeometry",{children:[(0,o.jsx)("bufferAttribute",{attach:"attributes-position",array:C,count:50,itemSize:3}),(0,o.jsx)("bufferAttribute",{attach:"attributes-velocity",array:_,count:50,itemSize:3})]}),(0,o.jsx)(w,{color:(null==(r=b[t.mood])?void 0:r.base)||new y.Color("#ffffff"),moodType:z[t.mood]||4,time:Date.now()/1e3})]}),m===t.mood&&(0,o.jsx)(s.E,{position:[0,.2*e+.15,0],fontSize:.1,material:new g({color:(null==(c=b[t.mood])?void 0:c.base)||new y.Color("#ffffff"),opacity:.8,time:Date.now()/1e3}),children:"Mood: ".concat(t.mood," (").concat(t.intensity.toFixed(2),")")})]},t.mood)}),(0,o.jsx)(s.E,{position:[0,-.5,0],fontSize:.2,color:"white",onClick:()=>fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/mood"),{headers:{Authorization:"Bearer ".concat(n.id)}}).then(t=>t.json()).then(t=>u({mood:t.mood,intensity:t.intensity})),children:"Refresh Mood"})]})}function P(){let{user:t}=(0,r.A)(),[e,n]=(0,i.useState)("default"),a=async e=>{try{await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/preferences"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==t?void 0:t.id),"Content-Type":"application/json"},body:JSON.stringify({ar_filter:(null==t?void 0:t.zodiacSign.toLowerCase())+"_filter",sound_enabled:!0,aura_style:e})}),n(e)}catch(t){console.error("Failed to update aura style")}};return(0,o.jsxs)("div",{className:"h-screen w-full bg-black relative",children:[(0,o.jsxs)(u.Hl,{camera:{position:[0,0,15]},children:[(0,o.jsx)("ambientLight",{intensity:.4}),(0,o.jsx)("pointLight",{position:[10,10,10],intensity:1}),(0,o.jsx)(b,{}),(0,o.jsx)(z,{}),(0,o.jsx)(j,{position:[-3,2,0],text:"Home",href:"/home",zodiac:"Aries",size:.8,color:"#ff4500"}),(0,o.jsx)(j,{position:[0,2,0],text:"Profile",href:"/profile",zodiac:"Leo",size:.4,color:"#ffd700",isMoon:!0}),(0,o.jsx)(C,{position:[-1.5,2.5,0],user:t}),(0,o.jsx)(_,{position:[1.5,2.5,0],user:t}),(0,o.jsx)(S,{position:[-1.5,2.5,0],user:t}),(0,o.jsx)(j,{position:[3,2,0],text:"Feed",href:"/feed",zodiac:"Virgo",size:.6,color:"#00ff7f"}),(0,o.jsx)(j,{position:[0,-1,0],text:"Community",href:"/community",zodiac:"Libra",size:.5,color:"#1e90ff"}),(0,o.jsx)(c.N,{enableZoom:!0,enablePan:!0})]}),t&&(0,o.jsxs)("div",{className:"absolute top-4 left-4 text-white z-10 bg-black/50 p-4 rounded-lg",children:[(0,o.jsxs)("h2",{className:"text-xl font-bold",children:["Star Navigator: ",t.email]}),(0,o.jsxs)("p",{children:["Zodiac: ",t.zodiacSign]}),(0,o.jsxs)("select",{value:e,onChange:t=>a(t.target.value),className:"mt-2 bg-gray-800 text-white p-2 rounded text-sm","aria-label":"Select aura style",children:[(0,o.jsx)("option",{value:"default",children:"Default Aura"}),(0,o.jsx)("option",{value:"fiery",children:"Fiery Ripples (Aries)"}),(0,o.jsx)("option",{value:"swirly",children:"Golden Swirls (Leo)"}),(0,o.jsx)("option",{value:"pulsing",children:"Verdant Pulse (Virgo)"}),(0,o.jsx)("option",{value:"wavy",children:"Harmonic Waves (Libra)"})]})]})]})}(0,f.e)(y),(0,f.e)({DistortionAuraMaterial:v,DNANodeMaterial:p,HolographicLabelMaterial:g,HelixTrailMaterial:x,ParticleTrailMaterial:w})},8205:(t,e,n)=>{n.d(e,{A:()=>r}),n(7876);var o=n(4232);let i=(0,o.createContext)({user:null,loading:!0,login:()=>{},logout:()=>{}}),r=()=>(0,o.useContext)(i)}}]);