"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1232],{1232:(e,a,i)=>{i.r(a),i.d(a,{CollaborativeAvatar:()=>k});var r=i(2969),t=i(5794),o=i(7534),n=i(9288),s=i(6438),c={default:{animation:"gentleFloat",duration:"2s",easing:"ease-in-out",colors:["#ff4444","#ff6644"]}},l={WESTERN:{name:"Western Astrology",signs:["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"],elements:{Fire:["Aries","Leo","Sagittarius"],Earth:["Taurus","Virgo","Capricorn"],Air:["Gemini","Libra","Aquarius"],Water:["Cancer","Scorpio","Pisces"]},qualities:{Cardinal:["Aries","Cancer","Libra","Capricorn"],Fixed:["Taurus","Leo","Scorpio","Aquarius"],Mutable:["Gemini","Virgo","Sagittarius","Pisces"]}},CHINESE:{name:"Chinese Zodiac",signs:["Rat","Ox","Tiger","Rabbit","Dragon","Snake","Horse","Goat","Monkey","Rooster","Dog","Pig"],elements:{Wood:["Tiger","Rabbit"],Fire:["Snake","Horse"],Earth:["Ox","Dragon","Goat","Dog"],Metal:["Monkey","Rooster"],Water:["Rat","Pig"]},qualities:{Yin:["Rat","Ox","Tiger","Rabbit","Snake","Pig"],Yang:["Horse","Goat","Monkey","Rooster","Dog","Dragon"]}},VEDIC:{name:"Vedic Astrology",signs:["Mesha","Vrishabha","Mithuna","Karka","Simha","Kanya","Tula","Vrishchika","Dhanus","Makara","Kumbha","Meena"],elements:{Fire:["Mesha","Simha","Dhanus"],Earth:["Vrishabha","Kanya","Makara"],Air:["Mithuna","Tula","Kumbha"],Water:["Karka","Vrishchika","Meena"]},qualities:{Movable:["Mesha","Karka","Tula","Makara"],Fixed:["Vrishabha","Simha","Vrishchika","Kumbha"],Dual:["Mithuna","Kanya","Dhanus","Meena"]}},MAYAN:{name:"Mayan Astrology",signs:["Crocodile","Wind","Jaguar","Road","Serpent","Death","Deer","Rabbit","Water","Dog","Monkey","Reed","Jaguar","Eagle","Vulture","Earth","Storm","Sun","Night","Seed"],elements:{Fire:["Serpent","Death","Sun"],Earth:["Crocodile","Deer","Earth"],Air:["Wind","Rabbit","Storm"],Water:["Water","Dog","Night"]},qualities:{Creative:["Crocodile","Wind","Jaguar","Road"],Receptive:["Serpent","Death","Deer","Rabbit"],Transformative:["Water","Dog","Monkey","Reed"],Enlightened:["Jaguar","Eagle","Vulture","Earth","Storm","Sun","Night","Seed"]}},AZTEC:{name:"Aztec Astrology",signs:["Crocodile","Wind","House","Lizard","Serpent","Death","Deer","Rabbit","Water","Dog","Monkey","Grass","Reed","Jaguar","Eagle","Vulture","Movement","Flint","Storm","Sun"],elements:{Fire:["Serpent","Death","Jaguar","Eagle","Sun"],Earth:["Crocodile","House","Deer","Dog","Grass"],Air:["Wind","Rabbit","Monkey","Vulture","Storm"],Water:["Water","Lizard","Reed","Movement","Flint"]},qualities:{Primal:["Crocodile","Wind","House","Lizard","Serpent"],Transformative:["Death","Deer","Rabbit","Water","Dog"],Creative:["Monkey","Grass","Reed","Jaguar","Eagle"],Transcendent:["Vulture","Movement","Flint","Storm","Sun"]}}},u=function(e){for(var a=0,i=Object.entries(l);a<i.length;a++){var r=(0,t.A)(i[a],2),o=r[0];if(r[1].signs.includes(e))return o}return"WESTERN"},f=i(3335),d=i(3191),h=i(9070),m=i(5003),g=i(4232),p=i(4796),v=i(7876);function y(e,a){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function S(e){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?y(Object(i),!0).forEach(function(a){(0,r.A)(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}var b=function(e){var a=e.action,i=e.isActive,r=e.color,t=e.userData,o=(0,g.useRef)(),n=(0,g.useState)([]),s=n[0],c=n[1];return(0,g.useEffect)(function(){if(i&&a&&t){var e=u(t.zodiacSign),o=GENERATE_ALL_ZODIAC_ANIMATIONS()[e];if(o&&o[a]){var n=o[a].particles;c(Array.from({length:n.count},function(e,a){return{id:a,position:[0,0,0],velocity:["forward"===n.direction?.1*n.speed:(Math.random()-.5)*n.speed*.1,"top"===n.direction?.1*n.speed:"down"===n.direction?-(.1*n.speed):(Math.random()-.5)*n.speed*.1,"out"===n.direction?.1*n.speed:(Math.random()-.5)*n.speed*.1],life:1,color:r||"#ffffff"}}));var s=setTimeout(function(){return c([])},o[a].duration);return function(){return clearTimeout(s)}}}},[i,a,r,t]),(0,h.F)(function(e,a){o.current&&s.forEach(function(e,i){var r=o.current.children[i];r&&(r.position.x+=e.velocity[0]*a,r.position.y+=e.velocity[1]*a,r.position.z+=e.velocity[2]*a,e.life-=2*a,r.material.opacity=Math.max(0,e.life))})}),(0,v.jsx)("group",{ref:o,children:s.map(function(e){return(0,v.jsxs)("mesh",{position:e.position,children:[(0,v.jsx)("sphereGeometry",{args:[.02,4,4]}),(0,v.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:e.life})]},e.id)})})},M=function(e){return({aries:"#ff4444",taurus:"#44ff44",gemini:"#ffff44",cancer:"#4444ff",leo:"#ffaa44",virgo:"#44ffaa",libra:"#aa44ff",scorpio:"#ff44aa",sagittarius:"#44aaff",capricorn:"#aaaaaa",aquarius:"#44ffff",pisces:"#aa44aa",crocodile:"#8B4513",wind:"#87CEEB",jaguar:"#000000",road:"#DAA520",serpent:"#32CD32",death:"#8B0000",deer:"#228B22",rabbit:"#FFB6C1",water:"#4169E1",dog:"#8B4513",monkey:"#FFD700",reed:"#9ACD32",eagle:"#B22222",vulture:"#696969",earth:"#8B4513",storm:"#4682B4",sun:"#FFD700",night:"#191970",seed:"#32CD32",house:"#8B4513",lizard:"#20B2AA",grass:"#9ACD32",movement:"#FF4500",flint:"#708090"})[null==e?void 0:e.toLowerCase()]||"#4a90e2"},j=function(e){return({aries:"fire",taurus:"earth",gemini:"air",cancer:"water",leo:"fire",virgo:"earth",libra:"air",scorpio:"water",sagittarius:"fire",capricorn:"earth",aquarius:"air",pisces:"water",crocodile:"earth",wind:"air",jaguar:"fire",road:"earth",serpent:"fire",death:"fire",deer:"earth",rabbit:"air",water:"water",dog:"earth",monkey:"air",reed:"earth",eagle:"fire",vulture:"air",earth:"earth",storm:"air",sun:"fire",night:"water",seed:"earth",house:"earth",lizard:"water",grass:"earth",movement:"water",flint:"water"})[null==e?void 0:e.toLowerCase()]||"default"},k=function(e){var a,i,r,l,y,k=e.userId,C=e.onClick,w=e.isCurrentUser,A=void 0!==w&&w,D=(0,g.useRef)(),E=(0,g.useRef)(),_=(0,o.T)(),z=_.onlineUsers,x=_.updateUserPosition,R=_.socket;(0,n.V)().theme;var T=(0,g.useState)(null),F=T[0],O=T[1],W=(0,g.useState)(!1),G=W[0],L=W[1],V=(0,g.useState)([]),I=V[0],P=V[1],B=(0,g.useState)(null),N=B[0],q=B[1],K=(0,f.zh)(function(){return{scale:[1,1,1],position:[0,0,0],rotation:[0,0,0],emissiveIntensity:.2,config:{mass:1,tension:280,friction:60}}}),H=(0,t.A)(K,2),Y=H[0],J=H[1],X=(0,m.useGesture)({onDrag:function(e){var a,i,r,o=e.active,n=(0,t.A)(e.movement,2),s=n[0],c=n[1];e.velocity,A&&o&&x(k,[((null==F||null==(a=F.position)?void 0:a[0])||0)+.01*s,((null==F||null==(i=F.position)?void 0:i[1])||0)-.01*c,(null==F||null==(r=F.position)?void 0:r[2])||0])},onHover:function(e){L(e.hovering)}});if((0,g.useEffect)(function(){var e=z.get(k);if(e){var a=e.galactic_tone?getGalacticTone(e.galactic_tone):null;O(S(S({},e),{},{galacticToneInfo:a,chinese_zodiac_actions:e.chinese_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"},western_zodiac_actions:e.western_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"},mayan_zodiac_actions:e.mayan_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"},aztec_zodiac_actions:e.aztec_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"}}));var i=j(e.zodiacSign);P(Array.from({length:8},function(a,r){return{id:r,position:[(Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2],color:M(e.zodiacSign),element:i}}))}},[z,k]),(0,g.useEffect)(function(){if(R){var e=function(e){var a=e.user_id,i=e.action;if(e.action_type,a===k){var r=z.get(k);if(r){var o,n=u(r.zodiacSign);if(r.galactic_tone&&("AZTEC"===n||"MAYAN"===n)){for(var s,l=null,f=0,d=Object.entries((null==F?void 0:F["".concat(n.toLowerCase(),"_zodiac_actions")])||{});f<d.length;f++){var h=(0,t.A)(d[f],2),m=h[0];if(h[1]===i){l=m;break}}l&&(s=n,r.zodiacSign||r.aztec_zodiac,r.galactic_tone,o=c[s]||c.default)}else{var g=c[n];o=null==g?void 0:g[i]}o&&(q(i),J.start(S(S({},o),{},{onRest:function(){q(null),J.start(o.onRest||{})}})),new Audio("/sounds/".concat(i.toLowerCase(),".mp3")).play().catch(function(){}))}}};return R.on("action_notification",e),function(){return R.off("action_notification",e)}}},[k,J,R]),(0,h.F)(function(e,a){!(a>.1)&&(D.current&&F&&(D.current.position.lerp(new p.Vector3(F.position[0]||0,F.position[1]||0,F.position[2]||0),.1),F.rotation&&(D.current.rotation.y=F.rotation)),E.current&&E.current.children.forEach(function(a,i){var r,t=e.clock.elapsedTime;switch(null==(r=I[i])?void 0:r.element){case"fire":a.position.y+=.01*Math.sin(3*t+i),a.material.emissiveIntensity=.3+.2*Math.sin(2*t);break;case"water":a.position.x+=.005*Math.sin(2*t+i),a.position.z+=.005*Math.cos(2*t+i);break;case"air":a.position.y+=.02*Math.sin(4*t+i);break;case"earth":a.rotation.x+=.01,a.rotation.y+=.01;break;default:a.position.y+=.01*Math.sin(t+i)}}))}),!F)return null;var Z=M(F.zodiacSign),U=j(F.zodiacSign);return(0,v.jsxs)(f.CS.group,{ref:D,scale:Y.scale,position:Y.position,rotation:Y.rotation,children:[(0,v.jsxs)("mesh",S(S({},X()),{},{onClick:function(e){return C(F,e)},castShadow:!0,receiveShadow:!0,"data-aria-label":"".concat(F.name," ").concat(N||"is online"),children:[(0,v.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,v.jsx)(f.CS.meshStandardMaterial,{color:Z,emissive:Z,emissiveIntensity:Y.emissiveIntensity,roughness:.3,metalness:.1})]})),(0,v.jsxs)("mesh",{position:[0,0,0],rotation:[Math.PI/2,0,0],children:[(0,v.jsx)("ringGeometry",{args:[.35,.4,16]}),(0,v.jsx)("meshBasicMaterial",{color:Z,transparent:!0,opacity:G?.6:.3,side:2})]}),(0,v.jsx)("group",{ref:E,children:I.map(function(e){return(0,v.jsxs)("mesh",{position:e.position,children:[(0,v.jsx)("sphereGeometry",{args:[.02,4,4]}),(0,v.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:.7})]},e.id)})}),(0,v.jsx)(d.E,{position:[0,.8,0],fontSize:.2,color:"#ffffff",anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:"#000000",children:F.name}),(0,v.jsx)(d.E,{position:[0,.6,0],fontSize:.1,color:Z,anchorX:"center",anchorY:"middle",children:(i=F.aztec_zodiac||F.mayan_zodiac||F.vedic_zodiac||F.western_zodiac||F.chinese_zodiac,r=(null==(a=F.galacticToneInfo)?void 0:a.symbol)||"",l=F.galactic_tone||"",i+((y=F.galactic_tone?r+" "+l:"")?" "+y:""))}),F.galacticToneInfo&&(0,v.jsxs)("mesh",{position:[0,0,0],rotation:[0,0,0],children:[(0,v.jsx)("ringGeometry",{args:[.42,.45,32]}),(0,v.jsx)("meshBasicMaterial",{color:F.galacticToneInfo.color,transparent:!0,opacity:.8,side:2})]}),N&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.E,{position:[0,.5,0],fontSize:.15,color:"#87ceeb",anchorX:"center",anchorY:"middle",children:N}),(0,v.jsx)(b,{action:N,isActive:!!N,color:(0,s.mw)(F.zodiacSign,N),userData:F})]}),(0,v.jsxs)("mesh",{position:[.4,.4,0],children:[(0,v.jsx)("sphereGeometry",{args:[.08,8,8]}),(0,v.jsx)("meshStandardMaterial",{color:"#00ff00",emissive:"#00ff00",emissiveIntensity:.5})]}),F.isActive&&(0,v.jsxs)("mesh",{position:[-.4,.4,0],children:[(0,v.jsx)("sphereGeometry",{args:[.06,8,8]}),(0,v.jsx)("meshStandardMaterial",{color:"#ffff00",emissive:"#ffff00",emissiveIntensity:.8})]}),G&&(0,v.jsx)(d.E,{position:[0,1.2,0],fontSize:.15,color:"#ffffff",anchorX:"center",anchorY:"middle",backgroundColor:"rgba(0,0,0,0.8)",padding:.1,children:"".concat(F.name," (").concat(U,")")})]})}}}]);