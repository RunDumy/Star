"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3287],{5361:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(3857),a=n(3081),i=n.n(a),o={auth:{getUser:function(){return(0,r.A)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:{user:null}});case 1:case"end":return e.stop()}},e)}))()},signOut:function(){return(0,r.A)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)}))()},onAuthStateChange:function(e){return{data:{subscription:null},unsubscribe:function(){}}}},from:function(e){return{select:function(e){return{eq:function(e,t){return{single:function(){return Promise.resolve({data:null,error:null})}}}}},insert:function(e){return Promise.resolve({data:null,error:null})},update:function(e){return{eq:function(e,t){return Promise.resolve({data:null,error:null})}}},delete:function(){return{eq:function(e,t){return Promise.resolve({data:null,error:null})}}}}},channel:function(e){return{on:function(e,t){return this},subscribe:function(e){return e&&e(),this},unsubscribe:function(){return Promise.resolve()}}},removeChannel:function(e){return Promise.resolve()}}},8296:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(8133),a=n(236),i=n(3857),o=n(3081),s=n.n(o),u=n(4232),c=n(986),p=n(4796),d=n(5693),f=n(1824),l=n(5361),h=n(7876);function v(e){var t,n=e.children,o=(0,u.useRef)(null),v=(0,u.useRef)([]),m=(0,u.useCallback)((t=(0,i.A)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.G)(t);case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[]);return(0,u.useEffect)(function(){if(o.current){var e,t=o.current,n=new p.Scene,u=new p.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),c=new p.WebGLRenderer({alpha:!0});c.setSize(window.innerWidth,window.innerHeight),t.appendChild(c.domElement);for(var f=[{name:"venus",size:.9,color:0xf472b6,position:[6,0,0],orbitSpeed:.02},{name:"mars",size:.5,color:0xdc2626,position:[10,0,0],orbitSpeed:.015},{name:"jupiter",size:1.8,color:0xfb923c,position:[13,0,0],orbitSpeed:.01}],h=f.map(function(e){var t=new p.SphereGeometry(e.size,32,32),r=new p.MeshBasicMaterial({color:e.color}),a=new p.Mesh(t,r);return a.position.set(e.position[0],e.position[1],e.position[2]),n.add(a),a}),m=new p.BufferGeometry,w=new Float32Array(15e3),y=0;y<15e3;y++)w[y]=(Math.random()-.5)*2e3;m.setAttribute("position",new p.BufferAttribute(w,3));var b=new p.PointsMaterial({color:0xffffff,size:2}),x=new p.Points(m,b);n.add(x);var g={Libra:[{start:[6,2,0],end:[7,3,1]},{start:[7,3,1],end:[8,2,0]},{start:[8,2,0],end:[7,1,-1]}],Aries:[{start:[5,1,0],end:[6,2,1]},{start:[6,2,1],end:[7,1,0]}],Scorpio:[{start:[5,2,1],end:[6,3,0]},{start:[6,3,0],end:[7,2,-1]},{start:[7,2,-1],end:[6.5,1,-.5]},{start:[6.5,1,-.5],end:[6,0,0]}],default:[{start:[6,2,0],end:[8,3,1]},{start:[8,3,1],end:[7,2,-1]}]},k=g.default,A=[],_="default",j=!1,O=f.map(function(){return new p.MeshBasicMaterial({color:0xf7dc6f,transparent:!0,opacity:0})});!function(){M.apply(this,arguments)}();var S=new d.N(u,c.domElement);S.enableDamping=!0,S.dampingFactor=.05,u.position.z=20;var P=function(){requestAnimationFrame(P),h.forEach(function(e,t){var n=f[t].orbitSpeed;e.position.x=f[t].position[0]*Math.cos(Date.now()*n*.001),e.position.z=f[t].position[0]*Math.sin(Date.now()*n*.001)}),A.forEach(function(e){e.material.opacity=.5+.5*Math.sin(.001*Date.now())}),v.current.forEach(function(e,t){e.material.opacity=j?.3+.2*Math.sin(.002*Date.now()):0,e.position.copy(h[t].position)}),S.update(),c.render(n,u)};P();var z=function(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",z);var E=new p.Raycaster,N=new p.Vector2,C=(e=(0,i.A)(s().mark(function e(t){var n,r,a,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(N.x=t.clientX/window.innerWidth*2-1,N.y=-(2*(t.clientY/window.innerHeight))+1,E.setFromCamera(N,u),!((n=E.intersectObjects(h)).length>0)){e.next=14;break}return r=n[0].object,a=f[h.indexOf(r)].name,e.next=9,l.N.auth.getUser();case 9:if(!(i=e.sent.data.user)){e.next=14;break}return e.next=14,l.N.from("analytics_events").insert({user_id:i.id,event_type:"constellation_reveal",event_data:{planet:a,zodiac:_},created_at:new Date().toISOString()});case 14:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return window.addEventListener("click",C),function(){window.removeEventListener("resize",z),window.removeEventListener("click",C),null==t||t.removeChild(c.domElement)}}function M(){return(M=(0,i.A)(s().mark(function e(){var t,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A.forEach(function(e){return n.remove(e)}),A.length=0,v.current.forEach(function(e){return n.remove(e)}),v.current=[],e.next=6,l.N.auth.getUser();case 6:if(!(t=e.sent.data.user)){e.next=15;break}return e.next=11,l.N.from("profiles").select("zodiac_sign").eq("user_id",t.id).single();case 11:j="Scorpio"===(_=(null==(i=e.sent.data)?void 0:i.zodiac_sign)||"default");case 15:(g[_]||g.default).forEach(function(e){var t=e.start,i=e.end,o=new p.LineBasicMaterial({color:"Scorpio"===_?0xf7dc6f:9133302,linewidth:2}),s=new p.BufferGeometry().setFromPoints([(0,r.A)(p.Vector3,(0,a.A)(t)),(0,r.A)(p.Vector3,(0,a.A)(i))]),u=new p.Line(s,o);n.add(u),A.push(u)}),j&&(v.current=f.map(function(e,t){var r=new p.SphereGeometry(1.3*e.size,32,32),a=new p.Mesh(r,O[t]);return n.add(a),a}));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}},[]),(0,h.jsxs)("section",{className:"relative min-h-screen starry-background mythic-cosmos-background","aria-label":"Cosmic Background with Constellations",children:[(0,h.jsx)(c.A,{id:"tsparticles",init:m,options:{background:{color:{value:"transparent"}},fpsLimit:60,particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:["#ffffff","#facc15","#3b82f6"]},shape:{type:"circle"},opacity:{value:.5,random:!0,anim:{enable:!0,speed:1}},size:{value:3,random:!0},move:{enable:!0,speed:.5,direction:"none",random:!0,outModes:{default:"out"}}},interactivity:{events:{onHover:{enable:!0,mode:"repulse"},onClick:{enable:!0,mode:"push"}},modes:{repulse:{distance:100},push:{quantity:4}}},detectRetina:!0}}),(0,h.jsx)("div",{className:"comet"}),(0,h.jsx)("div",{ref:o,className:"fixed inset-0 -z-10"}),(0,h.jsx)("div",{className:"relative z-10",children:n})]})}},8982:(e,t,n)=>{n.d(t,{FH:()=>f,aS:()=>g,d$:()=>b,JB:()=>v,U4:()=>j,pG:()=>S,iD:()=>l,jc:()=>A,tt:()=>w});var r=n(3857),a=n(3081),i=n.n(a),o=n(1040),s=n(2969);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e){var t=c({},e);if("string"==typeof t.user_id){var n=parseInt(t.user_id,10);Number.isNaN(n)||(t.user_id=n)}return t}var d="http://localhost:5000".replace(/\/$/,""),f=o.A.create({baseURL:d});function l(e){return h.apply(this,arguments)}function h(){return(h=(0,r.A)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("/api/v1/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,r.A)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/api/v1/zodiac-numbers");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=(0,r.A)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("/api/v1/upload",t,{headers:{"Content-Type":"multipart/form-data"}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(){return x.apply(this,arguments)}function x(){return(x=(0,r.A)(i().mark(function e(){var t,n,r,a,o=arguments;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,n=o.length>1?o[1]:void 0,r={page:t},void 0!==n&&(r.user_id=n),e.next=6,f.get("/api/v1/feed",{params:r});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return(k=(0,r.A)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("/api/v1/archetype-oracle/calculate",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e,t,n){return _.apply(this,arguments)}function _(){return(_=(0,r.A)(i().mark(function e(t,n,r){var a,o;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof fetch){e.next=5;break}return e.next=3,fetch("/api/v1/tarot/share-spread",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spread:t,spread_type:n,user_id:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:return e.next=7,f.post("/api/v1/tarot/share-spread",{spread:t,spread_type:n,user_id:r});case 7:return o=e.sent,e.abrupt("return",o.data);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=(0,r.A)(i().mark(function e(t,n){var r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof fetch){e.next=5;break}return e.next=3,fetch("/api/v1/tarot/spotify-playlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({energy_flows:t,spread_type:n})});case 3:return r=e.sent,e.abrupt("return",r.json());case 5:return e.next=7,f.post("/api/v1/tarot/spotify-playlist",{energy_flows:t,spread_type:n});case 7:return a=e.sent,e.abrupt("return",a.data);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return P.apply(this,arguments)}function P(){return(P=(0,r.A)(i().mark(function e(t){var n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof fetch){e.next=5;break}return e.next=3,fetch("/api/v1/tarot/location-insights",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip_address:t})});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:return e.next=7,f.post("/api/v1/tarot/location-insights",{ip_address:t});case 7:return r=e.sent,e.abrupt("return",r.data);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}f.interceptors.request.use(function(e){var t=localStorage.getItem("token");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),f.interceptors.response.use(function(e){var t,n;return null!=(t=e.config.url)&&t.includes("/api/v1/feed")&&(e.data=c(c({},n=e.data),{},{items:n.items.map(p)})),e})}}]);