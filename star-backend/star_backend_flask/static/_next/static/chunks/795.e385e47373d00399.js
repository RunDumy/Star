"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{795:(e,a,o)=>{o.r(a),o.d(a,{CollaborativeAvatar:()=>S});var i=o(7876),r=o(4563),t=o(8143);let n={WESTERN:{name:"Western Astrology",signs:["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"],elements:{Fire:["Aries","Leo","Sagittarius"],Earth:["Taurus","Virgo","Capricorn"],Air:["Gemini","Libra","Aquarius"],Water:["Cancer","Scorpio","Pisces"]},qualities:{Cardinal:["Aries","Cancer","Libra","Capricorn"],Fixed:["Taurus","Leo","Scorpio","Aquarius"],Mutable:["Gemini","Virgo","Sagittarius","Pisces"]}},CHINESE:{name:"Chinese Zodiac",signs:["Rat","Ox","Tiger","Rabbit","Dragon","Snake","Horse","Goat","Monkey","Rooster","Dog","Pig"],elements:{Wood:["Tiger","Rabbit"],Fire:["Snake","Horse"],Earth:["Ox","Dragon","Goat","Dog"],Metal:["Monkey","Rooster"],Water:["Rat","Pig"]},qualities:{Yin:["Rat","Ox","Tiger","Rabbit","Snake","Pig"],Yang:["Horse","Goat","Monkey","Rooster","Dog","Dragon"]}},VEDIC:{name:"Vedic Astrology",signs:["Mesha","Vrishabha","Mithuna","Karka","Simha","Kanya","Tula","Vrishchika","Dhanus","Makara","Kumbha","Meena"],elements:{Fire:["Mesha","Simha","Dhanus"],Earth:["Vrishabha","Kanya","Makara"],Air:["Mithuna","Tula","Kumbha"],Water:["Karka","Vrishchika","Meena"]},qualities:{Movable:["Mesha","Karka","Tula","Makara"],Fixed:["Vrishabha","Simha","Vrishchika","Kumbha"],Dual:["Mithuna","Kanya","Dhanus","Meena"]}},MAYAN:{name:"Mayan Astrology",signs:["Crocodile","Wind","Jaguar","Road","Serpent","Death","Deer","Rabbit","Water","Dog","Monkey","Reed","Jaguar","Eagle","Vulture","Earth","Storm","Sun","Night","Seed"],elements:{Fire:["Serpent","Death","Sun"],Earth:["Crocodile","Deer","Earth"],Air:["Wind","Rabbit","Storm"],Water:["Water","Dog","Night"]},qualities:{Creative:["Crocodile","Wind","Jaguar","Road"],Receptive:["Serpent","Death","Deer","Rabbit"],Transformative:["Water","Dog","Monkey","Reed"],Enlightened:["Jaguar","Eagle","Vulture","Earth","Storm","Sun","Night","Seed"]}},AZTEC:{name:"Aztec Astrology",signs:["Crocodile","Wind","House","Lizard","Serpent","Death","Deer","Rabbit","Water","Dog","Monkey","Grass","Reed","Jaguar","Eagle","Vulture","Movement","Flint","Storm","Sun"],elements:{Fire:["Serpent","Death","Jaguar","Eagle","Sun"],Earth:["Crocodile","House","Deer","Dog","Grass"],Air:["Wind","Rabbit","Monkey","Vulture","Storm"],Water:["Water","Lizard","Reed","Movement","Flint"]},qualities:{Primal:["Crocodile","Wind","House","Lizard","Serpent"],Transformative:["Death","Deer","Rabbit","Water","Dog"],Creative:["Monkey","Grass","Reed","Jaguar","Eagle"],Transcendent:["Vulture","Movement","Flint","Storm","Sun"]}}},l={WESTERN:{Aries:{comment:"Charge",like:"Spark",follow:"Lead",share:"Ignite"},Taurus:{comment:"Graze",like:"Root",follow:"Tread",share:"Sustain"},Gemini:{comment:"Chatter",like:"Flit",follow:"Connect",share:"Spread"},Cancer:{comment:"Nurture",like:"Embrace",follow:"Guide",share:"Shelter"},Leo:{comment:"Roar",like:"Shine",follow:"Strut",share:"Inspire"},Virgo:{comment:"Analyze",like:"Tidy",follow:"Serve",share:"Refine"},Libra:{comment:"Balance",like:"Harmonize",follow:"Align",share:"Share"},Scorpio:{comment:"Probe",like:"Sting",follow:"Hunt",share:"Transform"},Sagittarius:{comment:"Quest",like:"Aim",follow:"Explore",share:"Inspire"},Capricorn:{comment:"Plan",like:"Climb",follow:"Build",share:"Achieve"},Aquarius:{comment:"Innovate",like:"Rebel",follow:"Enlighten",share:"Spark"},Pisces:{comment:"Dream",like:"Flow",follow:"Drift",share:"Connect"}},CHINESE:{Rat:{comment:"Squeak",like:"Nibble",follow:"Scamper",share:"Gather"},Ox:{comment:"Moo",like:"Plow",follow:"Tread",share:"Carry"},Tiger:{comment:"Roar",like:"Pounce",follow:"Stalk",share:"Claim"},Rabbit:{comment:"Hop",like:"Bound",follow:"Burrow",share:"Nuzzle"},Dragon:{comment:"Bellow",like:"Soar",follow:"Circle",share:"Guard"},Snake:{comment:"Hiss",like:"Coil",follow:"Slither",share:"Shed"},Horse:{comment:"Neigh",like:"Gallop",follow:"Trot",share:"Prance"},Goat:{comment:"Bleat",like:"Graze",follow:"Climb",share:"Provide"},Monkey:{comment:"Chatter",like:"Swing",follow:"Play",share:"Discover"},Rooster:{comment:"Crow",like:"Peck",follow:"Strut",share:"Announce"},Dog:{comment:"Bark",like:"Fetch",follow:"Guard",share:"Protect"},Pig:{comment:"Oink",like:"Root",follow:"Trot",share:"Feast"}},VEDIC:{Mesha:{comment:"Rush",like:"Conquer",follow:"Pioneer",share:"Energize"},Vrishabha:{comment:"Cherish",like:"Build",follow:"Endure",share:"Nourish"},Mithuna:{comment:"Communicate",like:"Adapt",follow:"Network",share:"Inform"},Karka:{comment:"Protect",like:"Nurture",follow:"Shelter",share:"Heal"},Simha:{comment:"Command",like:"Radiate",follow:"Lead",share:"Inspire"},Kanya:{comment:"Analyze",like:"Perfect",follow:"Serve",share:"Purify"},Tula:{comment:"Balance",like:"Harmonize",follow:"Mediate",share:"Unite"},Vrishchika:{comment:"Probe",like:"Transform",follow:"Investigate",share:"Regenerate"},Dhanus:{comment:"Explore",like:"Expand",follow:"Philosophize",share:"Enlighten"},Makara:{comment:"Structure",like:"Achieve",follow:"Organize",share:"Sustain"},Kumbha:{comment:"Innovate",like:"Revolutionize",follow:"Humanize",share:"Liberate"},Meena:{comment:"Dream",like:"Intuit",follow:"Dissolve",share:"Transcend"}},MAYAN:{Crocodile:{comment:"Nurture",like:"Embrace",follow:"Protect",share:"Create"},Wind:{comment:"Whisper",like:"Breathe",follow:"Guide",share:"Inspire"},Jaguar:{comment:"Prowl",like:"Strike",follow:"Hunt",share:"Guard"},Road:{comment:"Journey",like:"Connect",follow:"Link",share:"Weave"},Serpent:{comment:"Transform",like:"Heal",follow:"Wisdom",share:"Renew"},Death:{comment:"Release",like:"Rebirth",follow:"Transition",share:"Liberate"},Deer:{comment:"Grace",like:"Resilient",follow:"Humanitarian",share:"Serve"},Rabbit:{comment:"Harmony",like:"Creative",follow:"Star-seed",share:"Harmonize"},Water:{comment:"Purify",like:"Empath",follow:"Intuitive",share:"Heal"},Dog:{comment:"Loyal",like:"Guide",follow:"Protect",share:"Lead"},Monkey:{comment:"Playful",like:"Invent",follow:"Artistic",share:"Trickster"},Reed:{comment:"Resilient",like:"Visionary",follow:"Explore",share:"Teach"},Eagle:{comment:"Soar",like:"Visionary",follow:"Free",share:"Achieve"},Vulture:{comment:"Wise",like:"Warrior",follow:"Liberate",share:"Forgive"},Earth:{comment:"Navigate",like:"Harmonious",follow:"Steward",share:"Earth"},Storm:{comment:"Reveal",like:"Sword",follow:"Truth",share:"Mirror"},Sun:{comment:"Enlighten",like:"Solar",follow:"Radiant",share:"Create"},Night:{comment:"Ennoble",like:"Solar Lord",follow:"Wise",share:"Rule"},Seed:{comment:"Awaken",like:"Target",follow:"Group",share:"Realize"}},AZTEC:{Crocodile:{comment:"Nurture",like:"Embrace",follow:"Protect",share:"Create"},Wind:{comment:"Whisper",like:"Breathe",follow:"Guide",share:"Inspire"},House:{comment:"Shelter",like:"Build",follow:"Gather",share:"Harmonize"},Lizard:{comment:"Adapt",like:"Climb",follow:"Survive",share:"Renew"},Serpent:{comment:"Transform",like:"Heal",follow:"Wisdom",share:"Renew"},Death:{comment:"Release",like:"Rebirth",follow:"Transition",share:"Liberate"},Deer:{comment:"Grace",like:"Leap",follow:"Humanitarian",share:"Serve"},Rabbit:{comment:"Harmony",like:"Bound",follow:"Multiply",share:"Fertility"},Water:{comment:"Flow",like:"Cleanse",follow:"Nourish",share:"Refresh"},Dog:{comment:"Loyal",like:"Guard",follow:"Protect",share:"Guide"},Monkey:{comment:"Play",like:"Swing",follow:"Entertain",share:"Amuse"},Grass:{comment:"Grow",like:"Bend",follow:"Endure",share:"Sustain"},Reed:{comment:"Conduct",like:"Channel",follow:"Navigate",share:"Connect"},Jaguar:{comment:"Prowl",like:"Strike",follow:"Hunt",share:"Rule"},Eagle:{comment:"Soar",like:"Dive",follow:"Scout",share:"Achieve"},Vulture:{comment:"Circle",like:"Cleanse",follow:"Purify",share:"Renew"},Movement:{comment:"Shift",like:"Dance",follow:"Change",share:"Transform"},Flint:{comment:"Cut",like:"Sharp",follow:"Decisive",share:"Truth"},Storm:{comment:"Thunder",like:"Lightning",follow:"Cleanse",share:"Renew"},Sun:{comment:"Shine",like:"Radiate",follow:"Illuminate",share:"Life"}}},s=e=>{for(let[a,o]of Object.entries(n))if(o.signs.includes(e))return a;return"WESTERN"},c=GENERATE_ALL_ZODIAC_ANIMATIONS();var m=o(3335),h=o(3191),u=o(9070),d=o(5003),f=o(4232),g=o(4796);let k=e=>{let{action:a,isActive:o,color:r,userData:t}=e,n=(0,f.useRef)(),[l,c]=(0,f.useState)([]);return(0,f.useEffect)(()=>{if(o&&a&&t){let e=s(t.zodiacSign),o=GENERATE_ALL_ZODIAC_ANIMATIONS()[e];if(o&&o[a]){let e=o[a].particles;c(Array.from({length:e.count},(a,o)=>({id:o,position:[0,0,0],velocity:["forward"===e.direction?.1*e.speed:(Math.random()-.5)*e.speed*.1,"top"===e.direction?.1*e.speed:"down"===e.direction?-(.1*e.speed):(Math.random()-.5)*e.speed*.1,"out"===e.direction?.1*e.speed:(Math.random()-.5)*e.speed*.1],life:1,color:r||"#ffffff"})));let i=setTimeout(()=>c([]),o[a].duration);return()=>clearTimeout(i)}}},[o,a,r,t]),(0,u.F)((e,a)=>{n.current&&l.forEach((e,o)=>{let i=n.current.children[o];i&&(i.position.x+=e.velocity[0]*a,i.position.y+=e.velocity[1]*a,i.position.z+=e.velocity[2]*a,e.life-=2*a,i.material.opacity=Math.max(0,e.life))})}),(0,i.jsx)("group",{ref:n,children:l.map(e=>(0,i.jsxs)("mesh",{position:e.position,children:[(0,i.jsx)("sphereGeometry",{args:[.02,4,4]}),(0,i.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:e.life})]},e.id))})},w=e=>({aries:"#ff4444",taurus:"#44ff44",gemini:"#ffff44",cancer:"#4444ff",leo:"#ffaa44",virgo:"#44ffaa",libra:"#aa44ff",scorpio:"#ff44aa",sagittarius:"#44aaff",capricorn:"#aaaaaa",aquarius:"#44ffff",pisces:"#aa44aa",crocodile:"#8B4513",wind:"#87CEEB",jaguar:"#000000",road:"#DAA520",serpent:"#32CD32",death:"#8B0000",deer:"#228B22",rabbit:"#FFB6C1",water:"#4169E1",dog:"#8B4513",monkey:"#FFD700",reed:"#9ACD32",eagle:"#B22222",vulture:"#696969",earth:"#8B4513",storm:"#4682B4",sun:"#FFD700",night:"#191970",seed:"#32CD32",house:"#8B4513",lizard:"#20B2AA",grass:"#9ACD32",movement:"#FF4500",flint:"#708090"})[null==e?void 0:e.toLowerCase()]||"#4a90e2",p=e=>({aries:"fire",taurus:"earth",gemini:"air",cancer:"water",leo:"fire",virgo:"earth",libra:"air",scorpio:"water",sagittarius:"fire",capricorn:"earth",aquarius:"air",pisces:"water",crocodile:"earth",wind:"air",jaguar:"fire",road:"earth",serpent:"fire",death:"fire",deer:"earth",rabbit:"air",water:"water",dog:"earth",monkey:"air",reed:"earth",eagle:"fire",vulture:"air",earth:"earth",storm:"air",sun:"fire",night:"water",seed:"earth",house:"earth",lizard:"water",grass:"earth",movement:"water",flint:"water"})[null==e?void 0:e.toLowerCase()]||"default",S=e=>{let{userId:a,onClick:o,isCurrentUser:S=!1}=e,y=(0,f.useRef)(),C=(0,f.useRef)(),{onlineUsers:v,updateUserPosition:b,socket:E}=(0,r.T)(),{theme:R}=useCosmicTheme(),[M,A]=(0,f.useState)(null),[D,z]=(0,f.useState)(!1),[T,x]=(0,f.useState)([]),[G,_]=(0,f.useState)(null),[I,W]=(0,m.zh)(()=>({scale:[1,1,1],position:[0,0,0],rotation:[0,0,0],emissiveIntensity:.2,config:{mass:1,tension:280,friction:60}})),L=(0,d.useGesture)({onDrag:e=>{let{active:o,movement:[i,r],velocity:t}=e;if(S&&o){var n,l,s;b(a,[((null==M||null==(n=M.position)?void 0:n[0])||0)+.01*i,((null==M||null==(l=M.position)?void 0:l[1])||0)-.01*r,(null==M||null==(s=M.position)?void 0:s[2])||0])}},onHover:e=>{let{hovering:a}=e;z(a)}});if((0,f.useEffect)(()=>{let e=v.get(a);if(e){let a=e.galactic_tone?getGalacticTone(e.galactic_tone):null;A({...e,galacticToneInfo:a,chinese_zodiac_actions:e.chinese_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"},western_zodiac_actions:e.western_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"},mayan_zodiac_actions:e.mayan_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"},aztec_zodiac_actions:e.aztec_zodiac_actions||{comment:"Comment",like:"Like",follow:"Follow",share:"Share"}});let o=p(e.zodiacSign);x(Array.from({length:8},(a,i)=>({id:i,position:[(Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2],color:w(e.zodiacSign),element:o})))}},[v,a]),(0,f.useEffect)(()=>{if(!E)return;let e=e=>{let{user_id:o,action:i,action_type:r}=e;if(o===a){let e=v.get(a);if(e){let a,o=s(e.zodiacSign);if(e.galactic_tone&&("AZTEC"===o||"MAYAN"===o)){let r=null;for(let[e,a]of Object.entries((null==M?void 0:M["".concat(o.toLowerCase(),"_zodiac_actions")])||{}))if(a===i){r=e;break}r&&(a=((e,a,o,i)=>{let r=((e,a,o)=>{let i=((e,a)=>{for(let[o,i]of Object.entries(n[e].elements))if(i.includes(a))return o;return"Fire"})(e,a),r=((e,a,o)=>{let i={comment:{scale:[1.2,1.2,1.2],duration:250},like:{scale:[1.15,1.15,1.15],duration:200},follow:{position:[0,0,.5],duration:350},share:{rotation:[0,Math.PI/4,0],duration:400}}[o],r={Fire:{intensity:1.2,speed:1.3},Earth:{intensity:.8,speed:.7},Air:{intensity:1,speed:1.1},Water:{intensity:.9,speed:.8},Wood:{intensity:1.1,speed:.9},Metal:{intensity:.95,speed:.85}}[a],t={WESTERN:{scale:1,duration:1},CHINESE:{scale:1.1,duration:1.2},VEDIC:{scale:.9,duration:.8}}[e];return{...i,scale:i.scale.map(e=>e*t.scale),duration:i.duration*t.duration,intensity:r.intensity,speed:r.speed}})(e,i,o),t=(l[e][a]||{})[o];return{...r,actionWord:t,animation:((e,a)=>{var o;return(null==(o=c[e])?void 0:o[a])||c.WESTERN.Blare})(e,t)}})(e,a,o),t=getToneModifierForAction(i,o);return{...r,...t,scale:t.scale||r.scale,duration:Math.min(t.duration||r.duration,600),emissiveIntensity:(r.emissiveIntensity||.5)*(t.emissiveIntensity||1),particles:{...r.particles,...t.particles,color:t.toneColor||r.color,toneEffect:t.effect},toneData:getGalacticTone(i)}})(o,e.zodiacSign||e.aztec_zodiac,r,e.galactic_tone))}else{let e=c[o];a=null==e?void 0:e[i]}a&&(_(i),W.start({...a,onRest:()=>{_(null),W.start(a.onRest||{})}}),new Audio("/sounds/".concat(i.toLowerCase(),".mp3")).play().catch(()=>{}))}}};return E.on("action_notification",e),()=>E.off("action_notification",e)},[a,W,E]),(0,u.F)((e,a)=>{!(a>.1)&&(y.current&&M&&(y.current.position.lerp(new g.Vector3(M.position[0]||0,M.position[1]||0,M.position[2]||0),.1),M.rotation&&(y.current.rotation.y=M.rotation)),C.current&&C.current.children.forEach((a,o)=>{var i;let r=e.clock.elapsedTime;switch(null==(i=T[o])?void 0:i.element){case"fire":a.position.y+=.01*Math.sin(3*r+o),a.material.emissiveIntensity=.3+.2*Math.sin(2*r);break;case"water":a.position.x+=.005*Math.sin(2*r+o),a.position.z+=.005*Math.cos(2*r+o);break;case"air":a.position.y+=.02*Math.sin(4*r+o);break;case"earth":a.rotation.x+=.01,a.rotation.y+=.01;break;default:a.position.y+=.01*Math.sin(r+o)}}))}),!M)return null;let F=w(M.zodiacSign),P=p(M.zodiacSign);return(0,i.jsxs)(m.CS.group,{ref:y,scale:I.scale,position:I.position,rotation:I.rotation,children:[(0,i.jsxs)("mesh",{...L(),onClick:e=>o(M,e),castShadow:!0,receiveShadow:!0,"data-aria-label":"".concat(M.name," ").concat(G||"is online"),children:[(0,i.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,i.jsx)(m.CS.meshStandardMaterial,{color:F,emissive:F,emissiveIntensity:I.emissiveIntensity,roughness:.3,metalness:.1})]}),(0,i.jsxs)("mesh",{position:[0,0,0],rotation:[Math.PI/2,0,0],children:[(0,i.jsx)("ringGeometry",{args:[.35,.4,16]}),(0,i.jsx)("meshBasicMaterial",{color:F,transparent:!0,opacity:D?.6:.3,side:2})]}),(0,i.jsx)("group",{ref:C,children:T.map(e=>(0,i.jsxs)("mesh",{position:e.position,children:[(0,i.jsx)("sphereGeometry",{args:[.02,4,4]}),(0,i.jsx)("meshBasicMaterial",{color:e.color,transparent:!0,opacity:.7})]},e.id))}),(0,i.jsx)(h.E,{position:[0,.8,0],fontSize:.2,color:"#ffffff",anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:"#000000",children:M.name}),(0,i.jsx)(h.E,{position:[0,.6,0],fontSize:.1,color:F,anchorX:"center",anchorY:"middle",children:(()=>{var e;let a=M.aztec_zodiac||M.mayan_zodiac||M.vedic_zodiac||M.western_zodiac||M.chinese_zodiac,o=(null==(e=M.galacticToneInfo)?void 0:e.symbol)||"",i=M.galactic_tone||"",r=M.galactic_tone?o+" "+i:"";return a+(r?" "+r:"")})()}),M.galacticToneInfo&&(0,i.jsxs)("mesh",{position:[0,0,0],rotation:[0,0,0],children:[(0,i.jsx)("ringGeometry",{args:[.42,.45,32]}),(0,i.jsx)("meshBasicMaterial",{color:M.galacticToneInfo.color,transparent:!0,opacity:.8,side:2})]}),G&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.E,{position:[0,.5,0],fontSize:.15,color:"#87ceeb",anchorX:"center",anchorY:"middle",children:G}),(0,i.jsx)(k,{action:G,isActive:!!G,color:(0,t.mw)(M.zodiacSign,G),userData:M})]}),(0,i.jsxs)("mesh",{position:[.4,.4,0],children:[(0,i.jsx)("sphereGeometry",{args:[.08,8,8]}),(0,i.jsx)("meshStandardMaterial",{color:"#00ff00",emissive:"#00ff00",emissiveIntensity:.5})]}),M.isActive&&(0,i.jsxs)("mesh",{position:[-.4,.4,0],children:[(0,i.jsx)("sphereGeometry",{args:[.06,8,8]}),(0,i.jsx)("meshStandardMaterial",{color:"#ffff00",emissive:"#ffff00",emissiveIntensity:.8})]}),D&&(0,i.jsx)(h.E,{position:[0,1.2,0],fontSize:.15,color:"#ffffff",anchorX:"center",anchorY:"middle",backgroundColor:"rgba(0,0,0,0.8)",padding:.1,children:"".concat(M.name," (").concat(P,")")})]})}}}]);