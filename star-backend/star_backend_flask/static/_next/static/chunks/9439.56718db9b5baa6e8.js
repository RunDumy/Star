"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9439],{9439:(e,t,a)=>{a.r(t),a.d(t,{NotificationPanel:()=>c});var i=a(7876),s=a(4563),o=a(4510),n=a(4232),r=a(4301);function c(){let[e,t]=(0,n.useState)([]),{socket:a,currentUser:c}=(0,s.T)();(0,n.useEffect)(()=>((async()=>{let{data:{session:e}}=await o.ND.auth.getSession();if(!e)return;let a=await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/notifications"),{headers:{Authorization:"Bearer ".concat(e.access_token)}});if(a.ok){let{notifications:e}=await a.json();t(e)}})(),a.emit("join_notifications",{user_id:null==c?void 0:c.id}),a.on("notification",e=>{t(t=>[e,...t]),r.oR.info(e.message,{position:"top-right",autoClose:5e3,theme:"dark",className:"bg-gradient-to-br from-purple-900/50 to-blue-900/50 border border-purple-500/30"})}),()=>a.off("notification")),[a,c]);let l=async e=>{let{data:{session:a}}=await o.ND.auth.getSession();a&&(await fetch("".concat("https://star-backend.azurewebsites.net","/api/v1/notifications/").concat(e,"/read"),{method:"POST",headers:{Authorization:"Bearer ".concat(a.access_token)}}),t(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)))};return(0,i.jsxs)("div",{className:"fixed top-4 right-4 max-w-xs w-full bg-gradient-to-br from-purple-900/50 to-blue-900/50 border border-purple-500/30 rounded-lg p-4 text-white shadow-2xl cosmic-glow z-50",children:[(0,i.jsx)("h4",{className:"font-semibold mb-4 text-cyan-200",children:"\uD83C\uDF1F Cosmic Notifications"}),(0,i.jsxs)("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:[0===e.length&&(0,i.jsx)("div",{className:"text-gray-400 text-sm",children:"No new cosmic messages..."}),e.map(e=>(0,i.jsxs)("button",{className:"w-full text-left p-2 rounded-lg transition-all duration-300 hover:scale-105 ".concat(e.is_read?"bg-gray-700/50":"bg-purple-500/30"),onClick:()=>!e.is_read&&l(e.id),disabled:e.is_read,children:[(0,i.jsx)("div",{className:"text-sm",children:e.message}),(0,i.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleTimeString()})]},e.id))]}),(0,i.jsx)(r.N9,{})]})}a(3754)}}]);