[build]
  builder = "NIXPACKS"
  watchPatterns = ["star_backend_flask/**"]

[[services]]
  internalHostname = "star-backend"
  instanceCount = 1
  instanceSizeSlug = "CPU_0.5"

  [services.source]
    git = "github.com/RunDumy/Star"
    dir = "star-backend/star_backend_flask"
    rootDir = "star-backend"

  [services.assignments]
    [[services.assignments.deploy]]
      deploymentStrategy = "BLUE_GREEN"
    [[services.assignments.deploy]]
      service = "star-backend"

  [services.http]
    port = 5000
    gracePeriod = 300

  [[services.ports]]
    port = 5000
    forceHttps = true

  [[services.env]]
    PYTHON_VERSION = "3.13.4"
    PORT = "5000"
    AGORA_APP_ID = "d146ac692e604e7b9a99c9568ccbcd23"
    AGORA_APP_CERTIFICATE = "f5e4c9a8466141d588644f9043ce4a84"