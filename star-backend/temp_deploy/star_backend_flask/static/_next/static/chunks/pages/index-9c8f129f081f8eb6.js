(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3332],{5463:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>et});var n=r(3857),a=r(3081),s=r.n(a),i=r(6848),o=r(8657),c=r(8230),l=r.n(c),d=r(9099),u=r(4232),p=r(6306),m=r(2969),x=r(236),h=r(1040),f=r(3852),g=r(8008),v=r(4554),y=r(3420),j=r(3140),b=r(671),w=r(5422),N=r(8982),k=r(5221),_=r(3642),S=r(1755),A=r(7876);let C=function(e){var t=e.message,r=e.onRetry,n=(0,S.zh)({from:{opacity:0,transform:"translateY(10px)"},to:{opacity:1,transform:"translateY(0)"},config:{tension:200,friction:20}});return(0,A.jsxs)(S.CS.div,{style:n,className:"bg-red-900/50 border border-red-400 text-starlight p-4 rounded-lg flex flex-col items-center",role:"alert","aria-label":"Error message",children:[(0,A.jsx)("p",{children:t}),r&&(0,A.jsx)("button",{className:"mt-2 bg-yellow-400 text-void px-3 py-1 rounded-lg hover:bg-yellow-300 transition font-medium",onClick:r,"aria-label":"Retry API request",children:"Retry"})]})};var z=r(8931),D=r(5794),P=r(6377),E=function(){var e=(0,u.useState)("Moon"),t=e[0],r=e[1],a=(0,u.useState)("Sun"),i=a[0],o=a[1],c=(0,u.useState)("balanced"),l=c[0],d=c[1],p=(0,u.useState)(!1),m=p[0],x=p[1],f=(0,u.useState)(null),g=f[0],v=f[1];return{hourPlanet:t,dayPlanet:i,resonance:l,loading:m,error:g,getCurrentPlanetaryHour:(0,u.useCallback)((0,n.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),v(null),e.prev=2,e.next=7,h.A.post("/api/v1/planetary/hour",{user_id:1,longitude:-74.006,latitude:40.7128});case 7:o((t=e.sent.data).day_planet),r(t.hour_planet),d(t.resonance),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Failed to get planetary hour:",e.t0),v("Failed to get current planetary hour");case 18:return e.prev=18,x(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[2,14,18,21]])})),[])}},M={Fire:["Aries","Leo","Sagittarius"],Earth:["Taurus","Virgo","Capricorn"],Air:["Gemini","Libra","Aquarius"],Water:["Cancer","Scorpio","Pisces"]},O={Fire:{fadeIn:{duration:800,config:{tension:200,friction:20}},scale:{duration:1200,config:{tension:150,friction:25}},rotate:{duration:1500,config:{tension:120,friction:15}},glow:{intensity:20,pulsateDuration:2e3}},Earth:{fadeIn:{duration:1200,config:{tension:120,friction:25}},scale:{duration:1400,config:{tension:100,friction:20}},rotate:{duration:1800,config:{tension:80,friction:18}},glow:{intensity:15,pulsateDuration:3e3}},Air:{fadeIn:{duration:1e3,config:{tension:180,friction:22}},scale:{duration:1300,config:{tension:140,friction:18}},rotate:{duration:1600,config:{tension:110,friction:16}},glow:{intensity:18,pulsateDuration:2500}},Water:{fadeIn:{duration:1400,config:{tension:100,friction:28}},scale:{duration:1600,config:{tension:90,friction:22}},rotate:{duration:2e3,config:{tension:70,friction:20}},glow:{intensity:25,pulsateDuration:4e3}}},F=(0,u.forwardRef)(function(e,t){var r,a=e.userId,i=e.zodiacSign,o=e.onSigilGenerated,c=e.tarotCard,l=(0,u.useRef)(null),d=(0,u.useState)(null),p=d[0],m=d[1],x=(0,u.useState)(!1),f=x[0],g=x[1],v=(0,u.useState)(null),y=v[0],j=v[1],b=E(),w=b.hourPlanet,N=b.getCurrentPlanetaryHour,k=(0,S.zh)({opacity:f?1:.8,scale:f?1.05:1,config:{duration:1e3}});(0,u.useEffect)(function(){N()},[N]);var _=(0,u.useMemo)(function(){for(var e=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase(),t=0,r=Object.entries(M);t<r.length;t++){var n=(0,D.A)(r[t],2),a=n[0];if(n[1].some(function(t){return t.toLowerCase()===e.toLowerCase()}))return a}return"Fire"},[i]),C=(0,u.useMemo)(function(){return O[_]||O.Fire},[_]),z=(0,S.pn)(p,{from:{opacity:0,scale:.8,rotate:-10},enter:[{opacity:.4,scale:.9,rotate:-5,config:C.fadeIn.config},{opacity:.7,scale:.95,rotate:0,config:C.scale.config},{opacity:1,scale:1,rotate:2,config:C.rotate.config}],leave:{opacity:0,scale:.9,rotate:10},config:{duration:1e3}}),F=(0,u.useState)(C.glow.intensity),L=F[0],I=F[1];(0,u.useEffect)(function(){var e,t,r=function(n){t||(t=n);var a=.5+.5*Math.sin((n-t)%C.glow.pulsateDuration/C.glow.pulsateDuration*Math.PI*2);I(C.glow.intensity*a),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),function(){e&&cancelAnimationFrame(e)}},[C.glow.intensity,C.glow.pulsateDuration]);var G=(r=(0,n.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a&&""!==a){e.next=3;break}return j("User ID required for sigil generation"),e.abrupt("return");case 3:return g(!0),j(null),e.prev=5,e.next=8,h.A.post("/api/v1/sigil/generate",{user_id:"string"==typeof a?parseInt(a,10):a,zodiac_sign:i,planetary_data:{hour_planet:w},tarot_card:c});case 8:m(t=e.sent.data.sigil),o&&o(t),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error("Sigil generation error:",e.t0),j("Failed to generate sigil");case 18:return e.prev=18,g(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[5,14,18,21]])})),function(){return r.apply(this,arguments)});return(0,A.jsxs)(S.CS.div,{style:k,className:"sigil-generator p-6 bg-gradient-to-br from-purple-50 to-indigo-100 rounded-lg shadow-lg",children:[(0,A.jsxs)("div",{className:"text-center mb-6",children:[(0,A.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Cosmic Sigil Generator"}),(0,A.jsx)("p",{className:"text-gray-600",children:"Generate personalized sigils based on your zodiac sign and current planetary hour"})]}),y&&(0,A.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:y}),(0,A.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6 mb-6",children:[(0,A.jsx)("button",{onClick:G,disabled:f,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold rounded-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-purple-300","aria-label":f?"Generating sigil...":"Generate new sigil",children:f?(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,A.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,A.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Generate Sigil"}),p&&(0,A.jsx)("button",{onClick:function(){if(l.current)try{"vibrate"in navigator&&navigator.vibrate(100);var e=l.current.toDataURL({pixelRatio:2,mimeType:"image/png"}),t=document.createElement("a");t.href=e,t.download="sigil-".concat(i,"-").concat(w,".png"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Download error:",e),j("Failed to download sigil")}},className:"px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold rounded-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-green-300","aria-label":"Download sigil as PNG image",children:"Download PNG"})]}),(0,A.jsx)("div",{className:"flex justify-center",children:f?(0,A.jsx)("div",{className:"animate-pulse",children:(0,A.jsx)("div",{className:"w-64 h-80 bg-gray-300 rounded-lg"})}):p?z(function(e,t){return t?(0,A.jsxs)(S.CS.div,{className:"sigil-canvas-container",style:{opacity:e.opacity,transform:e.scale.to(function(t){return"scale(".concat(t,") rotate(").concat(e.rotate,"deg)")})},children:[(0,A.jsx)(P.BI,{width:300,height:400,ref:l,"aria-label":"Sigil for ".concat(i," with ").concat(p.element," element"),children:(0,A.jsxs)(P.Wd,{children:[(0,A.jsx)(P.rw,{x:0,y:0,width:300,height:400,fillLinearGradientStartPoint:{x:150,y:0},fillLinearGradientEndPoint:{x:150,y:400},fillLinearGradientColorStops:[0,p.color+"20",.3,p.color+"40",.7,p.color+"60",1,p.color+"80"]}),p.strokes.map(function(e,t){var r=[];return e.forEach(function(e){var t=p.points[e];r.push(t.x,t.y)}),(0,A.jsx)(P.N1,{points:r,stroke:p.color,strokeWidth:0===t?3:2,lineCap:"round",lineJoin:"round",shadowColor:p.color,shadowBlur:2*L,shadowOffset:{x:0,y:0}},t)}),(0,A.jsx)(P.jl,{x:150,y:200,radius:5,fill:p.color,opacity:.8,shadowColor:p.color,shadowBlur:L,shadowOffset:{x:0,y:0}}),(0,A.jsx)(P.EY,{x:140,y:170,text:p.element.charAt(0),fontSize:20,fontFamily:"serif",fill:p.color,align:"center",shadowColor:p.color,shadowBlur:.5*L,shadowOffset:{x:0,y:0}})]})}),(0,A.jsxs)("div",{className:"sigil-info mt-4 text-center",children:[(0,A.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Element: ",(0,A.jsx)("span",{className:"font-semibold text-gray-800",children:p.element})]}),(0,A.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Planetary Hour: ",(0,A.jsx)("span",{className:"font-semibold text-gray-800",children:p.hour_planet})]}),p.curve_factor>1&&(0,A.jsxs)("p",{className:"text-sm text-gray-600",children:["Harmony Level: ",(0,A.jsxs)("span",{className:"font-semibold text-green-600",children:[(p.curve_factor-1)*100+100,"%"]})]})]})]}):null}):null}),!p&&!f&&(0,A.jsx)("div",{className:"text-center mt-6",children:(0,A.jsx)("p",{className:"text-gray-500 italic",children:'Click "Generate Sigil" to create your personalized celestial glyph'})})]})});F.displayName="SigilGenerator";var L="https://star-backend.azurewebsites.net";let I=function(e){var t,r,a=e.userId,i=e.zodiacSign,o=void 0===i?"Libra":i,c=e.tarotCard,l=void 0===c?"The Lovers":c,d=e.planetaryHour,p=void 0===d?"Venus":d,m=e.className,x=void 0===m?"":m,g=(0,u.useState)(null),v=g[0],y=g[1],j=(0,u.useState)(""),w=j[0],N=j[1],S=(0,u.useState)(!1),D=S[0],P=S[1],E=(0,u.useState)(null),M=E[0],O=E[1],I=(0,u.useState)(!1),G=I[0],H=I[1],R=(0,u.useState)(!1),B=R[0],W=R[1],T=(0,u.useState)(!1),U=T[0],q=T[1],V=(0,u.useState)([]),Y=V[0],J=V[1];(0,u.useEffect)(function(){var e;(e=(0,n.A)(s().mark(function e(){var t,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),O(null),e.next=5,h.A.post("".concat(L,"/api/v1/prompt/generate"),{user_id:"string"==typeof a?parseInt(a,10):a,zodiac_sign:o,tarot_card:l,planetary_data:{hour_planet:p},birthdate:"1990-05-15",full_name:"Jane Doe"});case 5:t=e.sent.data,y({id:Date.now(),prompt:t.prompt,archetype:t.archetype,life_path:t.life_path,destiny:t.destiny,zodiac_sign:o,tarot_card:l,planetary_hour:p,created_at:new Date().toISOString(),response_count:0}),W(Math.random()>.7),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Prompt fetch failed:",e.t0),O((h.A.isAxiosError(e.t0)?null==(r=e.t0.response)||null==(r=r.data)?void 0:r.error:String(e.t0))||"Failed to load cosmic prompt");case 16:return e.prev=16,P(!1),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[0,11,16,19]])})),function(){return e.apply(this,arguments)})()},[a,o,l,p]);var K=(t=(0,n.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!w.trim()||!v)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(!0),O(null),e.next=7,h.A.post("".concat(L,"/api/v1/prompt/respond"),{user_id:"string"==typeof a?parseInt(a,10):a,prompt_id:v.id,response:w.trim()});case 7:H(!0),N(""),alert("Response shared to the cosmic community! \uD83C\uDF1F"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Response submission failed:",e.t0),O((h.A.isAxiosError(e.t0)?null==(t=e.t0.response)||null==(t=t.data)?void 0:t.error:String(e.t0))||"Failed to share response");case 17:return e.prev=17,P(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[2,12,17,20]])})),function(){return t.apply(this,arguments)}),X=(r=(0,n.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,h.A.get("".concat(L,"/api/v1/prompt/").concat(v.id,"/responses"));case 5:J(e.sent.data.responses||[]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Failed to load responses:",e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(){return r.apply(this,arguments)});return D&&!v?(0,A.jsx)("div",{className:"flex justify-center items-center py-8 ".concat(x),children:(0,A.jsx)(z.A,{})}):M&&!v?(0,A.jsx)("div",{className:x,children:(0,A.jsx)(C,{message:M,onRetry:function(){return window.location.reload()}})}):(0,A.jsxs)("div",{className:"archetype-journey bg-gradient-to-br from-purple-900/40 to-indigo-900/40 border border-purple-500/30 rounded-lg p-6 text-white ".concat(x),children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,A.jsx)(b.A,{className:"w-6 h-6 text-purple-400"}),(0,A.jsxs)("h3",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:[(null==v?void 0:v.archetype)||"Mystic"," Archetype Journey"]})]}),v&&(0,A.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[(0,A.jsx)("span",{className:"capitalize",children:o}),(0,A.jsx)("span",{children:"•"}),(0,A.jsxs)("span",{children:[p," Hour"]})]})]}),v?(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsx)("div",{className:"bg-gray-800/60 border border-purple-500/20 rounded-lg p-4",children:(0,A.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,A.jsx)(f.A,{className:"w-5 h-5 text-yellow-400 mt-1 flex-shrink-0"}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("p",{className:"text-lg italic text-gray-200 leading-relaxed mb-2",children:[B&&(0,A.jsx)("span",{className:"text-pink-500 font-bold",children:"[Venus Hour Challenge] "}),v.prompt]}),(0,A.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[(0,A.jsx)("span",{className:"capitalize bg-purple-700/40 px-2 py-1 rounded",children:v.archetype}),void 0!==v.response_count&&(0,A.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,A.jsx)(k.A,{className:"w-4 h-4"}),(0,A.jsxs)("span",{children:[v.response_count," responses"]})]})]})]})]})}),(0,A.jsxs)("div",{className:"bg-gray-900/40 border border-indigo-500/30 rounded-lg p-4",children:[(0,A.jsx)("h4",{className:"text-sm font-semibold text-indigo-300 mb-3",children:"Your Cosmic Sigil"}),(0,A.jsx)("div",{className:"flex justify-center",children:(0,A.jsx)(F,{userId:a,zodiacSign:o,tarotCard:l})})]}),G?(0,A.jsxs)("div",{className:"bg-green-900/40 border border-green-500/30 rounded-lg p-4",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-2 text-green-300",children:[(0,A.jsx)(f.A,{className:"w-5 h-5"}),(0,A.jsx)("span",{className:"font-medium",children:"Response Shared!"})]}),(0,A.jsx)("p",{className:"text-green-200 text-sm mt-1",children:"Your wisdom has been sent to the cosmic community. \uD83C\uDF1F"})]}):(0,A.jsxs)("div",{className:"space-y-3",children:[(0,A.jsx)("label",{htmlFor:"archetype-response",className:"block text-sm font-medium text-gray-200",children:"Share your cosmic wisdom:"}),(0,A.jsx)("textarea",{id:"archetype-response",className:"w-full p-3 bg-gray-800/60 border border-purple-500/30 rounded-lg text-white placeholder-gray-400 resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"What does this prompt reveal about your cosmic journey?...",value:w,onChange:function(e){return N(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),K())},rows:4,maxLength:500}),(0,A.jsxs)("div",{className:"flex justify-between items-center",children:[(0,A.jsxs)("span",{className:"text-sm text-gray-400",children:[w.length,"/500 characters"]}),(0,A.jsxs)("button",{onClick:K,disabled:!w.trim()||D,className:"flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed px-4 py-2 rounded-lg font-medium transition-colors",children:[(0,A.jsx)(_.A,{className:"w-4 h-4"}),(0,A.jsx)("span",{children:D?"Sharing...":"Share Response"})]})]})]}),v.response_count&&v.response_count>0&&(0,A.jsxs)("div",{className:"border-t border-purple-500/30 pt-4",children:[(0,A.jsxs)("button",{onClick:function(){q(!U),U||0!==Y.length||X()},className:"flex items-center space-x-2 text-purple-300 hover:text-purple-200 transition-colors",children:[(0,A.jsx)(k.A,{className:"w-4 h-4"}),(0,A.jsxs)("span",{children:[U?"Hide":"View"," Community Wisdom",v.response_count>0&&" (".concat(v.response_count," responses)")]})]}),U&&Y.length>0&&(0,A.jsx)("div",{className:"mt-3 space-y-3 max-h-60 overflow-y-auto",children:Y.map(function(e){var t;return(0,A.jsxs)("div",{className:"bg-gray-800/40 border border-gray-600/30 rounded p-3",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,A.jsx)("span",{className:"font-medium text-purple-300",children:e.author}),(0,A.jsx)("span",{className:"text-sm text-gray-400 capitalize",children:e.zodiac_sign}),(0,A.jsx)("span",{className:"text-xs text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():""})]}),(0,A.jsx)("p",{className:"text-gray-300 text-sm italic",children:'"'.concat(e.response,'"')})]},null!=(t=e.id)?t:e.created_at)})})]}),M&&(0,A.jsx)("div",{className:"mt-3",children:(0,A.jsx)(C,{message:M})})]}):(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)(b.A,{className:"w-12 h-12 text-purple-400 mx-auto mb-3"}),(0,A.jsx)("p",{className:"text-gray-400",children:"Loading your cosmic prompt..."})]}),(0,A.jsx)("div",{className:"border-t border-purple-500/30 mt-6 pt-4",children:(0,A.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-400",children:[(0,A.jsx)("span",{children:"Current Energy:"}),(0,A.jsxs)("span",{className:"capitalize bg-indigo-700/40 px-2 py-1 rounded",children:[p," Hour"]})]})})]})};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach(function(t){(0,m.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R="https://star-backend.azurewebsites.net",B={Aries:{comment:"Blare",like:"Ram",follow:"Dash",share:"Charge"},Taurus:{comment:"Moo",like:"Stamp",follow:"Bond",share:"Ground"},Gemini:{comment:"Chirp",like:"Clap",follow:"Sync",share:"Twin"},Cancer:{comment:"Whisper",like:"Pinch",follow:"Embrace",share:"Shelter"},Leo:{comment:"Roar",like:"Paw",follow:"Stride",share:"Radiate"},Virgo:{comment:"Hum",like:"Point",follow:"Guide",share:"Organize"},Libra:{comment:"Chime",like:"Sway",follow:"Blend",share:"Balance"},Scorpio:{comment:"Hiss",like:"Flick",follow:"Dive",share:"Intensify"},Sagittarius:{comment:"Yelp",like:"Kick",follow:"Wander",share:"Explore"},Capricorn:{comment:"Bleat",like:"Nudge",follow:"Climb",share:"Build"},Aquarius:{comment:"Buzz",like:"Tap",follow:"Flow",share:"Innovate"},Pisces:{comment:"Splash",like:"Flutter",follow:"Drift",share:"Dream"}},W={Sun:"text-yellow-500",Moon:"text-blue-300",Mercury:"text-gray-400",Venus:"text-pink-500",Mars:"text-red-500",Jupiter:"text-purple-600",Saturn:"text-gray-600"};let T=function(e){var t,r=e.userId,a=e.className,i=void 0===a?"":a,o=(0,u.useState)([]),c=o[0],l=o[1],d=(0,u.useState)(1),p=d[0],m=d[1],k=(0,u.useState)(!0),_=k[0],S=k[1],D=(0,u.useState)(!1),P=D[0],E=D[1],M=(0,u.useState)(null),O=M[0],L=M[1],G=(0,u.useState)(null),T=G[0],U=G[1],q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";"vibrate"in navigator&&navigator.vibrate("heavy"===e?100:"medium"===e?50:25)},V=(0,u.useCallback)((0,n.A)(s().mark(function e(){var t,n,a,i,o=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,n=o.length>1&&void 0!==o[1]&&o[1],e.prev=2,E(!0),L(null),e.next=7,(0,N.d$)(t,r);case 7:a=e.sent,n?l(a.items):l(function(e){return[].concat((0,x.A)(e),(0,x.A)(a.items))}),S(a.has_more),U(a.planetary_context),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Feed fetch error:",e.t0),L((h.A.isAxiosError(e.t0)?null==(i=e.t0.response)||null==(i=i.data)?void 0:i.error:String(e.t0))||"Failed to load cosmic feed");case 18:return e.prev=18,E(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[2,13,18,21]])})),[r]),Y=(t=(0,n.A)(s().mark(function e(t,n,a){var i,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q("light"),"like"!==t){e.next=9;break}return e.next=5,h.A.post("".concat(R,"/api/v1/posts/").concat(n,"/like"),{user_id:r});case 5:i=e.sent,l(function(e){return e.map(function(e){return e.id===n?H(H({},e),{},{engagement:H(H({},e.engagement),{},{likes:"Post liked successfully"===i.data.message?e.engagement.likes+1:Math.max(0,e.engagement.likes-1)})}):e})}),e.next=13;break;case 9:if(!("comment"===t&&a)){e.next=13;break}return e.next=12,h.A.post("".concat(R,"/api/v1/posts/").concat(n,"/comment"),{user_id:r,comment:a});case 12:l(function(e){return e.map(function(e){return e.id===n?H(H({},e),{},{engagement:H(H({},e.engagement),{},{comments:e.engagement.comments+1})}):e})});case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("".concat(t," error:"),e.t0),L((h.A.isAxiosError(e.t0)?null==(o=e.t0.response)||null==(o=o.data)?void 0:o.error:String(e.t0))||"Failed to ".concat(t," post"));case 20:case"end":return e.stop()}},e,null,[[0,15]])})),function(e,r,n){return t.apply(this,arguments)}),J=function(e){var t=B[e.metadata.zodiac_sign]||B.Aries,r=W[e.metadata.planetary_hour]||"text-gray-500";return(0,A.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 mb-4 shadow-sm hover:shadow-md transition-all duration-300 ease-in-out opacity-0 animate-fadeInUp",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,A.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:(0,A.jsx)("span",{className:"text-white text-sm font-bold",children:e.author.charAt(0).toUpperCase()})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"text-white font-medium",children:e.author}),(0,A.jsxs)("span",{className:"ml-2 text-xs ".concat(r),children:[e.metadata.zodiac_sign," • ",e.metadata.planetary_hour]})]})]}),e.metadata.is_featured&&(0,A.jsx)(f.A,{className:"w-4 h-4 text-yellow-400 fill-current"})]}),(0,A.jsxs)("div",{className:"mb-4",children:["user_post"===e.type&&(0,A.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:"string"==typeof e.content?e.content:JSON.stringify(e.content)}),"sigil"===e.type&&(0,A.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,A.jsx)(F,{userId:e.user_id,zodiacSign:e.metadata.zodiac_sign,tarotCard:"object"==typeof e.content&&e.content&&"tarot"in e.content?e.content.tarot:void 0})}),"tarot"===e.type&&(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsx)("div",{className:"text-6xl mb-2",children:"\uD83C\uDCCF"}),(0,A.jsx)("p",{className:"text-white font-medium",children:"object"==typeof e.content&&e.content&&"tarot_card"in e.content?String(e.content.tarot_card):"Mystic Card"}),(0,A.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"object"==typeof e.content&&e.content&&"description"in e.content?String(e.content.description):"A cosmic revelation awaits..."})]}),"video"===e.type&&(0,A.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,A.jsx)("video",{src:"object"==typeof e.content&&e.content&&"url"in e.content?String(e.content.url):"",className:"w-full h-48 object-cover",controls:!0,muted:!0,children:"Your browser does not support the video tag."})}),"prompt"===e.type&&(0,A.jsx)(I,{userId:e.user_id,zodiacSign:e.metadata.zodiac_sign,tarotCard:"object"==typeof e.content&&e.content&&"tarot"in e.content?String(e.content.tarot):void 0,planetaryHour:e.metadata.planetary_hour})]}),T&&(0,A.jsxs)("div",{className:"text-xs text-gray-500 mb-3 p-2 bg-gray-800/50 rounded",children:["\uD83C\uDF0C ",T.dominant_energy," • ",T.current_hour]}),(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,A.jsxs)("button",{onClick:function(){return Y("like",e.id)},className:"flex items-center space-x-1 px-3 py-1 rounded-full transition-colors ".concat(e.engagement.likes>0?"text-red-400 bg-red-900/20":"text-gray-400 hover:text-red-400"),children:[(0,A.jsx)(g.A,{className:"w-4 h-4 ".concat(e.engagement.likes>0?"fill-current":"")}),(0,A.jsx)("span",{className:"text-sm",children:e.engagement.likes}),(0,A.jsx)("span",{className:"text-xs",children:t.like})]}),(0,A.jsxs)("button",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-400 hover:text-blue-400 transition-colors",onClick:function(){var t,r,n=null==(t=document.getElementById("comments-".concat(e.id)))?void 0:t.classList.contains("hidden");null==(r=document.getElementById("comments-".concat(e.id)))||r.classList.toggle("hidden",!n)},children:[(0,A.jsx)(v.A,{className:"w-4 h-4"}),(0,A.jsx)("span",{className:"text-sm",children:e.engagement.comments}),(0,A.jsx)("span",{className:"text-xs",children:t.comment})]}),(0,A.jsxs)("button",{onClick:function(){return Y("share",e.id)},className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-400 hover:text-green-400 transition-colors",children:[(0,A.jsx)(y.A,{className:"w-4 h-4"}),(0,A.jsx)("span",{className:"text-xs",children:t.share})]})]}),(0,A.jsx)("button",{onClick:function(){return Y("save",e.id)},className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors","aria-label":"Save post",children:(0,A.jsx)(j.A,{className:"w-4 h-4"})})]}),(0,A.jsx)("div",{id:"comments-".concat(e.id),className:"hidden mt-3 pt-3 border-t border-gray-700",children:(0,A.jsx)("div",{className:"text-sm text-gray-400",children:"Comments feature coming soon to this planetary hour \uD83C\uDF1F"})})]},e.id)};return((0,u.useEffect)(function(){V(1,!0)},[r,V]),P&&0===c.length)?(0,A.jsx)("div",{className:"flex justify-center py-8 ".concat(i),children:(0,A.jsx)(z.A,{})}):O&&0===c.length?(0,A.jsx)("div",{className:i,children:(0,A.jsx)(C,{message:O,onRetry:function(){return V(1,!0)}})}):(0,A.jsxs)("div",{className:"cosmic-feed ".concat(i),children:[T&&(0,A.jsxs)("div",{className:"mb-6 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 border border-purple-500/30 rounded-lg p-4",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,A.jsx)(b.A,{className:"w-5 h-5 text-purple-400"}),(0,A.jsx)("span",{className:"text-purple-300 font-medium",children:"Current Cosmic Influence"})]}),(0,A.jsx)("p",{className:"text-gray-300 text-sm",children:T.dominant_energy}),(0,A.jsxs)("div",{className:"mt-2",children:[(0,A.jsx)("span",{className:"text-xs text-gray-400",children:"Favorable actions: "}),(0,A.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:T.favorable_actions.slice(0,3).map(function(e){return(0,A.jsx)("span",{className:"text-xs bg-purple-700/40 text-purple-200 px-2 py-1 rounded",children:e},e)})})]})]}),(0,A.jsx)(w.A,{dataLength:c.length,next:function(){var e=p+1;m(e),V(e)},hasMore:_,loader:(0,A.jsx)("div",{className:"flex justify-center py-4",children:(0,A.jsx)(z.A,{})}),endMessage:(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)(b.A,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,A.jsx)("p",{className:"text-gray-400",children:"You've reached the cosmic void \uD83C\uDF0C"}),(0,A.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"More content awaits in the next planetary hour"})]}),className:"space-y-4",children:c.map(function(e){return J(e)})}),O&&c.length>0&&(0,A.jsx)("div",{className:"mt-4",children:(0,A.jsx)(C,{message:"Failed to load more content",onRetry:function(){return V(p,!1)}})})]})};var U=r(5784),q=r(7142),V=r(2896),Y=r(9468),J=r(5251);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){(0,m.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Z=function(e){var t=e.delay;return(0,A.jsx)(i.P.div,{className:"absolute w-1 h-1 bg-white rounded-full",initial:{x:-10,y:-10,opacity:0},animate:{x:[0,100],y:[0,100],opacity:[0,1,0]},transition:{duration:2,delay:void 0===t?0:t,repeat:1/0,repeatDelay:10*Math.random()+5},style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")}})},$=function(){return(0,A.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[(0,A.jsxs)("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 400 300",children:[(0,A.jsx)("defs",{children:(0,A.jsxs)("linearGradient",{id:"constellation",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,A.jsx)("stop",{offset:"0%",stopColor:"#8b5cf6"}),(0,A.jsx)("stop",{offset:"50%",stopColor:"#06b6d4"}),(0,A.jsx)("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),(0,A.jsx)("path",{d:"M50,50 L80,45 L110,60 L140,55 L170,70 L200,65 L230,80",stroke:"url(#constellation)",strokeWidth:"1",fill:"none",opacity:"0.6"}),(0,A.jsx)("path",{d:"M250,120 L280,125 L310,120",stroke:"url(#constellation)",strokeWidth:"1",fill:"none",opacity:"0.6"}),(0,A.jsx)("path",{d:"M100,200 L130,180 L160,190 L190,170",stroke:"url(#constellation)",strokeWidth:"1",fill:"none",opacity:"0.4"})]}),Array.from({length:3}).map(function(e,t){return(0,A.jsx)(Z,{delay:3*t},Math.random().toString(36).slice(2,11))})]})};function Q(e){var t,r,a,c=e.className,l=(0,u.useState)([]),d=l[0],p=l[1],m=(0,u.useState)(0),h=m[0],f=m[1],g=(0,u.useState)(!1),v=g[0],y=g[1],j=(0,u.useState)(!1),b=j[0],w=j[1],k=(t=(0,n.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,N.FH.get("/api/v1/notifications?limit=20");case 4:p((t=e.sent).data.notifications),f(t.data.notifications.filter(function(e){return!e.is_read}).length),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch notifications:",e.t0);case 12:return e.prev=12,w(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])})),function(){return t.apply(this,arguments)}),_=(r=(0,n.A)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.FH.put("/api/v1/notifications/".concat(t,"/read"));case 3:p(function(e){return e.map(function(e){return e.id===t?X(X({},e),{},{is_read:!0}):e})}),f(function(e){return Math.max(0,e-1)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to mark notification as read:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return r.apply(this,arguments)}),S=(a=(0,n.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.FH.put("/api/v1/notifications/read-all");case 3:p(function(e){return e.map(function(e){return X(X({},e),{},{is_read:!0})})}),f(0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to mark all notifications as read:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return a.apply(this,arguments)});(0,u.useEffect)(function(){k();var e=J.ND.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},function(e){var t=e.new;p(function(e){return[t].concat((0,x.A)(e))}),f(function(e){return e+1})}).subscribe();return function(){J.ND.removeChannel(e)}},[]);var C=function(e,t){var r=null==t?void 0:t.cosmic_effect;switch(e){case"like":return"fiery_burst"===r?"�":"golden_shine"===r?"✨":"�\uD83D\uDCAB";case"comment":return"wind_whisper"===r?"\uD83C\uDF2C️":"dreamy_wave"===r?"\uD83C\uDF0A":"\uD83D\uDCAC";case"follow":return"electric_spark"===r?"⚡":"mystical_shadow"===r?"\uD83C\uDF11":"⭐";case"cosmic_signal":return"cosmic_twinkle"===r?"�":"�\uD83C\uDF0C";case"star_points":return"✨";case"level_up":return"\uD83D\uDE80";case"group_chat":return z(t);default:return"\uD83D\uDD14"}},z=function(e){switch(null==e?void 0:e.cosmic_effect){case"fiery_burst":return"\uD83D\uDD25\uD83D\uDCAC";case"earth_glow":return"\uD83C\uDF0D\uD83D\uDCAC";case"wind_whisper":return"\uD83C\uDF2A️\uD83D\uDCAC";case"water_ripple":case"dreamy_wave":return"\uD83C\uDF0A\uD83D\uDCAC";case"golden_shine":return"\uD83C\uDF1F\uD83D\uDCAC";case"crystal_clarity":return"\uD83D\uDC8E\uD83D\uDCAC";case"balance_harmony":return"⚖️\uD83D\uDCAC";case"mystical_shadow":return"\uD83C\uDF11\uD83D\uDCAC";case"arrow_light":return"\uD83C\uDFF9\uD83D\uDCAC";case"mountain_steady":return"\uD83C\uDFD4️\uD83D\uDCAC";case"electric_spark":return"⚡\uD83D\uDCAC";default:return"\uD83D\uDCAC"}},D=function(e){var t=new Date,r=new Date(e),n=Math.floor((t.getTime()-r.getTime())/6e4);return n<1?"Just now":n<60?"".concat(n,"m ago"):n<1440?"".concat(Math.floor(n/60),"h ago"):"".concat(Math.floor(n/1440),"d ago")};return(0,A.jsxs)("div",{className:"relative ".concat(void 0===c?"":c),children:[(0,A.jsxs)(i.P.button,{onClick:function(){return y(!v)},className:"relative p-2 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,A.jsx)(o.A,{className:"w-5 h-5"}),h>0&&(0,A.jsx)(i.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:h>9?"9+":h})]}),(0,A.jsx)(U.N,{children:v&&(0,A.jsxs)(i.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-80 bg-gray-900/95 backdrop-blur-lg rounded-lg shadow-2xl border border-purple-500/20 z-50",children:[(0,A.jsx)($,{}),(0,A.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-purple-500/20",children:[(0,A.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Cosmic Signals"}),(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[h>0&&(0,A.jsxs)(i.P.button,{onClick:S,className:"text-sm text-purple-400 hover:text-purple-300 flex items-center gap-1",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,A.jsx)(q.A,{className:"w-4 h-4"}),"Mark all read"]}),(0,A.jsx)("button",{onClick:function(){return y(!1)},className:"text-gray-400 hover:text-white",title:"Close notifications",children:(0,A.jsx)(V.A,{className:"w-5 h-5"})})]})]}),(0,A.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[b&&(0,A.jsxs)("div",{className:"p-4 text-center text-gray-400",children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500 mx-auto mb-2"}),"Loading signals..."]}),!b&&0===d.length&&(0,A.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,A.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDF0C"}),(0,A.jsx)("p",{children:"No cosmic signals yet"}),(0,A.jsx)("p",{className:"text-sm",children:"Your notifications will appear here"})]}),!b&&d.length>0&&d.map(function(e){return(0,A.jsx)(i.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-4 border-b border-gray-700/50 hover:bg-gray-800/50 transition-colors ".concat(e.is_read?"":"bg-purple-900/20"),children:(0,A.jsxs)("div",{className:"flex items-start gap-3",children:[(0,A.jsx)("div",{className:"text-2xl flex-shrink-0",children:C(e.type)}),(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsx)("h4",{className:"font-medium text-white text-sm",children:e.title}),(0,A.jsx)("span",{className:"text-xs text-gray-400",children:D(e.created_at)})]}),(0,A.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:e.message}),!e.is_read&&(0,A.jsxs)(i.P.button,{onClick:function(){return _(e.id)},className:"mt-2 text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,A.jsx)(Y.A,{className:"w-3 h-3"}),"Mark as read"]})]})]})},e.id)})]})]})})]})}var ee=r(8296);function et(){var e=(0,d.useRouter)(),t=(0,u.useState)(null),r=t[0],a=t[1],c=(0,u.useState)(!1),m=c[0],x=c[1],h=(0,u.useState)(!1),f=h[0],g=h[1],v=(0,u.useState)("all"),y=v[0],j=v[1],b=(0,u.useState)("all"),w=b[0],N=b[1];return(0,u.useEffect)(function(){function e(){return(e=(0,n.A)(s().mark(function e(){var t,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.ND.auth.getUser();case 2:if(!(t=e.sent.data.user)){e.next=11;break}return e.next=7,J.ND.from("profiles").select("id, username, zodiac_sign").eq("user_id",t.id).single();case 7:a(r=e.sent.data),null!=r&&r.zodiac_sign&&j(r.zodiac_sign.toLowerCase());case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),(0,A.jsx)(ee.A,{children:(0,A.jsxs)("div",{className:"min-h-screen p-4 text-white",children:[(0,A.jsxs)("nav",{className:"flex items-center justify-between mb-8",children:[(0,A.jsxs)("div",{className:"flex space-x-4",children:[(0,A.jsx)(l(),{href:"/",children:(0,A.jsx)(p.A,{variant:"primary",size:"md",zodiacSign:null==r?void 0:r.zodiac_sign,children:"Home"})}),(0,A.jsx)(l(),{href:"/matchmaking",children:(0,A.jsx)(p.A,{variant:"secondary",size:"md",zodiacSign:null==r?void 0:r.zodiac_sign,children:"Matchmaking"})}),(0,A.jsx)(p.A,{variant:"secondary",size:"md",zodiacSign:null==r?void 0:r.zodiac_sign,onClick:function(){return x(!m)},children:"Menu"}),(0,A.jsx)(l(),{href:"/groups",children:(0,A.jsx)(p.A,{variant:"gold",size:"md",zodiacSign:null==r?void 0:r.zodiac_sign,children:"Groups"})}),r&&(0,A.jsx)(l(),{href:"/profile/".concat(r.id),children:(0,A.jsx)(p.A,{variant:"blue",size:"md",zodiacSign:null==r?void 0:r.zodiac_sign,children:"Profile"})})]}),r&&(0,A.jsx)(p.A,{variant:"secondary",size:"sm",zodiacSign:null==r?void 0:r.zodiac_sign,onClick:function(){return g(!f)},children:(0,A.jsx)(o.A,{className:"w-5 h-5"})})]}),m&&(0,A.jsxs)(i.P.div,{className:"menu bg-navy-800 p-4 rounded-lg absolute top-16 left-4 w-48 border border-cosmic-gold/30",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[(0,A.jsx)(l(),{href:"/universe",children:(0,A.jsx)("p",{className:"cosmic-menu-item text-white py-2 hover:bg-navy-700 rounded",children:"Star Universe \uD83C\uDF0C"})}),(0,A.jsx)(l(),{href:"/settings",children:(0,A.jsx)("p",{className:"cosmic-menu-item text-white py-2 hover:bg-navy-700 rounded",children:"Settings ⚙️"})}),(0,A.jsx)("button",{className:"cosmic-menu-item text-white py-2 hover:bg-navy-700 rounded w-full text-left",onClick:function(){return J.ND.auth.signOut().then(function(){return e.push("/login")})},children:"Sign Out \uD83D\uDEAA"})]}),r&&f&&(0,A.jsx)(Q,{}),(0,A.jsxs)("div",{className:"flex justify-center space-x-8 mb-8",children:[(0,A.jsx)(l(),{href:"/universe?filter=venus",children:(0,A.jsx)(p.A,{variant:"planet",size:"lg",zodiacSign:null==r?void 0:r.zodiac_sign,planet:"venus",children:"Venus"})}),(0,A.jsx)(l(),{href:"/universe?filter=mars",children:(0,A.jsx)(p.A,{variant:"planet",size:"lg",zodiacSign:null==r?void 0:r.zodiac_sign,planet:"mars",children:"Mars"})}),(0,A.jsx)(l(),{href:"/universe?filter=jupiter",children:(0,A.jsx)(p.A,{variant:"planet",size:"lg",zodiacSign:null==r?void 0:r.zodiac_sign,planet:"jupiter",children:"Jupiter"})})]}),(0,A.jsxs)("div",{className:"main-content max-w-4xl mx-auto",children:[(0,A.jsxs)("h1",{className:"text-4xl font-bold mb-4 text-center",children:["Welcome to the Star Universe, ",(null==r?void 0:r.username)||"Cosmic Traveler","!"]}),(0,A.jsx)("p",{className:"mb-6 text-center text-cosmic-light",children:"Navigate the cosmos, connect with your zodiac tribe, and shine bright!"}),(0,A.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2 justify-center",children:[(0,A.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,A.jsx)("span",{className:"text-sm font-semibold text-cosmic-gold mr-2",children:"Zodiac Filter:"}),["all","aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius","capricorn","aquarius","pisces"].map(function(e){return(0,A.jsx)(p.A,{variant:y===e?"primary":"secondary",size:"sm",zodiacSign:null==r?void 0:r.zodiac_sign,onClick:function(){return j(e)},children:e.charAt(0).toUpperCase()+e.slice(1)},e)})]}),(0,A.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,A.jsx)("span",{className:"text-sm font-semibold text-cosmic-gold mr-2",children:"Element Filter:"}),["all","fire","earth","air","water"].map(function(e){return(0,A.jsx)(p.A,{variant:w===e?"primary":"secondary",size:"sm",zodiacSign:null==r?void 0:r.zodiac_sign,onClick:function(){return N(e)},children:e.charAt(0).toUpperCase()+e.slice(1)},e)})]})]}),(0,A.jsxs)("div",{className:"feed bg-navy-800 p-6 rounded-lg shadow-cosmic-lg",children:[(0,A.jsx)("h2",{className:"text-2xl mb-4 text-cosmic-gold",children:"Star Universe Feed"}),r&&(0,A.jsx)(T,{userId:r.id,className:"cosmic-feed-container"})]})]})]})})}},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5463)}])},8296:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(8133),a=r(236),s=r(3857),i=r(3081),o=r.n(i),c=r(4232),l=r(986),d=r(4796),u=r(5693),p=r(1824),m=r(5251),x=r(7876);function h(e){var t,r=e.children,i=(0,c.useRef)(null),h=(0,c.useRef)([]),f=(0,c.useCallback)((t=(0,s.A)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.G)(t);case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[]);return(0,c.useEffect)(function(){if(i.current){var e,t=i.current,r=new d.Scene,c=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),l=new d.WebGLRenderer({alpha:!0});l.setSize(window.innerWidth,window.innerHeight),t.appendChild(l.domElement);for(var p=[{name:"venus",size:.9,color:0xf472b6,position:[6,0,0],orbitSpeed:.02},{name:"mars",size:.5,color:0xdc2626,position:[10,0,0],orbitSpeed:.015},{name:"jupiter",size:1.8,color:0xfb923c,position:[13,0,0],orbitSpeed:.01}],x=p.map(function(e){var t=new d.SphereGeometry(e.size,32,32),n=new d.MeshBasicMaterial({color:e.color}),a=new d.Mesh(t,n);return a.position.set(e.position[0],e.position[1],e.position[2]),r.add(a),a}),f=new d.BufferGeometry,g=new Float32Array(15e3),v=0;v<15e3;v++)g[v]=(Math.random()-.5)*2e3;f.setAttribute("position",new d.BufferAttribute(g,3));var y=new d.PointsMaterial({color:0xffffff,size:2}),j=new d.Points(f,y);r.add(j);var b={Libra:[{start:[6,2,0],end:[7,3,1]},{start:[7,3,1],end:[8,2,0]},{start:[8,2,0],end:[7,1,-1]}],Aries:[{start:[5,1,0],end:[6,2,1]},{start:[6,2,1],end:[7,1,0]}],Scorpio:[{start:[5,2,1],end:[6,3,0]},{start:[6,3,0],end:[7,2,-1]},{start:[7,2,-1],end:[6.5,1,-.5]},{start:[6.5,1,-.5],end:[6,0,0]}],default:[{start:[6,2,0],end:[8,3,1]},{start:[8,3,1],end:[7,2,-1]}]},w=b.default,N=[],k="default",_=!1,S=p.map(function(){return new d.MeshBasicMaterial({color:0xf7dc6f,transparent:!0,opacity:0})});!function(){M.apply(this,arguments)}();var A=new u.N(c,l.domElement);A.enableDamping=!0,A.dampingFactor=.05,c.position.z=20;var C=function(){requestAnimationFrame(C),x.forEach(function(e,t){var r=p[t].orbitSpeed;e.position.x=p[t].position[0]*Math.cos(Date.now()*r*.001),e.position.z=p[t].position[0]*Math.sin(Date.now()*r*.001)}),N.forEach(function(e){e.material.opacity=.5+.5*Math.sin(.001*Date.now())}),h.current.forEach(function(e,t){e.material.opacity=_?.3+.2*Math.sin(.002*Date.now()):0,e.position.copy(x[t].position)}),A.update(),l.render(r,c)};C();var z=function(){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",z);var D=new d.Raycaster,P=new d.Vector2,E=(e=(0,s.A)(o().mark(function e(t){var r,n,a,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.x=t.clientX/window.innerWidth*2-1,P.y=-(2*(t.clientY/window.innerHeight))+1,D.setFromCamera(P,c),!((r=D.intersectObjects(x)).length>0)){e.next=14;break}return n=r[0].object,a=p[x.indexOf(n)].name,e.next=9,m.ND.auth.getUser();case 9:if(!(s=e.sent.data.user)){e.next=14;break}return e.next=14,m.ND.from("analytics_events").insert({user_id:s.id,event_type:"constellation_reveal",event_data:{planet:a,zodiac:k},created_at:new Date().toISOString()});case 14:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return window.addEventListener("click",E),function(){window.removeEventListener("resize",z),window.removeEventListener("click",E),null==t||t.removeChild(l.domElement)}}function M(){return(M=(0,s.A)(o().mark(function e(){var t,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.forEach(function(e){return r.remove(e)}),N.length=0,h.current.forEach(function(e){return r.remove(e)}),h.current=[],e.next=6,m.ND.auth.getUser();case 6:if(!(t=e.sent.data.user)){e.next=15;break}return e.next=11,m.ND.from("profiles").select("zodiac_sign").eq("user_id",t.id).single();case 11:_="Scorpio"===(k=(null==(s=e.sent.data)?void 0:s.zodiac_sign)||"default");case 15:(b[k]||b.default).forEach(function(e){var t=e.start,s=e.end,i=new d.LineBasicMaterial({color:"Scorpio"===k?0xf7dc6f:9133302,linewidth:2}),o=new d.BufferGeometry().setFromPoints([(0,n.A)(d.Vector3,(0,a.A)(t)),(0,n.A)(d.Vector3,(0,a.A)(s))]),c=new d.Line(o,i);r.add(c),N.push(c)}),_&&(h.current=p.map(function(e,t){var n=new d.SphereGeometry(1.3*e.size,32,32),a=new d.Mesh(n,S[t]);return r.add(a),a}));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}},[]),(0,x.jsxs)("section",{className:"relative min-h-screen starry-background mythic-cosmos-background","aria-label":"Cosmic Background with Constellations",children:[(0,x.jsx)(l.A,{id:"tsparticles",init:f,options:{background:{color:{value:"transparent"}},fpsLimit:60,particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:["#ffffff","#facc15","#3b82f6"]},shape:{type:"circle"},opacity:{value:.5,random:!0,anim:{enable:!0,speed:1}},size:{value:3,random:!0},move:{enable:!0,speed:.5,direction:"none",random:!0,outModes:{default:"out"}}},interactivity:{events:{onHover:{enable:!0,mode:"repulse"},onClick:{enable:!0,mode:"push"}},modes:{repulse:{distance:100},push:{quantity:4}}},detectRetina:!0}}),(0,x.jsx)("div",{className:"comet"}),(0,x.jsx)("div",{ref:i,className:"fixed inset-0 -z-10"}),(0,x.jsx)("div",{className:"relative z-10",children:r})]})}},8931:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(1755),a=r(7876);let s=function(){var e=(0,n.zh)({from:{rotate:0},to:{rotate:360},loop:!0,config:{duration:2e3}});return(0,a.jsxs)("output",{className:"flex items-center justify-center p-4","aria-label":"Loading cosmic data",children:[(0,a.jsxs)(n.CS.div,{style:{transform:e.rotate.to(function(e){return"rotate(".concat(e,"deg)")})},className:"relative w-16 h-16",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-yellow-400/20 to-transparent"}),(0,a.jsx)("div",{className:"absolute w-4 h-4 rounded-full bg-yellow-400 shadow-lg shadow-yellow-400/50 top-0 left-6"}),(0,a.jsx)("div",{className:"absolute w-3 h-3 rounded-full bg-yellow-300 shadow-md shadow-yellow-300/50 bottom-2 right-4"}),(0,a.jsx)("div",{className:"absolute w-2 h-2 rounded-full bg-yellow-200 shadow-sm shadow-yellow-200/50 top-4 right-2"})]}),(0,a.jsx)("span",{children:"Generating cosmic insights"})]})}}},e=>{e.O(0,[7391,2909,1040,6958,43,6848,8166,8230,5629,6377,2498,6350,549,636,6593,8792],()=>e(e.s=6760)),_N_E=e.O()}]);