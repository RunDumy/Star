"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3260],{2230:function(module,__unused_webpack_exports,__webpack_require__){module=__webpack_require__.nmd(module);var process=__webpack_require__(5364);!function(t,n){module.exports=n()}(0,function(){function be(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function ua(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?be(Object(r),!0).forEach(function(n){m(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sl(t,n,r,i,o,s,a){try{var u=t[s](a),c=u.value}catch(t){return void r(t)}u.done?n(c):Promise.resolve(c).then(i,o)}function J(t){return function(){var n=this,r=arguments;return new Promise(function(i,o){function s(t){sl(u,i,o,s,a,"next",t)}function a(t){sl(u,i,o,s,a,"throw",t)}var u=t.apply(n,r);s(void 0)})}}function W(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function tl(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ha(t,n,r){return n&&tl(t.prototype,n),r&&tl(t,r),t}function m(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function la(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&df(t,n)}function wd(t){return(wd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function df(t,n){return(df=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function ul(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Sh(t,n,r){return(Sh=ul()?Reflect.construct:function(t,n,r){var i=[null];return i.push.apply(i,n),t=new(Function.bind.apply(t,i)),r&&df(t,r.prototype),t}).apply(null,arguments)}function ef(t){var n="function"==typeof Map?new Map:void 0;return(ef=function(t){function r(){return Sh(t,arguments,wd(this).constructor)}if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),df(r,t)})(t)}function ff(t,n){if(null==t)return{};if(null==t)var r={};else{r={};var i,o=Object.keys(t);for(i=0;i<o.length;i++){var s=o[i];0<=n.indexOf(s)||(r[s]=t[s])}}if(Object.getOwnPropertySymbols)for(i=Object.getOwnPropertySymbols(t),s=0;s<i.length;s++)o=i[s],0<=n.indexOf(o)||Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o]);return r}function n(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ma(t){var r=ul();return function(){var i=wd(t);return i=r?Reflect.construct(i,arguments,wd(this).constructor):i.apply(this,arguments),i&&("object"==typeof i||"function"==typeof i)?i:n(this)}}function Th(t,n,r){return(Th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,r){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=wd(t)););if(t)return(n=Object.getOwnPropertyDescriptor(t,n)).get?n.get.call(r):n.value})(t,n,r||t)}function ra(t,n){var r=Array.isArray(t)?t:void 0;if(!r)if(null==(r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"])))r=void 0;else{var i,o=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(i=r.next()).done)&&(o.push(i.value),!n||o.length!==n);s=!0);}catch(t){a=!0;var u=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw u}}r=o}if(!(t=r||vl(t,n)))throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return t}function G(t){var n=Array.isArray(t)?Uh(t):void 0;if(n||(n="undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"]?Array.from(t):void 0),!(t=n||vl(t)))throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return t}function vl(t,n){if(t){if("string"==typeof t)return Uh(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uh(t,n)}}function Uh(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=Array(n);r<n;r++)i[r]=t[r];return i}function fa(t,n,r,i,o){var s={};return Object.keys(i).forEach(function(t){s[t]=i[t]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce(function(r,i){return i(t,n,r)||r},s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,n,s),s=null),s}function $a(t){var n={exports:{}};return t(n,n.exports),n.exports}function wl(t,n){var r,i=3>arguments.length?t:arguments[2];return va(t)===i?t[n]:(r=Fb.f(t,n))?Q(r,"value")?r.value:void 0===r.get?void 0:r.get.call(i):ha(r=Vb(t))?wl(r,n,i):void 0}function rs(t){var n=t.charCodeAt(0)<<24,r=0|ss(~n),i=0,o=0|t.length,s="";if(5>r&&o>=r){for(n=n<<r>>>24+r,i=1;i<r;i=i+1|0)n=n<<6|63&t.charCodeAt(i);65535>=n?s+=xd(n):1114111>=n?s+=xd(55296+((n=n-65536|0)>>10)|0,56320+(1023&n)|0):i=0}for(;i<o;i=i+1|0)s+="ï¿½";return s}function xl(){}function ts(t){var n=0|t.charCodeAt(0);if(55296<=n&&56319>=n){var r=0|t.charCodeAt(1);if(!(r==r&&56320<=r&&57343>=r))return xd(239,191,189);if(65535<(n=(n-55296<<10)+r-56320+65536|0))return xd(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n)}return 127>=n?t:2047>=n?xd(192|n>>>6,128|63&n):xd(224|n>>>12,128|n>>>6&63,128|63&n)}function yl(){}function ea(){ea.init.call(this)}function ng(t){if("function"!=typeof t)throw TypeError('The "listener" argument must be of type Function. Received type '+X(t))}function zl(t,n,r,i){ng(r);var o=t._events;if(void 0===o)o=t._events=Object.create(null),t._eventsCount=0;else{void 0!==o.newListener&&(t.emit("newListener",n,r.listener?r.listener:r),o=t._events);var s=o[n]}return void 0===s?(o[n]=r,++t._eventsCount):("function"==typeof s?s=o[n]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),0<(r=void 0===t._maxListeners?ea.defaultMaxListeners:t._maxListeners)&&s.length>r&&!s.warned&&(s.warned=!0,(r=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=t,r.type=n,r.count=s.length,console&&console.warn&&console.warn(r))),t}function us(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Al(t,n,r){return t={fired:!1,wrapFn:void 0,target:t,type:n,listener:r},(n=us.bind(t)).listener=r,t.wrapFn=n}function Bl(t,n,r){if(void 0===(t=t._events)||void 0===(n=t[n]))return[];if("function"==typeof n)return r?[n.listener||n]:[n];if(r)for(r=Array(n.length),t=0;t<r.length;++t)r[t]=n[t].listener||n[t];else r=Cl(n,n.length);return r}function Dl(t){var n=this._events;if(void 0!==n){if("function"==typeof(t=n[t]))return 1;if(void 0!==t)return t.length}return 0}function Cl(t,n){for(var r=Array(n),i=0;i<n;++i)r[i]=t[i];return r}function vs(t,n,r){"function"==typeof t.on&&El(t,"error",n,r)}function El(t,n,r,i){if("function"==typeof t.on)i.once?t.once(n,r):t.on(n,r);else{if("function"!=typeof t.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+X(t));t.addEventListener(n,function o(s){i.once&&t.removeEventListener(n,o),r(s)})}}function ws(t){return t?G(t):xs(function(){return[]},function(t,n){return t.push(n),t})}function Fl(t,n){var r,i,o,s;return w.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=Gl(t)([Hl,Hl,function(t,n){return n}])[2],i=0;case 2:if(!(i<n.length)){a.next=17;break}if(o=n[i],!((s=r(Vh,o))instanceof og)){a.next=11;break}if((s=Wh(s.deref()))===Vh){a.next=10;break}return a.next=10,s;case 10:return a.abrupt("return");case 11:if(s===Vh){a.next=14;break}return a.next=14,s;case 14:i++,a.next=2;break;case 17:case"end":return a.stop()}},ys)}function pg(t,n){return null!=n&&"function"==typeof n[Symbol.iterator]?Fl(pg(t),n):function(n){var r=n[2];return zs(n,function(n,i){return r(n,t(i))})}}function Ac(t){return Object.prototype.toString.call(t).slice(8,-1)}function yd(t){return"Object"===Ac(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Il(t){var n;return(n="Boolean"===Ac(t)||"Null"===Ac(t)||"Undefined"===Ac(t))||(n="Number"===Ac(t)&&!isNaN(t)),n||"String"===Ac(t)||"Symbol"===Ac(t)}function zd(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}function ce(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}function de(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var i=t[n];this.set(i[0],i[1])}}function gf(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new qg;++n<r;)this.add(t[n])}function ee(t){this.size=(this.__data__=new rg(t)).size}function fe(t,n,r,i,o,s){var a,u=1&n,c=2&n,l=4&n;if(r&&(a=o?r(t,i,o,s):r(t)),void 0!==a)return a;if(!lb(t))return t;if(i=Va(t)){if(a=As(t),!u)return Xh(t,a)}else{var f=hf(t),h="[object Function]"==f||"[object GeneratorFunction]"==f;if(jf(t))return Jl(t,u);if("[object Object]"==f||"[object Arguments]"==f||h&&!o){if(a=c||h?{}:Kl(t),!u)return c?Bs(t,Cs(a,t)):Ds(t,Es(a,t))}else{if(!wa[f])return o?t:{};a=Fs(t,f,u)}}if(s||(s=new ge),o=s.get(t))return o;s.set(t,a),Gs(t)?t.forEach(function(i){a.add(fe(i,n,r,i,t,s))}):Hs(t)&&t.forEach(function(i,o){a.set(o,fe(i,n,r,o,t,s))}),c=l?c?Ll:Yh:c?kf:Ad;var p=i?void 0:c(t);return Is(p||t,function(i,o){p&&(i=t[o=i]),Ml(a,o,fe(i,n,r,o,t,s))}),a}function Zh(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw TypeError("Expected a function");var r=function r(){var i=arguments,o=n?n.apply(this,i):i[0],s=r.cache;return s.has(o)?s.get(o):(i=t.apply(this,i),r.cache=s.set(o,i)||s,i)};return r.cache=new(Zh.Cache||qg),r}function Nl(t){if("string"==typeof t)return t;if(Va(t))return he(t,Nl)+"";if(ie(t))return Ol?Ol.call(t):"";var n=t+"";return"0"==n&&1/t==-Js?"-0":n}function $h(t,n,r,i,o){var s=-1,a=t.length;for(r||(r=Ks),o||(o=[]);++s<a;){var u=t[s];0<n&&r(u)?1<n?$h(u,n-1,r,i,o):ai(o,u):i||(o[o.length]=u)}return o}function je(t,n,r,i,o){if(t===n)n=!0;else if(null!=t&&null!=n&&(gc(t)||gc(n)))e:{var s=Va(t),a=Va(n),u=s?"[object Array]":hf(t),c=a?"[object Array]":hf(n),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u);if(a="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),(c=u==c)&&jf(t)){if(!jf(n)){n=!1;break e}s=!0,l=!1}if(c&&!l)o||(o=new ge),n=s||bi(t)?Pl(t,n,r,i,je,o):Ls(t,n,u,r,i,je,o);else{if(!(1&r)&&(s=l&&Ql.call(t,"__wrapped__"),u=a&&Ql.call(n,"__wrapped__"),s||u)){t=s?t.value():t,n=u?n.value():n,o||(o=new ge),n=je(t,n,r,i,o);break e}if(c)t:if(o||(o=new ge),s=1&r,(a=(u=Yh(t)).length)==(c=Yh(n).length)||s){for(c=a;c--;){var f=u[c];if(!(s?f in n:Ms.call(n,f))){n=!1;break t}}if(l=o.get(t),f=o.get(n),l&&f)n=l==n&&f==t;else{l=!0,o.set(t,n),o.set(n,t);for(var h=s;++c<a;){var p=t[f=u[c]],d=n[f];if(i)var v=s?i(d,p,f,n,t,o):i(p,d,f,t,n,o);if(void 0===v?p!==d&&!je(p,d,r,i,o):!v){l=!1;break}h||(h="constructor"==f)}l&&!h&&(r=t.constructor)!=(i=n.constructor)&&"constructor"in t&&"constructor"in n&&!("function"==typeof r&&r instanceof r&&"function"==typeof i&&i instanceof i)&&(l=!1),o.delete(t),o.delete(n),n=l}}else n=!1;else n=!1}}else n=t!=t&&n!=n;return n}function xa(t,n,r){this.low=0|t,this.high=0|n,this.unsigned=!!r}function mb(t){return!0===(t&&t.__isLong__)}function Bd(t,n){var r;if(n){if((n=0<=(t>>>=0)&&256>t)&&(r=Rl[t]))return r;r=ya(t,0>(0|t)?-1:0,!0),n&&(Rl[t]=r)}else{if((n=-128<=(t|=0)&&128>t)&&(r=Sl[t]))return r;r=ya(t,0>t?-1:0,!1),n&&(Sl[t]=r)}return r}function Gb(t,n){if(isNaN(t))return n?Cd:Hb;if(n){if(0>t)return Cd;if(t>=Tl)return Ul}else{if(t<=-Vl)return nb;if(t+1>=Vl)return Wl}return 0>t?Gb(-t,n).neg():ya(t%ke|0,t/ke|0,n)}function ya(t,n,r){return new xa(t,n,r)}function ci(t,n,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Hb;if("number"==typeof n?(r=n,n=!1):n=!!n,2>(r=r||10)||36<r)throw RangeError("radix");if(0<(i=t.indexOf("-")))throw Error("interior hyphen");if(0===i)return ci(t.substring(1),n,r).neg();i=Gb(sg(r,8));for(var i,o=Hb,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),r);8>a?(a=Gb(sg(r,a)),o=o.mul(a).add(Gb(u))):o=(o=o.mul(i)).add(Gb(u))}return o.unsigned=n,o}function Wb(t,n){return"number"==typeof t?Gb(t,n):"string"==typeof t?ci(t,n):ya(t.low,t.high,"boolean"==typeof n?n:t.unsigned)}function O(t,n){function r(){this.constructor=t}di(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function le(t){return"function"==typeof t}function me(t){setTimeout(function(){throw t},0)}function ei(t){return null!==t&&"object"===X(t)}function Xl(t){return t.reduce(function(t,n){return t.concat(n instanceof lf?n.errors:n)},[])}function fi(t){for(;t;){var n=t.destination,r=t.isStopped;if(t.closed||r)return!1;t=n&&n instanceof ia?n:null}return!0}function Yc(t){return t}function gi(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Yl(t)}function Yl(t){return 0===t.length?Yc:1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)}}function Zl(t){if(t||(t=Ib.Promise||Promise),!t)throw Error("no Promise impl found");return t}function $l(){return function(t){return t.lift(new Ns(t))}}function mf(t){return t?Os(t):vb}function Os(t){return new Y(function(n){return t.schedule(function(){return n.complete()})})}function Zc(t){return t&&"function"==typeof t.schedule}function hi(t,n){return new Y(function(r){var i=new Oa,o=0;return i.add(n.schedule(function(){o===t.length?r.complete():(r.next(t[o++]),r.closed||i.add(this.schedule()))})),i})}function nf(t,n){return n?hi(t,n):new Y(am(t))}function bb(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zc(n=t[t.length-1])?(t.pop(),hi(t,n)):nf(t)}function Z(t,n){return new Y(n?function(r){return n.schedule(Ps,0,{error:t,subscriber:r})}:function(n){return n.error(t)})}function Ps(t){t.subscriber.error(t.error)}function Qs(t,n){return void 0===n&&(n=0),function(r){return r.lift(new Rs(t,n))}}function bm(t){return t in ii&&(delete ii[t],!0)}function hc(){}function ba(t,n){return function(r){if("function"!=typeof t)throw TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Ss(t,n))}}function cm(t,n,r){if(n){if(!Zc(n))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return cm(t,r).apply(void 0,i).pipe(ba(function(t){return Jb(t)?n.apply(void 0,t):n(t)}))};r=n}return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:t,scheduler:r};return new Y(function(i){if(r)return r.schedule(Ts,0,{args:n,subscriber:i,params:a});if(!o){o=new of;try{t.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.next(1>=t.length?t[0]:t),o.complete()}]))}catch(t){fi(o)?o.error(t):console.warn(t)}}return o.subscribe(i)})}}function Ts(t){var n=this,r=t.args,i=t.subscriber,o=t.params;t=o.callbackFunc;var s=o.context,a=o.scheduler,u=o.subject;if(!u){u=o.subject=new of,o=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.add(a.schedule(Us,0,{value:1>=t.length?t[0]:t,subject:u}))};try{t.apply(s,r.concat([o]))}catch(t){u.error(t)}}this.add(u.subscribe(i))}function Us(t){var n=t.subject;n.next(t.value),n.complete()}function dm(t,n,r){if(n){if(!Zc(n))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return dm(t,r).apply(void 0,i).pipe(ba(function(t){return Jb(t)?n.apply(void 0,t):n(t)}))};r=n}return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={subject:void 0,args:n,callbackFunc:t,scheduler:r,context:this};return new Y(function(i){var s=o.context,a=o.subject;if(r)return r.schedule(Vs,0,{params:o,subscriber:i,context:s});if(!a){a=o.subject=new of;try{t.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(n=t.shift())?a.error(n):(a.next(1>=t.length?t[0]:t),a.complete())}]))}catch(t){fi(a)?a.error(t):console.warn(t)}}return a.subscribe(i)})}}function Vs(t){var n=this,r=t.params,i=t.subscriber;t=t.context;var o=r.callbackFunc,s=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new of,r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(r=t.shift())?n.add(a.schedule(em,0,{err:r,subject:u})):n.add(a.schedule(Ws,0,{value:1>=t.length?t[0]:t,subject:u}))};try{o.apply(t,s.concat([r]))}catch(t){this.add(a.schedule(em,0,{err:t,subject:u}))}}this.add(u.subscribe(i))}function Ws(t){var n=t.subject;n.next(t.value),n.complete()}function em(t){t.subject.error(t.err)}function fm(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}function ji(t,n,r,i,o){if(void 0===o&&(o=new Xs(t,r,i)),!o.closed)return n instanceof Y?n.subscribe(o):pf(n)(o)}function Ys(t,n){return new Y(function(r){var i=new Oa;return i.add(n.schedule(function(){var o=t[ne]();i.add(o.subscribe({next:function(t){i.add(n.schedule(function(){return r.next(t)}))},error:function(t){i.add(n.schedule(function(){return r.error(t)}))},complete:function(){i.add(n.schedule(function(){return r.complete()}))}}))})),i})}function Zs(t,n){return new Y(function(r){var i=new Oa;return i.add(n.schedule(function(){return t.then(function(t){i.add(n.schedule(function(){r.next(t),i.add(n.schedule(function(){return r.complete()}))}))},function(t){i.add(n.schedule(function(){return r.error(t)}))})})),i})}function $s(t,n){if(!t)throw Error("Iterable cannot be null");return new Y(function(r){var i,o=new Oa;return o.add(function(){i&&"function"==typeof i.return&&i.return()}),o.add(n.schedule(function(){i=t[$c](),o.add(n.schedule(function(){if(!r.closed){try{var t=i.next(),n=t.value,o=t.done}catch(t){return void r.error(t)}o?r.complete():(r.next(n),this.schedule())}}))})),o})}function gm(t,n){if(null!=t){if(t&&"function"==typeof t[ne])return Ys(t,n);if(fm(t))return Zs(t,n);if(hm(t))return hi(t,n);if(t&&"function"==typeof t[$c]||"string"==typeof t)return $s(t,n)}throw TypeError((null!==t&&X(t)||t)+" is not observable")}function Kb(t,n){return n?gm(t,n):t instanceof Y?t:new Y(pf(t))}function ic(t,n){if(!n.closed){if(t instanceof Y)return t.subscribe(n);try{var r=pf(t)(n)}catch(t){n.error(t)}return r}}function cb(t,n,r){return void 0===r&&(r=1/0),"function"==typeof n?function(i){return i.pipe(cb(function(r,i){return Kb(t(r,i)).pipe(ba(function(t,o){return n(r,t,i,o)}))},r))}:("number"==typeof n&&(r=n),function(n){return n.lift(new at(t,r))})}function tg(t){return void 0===t&&(t=1/0),cb(Yc,t)}function im(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tg(1)(bb.apply(void 0,t))}function ad(t){return new Y(function(n){try{var r=t()}catch(t){return void n.error(t)}return(r?Kb(r):mf()).subscribe(n)})}function jm(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(Jb(r))return ug(r,null);if(ei(r)&&Object.getPrototypeOf(r)===Object.prototype)return ug((t=Object.keys(r)).map(function(t){return r[t]}),t)}if("function"==typeof t[t.length-1]){var i=t.pop();return ug(t=1===t.length&&Jb(t[0])?t[0]:t,null).pipe(ba(function(t){return i.apply(void 0,t)}))}return ug(t,null)}function ug(t,n){return new Y(function(r){var i=t.length;if(0===i)r.complete();else for(var o=Array(i),s=0,a=0,u=function(u){var c=Kb(t[u]),l=!1;r.add(c.subscribe({next:function(t){l||(l=!0,a++),o[u]=t},error:function(t){return r.error(t)},complete:function(){++s!==i&&l||(a===i&&r.next(n?n.reduce(function(t,n,r){return t[n]=o[r],t},{}):o),r.complete())}}))},c=0;c<i;c++)u(c)})}function gb(t,n,r,i){return le(r)&&(i=r,r=void 0),i?gb(t,n,r).pipe(ba(function(t){return Jb(t)?i.apply(void 0,t):i(t)})):new Y(function(i){km(t,n,function(t){1<arguments.length?i.next(Array.prototype.slice.call(arguments)):i.next(t)},i,r)})}function km(t,n,r,i,o){if(t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener){t.addEventListener(n,r,o);var s=function(){return t.removeEventListener(n,r,o)}}else if(t&&"function"==typeof t.on&&"function"==typeof t.off)t.on(n,r),s=function(){return t.off(n,r)};else if(t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener)t.addListener(n,r),s=function(){return t.removeListener(n,r)};else{if(!t||!t.length)throw TypeError("Invalid event target");for(var a=0,u=t.length;a<u;a++)km(t[a],n,r,i,o)}i.add(s)}function lm(t,n,r){return r?lm(t,n).pipe(ba(function(t){return Jb(t)?r.apply(void 0,t):r(t)})):new Y(function(r){var i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.next(1===t.length?t[0]:t)};try{var o=t(i)}catch(t){return void r.error(t)}if(le(n))return function(){return n(i,o)}})}function bt(t){var n=t.subscriber,r=t.condition;if(!n.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void n.error(t)}else t.needIterate=!0;if(r){var i=void 0;try{i=r(t.state)}catch(t){return void n.error(t)}if(!i)return void n.complete();if(n.closed)return}try{var o=t.resultSelector(t.state)}catch(t){return void n.error(t)}if(!n.closed&&(n.next(o),!n.closed))return this.schedule(t)}}function ki(t){return!Jb(t)&&0<=t-parseFloat(t)+1}function mm(t,n){return void 0===t&&(t=0),void 0===n&&(n=bd),(!ki(t)||0>t)&&(t=0),n&&"function"==typeof n.schedule||(n=bd),new Y(function(r){return r.add(n.schedule(ct,t,{subscriber:r,counter:0,period:t})),r})}function ct(t){var n=t.subscriber,r=t.counter;t=t.period,n.next(r),this.schedule({subscriber:n,counter:r+1,period:t},t)}function Xb(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];n=1/0;var r=null,i=t[t.length-1];return Zc(i)?(r=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof Y?t[0]:tg(n)(nf(t,r))}function li(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return vb;var r=t[0],i=t.slice(1);return 1===t.length&&Jb(r)?li.apply(void 0,r):new Y(function(t){var n=function(){return t.add(li.apply(void 0,i).subscribe(t))};return Kb(r).subscribe({next:function(n){t.next(n)},error:n,complete:n})})}function dt(t){var n=t.keys,r=t.index,i=t.subscriber,o=t.subscription;if(t=t.obj,!i.closed)if(r<n.length){var s=n[r];i.next([s,t[s]]),o.add(this.schedule({keys:n,index:r+1,subscriber:i,subscription:o,obj:t}))}else i.complete()}function et(t,n){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=n,r}function wb(t,n){return function(r){return r.lift(new ft(t,n))}}function Ca(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length){if(!Jb(t[0]))return t[0];t=t[0]}return nf(t,void 0).lift(new gt)}function ht(t){var n=t.start,r=t.index,i=t.subscriber;r>=t.count?i.complete():(i.next(n),i.closed||(t.index=r+1,t.start=n+1,this.schedule(t)))}function Bc(t,n,r){void 0===t&&(t=0);var i=-1;return ki(n)?i=1>Number(n)?1:Number(n):Zc(n)&&(r=n),Zc(r)||(r=bd),new Y(function(n){var o=ki(t)?t:t-r.now();return r.schedule(it,o,{index:0,period:i,subscriber:n})})}function it(t){var n=t.index,r=t.period,i=t.subscriber;if(i.next(n),!i.closed){if(-1===r)return i.complete();t.index=n+1,this.schedule(t,r)}}function mi(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return"function"==typeof(n=t[t.length-1])&&t.pop(),nf(t,void 0).lift(new jt(n))}function Ga(t){return function(n){var r=new kt(t);return n=n.lift(r),r.caught=n}}function ni(t,n){return cb(t,n,1)}function nm(t){return void 0===t&&(t=null),function(n){return n.lift(new lt(t))}}function cd(t,n){void 0===n&&(n=bd);var r=t instanceof Date&&!isNaN(+t)?t-n.now():Math.abs(t);return function(t){return t.lift(new mt(r,n))}}function om(t,n){return function(r){return r.lift(new nt(t,n))}}function Dd(t){return void 0===t&&(t=ot),function(n){return n.lift(new pt(t))}}function ot(){return new vg}function Ka(t){return function(n){return 0===t?mf():n.lift(new qt(t))}}function pm(t,n){return n?function(r){return r.pipe(pm(function(r,i){return Kb(t(r,i)).pipe(ba(function(t,o){return n(r,t,i,o)}))}))}:function(n){return n.lift(new rt(t))}}function wg(t){return function(n){return n.lift(new st(t))}}function aa(t,n){var r=2<=arguments.length;return function(i){return i.pipe(t?wb(function(n,r){return t(n,r,i)}):Yc,Ka(1),r?nm(n):Dd(function(){return new vg}))}}function tt(){return function(t){return t.lift(new ut)}}function qm(t){return function(n){return 0===t?mf():n.lift(new vt(t))}}function qf(t){return function(n){return n.lift(new wt(t))}}function xg(t,n){var r=!1;return 2<=arguments.length&&(r=!0),function(i){return i.lift(new xt(t,n,r))}}function rm(t,n){return 2<=arguments.length?function(r){return gi(xg(t,n),qm(1),nm(n))(r)}:function(n){return gi(xg(function(n,r,i){return t(n,r,i+1)}),qm(1))(n)}}function yt(t,n){return function(r){var i="function"==typeof t?t:function(){return t};if("function"==typeof n)return r.lift(new zt(i,n));var o=Object.create(r,At);return o.source=r,o.subjectFactory=i,o}}function oe(t){return function(n){return n.lift(new Bt(t,n))}}function Ct(){return new Pa}function pe(){return function(t){return $l()(yt(Ct)(t))}}function sm(t,n,r){var i=t&&"object"===X(t)?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:r};return function(t){return t.lift(Dt(i))}}function Dt(t){var n,r,i=t.bufferSize,o=void 0===i?1/0:i,s=void 0===(i=t.windowTime)?1/0:i,a=t.refCount,u=t.scheduler,c=0,l=!1,f=!1;return function(t){if(c++,!n||l){l=!1;var i=(n=new qe(o,s,u)).subscribe(this);r=t.subscribe({next:function(t){n.next(t)},error:function(t){l=!0,n.error(t)},complete:function(){f=!0,r=void 0,n.complete()}}),f&&(r=void 0)}else i=n.subscribe(this);this.add(function(){c--,i.unsubscribe(),i=void 0,r&&!f&&a&&0===c&&(r.unsubscribe(),n=r=void 0)})}}function Cc(t,n){return"function"==typeof n?function(r){return r.pipe(Cc(function(r,i){return Kb(t(r,i)).pipe(ba(function(t,o){return n(r,t,i,o)}))}))}:function(n){return n.lift(new Et(t))}}function ob(t){return function(n){return n.lift(new Ft(t))}}function Gt(t,n){return void 0===n&&(n=!1),function(r){return r.lift(new Ht(t,n))}}function ca(t,n,r){return function(i){return i.lift(new It(t,n,r))}}function Jt(t,n,r){return void 0===n&&(n=bd),void 0===r&&(r=Kt),function(i){return i.lift(new Lt(t,n,r.leading,r.trailing))}}function Mt(t){t.subscriber.clearThrottle()}function Nt(t,n,r){return void 0===r&&(r=bd),function(i){var o=t instanceof Date&&!isNaN(+t),s=o?t-r.now():Math.abs(t);return i.lift(new Ot(s,o,n,r))}}function hb(t,n){return void 0===n&&(n=bd),Nt(t,Z(new pb),n)}function Pt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){var r;return"function"==typeof t[t.length-1]&&(r=t.pop()),n.lift(new Qt(t,r))}}function tm(t,n,r,i,o){t!==n&&um(n,function(s,a){if(o||(o=new ge),lb(s)){s=o;var u=oi(t,a),c=oi(n,a),l=s.get(c);if(l)pi(t,a,l);else{var f=void 0===(l=i?i(u,c,a+"",t,n,s):void 0);if(f){var h=Va(c),p=!h&&jf(c),d=!h&&!p&&bi(c);l=c,h||p||d?Va(u)?l=u:gc(u)&&Ed(u)?l=Xh(u):p?(f=!1,l=Jl(c,!0)):d?(f=!1,l=vm(c,!0)):l=[]:wm(c)||rf(c)?(l=u,rf(u)?l=re(u,kf(u)):lb(u)&&!qi(u)||(l=Kl(c))):f=!1}f&&(s.set(c,l),tm(l,c,r,i,s),s.delete(c)),pi(t,a,l)}}else void 0===(u=i?i(oi(t,a),s,a+"",t,n,o):void 0)&&(u=s),pi(t,a,u)},kf)}function Rt(t){var n=1,r=ri;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?n=1>=arguments.length?void 0:arguments[1]:r=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(n=1>=arguments.length?void 0:arguments[1],r=2>=arguments.length?void 0:arguments[2]);var i=n||1;return function(n){return n.pipe(xg(function(n,o){var s=r.now(),a=s-t;if((n=n.filter(function(t){return t.until>a})).length>=i){var u=n[n.length-1],c=n[0].until+t*Math.floor(n.length/i);n.push({delay:u.until<s?c-s:c-u.until,until:c,value:o})}else n.push({delay:0,until:s,value:o});return n},[]),ba(function(t){return t[t.length-1]}),ni(function(t){var n=bb(t.value);return t.delay?n.pipe(cd(t.delay,r)):n}))}}function St(t,n){var r=(n=void 0===n?{protocols:xm,makeWebSocket:ym}:n).protocols,i=void 0===r?xm:r,o=void 0===(n=n.makeWebSocket)?ym:n;return new Y(function(n){var r,s=new Pa,a=o(t,i),u=!1,c=!1,l=function(t){if(r)throw u=!0,t=Error("Web socket message factory function called more than once"),n.error(t),t;return r=t.subscribe(function(t){a.send(t)}),s};return a.onopen=function(){c?(u=!0,a.close()):n.next(l)},a.onmessage=function(t){s.next(t.data)},a.onerror=function(t){u=!0,n.error(Error(t.message))},a.onclose=function(t){u||(u=!0,c?(n.complete(),s.complete()):n.error(Error(1e3===t.code?"Normal closure":t.reason)))},function(){c=!0,r&&r.unsubscribe(),u||(u=!0,a.close())}})}function yg(){this._listeners={}}function zm(t){return"undefined"!=typeof Float32Array?function(){function n(t,n,r){s[0]=t,n[r]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3]}function r(t,n,r){s[0]=t,n[r]=a[3],n[r+1]=a[2],n[r+2]=a[1],n[r+3]=a[0]}function i(t,n){return a[0]=t[n],a[1]=t[n+1],a[2]=t[n+2],a[3]=t[n+3],s[0]}function o(t,n){return a[3]=t[n],a[2]=t[n+1],a[1]=t[n+2],a[0]=t[n+3],s[0]}var s=new Float32Array([-0]),a=new Uint8Array(s.buffer),u=128===a[3];t.writeFloatLE=u?n:r,t.writeFloatBE=u?r:n,t.readFloatLE=u?i:o,t.readFloatBE=u?o:i}():function(){function n(t,n,r,i){var o=+(0>n);if(o&&(n=-n),0===n)t(0<1/n?0:0x80000000,r,i);else if(isNaN(n))t(0x7fc00000,r,i);else if(34028234663852886e22<n)t((o<<31|0x7f800000)>>>0,r,i);else if(11754943508222875e-54>n)t((o<<31|Math.round(n/1401298464324817e-60))>>>0,r,i);else{var s=Math.floor(Math.log(n)/Math.LN2);t((o<<31|s+127<<23|8388607&Math.round(n*Math.pow(2,-s)*8388608))>>>0,r,i)}}function r(t,n,r){return t=2*((r=t(n,r))>>31)+1,n=r>>>23&255,r&=8388607,255===n?r?NaN:1/0*t:0===n?1401298464324817e-60*t*r:t*Math.pow(2,n-150)*(r+8388608)}t.writeFloatLE=n.bind(null,Am),t.writeFloatBE=n.bind(null,Bm),t.readFloatLE=r.bind(null,Cm),t.readFloatBE=r.bind(null,Dm)}(),"undefined"!=typeof Float64Array?function(){function n(t,n,r){s[0]=t,n[r]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3],n[r+4]=a[4],n[r+5]=a[5],n[r+6]=a[6],n[r+7]=a[7]}function r(t,n,r){s[0]=t,n[r]=a[7],n[r+1]=a[6],n[r+2]=a[5],n[r+3]=a[4],n[r+4]=a[3],n[r+5]=a[2],n[r+6]=a[1],n[r+7]=a[0]}function i(t,n){return a[0]=t[n],a[1]=t[n+1],a[2]=t[n+2],a[3]=t[n+3],a[4]=t[n+4],a[5]=t[n+5],a[6]=t[n+6],a[7]=t[n+7],s[0]}function o(t,n){return a[7]=t[n],a[6]=t[n+1],a[5]=t[n+2],a[4]=t[n+3],a[3]=t[n+4],a[2]=t[n+5],a[1]=t[n+6],a[0]=t[n+7],s[0]}var s=new Float64Array([-0]),a=new Uint8Array(s.buffer),u=128===a[7];t.writeDoubleLE=u?n:r,t.writeDoubleBE=u?r:n,t.readDoubleLE=u?i:o,t.readDoubleBE=u?o:i}():function(){function n(t,n,r,i,o,s){var a=+(0>i);if(a&&(i=-i),0===i)t(0,o,s+n),t(0<1/i?0:0x80000000,o,s+r);else if(isNaN(i))t(0,o,s+n),t(0x7ff80000,o,s+r);else if(17976931348623157e292<i)t(0,o,s+n),t((a<<31|0x7ff00000)>>>0,o,s+r);else if(22250738585072014e-324>i)t((i/=5e-324)>>>0,o,s+n),t((a<<31|i/0x100000000)>>>0,o,s+r);else{var u=Math.floor(Math.log(i)/Math.LN2);1024===u&&(u=1023),t(0x10000000000000*(i*=Math.pow(2,-u))>>>0,o,s+n),t((a<<31|u+1023<<20|1048576*i&1048575)>>>0,o,s+r)}}function r(t,n,r,i,o){return n=t(i,o+n),t=2*((i=t(i,o+r))>>31)+1,n=0x100000000*(1048575&i)+n,2047==(r=i>>>20&2047)?n?NaN:1/0*t:0===r?5e-324*t*n:t*Math.pow(2,r-1075)*(n+0x10000000000000)}t.writeDoubleLE=n.bind(null,Am,0,4),t.writeDoubleBE=n.bind(null,Bm,4,0),t.readDoubleLE=r.bind(null,Cm,0,4),t.readDoubleBE=r.bind(null,Dm,4,0)}(),t}function Am(t,n,r){n[r]=255&t,n[r+1]=t>>>8&255,n[r+2]=t>>>16&255,n[r+3]=t>>>24}function Bm(t,n,r){n[r]=t>>>24,n[r+1]=t>>>16&255,n[r+2]=t>>>8&255,n[r+3]=255&t}function Cm(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24)>>>0}function Dm(t,n){return(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}function Wa(t,n){this.lo=t>>>0,this.hi=n>>>0}function sf(t,n,r){this.fn=t,this.len=n,this.next=void 0,this.val=r}function si(){}function Tt(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function ja(){this.len=0,this.tail=this.head=new sf(si,0,0),this.states=null}function ti(t,n,r){n[r]=255&t}function ui(t,n){this.len=t,this.next=void 0,this.val=n}function vi(t,n,r){for(;t.hi;)n[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)n[r++]=127&t.lo|128,t.lo>>>=7;n[r++]=t.lo}function wi(t,n,r){n[r]=255&t,n[r+1]=t>>>8&255,n[r+2]=t>>>16&255,n[r+3]=t>>>24}function jc(){xi.call(this)}function Ut(t,n,r){40>t.length?V.utf8.write(t,n,r):n.utf8Write?n.utf8Write(t,r):n.write(t,r)}function Yb(t,n){return RangeError("index out of range: "+t.pos+" + "+(n||1)+" > "+t.len)}function La(t){this.buf=t,this.pos=0,this.len=t.length}function yi(){var t=new Em(0,0),n=0;if(!(4<this.len-this.pos)){for(;3>n;++n){if(this.pos>=this.len)throw Yb(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*n)>>>0,128>this.buf[this.pos++])return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*n)>>>0,t}for(;4>n;++n)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*n)>>>0,128>this.buf[this.pos++])return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return t;if(n=0,4<this.len-this.pos){for(;5>n;++n)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,128>this.buf[this.pos++])return t}else for(;5>n;++n){if(this.pos>=this.len)throw Yb(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,128>this.buf[this.pos++])return t}throw Error("invalid varint encoding")}function zg(t,n){return(t[n-4]|t[n-3]<<8|t[n-2]<<16|t[n-1]<<24)>>>0}function Fm(){if(this.pos+8>this.len)throw Yb(this,8);return new Em(zg(this.buf,this.pos+=4),zg(this.buf,this.pos+=4))}function Fd(t){zi.call(this,t)}function tf(t,n,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");V.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!n,this.responseDelimited=!!r}function za(t){return"string"==typeof t&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(t)&&"null"!==t}function Gm(t){try{var n=t.split(".").map(function(t){return Number(t)})}catch(t){return!1}if(4!==n.length||0===n[0])return!1;for(t=0;t<n.length;t++){var r=n[t];if(!Number.isInteger(r)||0>r||255<r)return!1}return!0}function Hm(t,n){if(!Array.isArray(n)||0===n.length||32<n.length||n.some(function(t){return 0===t.length||32<t.length}))throw new I("arguments is not valid",Ja);if(!za(t))throw new I("ID is invalid",Ja)}function uf(t){var n=t.attributes,r=t.attrSizeMap,i=t.maxAttrsCount,o=t.maxAttrValueSize;if(t=t.maxTotalSize,!yd(n))throw new I("attributes must be an object",Ja);if(Object.keys(n).length>i)throw new ib("Exceed the limit of ".concat(i," attributes"),se);if(0===Object.keys(n).length)throw new I("The attributes is an empty object",Ja);var s=0,a=0;for(n=Object.entries(n);a<n.length;a++){var u=ra(n[a],2),c=u[1];u=new Blob([u[0]]).size;var l=new Blob([c]).size;if(0===u||32<u)throw new I("Invalid attribute key",Ja);if(l>o)throw new ib("Invalid attribute value, over the limit of ".concat(o," bytes"),se);if("string"!=typeof c||0===c.length)throw new I("Invalid attribute value",Ja);s+=u,s+=l}if(s>t)throw new ib("The attributes size overflow",se);if(void 0!==r){if(Object.keys(r).length>i)throw new ib("Exceed the limit of ".concat(i," attributes"),se);for(s=i=0,r=Object.entries(r);s<r.length;s++){if(a=(n=ra(r[s],2))[1],0===(n=new Blob([n[0]]).size))throw new I("Invalid attribute key",Ja);if(a>o)throw new ib("Invalid attribute value, over the limit of ".concat(o," bytes"),se);i+=n,i+=a}if(i>t)throw new ib("The attributes size overflow",se)}}function Ag(t,n){return Math.floor(Math.random()*(Math.floor(n)-Math.ceil(t)+1))+t}function Bg(){return new U(Ag(0,0xffffffff),Ag(1,0xffffffff),!0)}function Xa(t){return t.toString().padEnd(32,"0")}function Im(t,n){return TypeError("Unexpected ".concat(t,": ").concat(n))}function Jm(t,n){return t=t.split(".").map(function(t){return Number(t)}),n=n.split(".").map(function(t){return Number(t)}),Math.sqrt(1e3*Math.pow(t[0]-n[0],2)+100*Math.pow(t[1]-n[1],2)+10*Math.pow(t[2]-n[2],2)+ +Math.pow(t[3]-n[3],2))}function Km(t){return t.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?t.toNumber():t.toString()}function Ai(t,n){n="".concat(t).concat(n||"");var r=Lm.get(n)||1;return Lm.set(n,r+1),"".concat(t).concat(r)}function Mm(t,n){var r="number"==typeof n?n:void 0!==n&&"string"!=typeof n?n.code:void 0;return n="number"!=typeof n&&"string"!=typeof n&&void 0!==n&&void 0!==n.serverCode?n.serverCode:void 0,r="".concat(void 0!==r?" Error Code ".concat(r):"").concat(void 0!==n?", server Code ".concat(n):""),t="string"==typeof t&&t?Cg(t):Array.isArray(t)&&"string"==typeof t[0]&&t[0]?Cg(Nm.apply(void 0,[t[0]].concat(G(t.slice(1))))):"","".concat(""===r?"":"".concat(r," - ")).concat(t)}function Om(t){return Bi.apply(this,arguments)}function Bi(){return(Bi=J(w.mark(function t(n){return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){setTimeout(function(){t()},n)}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Pm(t){return t instanceof Blob||"[object Blob]"===Object.prototype.toString.call(t)}function Dg(t){var n=255&t,r=t>>8&255,i=t>>16&255;return"".concat(t>>24&255,".").concat(i,".").concat(r,".").concat(n)}function te(t,n,r){return Ci.apply(this,arguments)}function Ci(){return(Ci=J(w.mark(function t(n,r,i){var o,s,a,u,c,l,f,h,p,d,v,g,b,y,E,m,_,O,I,A,R,T,S,N,k,C;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.body,a=void 0===(s=r.headers)?{}:s,c=void 0===(u=r.timeout)?1e4:u,l=r.signal,h=void 0!==(f=r.withCredentials)&&f,d=void 0!==(p=(i||{}).useBinaryResponse)&&p,(v=new XMLHttpRequest).open("POST",n,!0),v.responseType=d?"arraybuffer":"text",v.withCredentials=h,v.timeout=c,g=o instanceof FormData,b=o instanceof Uint8Array,!(1<(y=Object.keys(a).filter(function(t){return"content-type"===t.toLowerCase()})).length)){t.next=14;break}throw RangeError("multiple content-type");case 14:0===y.length&&(b?a["Content-Type"]="application/octet-stream":g||(a["Content-Type"]="application/json"));case 15:if("setRequestHeader"in v){t.next=46;break}return v.abort(),t.next=19,fetch(n,{body:g||b?o:JSON.stringify(o),cache:"no-cache",credentials:h?"include":"same-origin",headers:a,method:"POST",mode:"cors",referrer:"no-referrer",signal:l});case 19:if(!(200<=(m=(E=t.sent).status)&&300>m||304===m)){t.next=31;break}if(!d){t.next=27;break}return t.next=25,E.arrayBuffer();case 25:return _=t.sent,t.abrupt("return",{status:m,responseData:_});case 27:return t.next=29,E.text();case 29:return O=t.sent,t.abrupt("return",{status:m,responseText:O});case 31:return I=new da(["Post XHR failure, status %d",m]),t.prev=32,t.next=35,E.text();case 35:throw A=t.sent,I.statusCode=m,I.message=A||"Request failed, status ".concat(m),I;case 41:throw t.prev=41,t.t0=t.catch(32),I.statusCode=m,I.message="Request failed, status ".concat(m),I;case 46:if(0!==Object.keys(a).length)for(R=0,T=Object.entries(a);R<T.length;R++)N=(S=ra(T[R],2))[0],k=S[1],v.setRequestHeader(N,k);return void 0!==l&&(C=function t(){v.abort(),l.removeEventListener("abort",t)},l.addEventListener("abort",C)),g||b?v.send(o):v.send(JSON.stringify(o)),t.abrupt("return",new Promise(function(t,n){v.onload=function(){var r=v.status;if(200<=r&&300>r||304===r)t(d?{status:r,responseData:v.response}:{status:r,responseText:v.responseText});else{var i=new da(["Post XHR failure, status %d",r]);i.statusCode=r,i.message=v.response||"Request failed, status ".concat(v.status),n(i)}},v.ontimeout=function(t){n(new db(["XHR request timed out after %d ms",c],{originalError:t}))},v.onerror=function(){var t=new da(["Post XHR failure, status %d",v.status]);t.statusCode=v.status,t.message=v.response||"Request failed, status ".concat(v.status),n(t)},v.onabort=function(){try{n(new DOMException("The request aborted.","AbortError"))}catch(r){var t=Error("The request aborted.");t.name="AbortError",n(t)}}}));case 50:case"end":return t.stop()}},t,null,[[32,41]])}))).apply(this,arguments)}function Rm(t){return Hi.apply(this,arguments)}function Hi(){return(Hi=J(w.mark(function t(n){var r;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Image).src=n,t.abrupt("return",new Promise(function(t,n){r.onload=function(){t({width:r.width,height:r.height})},r.onerror=n}));case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Xt(t,n){return Ii.apply(this,arguments)}function Ii(){return(Ii=J(w.mark(function t(n,r){var i,o,s,a,u,c,l,f,h,p;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=void 0===(i=n.thumbnailHeight)?0:i,a=void 0===(s=n.thumbnailWidth)?0:s,c=void 0===(u=n.width)?0:u,f=void 0===(l=n.height)?0:l,h=n.thumbnail,p=[],"number"==typeof o&&"number"==typeof a&&"number"==typeof c&&"number"==typeof f){t.next=5;break}throw new I("Invalid message params",wf);case 5:return 0>=c&&0>=f&&p.push(Rm(Sm(r)).then(function(t){c=t.width,f=t.height})),0>=a&&0>=o&&void 0!==h&&p.push(Ji(h).then(function(){var t=J(w.mark(function t(n){var r;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rm(Sm(n));case 2:a=(r=t.sent).width,o=r.height;case 5:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}())),t.next=9,Promise.all(p).catch(function(){});case 9:return t.abrupt("return",{width:c,height:f,thumbnailWidth:a,thumbnailHeight:o});case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Tm(t,n){if(!yd(t))throw new I("message object is not a plain object",n);if(void 0===t.messageType)if(t.rawMessage instanceof Uint8Array){if(t.messageType="RAW",void 0!==t.text)throw new I("Raw messages cannot have text property. Use description instead",n)}else{if("string"!=typeof t.text)throw new I("messageType is undefined",n);if(t.messageType="TEXT",void 0!==t.rawMessage)throw new I("Text messages cannot have rawMessage property",n)}}function Gg(t){return Ki.apply(this,arguments)}function Ki(){return(Ki=J(w.mark(function t(n){var r,i,o,s,a,u,c,l,f,h,p,d,v,g,b,y,E,m,_;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.message,i=n.peerId,o=n.toPeer,s=n.session,a=n.errorCodes,u=n.diff,c=n.logger,l=n.options,void 0!==s){t.next=3;break}throw new K("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(f=!1,"TEXT"!==r.messageType||!r.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!o){t.next=11;break}if(p=(h=ra(r.text.split("_"),3))[0],d=h[1],void 0!==h[2]&&za(d)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===p){t.next=10;break}throw new I("Message is not valid",ve);case 10:f=!0;case 11:if(v=Date.now(),g=s.messageSentTimes.length-1,!((b=s.messageSentTimes[g])&&b+3e3<v)){t.next=18;break}s.messageSentTimes=[v],t.next=29;break;case 18:y=g;case 19:if(!(0<=y)){t.next=28;break}if(!(s.messageSentTimes[y]+3e3<v)){t.next=23;break}return s.messageSentTimes=s.messageSentTimes.slice(y+1,g+1),t.abrupt("break",28);case 23:if(!(180<=g-y+1)){t.next=25;break}throw new ib("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 25:y--,t.next=19;break;case 28:s.messageSentTimes.push(v);case 29:t.t0=r.messageType,t.next="TEXT"===t.t0?32:"RAW"===t.t0?37:"FILE"===t.t0||"IMAGE"===t.t0?39:40;break;case 32:if(!f){t.next=36;break}return m=(E=ra(r.text.split("_"),3))[1],_=E[2],c.info("[rtm-API] EndCall message send api is called"),t.abrupt("return",s.sendInvitationMessage({peerId:i,type:"CallCancel",extra:_,channelId:m,callId:"0"}));case 36:return t.abrupt("return",s.sendTextMessage(r.text,i,o,l,1e4-u));case 37:return void 0===r.description&&(r.description=""),t.abrupt("return",s.sendRawMessage(r.rawMessage,r.description,i,o,l,1e4-u));case 39:return t.abrupt("return",s.sendMediaMessage(r.messageType,r,i,o,l,1e4-u));case 40:throw new I("Invalid message type",ve);case 41:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Yt(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=t.replace(/(https?:\/\/)?(www.)?/i,"");return n||(r=r.split(".").slice(t.length-2).join(".")),-1!==r.indexOf("/")?r.split("/")[0]:r}function oa(t){if("string"!=typeof t)return"[Sensitive Info]";var n=Math.floor(.7*t.length),r=t.length;return Um(t,n,r,"*".repeat(r-n))}function Vm(t,n,r){function i(o){if(void 0===t)return t;if(Il(o))return o;if(Array.isArray(o))return o.map(i);var s={},a=0;for(o=Hg(o);a<o.length;a++){var u=ra(o[a],2),c=u[0];if("string"==typeof(u=u[1])&&r.includes(c)){s[c]="string"==typeof u?oa(u):"[Sensitive Info]";break}n.includes(c)?s[c]="[Hidden Info]":s[c]=null==u?u:r.includes(c)?"[Sensitive Info]":i(u)}return s}return Array.isArray(t)?t.map(i):i(t)}function Wm(t){return Object.getOwnPropertyNames(t).forEach(function(n){"object"==X(n=t[n])&&null!==n&&Wm(n)}),Object.freeze(t)}function pa(t){return new TextDecoder("utf-8").decode(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}function Ig(t){return(new TextEncoder).encode(t).length}function Xm(){for(var t=0,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];for(n=0;n<r.length;n++)t+=r[n].length;for(t=new Uint8Array(t),i=n=0;i<r.length;i++){var o=r[i];t.set(o,n),n+=o.length}return t}function we(t,n,r){var i,o=t.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(t=null==o?void 0:o[1],o=null==o?void 0:o[2]){for(o=o.substr(1).split("&"),i=0;i<o.length;i++)if(o[i].split("=")[0]==n){o[i]=n+"="+encodeURIComponent(r);break}return i==o.length&&o.push(n+"="+encodeURIComponent(r)),t+"?"+o.join("&")}return t+"?"+n+"="+encodeURIComponent(r)}function Ji(t){return new Promise(function(n,r){var i=new FileReader;i.onloadend=function(){n(i.result||new ArrayBuffer(0))},i.onerror=r,i.readAsArrayBuffer(t)})}function Zt(t,n){t=t=[t],"string"==typeof(n=n||{})&&(n={type:n});try{var r=new Blob(t,n)}catch(o){if("TypeError"!==o.name)throw o;r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder);for(var i=0;i<t.length;i+=1)r.append(t[i]);r=r.getBlob(n.type)}return r}function Um(t,n,r,i){return"string"!=typeof t?"[Sensitive Info]":t.substring(0,n)+i+t.substring(r)}function Ym(t){var n=[];return function t(r){if(null===r||"object"!==X(r))return r;if(-1!==n.indexOf(r))return"[Circular]";if(n.push(r),"function"==typeof r.toJSON)try{var i=t(r.toJSON());return n.pop(),i}catch(t){return"[Throws: "+(t?t.message:"?")+"]"}return i=Array.isArray(r)?r.map(t):Object.keys(r).reduce(function(n,i){e:{if($t.call(r,i))try{var o=r[i];break e}catch(t){o="[Throws: "+(t?t.message:"?")+"]";break e}o=r[i]}return n[i]=t(o),n},{}),n.pop(),i}(t)}function au(t){if(!(100<(t=String(t)).length)&&(t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t))){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}function Jg(t,n,r,i){return Math.round(t/r)+" "+i+(n>=1.5*r?"s":"")}function bu(t){var n=t.areas,r=t.excludedArea;if(1===n.length&&n[0]===F.GLOBAL&&r===F.CHINA)return xe([F.OVERSEA]);if(n.includes(F.GLOBAL)){if(t=xf(Kg).filter(function(t){return t!==F.GLOBAL&&t!==F.OVERSEA}),r in yf){var i=[].concat(G(null!=(n=yf[r])?n:[]),[r]);return xe(t.filter(function(t){return!i.includes(t)}))}if(Zm(r)){var o=cu(r);return xe(t.filter(function(t){return t!==r&&t!==o}))}}if(Zm(r)||r in yf)return xe(n);throw new I("Invalid excludedArea area config")}function Ma(t,n,r){void 0===r&&(r=Object.getOwnPropertyDescriptor(t,n));var i=r.value;return r.value=function(){for(var t=this,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];this.invokeTracker.apply(this,["%s: ".concat(0<o.length?"%s with args: ".concat(o.map(function(){return"%o"})):"%s"),this.name,n].concat(G(o.map(ye))));try{var a=i.apply(this,o)}catch(t){throw this.logError.apply(this,["".concat(void 0!==t.code?"Error Code ".concat(t.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map(function(){return"%o"})):""),n].concat(G(o.map(ye)))),t.originalError&&this.logError(t.originalError),this.errorTracker(t),t}var u=Date.now();return J(w.mark(function r(){var i,s;return w.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a;case 3:i=r.sent,r.next=12;break;case 6:return r.prev=6,r.t0=r.catch(0),t.logError.apply(t,["".concat(void 0!==r.t0.code?"Error Code ".concat(r.t0.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map(function(){return"%o"})):""),n].concat(G(o.map(ye)))),r.t0.originalError&&t.logError(r.t0.originalError),t.errorTracker(r.t0),r.abrupt("return");case 12:i!==a?void 0===i?t.resultTracker("%s promise resolves after %dms",n,Date.now()-u):t.resultTracker("%s promise resolves after %dms, result is %o",n,Date.now()-u,ye(i)):"Object"!==Ac(i)||yd(i)?t.resultTracker("%s result is %o",n,ye(i)):t.resultTracker("%s result is %s",n,i.name||(null==(s=i.constructor)?void 0:s.name));case 13:case"end":return r.stop()}},r,null,[[0,6]])}))(),a},r}function Nb(t,n,r){void 0===r&&(r=Object.getOwnPropertyDescriptor(t,n));var i=r.value;return r.value=function(){for(var t=this,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];this.invokeTracker.apply(this,["%s: ".concat(0<o.length?"%s with args: ".concat(o.map(function(){return"%o"})):"%s"),this.name,n].concat(o));try{var a=i.apply(this,o)}catch(t){throw this.logError.apply(this,["".concat(void 0!==t.code?"Error Code ".concat(t.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map(function(){return"%o"})):""),n].concat(o)),t.originalError&&this.logError(t.originalError),this.errorTracker(t),t}var u=Date.now();return J(w.mark(function r(){var i,s;return w.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a;case 3:i=r.sent,r.next=12;break;case 6:return r.prev=6,r.t0=r.catch(0),t.logError.apply(t,["".concat(void 0!==r.t0.code?"Error Code ".concat(r.t0.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map(function(){return"%o"})):""),n].concat(o)),r.t0.originalError&&t.logError(r.t0.originalError),t.errorTracker(r.t0),r.abrupt("return");case 12:i!==a?void 0===i?t.resultTracker("%s promise resolves after %dms",n,Date.now()-u):t.resultTracker("%s promise resolves after %dms, result is %o",n,Date.now()-u,i):"Object"!==Ac(i)||yd(i)?t.resultTracker("%s result is %o",n,i):t.resultTracker("%s result is %s",n,i.name||(null==(s=i.constructor)?void 0:s.name));case 13:case"end":return r.stop()}},r,null,[[0,6]])}))(),a},r}function du(t,n){var r="".concat(t,"Uri");if("number"!=typeof(r=Li[r])||0===r)throw TypeError("Got Unknown URI Name");return n=new(t=$m[t])(n),new eu({uri:r,data:n=t.encode(n).finish()})}function an(t,n){return"".concat(t.split(".").join("-"),".edge.").concat(n?"sd-rtn.com":"agora.io")}function eb(t,n,r){return Mi.apply(this,arguments)}function Mi(){return(Mi=J(w.mark(function t(n,r,i){var o,s;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:return o=fu[n].encode(r).finish(),s=function(){var t=J(w.mark(function t(r){var a,u,c,l=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(3<(u=1<l.length&&void 0!==l[1]?l[1]:0))){t.next=3;break}return t.abrupt("return");case 3:return c=we(c=i?"https://".concat(null!=(a=null==M?void 0:M.PROXY_NGINX[0])?a:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(r,"&p=6443&d=events/proto-raw"):"https://".concat(r,":6443/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),c=we(c,"id",gu[n].toString()),t.next=8,te(c,{body:o,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch(function(t){return s(r,u+1)});case 8:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}(),t.prev=4,t.next=7,s((null==M?void 0:M.EVENT_REPORT_DOMAIN[0])||"webcollector-rtm.agora.io");case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(4),t.next=13,s(M&&bn(1<(null==M?void 0:M.EVENT_REPORT_DOMAIN.length)?null==M?void 0:M.EVENT_REPORT_DOMAIN.slice(1):null==M?void 0:M.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 13:case"end":return t.stop()}},t,null,[[4,9]])}))).apply(this,arguments)}function fb(t){return void 0===t?U.fromNumber(0):U.fromNumber(Date.now()-t)}function hu(t){return btoa(String.fromCharCode.apply({},t.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(function(t){return parseInt(t,16)}))).replace(/={1,2}$/,"")}function Lg(t,n){return U.fromValue(t).eq(n)}function Mg(t,n){var r=void 0===n?t.val:n,i=t.isBoolean;n=t.isNumber;var o=t.oneof,s=t.len;if(2!==[i,n,o].filter(function(t){return!t}).length)throw TypeError("invalid field type");if(void 0!==r&&(t=!1,void 0!==o&&iu(o=Ni(o),Lg).length===o.length&&void 0!==ju(o,function(t){return Lg(r,t)})&&(t=!0),i=void 0!==i&&(0===r||1===r)&&1===s,n=void 0!==n&&r.toString(2).length<=s,!(t||i||n)))throw Error("invalid field value")}function cn(t){return function(){var n=t();if(!n)throw new K("Client is not logged in. Cannot do the operation");return n}}var Ya="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},Ng=function(t){return t&&t.Math==Math&&t},y=Ng("object"==typeof globalThis&&globalThis)||Ng("object"==typeof window&&window)||Ng("object"==typeof self&&self)||Ng("object"==typeof Ya&&Ya)||function(){return this}()||Function("return this")(),R=function(t){try{return!!t()}catch(t){return!0}},ka=!R(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),dn={}.propertyIsEnumerable,en=Object.getOwnPropertyDescriptor,zf=en&&!dn.call({1:2},1)?function(t){return!!(t=en(this,t))&&t.enumerable}:dn,dd=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},ku={}.toString,Zb=function(t){return ku.call(t).slice(8,-1)},lu="".split,Af=R(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==Zb(t)?lu.call(t,""):Object(t)}:Object,jb=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},qb=function(t){return Af(jb(t))},ha=function(t){return"object"==typeof t?null!==t:"function"==typeof t},lc=function(t,n){var r,i;if(!ha(t))return t;if(n&&"function"==typeof(r=t.toString)&&!ha(i=r.call(t))||"function"==typeof(r=t.valueOf)&&!ha(i=r.call(t))||!n&&"function"==typeof(r=t.toString)&&!ha(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")},Qa=function(t){return Object(jb(t))},mu={}.hasOwnProperty,Q=function(t,n){return mu.call(Qa(t),n)},ze=y.document,Og=ha(ze)&&ha(ze.createElement),fn=!ka&&!R(function(){return 7!=Object.defineProperty(Og?ze.createElement("div"):{},"a",{get:function(){return 7}}).a}),gn=Object.getOwnPropertyDescriptor,Fb={f:ka?gn:function(t,n){if(t=qb(t),n=lc(n,!0),fn)try{return gn(t,n)}catch(t){}if(Q(t,n))return dd(!zf.call(t,n),t[n])}},va=function(t){if(!ha(t))throw TypeError(String(t)+" is not an object");return t},hn=Object.defineProperty,Ra={f:ka?hn:function(t,n,r){if(va(t),n=lc(n,!0),va(r),fn)try{return hn(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[n]=r.value),t}},Na=ka?function(t,n,r){return Ra.f(t,n,dd(1,r))}:function(t,n,r){return t[n]=r,t},Oi=function(t,n){try{Na(y,t,n)}catch(r){y[t]=n}return n},ed=y["__core-js_shared__"]||Oi("__core-js_shared__",{}),nu=Function.toString;"function"!=typeof ed.inspectSource&&(ed.inspectSource=function(t){return nu.call(t)});var Pi=ed.inspectSource,jn=y.WeakMap,ou="function"==typeof jn&&/native code/.test(Pi(jn)),fd=$a(function(t){(t.exports=function(t,n){return ed[t]||(ed[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),pu=0,qu=Math.random(),Ae=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++pu+qu).toString(36)},kn=fd("keys"),Pg=function(t){return kn[t]||(kn[t]=Ae(t))},Be={},ru=y.WeakMap;if(ou||ed.state)var Gd=ed.state||(ed.state=new ru),su=Gd.get,ln=Gd.has,tu=Gd.set,Qi=function(t,n){if(ln.call(Gd,t))throw TypeError("Object already initialized");return n.facade=t,tu.call(Gd,t,n),n},Qg=function(t){return su.call(Gd,t)||{}},Ri=function(t){return ln.call(Gd,t)};else{var Ce=Pg("state");Be[Ce]=!0,Qi=function(t,n){if(Q(t,Ce))throw TypeError("Object already initialized");return n.facade=t,Na(t,Ce,n),n},Qg=function(t){return Q(t,Ce)?t[Ce]:{}},Ri=function(t){return Q(t,Ce)}}var Za={set:Qi,get:Qg,enforce:function(t){return Ri(t)?Qg(t):Qi(t,{})},getterFor:function(t){return function(n){var r;if(!ha(n)||(r=Qg(n)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},Ta=$a(function(t){var n=Za.get,r=Za.enforce,i=String(String).split("String");(t.exports=function(t,n,o,s){var a=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable;if(s=!!s&&!!s.noTargetGet,"function"==typeof o){"string"!=typeof n||Q(o,"name")||Na(o,"name",n);var c=r(o);c.source||(c.source=i.join("string"==typeof n?n:""))}t===y?u?t[n]=o:Oi(n,o):(a?!s&&t[n]&&(u=!0):delete t[n],u?t[n]=o:Na(t,n,o))})(Function.prototype,"toString",function(){return"function"==typeof this&&n(this).source||Pi(this)})}),mn=function(t){return"function"==typeof t?t:void 0},mc=function(t,n){return 2>arguments.length?mn(y[t])||mn(y[t]):y[t]&&y[t][n]||y[t]&&y[t][n]},uu=Math.ceil,vu=Math.floor,$b=function(t){return isNaN(t*=1)?0:(0<t?vu:uu)(t)},wu=Math.min,ta=function(t){return 0<t?wu($b(t),0x1fffffffffffff):0},xu=Math.max,yu=Math.min,xb=function(t,n){return 0>(t=$b(t))?xu(t+n,0):yu(t,n)},nn=function(t){return function(n,r,i){var o=ta((n=qb(n)).length);if(i=xb(i,o),t&&r!=r){for(;o>i;)if((r=n[i++])!=r)return!0}else for(;o>i;i++)if((t||i in n)&&n[i]===r)return t||i||0;return!t&&-1}},on=nn(!0),Si=nn(!1),pn=function(t,n){t=qb(t);var r,i=0,o=[];for(r in t)!Q(Be,r)&&Q(t,r)&&o.push(r);for(;n.length>i;)Q(t,r=n[i++])&&(~Si(o,r)||o.push(r));return o},Rg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),zu=Rg.concat("length","prototype"),Hd={f:Object.getOwnPropertyNames||function(t){return pn(t,zu)}},Bf={f:Object.getOwnPropertySymbols},qn=mc("Reflect","ownKeys")||function(t){var n=Hd.f(va(t)),r=Bf.f;return r?n.concat(r(t)):n},rn=function(t,n){for(var r=qn(n),i=Ra.f,o=Fb.f,s=0;s<r.length;s++){var a=r[s];Q(t,a)||i(t,a,o(n,a))}},Au=/#|\.prototype\./,nc=function(t,n){return(t=Bu[Cu(t)])==Du||t!=Eu&&("function"==typeof n?R(n):!!n)},Cu=nc.normalize=function(t){return String(t).replace(Au,".").toLowerCase()},Bu=nc.data={},Eu=nc.NATIVE="N",Du=nc.POLYFILL="P",Fu=Fb.f,N=function(t,n){var r,i,o,s=t.target,a=t.global,u=t.stat;if(i=a?y:u?y[s]||Oi(s,{}):(y[s]||{}).prototype)for(o in n){var c=n[o],l=t.noTargetGet?(r=Fu(i,o))&&r.value:i[o];if(!(r=nc(a?o:s+(u?".":"#")+o,t.forced))&&void 0!==l){if(typeof c==typeof l)continue;rn(c,l)}(t.sham||l&&l.sham)&&Na(c,"sham",!0);try{Ta(i,o,c,t)}catch(t){}}},yb=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Id=function(t,n,r){if(yb(t),void 0===n)return t;switch(r){case 0:return function(){return t.call(n)};case 1:return function(r){return t.call(n,r)};case 2:return function(r,i){return t.call(n,r,i)};case 3:return function(r,i,o){return t.call(n,r,i,o)}}return function(){return t.apply(n,arguments)}},gd=Array.isArray||function(t){return"Array"==Zb(t)},De=mc("navigator","userAgent")||"",sn=y.process,tn=sn&&sn.versions,un=tn&&tn.v8;if(un)var hd=un.split("."),Ti=4>hd[0]?1:hd[0]+hd[1];else De&&(hd=De.match(/Edge\/(\d+)/),(!hd||74<=hd[1])&&(hd=De.match(/Chrome\/(\d+)/))&&(Ti=hd[1]));var id=Ti&&+Ti,oc=!!Object.getOwnPropertySymbols&&!R(function(){return!String(Symbol())||!Symbol.sham&&id&&41>id}),vn=oc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Cf=fd("wks"),Df=y.Symbol,Gu=vn?Df:Df&&Df.withoutSetter||Ae,qa=function(t){return Q(Cf,t)&&(oc||"string"==typeof Cf[t])||(oc&&Q(Df,t)?Cf[t]=Df[t]:Cf[t]=Gu("Symbol."+t)),Cf[t]},Hu=qa("species"),Sg=function(t,n){if(gd(t)){var r=t.constructor;"function"==typeof r&&(r===Array||gd(r.prototype))?r=void 0:ha(r)&&null===(r=r[Hu])&&(r=void 0)}return new(void 0===r?Array:r)(0===n?0:n)},wn=[].push,jd=function(t){var n=1==t,r=2==t,i=3==t,o=4==t,s=6==t,a=7==t,u=5==t||s;return function(c,l,f,h){var p=Qa(c),d=Af(p);l=Id(l,f,3),f=ta(d.length);var v,g=0;for(h=h||Sg,c=n?h(c,f):r||a?h(c,0):void 0;f>g;g++)if((u||g in d)&&(v=l(h=d[g],g,p),t))if(n)c[g]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:wn.call(c,h)}else switch(t){case 4:return!1;case 7:wn.call(c,h)}return s?-1:i||o?o:c}},Jd=jd(0),xn=jd(1),yn=jd(2),Iu=jd(3),Ju=jd(4),zn=jd(5),An=jd(6);jd(7);var Ku=qa("species"),Ef=function(t){return 51<=id||!R(function(){var n=[];return(n.constructor={})[Ku]=function(){return{foo:1}},1!==n[t](Boolean).foo})},Lu=Ef("filter");N({target:"Array",proto:!0,forced:!Lu},{filter:function(t){return yn(this,t,1<arguments.length?arguments[1]:void 0)}});var Dc=Object.keys||function(t){return pn(t,Rg)},Mu=R(function(){Dc(1)});N({target:"Object",stat:!0,forced:Mu},{keys:function(t){return Dc(Qa(t))}});var Ee=function(t,n){var r=[][t];return!!r&&R(function(){r.call(null,n||function(){throw 1},1)})},Nu=[].join,Ou=Af!=Object,Pu=Ee("join",",");N({target:"Array",proto:!0,forced:Ou||!Pu},{join:function(t){return Nu.call(qb(this),void 0===t?",":t)}});var Qu=Ef("map");N({target:"Array",proto:!0,forced:!Qu},{map:function(t){return xn(this,t,1<arguments.length?arguments[1]:void 0)}});var Ui=function(t){var n=t.return;if(void 0!==n)return va(n.call(t)).value},Fe={},Ru=qa("iterator"),Su=Array.prototype,Vi=function(t){return void 0!==t&&(Fe.Array===t||Su[Ru]===t)},Ge=function(t,n,r){(n=lc(n))in t?Ra.f(t,n,dd(0,r)):t[n]=r},Tu=qa("toStringTag"),Bn={};Bn[Tu]="z";var Wi="[object z]"===String(Bn),Uu=qa("toStringTag"),Vu="Arguments"==Zb(function(){return arguments}()),Ff=Wi?Zb:function(t){var n;if(void 0===t)var r="Undefined";else{if(null===t)var i="Null";else{e:{var o=t=Object(t);try{i=o[Uu];break e}catch(t){}i=void 0}i="string"==typeof(r=i)?r:Vu?Zb(t):"Object"==(n=Zb(t))&&"function"==typeof t.callee?"Arguments":n}r=i}return r},Wu=qa("iterator"),Xi=function(t){if(null!=t)return t[Wu]||t["@@iterator"]||Fe[Ff(t)]},Cn=qa("iterator"),Dn=!1;try{var Xu=0,En={next:function(){return{done:!!Xu++}},return:function(){Dn=!0}};En[Cn]=function(){return this},Array.from(En,function(){throw 2})}catch(c){}var Tg=function(t,n){if(!n&&!Dn)return!1;var r=!1;try{(n={})[Cn]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Yu=!Tg(function(t){Array.from(t)});N({target:"Array",stat:!0,forced:Yu},{from:function(t){var n,r=Qa(t),i="function"==typeof this?this:Array,o=arguments.length,s=1<o?arguments[1]:void 0,a=void 0!==s,u=Xi(r),c=0;if(a&&(s=Id(s,2<o?arguments[2]:void 0,2)),null==u||i==Array&&Vi(u)){var l=ta(r.length);for(i=new i(l);l>c;c++)u=a?s(r[c],c):r[c],Ge(i,c,u)}else for(o=(r=u.call(r)).next,i=new i;!(n=o.call(r)).done;c++){if(a){u=r;var f=s;n=[n.value,c];try{l=f(va(n)[0],n[1])}catch(t){throw Ui(u),t}}else l=n.value;Ge(i,c,u=l)}return i.length=c,i}});var Fn=function(t){return function(n,r){n=String(jb(n)),r=$b(r);var i,o=n.length;if(0>r||r>=o)return t?"":void 0;var s=n.charCodeAt(r);return 55296>s||56319<s||r+1===o||56320>(i=n.charCodeAt(r+1))||57343<i?t?n.charAt(r):s:t?n.slice(r,r+2):i-56320+(s-55296<<10)+65536}};Fn(!1);var Kd,Gn=Fn(!0),Hn=!R(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),In=Pg("IE_PROTO"),Zu=Object.prototype,Vb=Hn?Object.getPrototypeOf:function(t){return Q(t=Qa(t),In)?t[In]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Zu:null},Yi=qa("iterator"),Jn=!1,$u=function(){return this};if([].keys){var Kn=[].keys();if("next"in Kn){var Ln=Vb(Vb(Kn));Ln!==Object.prototype&&(Kd=Ln)}else Jn=!0}(null==Kd||R(function(){var t={};return Kd[Yi].call(t)!==t}))&&(Kd={}),Q(Kd,Yi)||Na(Kd,Yi,$u);var aj,Ug=Kd,Vg=Jn,av=ka?Object.defineProperties:function(t,n){va(t);for(var r,i=Dc(n),o=i.length,s=0;o>s;)Ra.f(t,r=i[s++],n[r]);return t},Zi=mc("document","documentElement"),Mn=Pg("IE_PROTO"),$i=function(){},Wg=function(){try{aj=document.domain&&new ActiveXObject("htmlfile")}catch(t){}if(aj){var t=aj;t.write("<script><\/script>"),t.close(),t=t.parentWindow.Object}else(t=Og?ze.createElement("iframe"):{}).style.display="none",Zi.appendChild(t),t.src="javascript:",(t=t.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),t=t.F;for(Wg=t,t=Rg.length;t--;)delete Wg.prototype[Rg[t]];return Wg()};Be[Mn]=!0;var ac=Object.create||function(t,n){if(null!==t){$i.prototype=va(t);var r=new $i;$i.prototype=null,r[Mn]=t}else r=Wg();return void 0===n?r:av(r,n)},bv=Ra.f,Nn=qa("toStringTag"),Ec=function(t,n,r){t&&!Q(t=r?t:t.prototype,Nn)&&bv(t,Nn,{configurable:!0,value:n})},cv=function(){return this},dv=function(t,n,r){return n+=" Iterator",t.prototype=ac(Ug,{next:dd(1,r)}),Ec(t,n,!1),Fe[n]=cv,t},Ua=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,n={};try{var r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;r.call(n,[]),t=n instanceof Array}catch(t){}return function(n,i){if(va(n),!ha(i)&&null!==i)throw TypeError("Can't set "+String(i)+" as a prototype");return t?r.call(n,i):n.__proto__=i,n}}():void 0),Gf=qa("iterator"),ev=function(){return this},bj=function(t,n,r,i,o,s,a){dv(r,n,i),i=function(t){if(t===o&&p)return p;if(!Vg&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}};var u,c=n+" Iterator",l=!1,f=t.prototype,h=f[Gf]||f["@@iterator"]||o&&f[o],p=!Vg&&h||i(o),d="Array"==n&&f.entries||h;if(d&&(t=Vb(d.call(new t)),Ug!==Object.prototype&&t.next&&(Vb(t)!==Ug&&(Ua?Ua(t,Ug):"function"!=typeof t[Gf]&&Na(t,Gf,ev)),Ec(t,c,!0))),"values"==o&&h&&"values"!==h.name&&(l=!0,p=function(){return h.call(this)}),f[Gf]!==p&&Na(f,Gf,p),Fe[n]=p,o){var v={values:i("values"),keys:s?p:i("keys"),entries:i("entries")};if(a)for(u in v)!Vg&&!l&&u in f||Ta(f,u,v[u]);else N({target:n,proto:!0,forced:Vg||l},v)}return v},fv=Za.set,gv=Za.getterFor("String Iterator");bj(String,"String",function(t){fv(this,{type:"String Iterator",string:String(t),index:0})},function(){var t=gv(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(n=Gn(n,r),t.index+=n.length,{value:n,done:!1})});var cj=qa("unscopables"),dj=Array.prototype;null==dj[cj]&&Ra.f(dj,cj,{configurable:!0,value:ac(null)});var Ld=function(t){dj[cj][t]=!0},On=!0;"find"in[]&&[,].find(function(){On=!1}),N({target:"Array",proto:!0,forced:On},{find:function(t){return zn(this,t,1<arguments.length?arguments[1]:void 0)}}),Ld("find");var Pn=function(t){var n=String(jb(this)),r="";if(0>(t=$b(t))||1/0==t)throw RangeError("Wrong number of repetitions");for(;0<t;(t>>>=1)&&(n+=n))1&t&&(r+=n);return r};N({target:"String",proto:!0},{repeat:Pn}),N({target:"Number",stat:!0},{MAX_SAFE_INTEGER:0x1fffffffffffff}),N({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),y.Number.isNaN;var hv=Wi?({}).toString:function(){return"[object "+Ff(this)+"]"};Wi||Ta(Object.prototype,"toString",hv,{unsafe:!0});var Fc=y.Promise,Hf=function(t,n,r){for(var i in n)Ta(t,i,n[i],r);return t},Qn=qa("species"),If=function(t){t=mc(t);var n=Ra.f;ka&&t&&!t[Qn]&&n(t,Qn,{configurable:!0,get:function(){return this}})},Gc=function(t,n,r){if(!(t instanceof n))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t},Jf=function(t,n){this.stopped=t,this.result=n},Xg=function(t,n,r){var i,o=!(!r||!r.AS_ENTRIES),s=!(!r||!r.IS_ITERATOR),a=!(!r||!r.INTERRUPTED),u=Id(n,r&&r.that,1+o+a),c=function(t){return l&&Ui(l),new Jf(!0,t)};if(n=function(t){return o?(va(t),a?u(t[0],t[1],c):u(t[0],t[1])):a?u(t,c):u(t)},s)var l=t;else{if("function"!=typeof(s=Xi(t)))throw TypeError("Target is not iterable");if(Vi(s)){for(s=0,r=ta(t.length);r>s;s++)if((i=n(t[s]))&&i instanceof Jf)return i;return new Jf(!1)}l=s.call(t)}for(t=l.next;!(s=t.call(l)).done;){try{i=n(s.value)}catch(t){throw Ui(l),t}if("object"==typeof i&&i&&i instanceof Jf)return i}return new Jf(!1)},iv=qa("species"),kd=function(t,n){var r;return void 0===(t=va(t).constructor)||null==(r=va(t)[iv])?n:yb(r)},Rn=/(?:iphone|ipod|ipad).*applewebkit/i.test(De),Hc="process"==Zb(y.process),Yg=y.location,ej=y.setImmediate,Sn=y.clearImmediate,jv=y.process,Tn=y.MessageChannel,fj=y.Dispatch,gj=0,Kf={},hj=function(t){if(Kf.hasOwnProperty(t)){var n=Kf[t];delete Kf[t],n()}},ij=function(t){return function(){hj(t)}},Un=function(t){hj(t.data)},Vn=function(t){y.postMessage(t+"",Yg.protocol+"//"+Yg.host)};if(!ej||!Sn)if(ej=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return Kf[++gj]=function(){("function"==typeof t?t:Function(t)).apply(void 0,n)},Lf(gj),gj},Sn=function(t){delete Kf[t]},Hc)var Lf=function(t){jv.nextTick(ij(t))};else if(fj&&fj.now)Lf=function(t){fj.now(ij(t))};else if(Tn&&!Rn){var Wn=new Tn,Xn=Wn.port2;Wn.port1.onmessage=Un,Lf=Id(Xn.postMessage,Xn,1)}else y.addEventListener&&"function"==typeof postMessage&&!y.importScripts&&Yg&&"file:"!==Yg.protocol&&!R(Vn)?(Lf=Vn,y.addEventListener("message",Un,!1)):Lf="onreadystatechange"in(Og?ze.createElement("script"):{})?function(t){Zi.appendChild(Og?ze.createElement("script"):{}).onreadystatechange=function(){Zi.removeChild(this),hj(t)}}:function(t){setTimeout(ij(t),0)};var Md,Mf,jj=ej,kv=/web0s(?!.*chrome)/i.test(De),lv=Fb.f,Yn=y.MutationObserver||y.WebKitMutationObserver,Zn=y.document,$n=y.process,Zg=y.Promise,ao=lv(y,"queueMicrotask"),bo=ao&&ao.value;if(!bo){var ah=function(){var t;for(Hc&&(t=$n.domain)&&t.exit();Md;){var n=Md.fn;Md=Md.next;try{n()}catch(t){throw Md?$g():Mf=void 0,t}}Mf=void 0,t&&t.enter()};if(Rn||Hc||kv||!Yn||!Zn)if(Zg&&Zg.resolve){var kj=Zg.resolve(void 0);kj.constructor=Zg;var mv=kj.then,$g=function(){mv.call(kj,ah)}}else $g=Hc?function(){$n.nextTick(ah)}:function(){jj.call(y,ah)};else{var co=!0,eo=Zn.createTextNode("");new Yn(ah).observe(eo,{characterData:!0}),$g=function(){eo.data=co=!co}}}var fo=bo||function(t){t={fn:t,next:void 0},Mf&&(Mf.next=t),Md||(Md=t,$g()),Mf=t},nv=function(t){var n,r;this.promise=new t(function(t,i){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=i}),this.resolve=yb(n),this.reject=yb(r)},lj={f:function(t){return new nv(t)}},mj=function(t,n){return va(t),ha(n)&&n.constructor===t?n:((0,(t=lj.f(t)).resolve)(n),t.promise)},ov=function(t,n){var r=y.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,n))},nj=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},pv="object"==typeof window,qv=qa("species"),go=Za.get,rv=Za.set,sv=Za.getterFor("Promise"),Nd=Fc&&Fc.prototype,zb=Fc,bh=Nd,ho=y.TypeError,oj=y.document,pj=y.process,He=lj.f,tv=He,uv=!!(oj&&oj.createEvent&&y.dispatchEvent),io="function"==typeof PromiseRejectionEvent,jo=!1,Nf=nc("Promise",function(){var t=Pi(zb)!==String(zb);if(!t&&66===id)return!0;if(51<=id&&/native code/.test(zb))return!1;var n=new zb(function(t){t(1)}),r=function(t){t(function(){},function(){})};return(n.constructor={})[qv]=r,!(jo=n.then(function(){})instanceof r)||!t&&pv&&!io}),vv=Nf||!Tg(function(t){zb.all(t).catch(function(){})}),ko=function(t){var n;return!(!ha(t)||"function"!=typeof(n=t.then))&&n},qj=function(t,n){if(!t.notified){t.notified=!0;var r=t.reactions;fo(function(){for(var i=t.value,o=1==t.state,s=0;r.length>s;){var a,u=r[s++],c=o?u.ok:u.fail,l=u.resolve,f=u.reject,h=u.domain;try{if(c){if(o||(2===t.rejection&&wv(t),t.rejection=1),!0===c)var p=i;else if(h&&h.enter(),p=c(i),h){h.exit();var d=!0}p===u.promise?f(ho("Promise-chain cycle")):(a=ko(p))?a.call(p,l,f):l(p)}else f(i)}catch(t){h&&!d&&h.exit(),f(t)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&xv(t)})}},lo=function(t,n,r){var i;if(uv){var o=oj.createEvent("Event");o.promise=n,o.reason=r,o.initEvent(t,!1,!0),y.dispatchEvent(o)}else o={promise:n,reason:r};!io&&(i=y["on"+t])?i(o):"unhandledrejection"===t&&ov("Unhandled promise rejection",r)},xv=function(t){jj.call(y,function(){var n=t.facade,r=t.value;if(1!==t.rejection&&!t.parent){var i=nj(function(){Hc?pj.emit("unhandledRejection",r,n):lo("unhandledrejection",n,r)});if(t.rejection=Hc||1!==t.rejection&&!t.parent?2:1,i.error)throw i.value}})},wv=function(t){jj.call(y,function(){var n=t.facade;Hc?pj.emit("rejectionHandled",n):lo("rejectionhandled",n,t.value)})},Ie=function(t,n,r){return function(i){t(n,i,r)}},Je=function(t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,qj(t,!0))},rj=function(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw ho("Promise can't be resolved itself");var i=ko(n);i?fo(function(){var r={done:!1};try{i.call(n,Ie(rj,r,t),Ie(Je,r,t))}catch(n){Je(r,n,t)}}):(t.value=n,t.state=1,qj(t,!1))}catch(n){Je({done:!1},n,t)}}};if(Nf){bh=(zb=function(t){Gc(this,zb,"Promise"),yb(t),sj.call(this);var n=go(this);try{t(Ie(rj,n),Ie(Je,n))}catch(t){Je(n,t)}}).prototype;var sj=function(t){rv(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};sj.prototype=Hf(bh,{then:function(t,n){var r=sv(this),i=He(kd(this,zb));return i.ok="function"!=typeof t||t,i.fail="function"==typeof n&&n,i.domain=Hc?pj.domain:void 0,r.parent=!0,r.reactions.push(i),0!=r.state&&qj(r,!1),i.promise},catch:function(t){return this.then(void 0,t)}});var yv=function(){var t=new sj,n=go(t);this.promise=t,this.resolve=Ie(rj,n),this.reject=Ie(Je,n)};if(lj.f=He=function(t){return t===zb||t===zv?new yv(t):tv(t)},"function"==typeof Fc&&Nd!==Object.prototype){var Av=Nd.then;jo||(Ta(Nd,"then",function(t,n){var r=this;return new zb(function(t,n){Av.call(r,t,n)}).then(t,n)},{unsafe:!0}),Ta(Nd,"catch",bh.catch,{unsafe:!0}));try{delete Nd.constructor}catch(c){}Ua&&Ua(Nd,bh)}}N({global:!0,wrap:!0,forced:Nf},{Promise:zb}),Ec(zb,"Promise",!1),If("Promise");var zv=mc("Promise");N({target:"Promise",stat:!0,forced:Nf},{reject:function(t){var n=He(this);return n.reject.call(void 0,t),n.promise}}),N({target:"Promise",stat:!0,forced:Nf},{resolve:function(t){return mj(this,t)}}),N({target:"Promise",stat:!0,forced:vv},{all:function(t){var n=this,r=He(n),i=r.resolve,o=r.reject,s=nj(function(){var r=yb(n.resolve),s=[],a=0,u=1;Xg(t,function(t){var c=a++,l=!1;s.push(void 0),u++,r.call(n,t).then(function(t){l||(l=!0,s[c]=t,--u||i(s))},o)}),--u||i(s)});return s.error&&o(s.value),r.promise},race:function(t){var n=this,r=He(n),i=r.reject,o=nj(function(){var o=yb(n.resolve);Xg(t,function(t){o.call(n,t).then(r.resolve,i)})});return o.error&&i(o.value),r.promise}});var mo=[].indexOf,no=!!mo&&0>1/[1].indexOf(1,-0),Bv=Ee("indexOf");N({target:"Array",proto:!0,forced:no||!Bv},{indexOf:function(t){return no?mo.apply(this,arguments)||0:Si(this,t,1<arguments.length?arguments[1]:void 0)}});var c,a,tj=function(){var t=va(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n},pc=R(function(){var t=RegExp("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),Cv=R(function(){var t=RegExp("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),ch=RegExp.prototype.exec,Dv=fd("native-string-replace",String.prototype.replace),oo=ch,uj=(c=/a/,a=/b*/g,ch.call(c,"a"),ch.call(a,"a"),0!==c.lastIndex||0!==a.lastIndex),po=pc||Cv,vj=void 0!==/()??/.exec("")[1];(uj||vj||po)&&(oo=function(t){var n,r=po&&this.sticky,i=tj.call(this),o=this.source,s=0,a=t;if(r){-1===(i=i.replace("y","")).indexOf("g")&&(i+="g"),a=String(t).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==t[this.lastIndex-1])&&(o="(?: "+o+")",a=" "+a,s++);var u=RegExp("^(?:"+o+")",i)}if(vj&&(u=RegExp("^"+o+"$(?!\\s)",i)),uj)var c=this.lastIndex;var l=ch.call(r?u:this,a);return r?l?(l.input=l.input.slice(s),l[0]=l[0].slice(s),l.index=this.lastIndex,this.lastIndex+=l[0].length):this.lastIndex=0:uj&&l&&(this.lastIndex=this.global?l.index+l[0].length:c),vj&&l&&1<l.length&&Dv.call(l[0],u,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(l[n]=void 0)}),l});var Of=oo;N({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Ev=qa("species"),wj=RegExp.prototype,Fv=!R(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),qo="$0"==="a".replace(/./,"$0"),ro=qa("replace"),so=!!/./[ro]&&""===/./[ro]("a","$0"),Gv=!R(function(){var t=/(?:)/,n=t.exec;return t.exec=function(){return n.apply(this,arguments)},2!==(t="ab".split(t)).length||"a"!==t[0]||"b"!==t[1]}),dh=function(t,n,r,i){var o=qa(t),s=!R(function(){var n={};return n[o]=function(){return 7},7!=""[t](n)}),a=s&&!R(function(){var n=!1,r=/a/;return"split"===t&&((r={constructor:{}}).constructor[Ev]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return n=!0,null},r[o](""),!n});if(!s||!a||"replace"===t&&(!Fv||!qo||so)||"split"===t&&!Gv){var u=/./[o],c=(r=r(o,""[t],function(t,n,r,i,o){var a=n.exec;return a===Of||a===wj.exec?s&&!o?{done:!0,value:u.call(n,r,i)}:{done:!0,value:t.call(r,n,i)}:{done:!1}},{REPLACE_KEEPS_$0:qo,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:so}))[1];Ta(String.prototype,t,r[0]),Ta(wj,o,2==n?function(t,n){return c.call(t,this,n)}:function(t){return c.call(t,this)})}i&&Na(wj[o],"sham",!0)},xj=function(t,n,r){return n+(r?Gn(t,n).length:1)},Hv=Math.floor,Iv="".replace,Jv=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Kv=/\$([$&'`]|\d{1,2})/g,Lv=function(t,n,r,i,o,s){var a=r+t.length,u=i.length,c=Kv;return void 0!==o&&(o=Qa(o),c=Jv),Iv.call(s,c,function(s,c){switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":s=o[c.slice(1,-1)];break;default:var l=+c;if(0===l)return s;if(l>u)return 0===(l=Hv(l/10))?s:l<=u?void 0===i[l-1]?c.charAt(1):i[l-1]+c.charAt(1):s;s=i[l-1]}return void 0===s?"":s})},Ke=function(t,n){var r=t.exec;if("function"==typeof r){if("object"!=typeof(t=r.call(t,n)))throw TypeError("RegExp exec method returned something other than an Object or null");return t}if("RegExp"!==Zb(t))throw TypeError("RegExp#exec called on incompatible receiver");return Of.call(t,n)},Mv=Math.max,Nv=Math.min,Ov=function(t){return void 0===t?t:String(t)};dh("replace",2,function(t,n,r,i){var o=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,s=i.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(r,i){var o=jb(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},function(t,i){if(!o&&s||"string"==typeof i&&-1===i.indexOf(a)){var u=r(n,t,this,i);if(u.done)return u.value}var c=va(t);t=String(this),(u="function"==typeof i)||(i=String(i));var l=c.global;if(l){var f=c.unicode;c.lastIndex=0}for(var h=[];;){var p=Ke(c,t);if(null===p||(h.push(p),!l))break;""===String(p[0])&&(c.lastIndex=xj(t,ta(c.lastIndex),f))}for(f="",l=c=0;l<h.length;l++){p=h[l];for(var d=String(p[0]),v=Mv(Nv($b(p.index),t.length),0),g=[],b=1;b<p.length;b++)g.push(Ov(p[b]));p=p.groups,u?(g=[d].concat(g,v,t),void 0!==p&&g.push(p),p=String(i.apply(void 0,g))):p=Lv(d,t,v,g,p,i),v>=c&&(f+=t.slice(c,v)+p,c=v+d.length)}return f+t.slice(c)}]});var Pv=Ef("slice"),Qv=qa("species"),Rv=[].slice,Sv=Math.max;N({target:"Array",proto:!0,forced:!Pv},{slice:function(t,n){var r=qb(this),i=ta(r.length);if(t=xb(t,i),n=xb(void 0===n?i:n,i),gd(r)){var o=r.constructor;if("function"==typeof o&&(o===Array||gd(o.prototype))?o=void 0:ha(o)&&null===(o=o[Qv])&&(o=void 0),o===Array||void 0===o)return Rv.call(r,t,n)}for(o=new(void 0===o?Array:o)(Sv(n-t,0)),i=0;t<n;t++,i++)t in r&&Ge(o,i,r[t]);return o.length=i,o}});var Tv=Za.set,Uv=Za.getterFor("Array Iterator"),ld=bj(Array,"Array",function(t,n){Tv(this,{type:"Array Iterator",target:qb(t),index:0,kind:n})},function(){var t=Uv(this),n=t.target,r=t.kind,i=t.index++;return!n||i>=n.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:i,done:!1}:"values"==r?{value:n[i],done:!1}:{value:[i,n[i]],done:!1}},"values");Fe.Arguments=Fe.Array,Ld("keys"),Ld("values"),Ld("entries");var to="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Le=function(t){if(void 0===t)return 0;var n=ta(t=$b(t));if(t!==n)throw RangeError("Wrong length or index");return n},Vv=Math.abs,Ic=Math.pow,Wv=Math.floor,Xv=Math.log,Yv=Math.LN2,yj=function(t){var n=Qa(this),r=ta(n.length),i=arguments.length,o=xb(1<i?arguments[1]:void 0,r);for(r=void 0===(i=2<i?arguments[2]:void 0)?r:xb(i,r);r>o;)n[o++]=t;return n},Zv=Hd.f,$v=Ra.f,Me=Za.get,uo=Za.set,bc=y.ArrayBuffer,Ab=bc,cc=y.DataView,eh=cc&&cc.prototype,vo=Object.prototype,fh=y.RangeError,wo=function(t,n,r){var i,o=Array(r),s=(1<<(r=8*r-n-1))-1,a=s>>1,u=23===n?Ic(2,-24)-Ic(2,-77):0,c=+(0>t||0===t&&0>1/t),l=0;if((t=Vv(t))!=t||1/0===t){t=+(t!=t);var f=s}else f=Wv(Xv(t)/Yv),1>t*(i=Ic(2,-f))&&(f--,i*=2),2<=(t=1<=f+a?t+u/i:t+u*Ic(2,1-a))*i&&(f++,i/=2),f+a>=s?(t=0,f=s):1<=f+a?(t=(t*i-1)*Ic(2,n),f+=a):(t=t*Ic(2,a-1)*Ic(2,n),f=0);for(;8<=n;o[l++]=255&t,t/=256,n-=8);for(f=f<<n|t,r+=n;0<r;o[l++]=255&f,f/=256,r-=8);return o[--l]|=128*c,o},xo=function(t,n){var r=t.length,i=8*r-n-1,o=(1<<i)-1,s=o>>1;i-=7,--r;var a=t[r--],u=127&a;for(a>>=7;0<i;u=256*u+t[r],r--,i-=8);var c=u&(1<<-i)-1;for(u>>=-i,i+=n;0<i;c=256*c+t[r],r--,i-=8);if(0===u)u=1-s;else{if(u===o)return c?NaN:a?-1/0:1/0;c+=Ic(2,n),u-=s}return(a?-1:1)*c*Ic(2,u-n)},yo=function(t){return[255&t]},zo=function(t){return[255&t,t>>8&255]},Ao=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Bo=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},aw=function(t){return wo(t,23,4)},bw=function(t){return wo(t,52,8)},gh=function(t,n){$v(t.prototype,n,{get:function(){return Me(this)[n]}})},md=function(t,n,r,i){r=Le(r);var o=Me(t);if(r+n>o.byteLength)throw fh("Wrong index");return t=Me(o.buffer).bytes,r+=o.byteOffset,n=t.slice(r,r+n),i?n:n.reverse()},nd=function(t,n,r,i,o,s){r=Le(r);var a=Me(t);if(r+n>a.byteLength)throw fh("Wrong index");for(t=Me(a.buffer).bytes,r+=a.byteOffset,i=i(+o),o=0;o<n;o++)t[r+o]=i[s?o:n-o-1]};if(to){if(!R(function(){bc(1)})||!R(function(){new bc(-1)})||R(function(){return new bc,new bc(1.5),new bc(NaN),"ArrayBuffer"!=bc.name})){Ab=function(t){return Gc(this,Ab),new bc(Le(t))};for(var zj,cw=Ab.prototype=bc.prototype,Co=Zv(bc),Do=0;Co.length>Do;)(zj=Co[Do++])in Ab||Na(Ab,zj,bc[zj]);cw.constructor=Ab}Ua&&Vb(eh)!==vo&&Ua(eh,vo);var hh=new cc(new Ab(2)),Eo=eh.setInt8;hh.setInt8(0,0x80000000),hh.setInt8(1,0x80000001),!hh.getInt8(0)&&hh.getInt8(1)||Hf(eh,{setInt8:function(t,n){Eo.call(this,t,n<<24>>24)},setUint8:function(t,n){Eo.call(this,t,n<<24>>24)}},{unsafe:!0})}else Ab=function(t){Gc(this,Ab,"ArrayBuffer"),t=Le(t),uo(this,{bytes:yj.call(Array(t),0),byteLength:t}),ka||(this.byteLength=t)},cc=function(t,n,r){Gc(this,cc,"DataView"),Gc(t,Ab,"DataView");var i=Me(t).byteLength;if(0>(n=$b(n))||n>i)throw fh("Wrong offset");if(n+(r=void 0===r?i-n:ta(r))>i)throw fh("Wrong length");uo(this,{buffer:t,byteLength:r,byteOffset:n}),ka||(this.buffer=t,this.byteLength=r,this.byteOffset=n)},ka&&(gh(Ab,"byteLength"),gh(cc,"buffer"),gh(cc,"byteLength"),gh(cc,"byteOffset")),Hf(cc.prototype,{getInt8:function(t){return md(this,1,t)[0]<<24>>24},getUint8:function(t){return md(this,1,t)[0]},getInt16:function(t){var n=md(this,2,t,1<arguments.length?arguments[1]:void 0);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=md(this,2,t,1<arguments.length?arguments[1]:void 0);return n[1]<<8|n[0]},getInt32:function(t){return Bo(md(this,4,t,1<arguments.length?arguments[1]:void 0))},getUint32:function(t){return Bo(md(this,4,t,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(t){return xo(md(this,4,t,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(t){return xo(md(this,8,t,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(t,n){nd(this,1,t,yo,n)},setUint8:function(t,n){nd(this,1,t,yo,n)},setInt16:function(t,n){nd(this,2,t,zo,n,2<arguments.length?arguments[2]:void 0)},setUint16:function(t,n){nd(this,2,t,zo,n,2<arguments.length?arguments[2]:void 0)},setInt32:function(t,n){nd(this,4,t,Ao,n,2<arguments.length?arguments[2]:void 0)},setUint32:function(t,n){nd(this,4,t,Ao,n,2<arguments.length?arguments[2]:void 0)},setFloat32:function(t,n){nd(this,4,t,aw,n,2<arguments.length?arguments[2]:void 0)},setFloat64:function(t,n){nd(this,8,t,bw,n,2<arguments.length?arguments[2]:void 0)}});Ec(Ab,"ArrayBuffer"),Ec(cc,"DataView");var Pf={ArrayBuffer:Ab,DataView:cc},Aj=Pf.ArrayBuffer,Fo=Pf.DataView,Go=Aj.prototype.slice,dw=R(function(){return!new Aj(2).slice(1,void 0).byteLength});N({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:dw},{slice:function(t,n){if(void 0!==Go&&void 0===n)return Go.call(va(this),t);var r=va(this).byteLength;t=xb(t,r),n=xb(void 0===n?r:n,r),r=new(kd(this,Aj))(ta(n-t));for(var i=new Fo(this),o=new Fo(r),s=0;t<n;)o.setUint8(s++,i.getUint8(t++));return r}});var Bb,ew=Ra.f,ih=y.Int8Array,Bj=ih&&ih.prototype,Ho=y.Uint8ClampedArray,Io=Ho&&Ho.prototype,qc=ih&&Vb(ih),dc=Bj&&Vb(Bj),Jo=Object.prototype,Ko=Jo.isPrototypeOf,Lo=qa("toStringTag"),Cj=Ae("TYPED_ARRAY_TAG"),Jc=to&&!!Ua&&"Opera"!==Ff(y.opera),Mo=!1,rc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},fw={BigInt64Array:8,BigUint64Array:8},jh=function(t){return!!ha(t)&&(Q(rc,t=Ff(t))||Q(fw,t))};for(Bb in rc)y[Bb]||(Jc=!1);if((!Jc||"function"!=typeof qc||qc===Function.prototype)&&(qc=function(){throw TypeError("Incorrect invocation")},Jc))for(Bb in rc)y[Bb]&&Ua(y[Bb],qc);if((!Jc||!dc||dc===Jo)&&(dc=qc.prototype,Jc))for(Bb in rc)y[Bb]&&Ua(y[Bb].prototype,dc);if(Jc&&Vb(Io)!==dc&&Ua(Io,dc),ka&&!Q(dc,Lo))for(Bb in Mo=!0,ew(dc,Lo,{get:function(){return ha(this)?this[Cj]:void 0}}),rc)y[Bb]&&Na(y[Bb],Cj,Bb);var Qf=Jc,No=Mo&&Cj,Da=function(t){if(jh(t))return t;throw TypeError("Target is not a typed array")},Ne=function(t){if(Ua){if(Ko.call(qc,t))return t}else for(var n in rc)if(Q(rc,Bb)){var r=y[n];if(r&&(t===r||Ko.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},Aa=function(t,n,r){if(ka){if(r)for(var i in rc){var o=y[i];if(o&&Q(o.prototype,t))try{delete o.prototype[t]}catch(t){}}dc[t]&&!r||Ta(dc,t,r?n:Jc&&Bj[t]||n)}},Oo=function(t,n,r){var i,o;if(ka){if(Ua){if(r){for(i in rc)if((o=y[i])&&Q(o,t))try{delete o[t]}catch(t){}}if(qc[t]&&!r)return;try{return Ta(qc,t,r?n:Jc&&qc[t]||n)}catch(t){}}for(i in rc)(o=y[i])&&(!o[t]||r)&&Ta(o,t,n)}},Po=qc,Rf=dc,gw=y.ArrayBuffer,Od=y.Int8Array,Dj=!Qf||!R(function(){Od(1)})||!R(function(){new Od(-1)})||!Tg(function(t){new Od,new Od(null),new Od(1.5),new Od(t)},!0)||R(function(){return 1!==new Od(new gw(2),1,void 0).length}),kh=function(t,n){if(0>(t=$b(t)))throw RangeError("The argument can't be less than 0");if(t%n)throw RangeError("Wrong offset");return t},Ej=function(t){var n=Qa(t),r=arguments.length,i=1<r?arguments[1]:void 0,o=void 0!==i,s=Xi(n);if(null!=s&&!Vi(s)){var a=s.call(n),u=a.next;for(n=[];!(s=u.call(a)).done;)n.push(s.value)}for(o&&2<r&&(i=Id(i,arguments[2],2)),s=ta(n.length),a=new(Ne(this))(s),r=0;s>r;r++)a[r]=o?i(n[r],r):n[r];return a},lh=function(t,n,r){var i,o;return Ua&&"function"==typeof(i=n.constructor)&&i!==r&&ha(o=i.prototype)&&o!==r.prototype&&Ua(t,o),t},Sf=$a(function(t){var n=Hd.f,r=Za.get,i=Za.set,o=Ra.f,s=Fb.f,a=Math.round,u=y.RangeError,c=Pf.ArrayBuffer,l=Pf.DataView,f=function(t,n){var r=0,i=n.length;for(t=new(Ne(t))(i);i>r;)t[r]=n[r++];return t},h=function(t,n){o(t,n,{get:function(){return r(this)[n]}})},p=function(t){var n;return t instanceof c||"ArrayBuffer"==(n=Ff(t))||"SharedArrayBuffer"==n},d=function(t,n){return jh(t)&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},v=function(t,n){return d(t,n=lc(n,!0))?dd(2,t[n]):s(t,n)},g=function(t,n,r){return!(d(t,n=lc(n,!0))&&ha(r)&&Q(r,"value"))||Q(r,"get")||Q(r,"set")||r.configurable||Q(r,"writable")&&!r.writable||Q(r,"enumerable")&&!r.enumerable?o(t,n,r):(t[n]=r.value,t)};ka?(Qf||(Fb.f=v,Ra.f=g,h(Rf,"buffer"),h(Rf,"byteOffset"),h(Rf,"byteLength"),h(Rf,"length")),N({target:"Object",stat:!0,forced:!Qf},{getOwnPropertyDescriptor:v,defineProperty:g}),t.exports=function(t,s,h){var d=t.match(/\d+$/)[0]/8,v=t+(h?"Clamped":"")+"Array",g="get"+t,b="set"+t,E=y[v],m=E;t=m&&m.prototype;var _={},w=function(t,n){o(t,n,{get:function(){var t=r(this);return t.view[g](n*d+t.byteOffset,!0)},set:function(t){var i=r(this);h&&(t=0>(t=a(t))?0:255<t?255:255&t),i.view[b](n*d+i.byteOffset,t,!0)},enumerable:!0})};Qf?Dj&&(m=s(function(t,n,r,i){return Gc(t,m,v),lh(ha(n)?p(n)?void 0!==i?new E(n,kh(r,d),i):void 0!==r?new E(n,kh(r,d)):new E(n):jh(n)?f(m,n):Ej.call(m,n):new E(Le(n)),t,m)}),Ua&&Ua(m,Po),Jd(n(E),function(t){t in m||Na(m,t,E[t])}),m.prototype=t):(m=s(function(t,n,r,o){Gc(t,m,v);var s=0,a=0;if(ha(n)){if(!p(n))return jh(n)?f(m,n):Ej.call(m,n);var h=n;if(a=kh(r,d),n=n.byteLength,void 0===o){if(n%d||0>(o=n-a))throw u("Wrong length")}else if((o=ta(o)*d)+a>n)throw u("Wrong length");n=o/d}else h=new c(o=(n=Le(n))*d);for(i(t,{buffer:h,byteOffset:a,byteLength:o,length:n,view:new l(h)});s<n;)w(t,s++)}),Ua&&Ua(m,Po),t=m.prototype=ac(Rf)),t.constructor!==m&&Na(t,"constructor",m),No&&Na(t,No,v),_[v]=m,N({global:!0,forced:m!=E,sham:!Qf},_),"BYTES_PER_ELEMENT"in m||Na(m,"BYTES_PER_ELEMENT",d),"BYTES_PER_ELEMENT"in t||Na(t,"BYTES_PER_ELEMENT",d),If(v)}):t.exports=function(){}});Sf("Uint8",function(t){return function(n,r,i){return t(this,n,r,i)}});var hw=Math.min,iw=[].copyWithin||function(t,n){var r=Qa(this),i=ta(r.length),o=xb(t,i),s=xb(n,i),a=2<arguments.length?arguments[2]:void 0;for(i=hw((void 0===a?i:xb(a,i))-s,i-o),a=1,s<o&&o<s+i&&(a=-1,s+=i-1,o+=i-1);0<i--;)s in r?r[o]=r[s]:delete r[o],o+=a,s+=a;return r};Aa("copyWithin",function(t,n){return iw.call(Da(this),t,n,2<arguments.length?arguments[2]:void 0)}),Aa("every",function(t){return Ju(Da(this),t,1<arguments.length?arguments[1]:void 0)}),Aa("fill",function(t){return yj.apply(Da(this),arguments)}),Aa("filter",function(t){var n=yn(Da(this),t,1<arguments.length?arguments[1]:void 0),r=kd(this,this.constructor),i=0,o=n.length;for(r=new(Ne(r))(o);o>i;)r[i]=n[i++];return r}),Aa("find",function(t){return zn(Da(this),t,1<arguments.length?arguments[1]:void 0)}),Aa("findIndex",function(t){return An(Da(this),t,1<arguments.length?arguments[1]:void 0)}),Aa("forEach",function(t){Jd(Da(this),t,1<arguments.length?arguments[1]:void 0)}),Aa("includes",function(t){return on(Da(this),t,1<arguments.length?arguments[1]:void 0)}),Aa("indexOf",function(t){return Si(Da(this),t,1<arguments.length?arguments[1]:void 0)});var Qo=qa("iterator"),Ro=y.Uint8Array,jw=ld.values,kw=ld.keys,lw=ld.entries,Fj=Ro&&Ro.prototype[Qo],So=!!Fj&&("values"==Fj.name||null==Fj.name),To=function(){return jw.call(Da(this))};Aa("entries",function(){return lw.call(Da(this))}),Aa("keys",function(){return kw.call(Da(this))}),Aa("values",To,!So),Aa(Qo,To,!So);var mw=[].join;Aa("join",function(t){return mw.apply(Da(this),arguments)});var nw=Math.min,Gj=[].lastIndexOf,Uo=!!Gj&&0>1/[1].lastIndexOf(1,-0),ow=Ee("lastIndexOf"),pw=Uo||!ow?function(t){if(Uo)return Gj.apply(this,arguments)||0;var n=qb(this),r=ta(n.length),i=r-1;for(1<arguments.length&&(i=nw(i,$b(arguments[1]))),0>i&&(i=r+i);0<=i;i--)if(i in n&&n[i]===t)return i||0;return -1}:Gj;Aa("lastIndexOf",function(t){return pw.apply(Da(this),arguments)}),Aa("map",function(t){return xn(Da(this),t,1<arguments.length?arguments[1]:void 0,function(t,n){return new(Ne(kd(t,t.constructor)))(n)})});var Vo=function(t){return function(n,r,i,o){yb(r);var s=Af(n=Qa(n)),a=ta(n.length),u=t?a-1:0,c=t?-1:1;if(2>i)for(;;){if(u in s){o=s[u],u+=c;break}if(u+=c,t?0>u:a<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?0<=u:a>u;u+=c)u in s&&(o=r(o,s[u],u,n));return o}},Wo=Vo(!1),qw=Vo(!0);Aa("reduce",function(t){return Wo(Da(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)}),Aa("reduceRight",function(t){return qw(Da(this),t,arguments.length,1<arguments.length?arguments[1]:void 0)});var rw=Math.floor;Aa("reverse",function(){for(var t,n=Da(this).length,r=rw(n/2),i=0;i<r;)t=this[i],this[i++]=this[--n],this[n]=t;return this});var sw=R(function(){new Int8Array(1).set({})});Aa("set",function(t){Da(this);var n=kh(1<arguments.length?arguments[1]:void 0,1),r=this.length,i=Qa(t),o=ta(i.length),s=0;if(o+n>r)throw RangeError("Wrong length");for(;s<o;)this[n+s]=i[s++]},sw);var tw=[].slice,uw=R(function(){new Int8Array(1).slice()});Aa("slice",function(t,n){t=tw.call(Da(this),t,n);var r=kd(this,this.constructor);n=0;var i=t.length;for(r=new(Ne(r))(i);i>n;)r[n]=t[n++];return r},uw),Aa("some",function(t){return Iu(Da(this),t,1<arguments.length?arguments[1]:void 0)});var vw=[].sort;Aa("sort",function(t){return vw.call(Da(this),t)}),Aa("subarray",function(t,n){var r=Da(this),i=r.length;return t=xb(t,i),new(kd(r,r.constructor))(r.buffer,r.byteOffset+t*r.BYTES_PER_ELEMENT,ta((void 0===n?i:xb(n,i))-t))});var mh=y.Int8Array,Xo=[].toLocaleString,ww=[].slice,xw=!!mh&&R(function(){Xo.call(new mh(1))}),yw=R(function(){return[1,2].toLocaleString()!=new mh([1,2]).toLocaleString()})||!R(function(){mh.prototype.toLocaleString.call([1,2])});Aa("toLocaleString",function(){return Xo.apply(xw?ww.call(Da(this)):Da(this),arguments)},yw);var Yo=y.Uint8Array,zw=Yo&&Yo.prototype||{},nh=[].toString,Aw=[].join;R(function(){nh.call({})})&&(nh=function(){return Aw.call(this)}),Aa("toString",nh,zw.toString!=nh);var Zo=Pf.ArrayBuffer;N({global:!0,forced:y.ArrayBuffer!==Zo},{ArrayBuffer:Zo}),If("ArrayBuffer");var Bw=Ra.f,Hj=Function.prototype,Cw=Hj.toString,Dw=/^\s*function ([^ (]*)/;!ka||"name"in Hj||Bw(Hj,"name",{configurable:!0,get:function(){try{return Cw.call(this).match(Dw)[1]}catch(t){return""}}});var $o=RegExp.prototype,ap=$o.toString,Ew=R(function(){return"/a/b"!=ap.call({source:"a",flags:"b"})}),Fw="toString"!=ap.name;(Ew||Fw)&&Ta(RegExp.prototype,"toString",function(){var t=va(this),n=String(t.source),r=t.flags;return"/"+n+"/"+(t=String(void 0===r&&t instanceof RegExp&&!("flags"in $o)?tj.call(t):r))},{unsafe:!0});var Gw=Ef("splice"),Hw=Math.max,Iw=Math.min;N({target:"Array",proto:!0,forced:!Gw},{splice:function(t,n){var r,i,o=Qa(this),s=ta(o.length),a=xb(t,s),u=arguments.length;if(0===u?u=r=0:1===u?(u=0,r=s-a):(u-=2,r=Iw(Hw($b(n),0),s-a)),0x1fffffffffffff<s+u-r)throw TypeError("Maximum allowed length exceeded");var c=Sg(o,r);for(i=0;i<r;i++){var l=a+i;l in o&&Ge(c,i,o[l])}if(c.length=r,u<r){for(i=a;i<s-r;i++){var f=i+u;(l=i+r)in o?o[f]=o[l]:delete o[f]}for(i=s;i>s-r+u;i--)delete o[i-1]}else if(u>r)for(i=s-r;i>a;i--)f=i+u-1,(l=i+r-1)in o?o[f]=o[l]:delete o[f];for(i=0;i<u;i++)o[i+a]=arguments[i+2];return o.length=s-r+u,c}});var oh,Ij={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jj=qa("iterator"),bp=qa("toStringTag"),Kj=ld.values;for(oh in Ij){var cp=y[oh],Kc=cp&&cp.prototype;if(Kc){if(Kc[Jj]!==Kj)try{Na(Kc,Jj,Kj)}catch(c){Kc[Jj]=Kj}if(Kc[bp]||Na(Kc,bp,oh),Ij[oh]){for(var Oe in ld)if(Kc[Oe]!==ld[Oe])try{Na(Kc,Oe,ld[Oe])}catch(c){Kc[Oe]=ld[Oe]}}}}var dp=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};dh("search",1,function(t,n,r){return[function(n){var r=jb(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(t){var i=r(n,t,this);if(i.done)return i.value;t=va(t);var o=String(this);return dp(i=t.lastIndex,0)||(t.lastIndex=0),o=Ke(t,o),dp(t.lastIndex,i)||(t.lastIndex=i),null===o?-1:o.index}]}),$a(function(t){!function(n,r){t.exports?t.exports=r(n):r(n)}("undefined"!=typeof self?self:Ya,function(t){function n(t){return btoa(t).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function r(t){return atob((t=(t+="===").slice(0,-t.length%4)).replace(/-/g,"+").replace(/_/g,"/"))}function i(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}function o(t){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),String.fromCharCode.apply(String,t)}function s(t){var n={name:(t.name||t||"").toUpperCase().replace("V","v")};switch(n.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":t.length&&(n.length=t.length);break;case"HMAC":t.hash&&(n.hash=s(t.hash)),t.length&&(n.length=t.length);break;case"RSAES-PKCS1-v1_5":t.publicExponent&&(n.publicExponent=new Uint8Array(t.publicExponent)),t.modulusLength&&(n.modulusLength=t.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":t.hash&&(n.hash=s(t.hash)),t.publicExponent&&(n.publicExponent=new Uint8Array(t.publicExponent)),t.modulusLength&&(n.modulusLength=t.modulusLength);break;default:throw SyntaxError("Bad algorithm name")}return n}function a(t){return({HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}})[t.name][(t.hash||{}).name||t.length||""]}function u(t){(t instanceof ArrayBuffer||t instanceof Uint8Array)&&(t=JSON.parse(decodeURIComponent(escape(o(t)))));var n={kty:t.kty,alg:t.alg,ext:t.ext||t.extractable};switch(n.kty){case"oct":n.k=t.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach(function(r){r in t&&(n[r]=t[r])});break;default:throw TypeError("Unsupported key type")}return n}function c(t){return t=u(t),_&&(t.extractable=t.ext,delete t.ext),i(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function l(t){var r=f(t),i=!1;if(2<r.length&&(i=!0,r.shift()),t={ext:!0},"1.2.840.113549.1.1.1"===r[0][0]){var s="n e d p q dp dq qi".split(" ");for(r=f(r[1]),i&&r.shift(),i=0;i<r.length;i++)r[i][0]||(r[i]=r[i].subarray(1)),t[s[i]]=n(o(r[i]));t.kty="RSA"}else throw TypeError("Unsupported key type");return t}function f(t,n){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),n||(n={pos:0,end:t.length}),2>n.end-n.pos||n.end>t.length)throw RangeError("Malformed DER");var r=t[n.pos++],i=t[n.pos++];if(128<=i){if(i&=127,n.end-n.pos<i)throw RangeError("Malformed DER");for(var s=0;i--;)s<<=8,s|=t[n.pos++];i=s}if(n.end-n.pos<i)throw RangeError("Malformed DER");switch(r){case 2:r=t.subarray(n.pos,n.pos+=i);break;case 3:if(t[n.pos++])throw Error("Unsupported bit string");i--;case 4:r=new Uint8Array(t.subarray(n.pos,n.pos+=i)).buffer;break;case 5:r=null;break;case 6:if(!((t=btoa(o(t.subarray(n.pos,n.pos+=i))))in O))throw Error("Unsupported OBJECT ID "+t);r=O[t];break;case 48:for(r=[],i=n.pos+i;n.pos<i;)r.push(f(t,n));break;default:throw Error("Unsupported DER tag 0x"+r.toString(16))}return r}function h(t,n){n||(n=[]);var r=n.length+2;if(n.push(0,0),t instanceof Uint8Array)for(var o=2,s=t.length,a=0;a<s;a++)n.push(t[a]);else if(t instanceof ArrayBuffer)for(o=4,s=t.byteLength,t=new Uint8Array(t),a=0;a<s;a++)n.push(t[a]);else if(null===t)o=5,s=0;else if("string"==typeof t&&t in I)for(o=6,s=(t=i(atob(I[t]))).length,a=0;a<s;a++)n.push(t[a]);else if(t instanceof Array){for(a=0;a<t.length;a++)h(t[a],n);o=48,s=n.length-r}else{if(!("object"===X(t)&&3===t.tag&&t.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+t);for(o=3,s=(t=new Uint8Array(t.value)).byteLength,n.push(0),a=0;a<s;a++)n.push(t[a]);s++}if(128<=s){for(a=s,s=4,n.splice(r,0,a>>24&255,a>>16&255,a>>8&255,255&a);1<s&&!(a>>24);)a<<=8,s--;4>s&&n.splice(r,4-s),s|=128}return n.splice(r-2,2,o,s),n}function p(t,n,r,i){Object.defineProperties(this,{_key:{value:t},type:{value:t.type,enumerable:!0},extractable:{value:void 0===r?t.extractable:r,enumerable:!0},algorithm:{value:void 0===n?t.algorithm:n,enumerable:!0},usages:{value:void 0===i?t.usages:i,enumerable:!0}})}function d(t){return"verify"===t||"encrypt"===t||"wrapKey"===t}function v(t){return"sign"===t||"decrypt"===t||"unwrapKey"===t}if("function"!=typeof Promise)throw"Promise support required";var g=t.crypto||t.msCrypto;if(g){var b=g.subtle||g.webkitSubtle;if(b){var y=t.Crypto||g.constructor||Object,E=t.SubtleCrypto||b.constructor||Object;t.CryptoKey||t.Key;var m=-1<t.navigator.userAgent.indexOf("Edge/"),_=!!t.msCrypto&&!m,w=!g.subtle&&!!g.webkitSubtle;if(_||w){var O={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},I={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(t){var n=b[t];b[t]=function(o,f,h){var y=[].slice.call(arguments);switch(t){case"generateKey":var E=s(o),m=f,O=h;break;case"importKey":E=s(h),m=y[3],O=y[4],"jwk"===o&&((f=u(f)).alg||(f.alg=a(E)),f.key_ops||(f.key_ops="oct"!==f.kty?"d"in f?O.filter(v):O.filter(d):O.slice()),y[1]=c(f));break;case"unwrapKey":E=y[4],m=y[5],O=y[6],y[2]=h._key}if("generateKey"===t&&"HMAC"===E.name&&E.hash)return E.length=E.length||({"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024})[E.hash.name],b.importKey("raw",g.getRandomValues(new Uint8Array(E.length+7>>3)),E,m,O);if(w&&"generateKey"===t&&"RSASSA-PKCS1-v1_5"===E.name&&(!E.modulusLength||2048<=E.modulusLength))return(o=s(o)).name="RSAES-PKCS1-v1_5",delete o.hash,b.generateKey(o,!0,["encrypt","decrypt"]).then(function(t){return Promise.all([b.exportKey("jwk",t.publicKey),b.exportKey("jwk",t.privateKey)])}).then(function(t){return t[0].alg=t[1].alg=a(E),t[0].key_ops=O.filter(d),t[1].key_ops=O.filter(v),Promise.all([b.importKey("jwk",t[0],E,!0,t[0].key_ops),b.importKey("jwk",t[1],E,m,t[1].key_ops)])}).then(function(t){return{publicKey:t[0],privateKey:t[1]}});if((w||_&&"SHA-1"===(E.hash||{}).name)&&"importKey"===t&&"jwk"===o&&"HMAC"===E.name&&"oct"===f.kty)return b.importKey("raw",i(r(f.k)),h,y[3],y[4]);if(w&&"importKey"===t&&("spki"===o||"pkcs8"===o))return b.importKey("jwk",l(f),h,y[3],y[4]);if(_&&"unwrapKey"===t)return b.decrypt(y[3],h,f).then(function(t){return b.importKey(o,t,y[4],y[5],y[6])});try{var I=n.apply(b,y)}catch(t){return Promise.reject(t)}return _&&(I=new Promise(function(t,n){I.onabort=I.onerror=function(t){n(t)},I.oncomplete=function(n){t(n.target.result)}})),I=I.then(function(t){return"HMAC"!==E.name||E.length||(E.length=8*t.algorithm.length),0==E.name.search("RSA")&&(E.modulusLength||(E.modulusLength=(t.publicKey||t).algorithm.modulusLength),E.publicExponent||(E.publicExponent=(t.publicKey||t).algorithm.publicExponent)),t.publicKey&&t.privateKey?{publicKey:new p(t.publicKey,E,m,O.filter(d)),privateKey:new p(t.privateKey,E,m,O.filter(v))}:new p(t,E,m,O)})}}),["exportKey","wrapKey"].forEach(function(t){var s=b[t];b[t]=function(c,l,f){var p=[].slice.call(arguments);switch(t){case"exportKey":p[1]=l._key;break;case"wrapKey":p[1]=l._key,p[2]=f._key}if((w||_&&"SHA-1"===(l.algorithm.hash||{}).name)&&"exportKey"===t&&"jwk"===c&&"HMAC"===l.algorithm.name&&(p[0]="raw"),w&&"exportKey"===t&&("spki"===c||"pkcs8"===c)&&(p[0]="jwk"),_&&"wrapKey"===t)return b.exportKey(c,l).then(function(t){return"jwk"===c&&(t=i(unescape(encodeURIComponent(JSON.stringify(u(t)))))),b.encrypt(p[3],f,t)});try{var g=s.apply(b,p)}catch(t){return Promise.reject(t)}return _&&(g=new Promise(function(t,n){g.onabort=g.onerror=function(t){n(t)},g.oncomplete=function(n){t(n.target.result)}})),"exportKey"===t&&"jwk"===c&&(g=g.then(function(t){return(w||_&&"SHA-1"===(l.algorithm.hash||{}).name)&&"HMAC"===l.algorithm.name?{kty:"oct",alg:a(l.algorithm),key_ops:l.usages.slice(),ext:!0,k:n(o(t))}:((t=u(t)).alg||(t.alg=a(l.algorithm)),t.key_ops||(t.key_ops="public"===l.type?l.usages.filter(d):"private"===l.type?l.usages.filter(v):l.usages.slice()),t)})),w&&"exportKey"===t&&("spki"===c||"pkcs8"===c)&&(g=g.then(function(t){var n=[["",null]],o=!1;if("RSA"===(t=u(t)).kty){for(var s="n e d p q dp dq qi".split(" "),a=[],c=0;c<s.length&&s[c]in t;c++){var l=a[c]=i(r(t[s[c]]));128&l[0]&&(a[c]=new Uint8Array(l.length+1),a[c].set(l,1))}2<a.length&&(o=!0,a.unshift(new Uint8Array([0]))),n[0][0]="1.2.840.113549.1.1.1"}else throw TypeError("Unsupported key type");return n.push(new Uint8Array(h(a)).buffer),o?n.unshift(new Uint8Array([0])):n[1]={tag:3,value:n[1]},new Uint8Array(h(n)).buffer})),g}}),["encrypt","decrypt","sign","verify"].forEach(function(t){var n=b[t];b[t]=function(r,i,o,a){if(_&&(!o.byteLength||a&&!a.byteLength))throw Error("Empty input is not allowed");var u=[].slice.call(arguments),c=s(r);if(_&&("sign"===t||"verify"===t)&&("RSASSA-PKCS1-v1_5"===r||"HMAC"===r)&&(u[0]={name:r}),_&&i.algorithm.hash&&(u[0].hash=u[0].hash||i.algorithm.hash),_&&"decrypt"===t&&"AES-GCM"===c.name){var l=r.tagLength>>3;u[2]=(o.buffer||o).slice(0,o.byteLength-l),r.tag=(o.buffer||o).slice(o.byteLength-l)}_&&"AES-GCM"===c.name&&void 0===u[0].tagLength&&(u[0].tagLength=128),u[1]=i._key;try{var f=n.apply(b,u)}catch(t){return Promise.reject(t)}return _&&(f=new Promise(function(n,r){f.onabort=f.onerror=function(t){r(t)},f.oncomplete=function(r){if(r=r.target.result,"encrypt"===t&&r instanceof AesGcmEncryptResult){var i=r.ciphertext,o=r.tag;(r=new Uint8Array(i.byteLength+o.byteLength)).set(new Uint8Array(i),0),r.set(new Uint8Array(o),i.byteLength),r=r.buffer}n(r)}})),f}}),_){var A=b.digest;b.digest=function(t,n){if(!n.byteLength)throw Error("Empty input is not allowed");try{var r=A.call(b,t,n)}catch(t){return Promise.reject(t)}return r=new Promise(function(t,n){r.onabort=r.onerror=function(t){n(t)},r.oncomplete=function(n){t(n.target.result)}})},t.crypto=Object.create(g,{getRandomValues:{value:function(t){return g.getRandomValues(t)}},subtle:{value:b}}),t.CryptoKey=p}w&&(g.subtle=b,t.Crypto=y,t.SubtleCrypto=E,t.CryptoKey=p)}}}})});var Jw=qa("match"),Lj=function(t){var n;return ha(t)&&(void 0!==(n=t[Jw])?!!n:"RegExp"==Zb(t))},Kw=[].push,Lw=Math.min;dh("split",2,function(t,n,r){var i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,r){var i=String(jb(this));if(0==(r=void 0===r?0xffffffff:r>>>0))return[];if(void 0===t)return[i];if(!Lj(t))return n.call(i,t,r);var o,s,a,u=[],c=0;for(t=RegExp(t.source,(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"")+"g");(o=Of.call(t,i))&&!((s=t.lastIndex)>c&&(u.push(i.slice(c,o.index)),1<o.length&&o.index<i.length&&Kw.apply(u,o.slice(1)),a=o[0].length,c=s,u.length>=r));)t.lastIndex===o.index&&t.lastIndex++;return c===i.length?(a||!t.test(""))&&u.push(""):u.push(i.slice(c)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:n.call(this,t,r)}:n;return[function(n,r){var o=jb(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},function(t,o){var s=r(i,t,this,o,i!==n);if(s.done)return s.value;var a=va(t);t=String(this);var u=kd(a,RegExp);if(s=a.unicode,a=new u(pc?"^(?:"+a.source+")":a,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(pc?"g":"y")),0==(o=void 0===o?0xffffffff:o>>>0))return[];if(0===t.length)return null===Ke(a,t)?[t]:[];var c=0,l=0;for(u=[];l<t.length;){a.lastIndex=pc?0:l;var f,h=Ke(a,pc?t.slice(l):t);if(null===h||(f=Lw(ta(a.lastIndex+(pc?l:0)),t.length))===c)l=xj(t,l,s);else{if(u.push(t.slice(c,l)),u.length===o)return u;for(c=1;c<=h.length-1;c++)if(u.push(h[c]),u.length===o)return u;l=c=f}}return u.push(t.slice(c)),u}]},pc),function(t){t.console||(t.console={}),t=t.console;for(var n,r=function(){},i=["memory"],o="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");n=i.pop();)t[n]||(t[n]={});for(;n=o.pop();)t[n]||(t[n]=r)}("undefined"==typeof window?Ya:window),N({target:"Object",stat:!0},{setPrototypeOf:Ua});var Mw=R(function(){Vb(1)});N({target:"Object",stat:!0,forced:Mw,sham:!Hn},{getPrototypeOf:function(t){return Vb(Qa(t))}});var ep=[].slice,Mj={},Nw=Function.bind||function(t){var n=yb(this),r=ep.call(arguments,1),i=function(){var o=r.concat(ep.call(arguments));if(this instanceof i){var s=o.length;if(!(s in Mj)){for(var a=[],u=0;u<s;u++)a[u]="a["+u+"]";Mj[s]=Function("C,a","return new C("+a.join(",")+")")}o=Mj[s](n,o)}else o=n.apply(t,o);return o};return ha(n.prototype)&&(i.prototype=n.prototype),i},Nj=mc("Reflect","construct"),fp=R(function(){function t(){}return!(Nj(function(){},[],t)instanceof t)}),gp=!R(function(){Nj(function(){})}),hp=fp||gp;N({target:"Reflect",stat:!0,forced:hp,sham:hp},{construct:function(t,n){yb(t),va(n);var r=3>arguments.length?t:yb(arguments[2]);if(gp&&!fp)return Nj(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}return(r=[null]).push.apply(r,n),new(Nw.apply(t,r))}r=ac(ha(r=r.prototype)?r:Object.prototype);var i=Function.apply.call(t,r,n);return ha(i)?i:r}}),N({target:"Reflect",stat:!0},{get:wl});var ip=Fb.f,Ow=R(function(){ip(1)});N({target:"Object",stat:!0,forced:!ka||Ow,sham:!ka},{getOwnPropertyDescriptor:function(t,n){return ip(qb(t),n)}});var jp=Hd.f,Pw={}.toString,kp="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Oj=function(t){if(kp&&"[object Window]"==Pw.call(t))try{var n=jp(t)}catch(t){n=kp.slice()}else n=jp(qb(t));return n},lp={f:qa},Qw=Ra.f,ph=function(t){var n=y.Symbol||(y.Symbol={});Q(n,t)||Qw(n,t,{value:lp.f(t)})},rb=Pg("hidden"),mp=qa("toPrimitive"),Rw=Za.set,np=Za.getterFor("Symbol"),Ob=Object.prototype,sb=y.Symbol,Tf=mc("JSON","stringify"),op=Fb.f,od=Ra.f,pp=Oj,Sw=zf,Lc=fd("symbols"),Uf=fd("op-symbols"),Pj=fd("string-to-symbol-registry"),Qj=fd("symbol-to-string-registry"),Tw=fd("wks"),Rj=y.QObject,Sj=!Rj||!Rj.prototype||!Rj.prototype.findChild,Tj=ka&&R(function(){return 7!=ac(od({},"a",{get:function(){return od(this,"a",{value:7}).a}})).a})?function(t,n,r){var i=op(Ob,n);i&&delete Ob[n],od(t,n,r),i&&t!==Ob&&od(Ob,n,i)}:od,Uj=function(t,n){var r=Lc[t]=ac(sb.prototype);return Rw(r,{type:"Symbol",tag:t,description:n}),ka||(r.description=n),r},Vj=vn?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof sb},qh=function(t,n,r){return t===Ob&&qh(Uf,n,r),va(t),n=lc(n,!0),va(r),Q(Lc,n)?(r.enumerable?(Q(t,rb)&&t[rb][n]&&(t[rb][n]=!1),r=ac(r,{enumerable:dd(0,!1)})):(Q(t,rb)||od(t,rb,dd(1,{})),t[rb][n]=!0),Tj(t,n,r)):od(t,n,r)},qp=function(t,n){va(t);var r=qb(n);return Jd(n=Dc(r).concat(Wj(r)),function(n){ka&&!Xj.call(r,n)||qh(t,n,r[n])}),t},Xj=function(t){t=lc(t,!0);var n=Sw.call(this,t);return!(this===Ob&&Q(Lc,t)&&!Q(Uf,t))&&(!(n||!Q(this,t)||!Q(Lc,t)||Q(this,rb)&&this[rb][t])||n)},rp=function(t,n){if(t=qb(t),n=lc(n,!0),t!==Ob||!Q(Lc,n)||Q(Uf,n)){var r=op(t,n);return!r||!Q(Lc,n)||Q(t,rb)&&t[rb][n]||(r.enumerable=!0),r}},sp=function(t){t=pp(qb(t));var n=[];return Jd(t,function(t){Q(Lc,t)||Q(Be,t)||n.push(t)}),n},Wj=function(t){var n=t===Ob;t=pp(n?Uf:qb(t));var r=[];return Jd(t,function(t){Q(Lc,t)&&(!n||Q(Ob,t))&&r.push(Lc[t])}),r};oc||(sb=function(){if(this instanceof sb)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,n=Ae(t),r=function(t){this===Ob&&r.call(Uf,t),Q(this,rb)&&Q(this[rb],n)&&(this[rb][n]=!1),Tj(this,n,dd(1,t))};return ka&&Sj&&Tj(Ob,n,{configurable:!0,set:r}),Uj(n,t)},Ta(sb.prototype,"toString",function(){return np(this).tag}),Ta(sb,"withoutSetter",function(t){return Uj(Ae(t),t)}),zf=Xj,Ra.f=qh,Fb.f=rp,Hd.f=Oj=sp,Bf.f=Wj,lp.f=function(t){return Uj(qa(t),t)},ka&&(od(sb.prototype,"description",{configurable:!0,get:function(){return np(this).description}}),Ta(Ob,"propertyIsEnumerable",Xj,{unsafe:!0}))),N({global:!0,wrap:!0,forced:!oc,sham:!oc},{Symbol:sb}),Jd(Dc(Tw),function(t){ph(t)}),N({target:"Symbol",stat:!0,forced:!oc},{for:function(t){if(Q(Pj,t=String(t)))return Pj[t];var n=sb(t);return Pj[t]=n,Qj[n]=t,n},keyFor:function(t){if(!Vj(t))throw TypeError(t+" is not a symbol");if(Q(Qj,t))return Qj[t]},useSetter:function(){Sj=!0},useSimple:function(){Sj=!1}}),N({target:"Object",stat:!0,forced:!oc,sham:!ka},{create:function(t,n){return void 0===n?ac(t):qp(ac(t),n)},defineProperty:qh,defineProperties:qp,getOwnPropertyDescriptor:rp}),N({target:"Object",stat:!0,forced:!oc},{getOwnPropertyNames:sp,getOwnPropertySymbols:Wj}),N({target:"Object",stat:!0,forced:R(function(){Bf.f(1)})},{getOwnPropertySymbols:function(t){return Bf.f(Qa(t))}}),Tf&&N({target:"JSON",stat:!0,forced:!oc||R(function(){var t=sb();return"[null]"!=Tf([t])||"{}"!=Tf({a:t})||"{}"!=Tf(Object(t))})},{stringify:function(t,n,r){for(var i,o=[t],s=1;arguments.length>s;)o.push(arguments[s++]);if(i=n,(ha(n)||void 0!==t)&&!Vj(t))return gd(n)||(n=function(t,n){if("function"==typeof i&&(n=i.call(this,t,n)),!Vj(n))return n}),o[1]=n,Tf.apply(null,o)}}),sb.prototype[mp]||Na(sb.prototype,mp,sb.prototype.valueOf),Ec(sb,"Symbol"),Be[rb]=!0;var Vw=Ra.f,Mc=y.Symbol;if(ka&&"function"==typeof Mc&&(!("description"in Mc.prototype)||void 0!==Mc().description)){var tp={},Vf=function(){var t=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof Vf?new Mc(t):void 0===t?Mc():Mc(t);return""===t&&(tp[n]=!0),n};rn(Vf,Mc);var Yj=Vf.prototype=Mc.prototype;Yj.constructor=Vf;var Ww=Yj.toString,Xw="Symbol(test)"==String(Mc("test")),Yw=/^Symbol\((.*)\)[^)]+$/;Vw(Yj,"description",{configurable:!0,get:function(){var t=ha(this)?this.valueOf():this,n=Ww.call(t);return Q(tp,t)?"":""===(t=Xw?n.slice(7,-1):n.replace(Yw,"$1"))?void 0:t}}),N({global:!0,forced:!0},{Symbol:Vf})}ph("toStringTag"),Ec(y.JSON,"JSON",!0),Ec(Math,"Math",!0),function(){function t(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,r,i){return r&&n(t.prototype,r),i&&n(t,i),t}function i(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,n){return(s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function a(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r=o(t);return r=n?Reflect.construct(r,arguments,o(this).constructor):r.apply(this,arguments),r&&("object"===X(r)||"function"==typeof r)?r:a(this)}}function c(t,n,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,r){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=o(t)););if(t)return(n=Object.getOwnPropertyDescriptor(t,n)).get?n.get.call(r):n.value})(t,n,r||t)}var l=function(){function n(){t(this,n),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(n,[{key:"addEventListener",value:function(t,n,r){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push({callback:n,options:r})}},{key:"removeEventListener",value:function(t,n){if(t in this.listeners){for(var r=0,i=(t=this.listeners[t]).length;r<i;r++)if(t[r].callback===n){t.splice(r,1);break}}}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){for(var n=this.listeners[t.type].slice(),r=0,i=n.length;r<i;r++){var o=n[r];try{o.callback.call(this,t)}catch(t){Promise.resolve().then(function(){throw t})}o.options&&o.options.once&&this.removeEventListener(t.type,o.callback)}return!t.defaultPrevented}}}]),n}(),f=function(n){function s(){t(this,s);var n=f.call(this);return n.listeners||l.call(a(n)),Object.defineProperty(a(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(n),"onabort",{value:null,writable:!0,configurable:!0}),n}i(s,n);var f=u(s);return r(s,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(o(s.prototype),"dispatchEvent",this).call(this,t)}}]),s}(l),h=function(){function n(){t(this,n),Object.defineProperty(this,"signal",{value:new f,writable:!0,configurable:!0})}return r(n,[{key:"abort",value:function(){try{var t=new Event("abort")}catch(n){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),n}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(h.prototype[Symbol.toStringTag]="AbortController",f.prototype[Symbol.toStringTag]="AbortSignal"),function(t){if(t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var n=!0}else n="function"==typeof t.Request&&!t.Request.prototype.hasOwnProperty("signal")||!t.AbortController;n&&(t.AbortController=h,t.AbortSignal=f)}("undefined"!=typeof self?self:Ya)}();var Zw=Math.floor,$w=Math.log,ax=Math.LOG2E;N({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-Zw($w(t+.5)*ax):32}});var bk,bx=Math.log,cx=Math.LN2,ss=Math.clz32||function(t){return 31-bx(t>>>0)/cx|0},xd=String.fromCharCode,up={}.toString,Zj=window.Uint8Array,ak=Zj||Array,dx=up.call((window.ArrayBuffer||ak).prototype);xl.prototype.decode=function(t){if(t=t&&t.buffer||t,up.call(t)!==dx)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var n="",r=0,i=0|(t=Zj?new ak(t):t).length;r<i;r=r+32768|0)n+=xd.apply(0,t[Zj?"slice":"subarray"](r,r+32768|0));return n.replace(/[\xc0-\xff][\x80-\xbf]*/g,rs)},window.TextDecoder||(window.TextDecoder=xl),yl.prototype.encode=function(t){for(var n=0|(t=void 0===t?"":(""+t).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,ts)).length,r=new ak(n),i=0;i<n;i=i+1|0)r[i]=t.charCodeAt(i);return r},window.TextEncoder||(window.TextEncoder=yl),function(t){var n,r,i,o,s,a,u,c,l,f,h;!function(t){t.LOGIN="LOGIN",t.LOGIN_SUCCESS="LOGIN_SUCCESS",t.LOGIN_FAILURE="LOGIN_FAILURE",t.LOGIN_TIMEOUT="LOGIN_TIMEOUT",t.INTERRUPTED="INTERRUPTED",t.LOGOUT="LOGOUT",t.BANNED_BY_SERVER="BANNED_BY_SERVER",t.REMOTE_LOGIN="REMOTE_LOGIN"}(n||(n={})),t.ConnectionChangeReason=n,function(t){t.DISCONNECTED="DISCONNECTED",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED",t.RECONNECTING="RECONNECTING",t.ABORTED="ABORTED"}(r||(r={})),t.ConnectionState=r,function(t){t.IDLE="IDLE",t.SENT_TO_REMOTE="SENT_TO_REMOTE",t.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",t.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",t.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",t.CANCELED="CANCELED",t.FAILURE="FAILURE"}(i||(i={})),t.LocalInvitationState=i,function(t){t.INVITATION_RECEIVED="INVITATION_RECEIVED",t.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",t.REFUSED="REFUSED",t.ACCEPTED="ACCEPTED",t.CANCELED="CANCELED",t.FAILURE="FAILURE"}(o||(o={})),t.RemoteInvitationState=o,function(t){t.UNKNOWN="UNKNOWN",t.PEER_NO_RESPONSE="PEER_NO_RESPONSE",t.INVITATION_EXPIRE="INVITATION_EXPIRE",t.PEER_OFFLINE="PEER_OFFLINE",t.NOT_LOGGEDIN="NOT_LOGGEDIN"}(s||(s={})),t.LocalInvitationFailureReason=s,function(t){t.UNKNOWN="UNKNOWN",t.PEER_OFFLINE="PEER_OFFLINE",t.ACCEPT_FAILURE="ACCEPT_FAILURE",t.INVITATION_EXPIRE="INVITATION_EXPIRE"}(a||(a={})),t.RemoteInvitationFailureReason=a,function(t){t.ONLINE="ONLINE",t.UNREACHABLE="UNREACHABLE",t.OFFLINE="OFFLINE"}(u||(u={})),t.PeerOnlineState=u,(c||(c={})).ONLINE_STATUS="ONLINE_STATUS",t.PeerSubscriptionOption=c,function(t){t.TEXT="TEXT",t.RAW="RAW",t.IMAGE="IMAGE",t.FILE="FILE"}(l||(l={})),t.MessageType=l,function(t){t.CN="CN",t.NA="NA",t.EU="EU",t.AS="AS",t.JP="JP",t.IN="IN",t.GLOB="GLOB",t.OC="OC",t.SA="SA",t.AF="AF",t.OVS="OVS"}(f||(f={})),t.LegacyAreaCode=f,function(t){t.GLOBAL="GLOBAL",t.INDIA="INDIA",t.JAPAN="JAPAN",t.ASIA="ASIA",t.EUROPE="EUROPE",t.CHINA="CHINA",t.NORTH_AMERICA="NORTH_AMERICA"}(h||(h={})),t.AreaCode=h}(bk||(bk={}));var S=bk;N({target:"Array",proto:!0},{includes:function(t){return on(this,t,1<arguments.length?arguments[1]:void 0)}}),Ld("includes");var ck=function(t){if(Lj(t))throw TypeError("The method doesn't accept regular expressions");return t},ex=qa("match"),dk=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[ex]=!1,"/./"[t](n)}catch(t){}}return!1};N({target:"String",proto:!0,forced:!dk("includes")},{includes:function(t){return!!~String(jb(this)).indexOf(ck(t),1<arguments.length?arguments[1]:void 0)}});var Nc={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0};ph("iterator"),ph("asyncIterator");var vp,ek=Ee("forEach")?[].forEach:function(t){return Jd(this,t,1<arguments.length?arguments[1]:void 0)};for(vp in Ij){var wp=y[vp],rh=wp&&wp.prototype;if(rh&&rh.forEach!==ek)try{Na(rh,"forEach",ek)}catch(c){rh.forEach=ek}}var fx=[].reverse,xp=[1,2];N({target:"Array",proto:!0,forced:String(xp)===String(xp.reverse())},{reverse:function(){return gd(this)&&(this.length=this.length),fx.call(this)}});var w=$a(function(t){t=function(t){function n(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}function r(t,n,r,s){return n=Object.create((n&&n.prototype instanceof o?n:o).prototype),s=new p(s||[]),n._invoke=function(t,n,r){var o=O;return function(s,a){if(o===A)throw Error("Generator is already running");if(o===R){if("throw"===s)throw a;return v()}for(r.method=s,r.arg=a;;){if((s=r.delegate)&&(s=l(s,r))){if(s===T)continue;return s}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===O)throw o=R,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);if(o=A,"normal"===(s=i(t,n,r)).type){if(o=r.done?R:I,s.arg===T)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=R,r.method="throw",r.arg=s.arg)}}}(t,r,s),n}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function s(){}function a(){}function u(t){["next","throw","return"].forEach(function(r){n(t,r,function(t){return this._invoke(r,t)})})}function c(t,n){var r;function o(r,s,a,u){if("throw"!==(r=i(t[r],t,s)).type){var c=r.arg;return(r=c.value)&&"object"===X(r)&&y.call(r,"__await")?n.resolve(r.__await).then(function(t){o("next",t,a,u)},function(t){o("throw",t,a,u)}):n.resolve(r).then(function(t){c.value=t,a(c)},function(t){return o("throw",t,a,u)})}u(r.arg)}this._invoke=function(t,i){function s(){return new n(function(n,r){o(t,i,n,r)})}return r=r?r.then(s,s):s()}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return T;n.method="throw",n.arg=TypeError("The iterator does not provide a 'throw' method")}return T}return"throw"===(r=i(r,t.iterator,n.arg)).type?(n.method="throw",n.arg=r.arg,n.delegate=null,T):(r=r.arg)?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,T):r:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,T)}function f(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function h(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function d(t){if(t){var n=t[m];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1;return(n=function n(){for(;++r<t.length;)if(y.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n}).next=n}}return{next:v}}function v(){return{value:g,done:!0}}var g,b=Object.prototype,y=b.hasOwnProperty,E="function"==typeof Symbol?Symbol:{},m=E.iterator||"@@iterator",_=E.asyncIterator||"@@asyncIterator",w=E.toStringTag||"@@toStringTag";try{n({},"")}catch(t){n=function(t,n,r){return t[n]=r}}t.wrap=r;var O="suspendedStart",I="suspendedYield",A="executing",R="completed",T={};n(E={},m,function(){return this});var S=Object.getPrototypeOf;(S=S&&S(S(d([]))))&&S!==b&&y.call(S,m)&&(E=S);var N=a.prototype=o.prototype=Object.create(E);return s.prototype=a,n(N,"constructor",a),n(a,"constructor",s),s.displayName=n(a,w,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,n(t,w,"GeneratorFunction")),t.prototype=Object.create(N),t},t.awrap=function(t){return{__await:t}},u(c.prototype),n(c.prototype,_,function(){return this}),t.AsyncIterator=c,t.async=function(n,i,o,s,a){void 0===a&&(a=Promise);var u=new c(r(n,i,o,s),a);return t.isGeneratorFunction(i)?u:u.next().then(function(t){return t.done?t.value:u.next()})},u(N),n(N,w,"Generator"),n(N,m,function(){return this}),n(N,"toString",function(){return"[object Generator]"}),t.keys=function(t){var n,r=[];for(n in t)r.push(n);return r.reverse(),function n(){for(;r.length;){var i=r.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=d,p.prototype={constructor:p,reset:function(t){if(this.next=this.prev=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(h),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function n(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=g),!!i}if(this.done)throw t;for(var r=this,i=this.tryEntries.length-1;0<=i;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=y.call(o,"catchLoc"),u=y.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}return o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null),(r=o?o.completion:{}).type=t,r.arg=n,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(r)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),T},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),h(r),T}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){if("throw"===(t=r.completion).type){var i=t.arg;h(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),T}},t}(t.exports);try{regeneratorRuntime=t}catch(n){"object"===("undefined"==typeof globalThis?"undefined":X(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),yp=!R(function(){return Object.isExtensible(Object.preventExtensions({}))}),fk=$a(function(t){var n=Ra.f,r=Ae("meta"),i=0,o=Object.isExtensible||function(){return!0},s=function(t){n(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!ha(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Q(t,r)){if(!o(t))return"F";if(!n)return"E";s(t)}return t[r].objectID},getWeakData:function(t,n){if(!Q(t,r)){if(!o(t))return!0;if(!n)return!1;s(t)}return t[r].weakData},onFreeze:function(t){return yp&&a.REQUIRED&&o(t)&&!Q(t,r)&&s(t),t}};Be[r]=!0}),zp=function(t,n,r){var i=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),s=i?"set":"add",a=y[t],u=a&&a.prototype,c=a,l={},f=function(t){var n=u[t];Ta(u,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!ha(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!ha(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!ha(t))&&n.call(this,0===t?0:t)}:function(t,r){return n.call(this,0===t?0:t,r),this})};if(nc(t,"function"!=typeof a||!(o||u.forEach&&!R(function(){(new a).entries().next()}))))c=r.getConstructor(n,t,i,s),fk.REQUIRED=!0;else if(nc(t,!0)){var h=new c,p=h[s](o?{}:-0,1)!=h,d=R(function(){h.has(1)}),v=Tg(function(t){new a(t)}),g=!o&&R(function(){for(var t=new a,n=5;n--;)t[s](n,n);return!t.has(-0)});v||((c=n(function(n,r){return Gc(n,c,t),n=lh(new a,n,c),null!=r&&Xg(r,n[s],{that:n,AS_ENTRIES:i}),n})).prototype=u,u.constructor=c),(d||g)&&(f("delete"),f("has"),i&&f("get")),(g||p)&&f(s),o&&u.clear&&delete u.clear}return l[t]=c,N({global:!0,forced:c!=a},l),Ec(c,t),o||r.setStrong(c,t,i),c},gx=Ra.f,Ap=fk.fastKey,Bp=Za.set,gk=Za.getterFor,Cp={getConstructor:function(t,n,r,i){var o=t(function(t,s){Gc(t,o,n),Bp(t,{type:n,index:ac(null),first:void 0,last:void 0,size:0}),ka||(t.size=0),null!=s&&Xg(s,t[i],{that:t,AS_ENTRIES:r})}),s=gk(n),a=function(t,n,r){var i,o=s(t),a=u(t,n);return a?a.value=r:(o.last=a={index:i=Ap(n,!0),key:n,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),ka?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},u=function(t,n){t=s(t);var r=Ap(n);if("F"!==r)return t.index[r];for(t=t.first;t;t=t.next)if(t.key==n)return t};return Hf(o.prototype,{clear:function(){for(var t=s(this),n=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;t.first=t.last=void 0,ka?t.size=0:this.size=0},delete:function(t){var n=s(this);if(t=u(this,t)){var r=t.next,i=t.previous;delete n.index[t.index],t.removed=!0,i&&(i.next=r),r&&(r.previous=i),n.first==t&&(n.first=r),n.last==t&&(n.last=i),ka?n.size--:this.size--}return!!t},forEach:function(t){for(var n,r=s(this),i=Id(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),Hf(o.prototype,r?{get:function(t){return(t=u(this,t))&&t.value},set:function(t,n){return a(this,0===t?0:t,n)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),ka&&gx(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,n,r){var i=n+" Iterator",o=gk(n),s=gk(i);bj(t,n,function(t,n){Bp(this,{type:i,target:t,state:o(t),kind:n,last:void 0})},function(){for(var t=s(this),n=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==n?{value:r.key,done:!1}:"values"==n?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},r?"entries":"values",!r,!0),If(n)}};zp("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Cp);var hx=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,ix=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,hk=function(t){return function(n){return n=String(jb(n)),1&t&&(n=n.replace(hx,"")),2&t&&(n=n.replace(ix,"")),n}};hk(1),hk(2);var ik=hk(3),sh=y.parseInt,jx=/^[+-]?0[Xx]/,Dp=8!==sh("	\n\v\f\r \xa0áââââââââââââ¯âã\u2028\u2029\uFEFF08")||22!==sh("	\n\v\f\r \xa0áââââââââââââ¯âã\u2028\u2029\uFEFF0x16")?function(t,n){return sh(t=ik(String(t)),n>>>0||(jx.test(t)?16:10))}:sh;N({global:!0,forced:parseInt!=Dp},{parseInt:Dp});var kx=Hd.f,lx=Fb.f,mx=Ra.f,pd=y.Number,th=pd.prototype,nx="Number"==Zb(ac(th)),Ep=function(t){var n,r=lc(t,!1);if("string"==typeof r&&2<r.length){if(43===(t=(r=ik(r)).charCodeAt(0))||45===t){if(88===(t=r.charCodeAt(2))||120===t)return NaN}else if(48===t){switch(r.charCodeAt(1)){case 66:case 98:t=2;var i=49;break;case 79:case 111:t=8,i=55;break;default:return+r}var o=(r=r.slice(2)).length;for(n=0;n<o;n++){var s=r.charCodeAt(n);if(48>s||s>i)return NaN}return parseInt(r,t)}}return+r};if(nc("Number",!pd(" 0o1")||!pd("0b1")||pd("+0x1"))){for(var uh,Pd=function(t){var n=1>arguments.length?0:t,r=this;return r instanceof Pd&&(nx?R(function(){th.valueOf.call(r)}):"Number"!=Zb(r))?lh(new pd(Ep(n)),r,Pd):Ep(n)},Fp=ka?kx(pd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),jk=0;Fp.length>jk;jk++)Q(pd,uh=Fp[jk])&&!Q(Pd,uh)&&mx(Pd,uh,lx(pd,uh));Pd.prototype=th,th.constructor=Pd,Ta(y,"Number",Pd)}var Gp=qa("isConcatSpreadable"),ox=51<=id||!R(function(){var t=[];return t[Gp]=!1,t.concat()[0]!==t}),px=Ef("concat");N({target:"Array",proto:!0,forced:!ox||!px},{concat:function(t){var n,r=Qa(this),i=Sg(r,0),o=0,s=-1;for(n=arguments.length;s<n;s++){var a=-1===s?r:arguments[s],u=a;if(ha(u)){var c=u[Gp];u=void 0!==c?!!c:gd(u)}else u=!1;if(u){if(0x1fffffffffffff<o+(c=ta(a.length)))throw TypeError("Maximum allowed index exceeded");for(u=0;u<c;u++,o++)u in a&&Ge(i,o,a[u])}else{if(0x1fffffffffffff<=o)throw TypeError("Maximum allowed index exceeded");Ge(i,o++,a)}}return i.length=o,i}});var kk=mc("Reflect","apply"),qx=Function.apply,rx=!R(function(){kk(function(){})});N({target:"Reflect",stat:!0,forced:rx},{apply:function(t,n,r){return yb(t),va(r),kk?kk(t,n,r):qx.call(t,n,r)}}),N({target:"Reflect",stat:!0},{ownKeys:qn});var sx=Oj,tx=R(function(){return!Object.getOwnPropertyNames(1)});N({target:"Object",stat:!0,forced:tx},{getOwnPropertyNames:sx});var Pe="object"===("undefined"==typeof Reflect?"undefined":X(Reflect))?Reflect:null,Hp=Pe&&"function"==typeof Pe.apply?Pe.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},ux=Pe&&"function"==typeof Pe.ownKeys?Pe.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},Ip=Number.isNaN||function(t){return t!=t};ea.EventEmitter=ea,ea.prototype._events=void 0,ea.prototype._eventsCount=0,ea.prototype._maxListeners=void 0;var Jp=10;Object.defineProperty(ea,"defaultMaxListeners",{enumerable:!0,get:function(){return Jp},set:function(t){if("number"!=typeof t||0>t||Ip(t))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Jp=t}}),ea.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ea.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||Ip(t))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},ea.prototype.getMaxListeners=function(){return void 0===this._maxListeners?ea.defaultMaxListeners:this._maxListeners},ea.prototype.emit=function(t){for(var n,r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);i="error"===t;var o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(0<r.length&&(n=r[0]),n instanceof Error)throw n;throw(r=Error("Unhandled error."+(n?" ("+n.message+")":""))).context=n,r}if(void 0===(i=o[t]))return!1;if("function"==typeof i)Hp(i,this,r);else for(o=Cl(i,n=i.length),i=0;i<n;++i)Hp(o[i],this,r);return!0},ea.prototype.addListener=function(t,n){return zl(this,t,n,!1)},ea.prototype.on=ea.prototype.addListener,ea.prototype.prependListener=function(t,n){return zl(this,t,n,!0)},ea.prototype.once=function(t,n){return ng(n),this.on(t,Al(this,t,n)),this},ea.prototype.prependOnceListener=function(t,n){return ng(n),this.prependListener(t,Al(this,t,n)),this},ea.prototype.removeListener=function(t,n){ng(n);var r,i=this._events;if(void 0===i)return this;var o=i[t];if(void 0===o)return this;if(o===n||o.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,o.listener||n));else if("function"!=typeof o){var s=-1;for(r=o.length-1;0<=r;r--)if(o[r]===n||o[r].listener===n){var a=o[r].listener;s=r;break}if(0>s)return this;if(0===s)o.shift();else{for(;s+1<o.length;s++)o[s]=o[s+1];o.pop()}1===o.length&&(i[t]=o[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||n)}return this},ea.prototype.off=ea.prototype.removeListener,ea.prototype.removeAllListeners=function(t){var n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0==arguments.length){var r=Object.keys(n);for(n=0;n<r.length;++n){var i=r[n];"removeListener"!==i&&this.removeAllListeners(i)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=n[t]))this.removeListener(t,r);else if(void 0!==r)for(n=r.length-1;0<=n;n--)this.removeListener(t,r[n]);return this},ea.prototype.listeners=function(t){return Bl(this,t,!0)},ea.prototype.rawListeners=function(t){return Bl(this,t,!1)},ea.listenerCount=function(t,n){return"function"==typeof t.listenerCount?t.listenerCount(n):Dl.call(t,n)},ea.prototype.listenerCount=Dl,ea.prototype.eventNames=function(){return 0<this._eventsCount?ux(this._events):[]},ea.once=function(t,n){return new Promise(function(r,i){function o(r){t.removeListener(n,s),i(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",o),r([].slice.call(arguments))}El(t,n,s,{once:!0}),"error"!==n&&vs(t,o,{once:!0})})};var Qe=Object.assign,Kp=Object.defineProperty,Lp=!Qe||R(function(){if(ka&&1!==Qe({b:1},Qe(Kp({},"a",{enumerable:!0,get:function(){Kp(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},n={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),7!=Qe({},t)[r]||"abcdefghijklmnopqrst"!=Dc(Qe({},n)).join("")})?function(t,n){for(var r=Qa(t),i=arguments.length,o=1,s=Bf.f,a=zf;i>o;)for(var u,c=Af(arguments[o++]),l=s?Dc(c).concat(s(c)):Dc(c),f=l.length,h=0;f>h;)u=l[h++],(!ka||a.call(c,u))&&(r[u]=c[u]);return r}:Qe;N({target:"Object",stat:!0,forced:Object.assign!==Lp},{assign:Lp}),zp("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Cp);var vx=Math.log,wx=Math.LN2;N({target:"Math",stat:!0},{log2:function(t){return vx(t)/wx}});var xx=Ra.f,yx=Hd.f,zx=Za.enforce,Ax=qa("match"),sc=y.RegExp,lk=sc.prototype,Wf=/a/g,mk=/a/g,nk=new sc(Wf)!==Wf;if(ka&&nc("RegExp",!nk||pc||R(function(){return mk[Ax]=!1,sc(Wf)!=Wf||sc(mk)==mk||"/a/i"!=sc(Wf,"i")}))){for(var Oc=function(t,n){var r,i=this instanceof Oc,o=Lj(t),s=void 0===n;return!i&&o&&t.constructor===Oc&&s||(nk?o&&!s&&(t=t.source):t instanceof Oc&&(s&&(n=tj.call(t)),t=t.source),pc&&(r=!!n&&-1<n.indexOf("y"))&&(n=n.replace(/y/g,"")),t=lh(nk?new sc(t,n):sc(t,n),i?this:lk,Oc),pc&&r&&(zx(t).sticky=!0)),t},Bx=function(t){t in Oc||xx(Oc,t,{configurable:!0,get:function(){return sc[t]},set:function(n){sc[t]=n}})},Mp=yx(sc),Np=0;Mp.length>Np;)Bx(Mp[Np++]);lk.constructor=Oc,Oc.prototype=lk,Ta(y,"RegExp",Oc)}If("RegExp"),Sf("Float32",function(t){return function(n,r,i){return t(this,n,r,i)}}),Sf("Float64",function(t){return function(n,r,i){return t(this,n,r,i)}}),Sf("Uint32",function(t){return function(n,r,i){return t(this,n,r,i)}}),Sf("Uint16",function(t){return function(n,r,i){return t(this,n,r,i)}});var ok=function(t,n){return t===n?0:null==t?null==n?0:-1:null==n?+(null!=t):"function"==typeof t.compare?t.compare(n):"function"==typeof n.compare?-n.compare(t):t<n?-1:+(t>n)},pk=[],Op=pk.sort,Cx=R(function(){pk.sort(void 0)}),Dx=R(function(){pk.sort(null)}),Ex=Ee("sort");N({target:"Array",proto:!0,forced:Cx||!Dx||!Ex},{sort:function(t){return void 0===t?Op.call(Qa(this)):Op.call(Qa(this),yb(t))}});var Pp=Object.getPrototypeOf({}),Xf=function(t,n){var r;return t===n||(null==t?t==n:"function"===X(t.equiv)?t.equiv(n):null==n?t==n:"function"===X(n.equiv)?n.equiv(t):"string"!==X(t)&&"string"!==X(n)&&(null!=(r=Object.getPrototypeOf(t))&&r!==Pp||null!=(r=Object.getPrototypeOf(n))&&r!==Pp?"function"!==X(t)&&void 0!==t.length&&"function"!==X(n)&&void 0!==n.length?Gx(t,n):t instanceof Set&&n instanceof Set?Hx(t,n):t instanceof Map&&n instanceof Map?Ix(t,n):t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():t instanceof RegExp&&n instanceof RegExp?t.toString()===n.toString():t!=t&&n!=n:Fx(t,n)))},Gx=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf,i=t.length;if(i===n.length)for(;0<=--i&&r(t[i],n[i]););return 0>i},Hx=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;return t.size===n.size&&r(G(t.keys()).sort(),G(n.keys()).sort())},Ix=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;return t.size===n.size&&r(G(t).sort(),G(n).sort())},Fx=function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!n.hasOwnProperty(i)||!r(t[i],n[i]))return!1;return!0},Qp=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(t){return void 0!==t?": "+t:""};return function(r){function i(r){return W(this,i),o.call(this,t(r)+n(r))}la(i,r);var o=ma(i);return i}(ef(Error))},Jx=Qp(function(){return"illegal argument(s)"}),vh=function(t){throw new Jx(t)},qk=Qp(function(){return"index out of bounds"}),Rp=1/0xffffffff,Kx=function(){function t(){W(this,t)}return Ha(t,[{key:"float",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*Rp*t}},{key:"norm",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*Rp-.5)*t}},{key:"minmax",value:function(t,n){return this.float()*(n-t)+t}}]),t}(),rk=Math.random,Lx=new(function(t){function n(){return W(this,n),r.apply(this,arguments)}la(n,t);var r=ma(n);return Ha(n,[{key:"int",value:function(){return 0x100000000*rk()>>>0}},{key:"float",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return rk()*t}},{key:"norm",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(rk()-.5)*t}}]),n}(Kx)),Vh=Symbol(),Hl=function(){},Mx=fk.onFreeze,sk=Object.freeze,Nx=R(function(){sk(1)});N({target:"Object",stat:!0,forced:Nx,sham:!yp},{freeze:function(t){return sk&&ha(t)?sk(Mx(t)):t}});var Ox=Ee("reduce"),Px=!Hc&&79<id&&83>id;N({target:"Array",proto:!0,forced:!Ox||Px},{reduce:function(t){return Wo(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Gl=function(t){return null!=t&&"function"==typeof t.xform?t.xform():t},og=function(){function t(n){W(this,t),this.value=n}return Ha(t,[{key:"deref",value:function(){return this.value}}]),t}(),Wh=function(t){return t instanceof og?t.deref():t},xs=function(t,n){return[t,function(t){return t},n]},Qx=w.mark(function(t,n){var r,i,o,s,a,u;return w.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:i=(r=Gl(t)(ws()))[1],o=r[2],s=0;case 4:if(!(s<n.length)){c.next=15;break}if(a=n[s],!((u=o([],a))instanceof og)){c.next=10;break}return c.delegateYield(Wh(i(u.deref())),"t0",9);case 9:return c.abrupt("return");case 10:if(!u.length){c.next=12;break}return c.delegateYield(u,"t1",12);case 12:s++,c.next=4;break;case 15:return c.delegateYield(Wh(i([])),"t2",16);case 16:case"end":return c.stop()}},Qx)}),ys=w.mark(Fl),zs=function(t,n){return[t[0],t[1],n]},Sp=!0;"findIndex"in[]&&[,].findIndex(function(){Sp=!1}),N({target:"Array",proto:!0,forced:Sp},{findIndex:function(t){return An(this,t,1<arguments.length?arguments[1]:void 0)}}),Ld("findIndex"),N({target:"Array",proto:!0},{fill:yj}),Ld("fill");var Rx=function(){function t(n){W(this,t),this._length=0,n&&this.into(n)}return Ha(t,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new t(this)}},{key:"empty",value:function(){return new t}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var t,n=this.head;n;)t=n.next,delete n.value,delete n.prev,delete n.next,n=t;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(t){var n=this._length;if(n<t._length)return -1;if(n>t._length)return 1;if(0===n)return 0;n=this.head,t=t.head;for(var r=0;n&&0==r;)r=ok(n.value,t.value),n=n.next,t=t.next;return r}},{key:"equiv",value:function(n){if(!(n instanceof t||null!=n&&"function"!=typeof n&&void 0!==n.length)||this._length!==n.length)return!1;if(!this._length||this===n)return!0;for(var r=this.head,i=0;i<n.length;i++){if(!Xf(r.value,n[i]))return!1;r=r.next}return!0}},{key:Symbol.iterator,value:w.mark(function t(){var n;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.head;case 1:if(!n){t.next=7;break}return t.next=4,n.value;case 4:n=n.next,t.next=1;break;case 7:case"end":return t.stop()}},t,this)})},{key:"seq",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(t>=n||0>t)){t=this.nthCell(t);var r=this.nthCell(n-1);return n=function t(n){return{first:function(){return n.value},next:function(){return n!==r&&n.next?t(n.next):void 0}}},t?n(t):void 0}}},{key:"cycle",value:w.mark(function t(){return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this,"t0",2);case 2:t.next=0;break;case 4:case"end":return t.stop()}},t,this)})},{key:"$reduce",value:function(t,n){for(var r=this.head;r&&!(n instanceof og);)n=t(n,r.value),r=r.next;return n}},{key:"drop",value:function(){var t=this.head;if(t)return(this.head=t.next)?delete this.head.prev:delete this.tail,this._length--,t.value}},{key:"cons",value:function(t){return t={value:t,next:this.head},this.head?this.head.prev=t:this.tail=t,this.head=t,this._length++,this}},{key:"insertBefore",value:function(t,n){return t||vh("cell is undefined"),n={value:n,next:t,prev:t.prev},t.prev?t.prev.next=n:this.head=n,t.prev=n,this._length++,this}},{key:"insertAfter",value:function(t,n){return t||vh("cell is undefined"),n={value:n,next:t.next,prev:t},t.next?t.next.prev=n:this.tail=n,t.next=n,this._length++,this}},{key:"insertBeforeNth",value:function(t,n){if(0>t&&(t+=this._length),0>=t)return this.cons(n);if(0>t||t>=this._length)throw new qk(t);return this.insertBefore(this.nthCellUnsafe(t),n)}},{key:"insertAfterNth",value:function(t,n){if(0>t&&(t+=this._length),t>=this._length-1)return this.push(n);if(0>t||t>=this._length)throw new qk(t);return this.insertAfter(this.nthCellUnsafe(t),n)}},{key:"insertSorted",value:function(t,n){n=n||ok;for(var r=this.head;r;){if(0>=n(t,r.value))return this.insertBefore(r,t);r=r.next}return this.push(t)}},{key:"find",value:function(t){for(var n=this.head;n;){if(n.value===t)return n;n=n.next}}},{key:"findWith",value:function(t){for(var n=this.head;n;){if(t(n.value))return n;n=n.next}}},{key:"concat",value:function(){for(var t=this.copy(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];for(n=0;n<r.length;n++)t.into(r[n]);return t}},{key:"into",value:function(t){for(var n=0;n<t.length;n++)this.push(t[n])}},{key:"slice",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;n=0>n?n+this._length:n,r=0>r?r+this._length:r,(0>n||0>r)&&vh("invalid indices: ${from} / ${to}");for(var i=new t,o=this.nthCell(n);o&&++n<=r;)i.push(o.value),o=o.next;return i}},{key:"splice",value:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length?arguments[2]:void 0;if("number"==typeof n){if(0>n&&(n+=this._length),0>n||n>=this._length)throw new qk(n);var o=this.nthCellUnsafe(n)}else o=n;var s=new t;if(0<r)for(;o&&0<r--;)this.remove(o),s.push(o.value),o=o.next;else o&&(o=o.next);if(i)if(o)for(r=0;r<i.length;r++)this.insertBefore(o,i[r]);else for(o=0;o<i.length;o++)this.push(i[o]);return s}},{key:"remove",value:function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,this._length--,this}},{key:"swap",value:function(t,n){if(t!==n){var r=t.value;t.value=n.value,n.value=r}return this}},{key:"push",value:function(t){return this.tail?(t={value:t,prev:this.tail},this.tail=this.tail.next=t,this._length++,this):this.cons(t)}},{key:"pop",value:function(){var t=this.tail;if(t)return(this.tail=t.prev)?delete this.tail.next:delete this.head,this._length--,t.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(t){return this.head?(this.head.value=t,this):this.cons(t)}},{key:"setTail",value:function(t){return this.tail?(this.tail.value=t,this):this.push(t)}},{key:"setNth",value:function(t,n){var r=this.nthCell(t);return r||vh("index out of bounds: ".concat(t)),r.value=n,this}},{key:"nth",value:function(t,n){return(t=this.nthCell(t))?t.value:n}},{key:"nthCell",value:function(t){if(0>t&&(t+=this._length),!(0>t||t>=this._length))return this.nthCellUnsafe(t)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var t=this.peek();return this.pop(),this.cons(t)}}},{key:"map",value:function(n){for(var r=new t,i=this.head;i;)r.push(n(i.value)),i=i.next;return r}},{key:"filter",value:function(n){for(var r=new t,i=this.head;i;)n(i.value)&&r.push(i.value),i=i.next;return r}},{key:"reduce",value:function(t,n){for(var r=this.head;r;)n=t(n,r.value),r=r.next;return n}},{key:"shuffle",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Lx;if(2>this._length)return this;for(t=null!=t?t:Math.ceil(1.5*Math.log2(this._length));0<t;t--)for(var r=this.head;r;){var i=r.next;.5>n.float()?this.asHead(r):this.asTail(r),r=i}return this}},{key:"sort",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ok;if(!this._length)return this;for(var n=1;;){var r=this.head;this.tail=this.head=void 0;for(var i=0;r;){i++;for(var o=r,s=0,a=0;a<n&&(s++,o=o.next);a++);for(a=n;0<s||0<a&&o;){if(0===s){var u=o;o=o.next,a--}else o&&0!==a?0>=t(r.value,o.value)?(u=r,r=r.next,s--):(u=o,o=o.next,a--):(u=r,r=r.next,s--);this.tail?this.tail.next=u:this.head=u,u.prev=this.tail,this.tail=u}r=o}if(this.tail.next=void 0,1>=i)return this;n*=2}}},{key:"reverse",value:function(){for(var t=this.head,n=this.tail,r=(this._length>>>1)+(1&this._length);t&&n&&0<r;){var i=t.value;t.value=n.value,n.value=i,t=t.next,n=n.prev,r--}return this}},{key:"asHead",value:function(t){return t===this.head||(this.remove(t),this.head.prev=t,t.next=this.head,t.prev=void 0,this.head=t,this._length++),this}},{key:"asTail",value:function(t){return t===this.tail||(this.remove(t),this.tail.next=t,t.prev=this.tail,t.next=void 0,this.tail=t,this._length++),this}},{key:"toString",value:function(){for(var t=[],n=this.head;n;)t.push(String(n.value)),n=n.next;return t.join(", ")}},{key:"toJSON",value:function(){return G(this)}},{key:"nthCellUnsafe",value:function(t){if(t<=this._length>>1)var n=this.head,r="next";else n=this.tail,r="prev",t=this._length-t-1;for(;0<t--&&n;)n=n[r];return n}}]),t}(),tc=function(){function t(n,r){W(this,t),r=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},r),this.map=r.map(),this.items=new Rx,this._size=0,this.opts=r,n&&this.into(n)}return Ha(t,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return pg(function(t){return[t.k,t]},this.items)}},{key:"keys",value:function(){return pg(function(t){return t.k},this.items)}},{key:"values",value:function(){return pg(function(t){return t.v},this.items)}},{key:"copy",value:function(){var t=this.empty();t.items=this.items.copy();for(var n=t.items.head;n;)t.map.set(n.value.k,n),n=n.next;return t}},{key:"empty",value:function(){return new t(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var t,n=this.opts.release;if(n){for(;t=this.items.drop();)n(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(t){return this.map.has(t)}},{key:"get",value:function(t,n){return(t=this.map.get(t))?this.resetEntry(t):n}},{key:"set",value:function(t,n){var r=this.opts.ksize(t)+this.opts.vsize(n),i=this.map.get(t);return this._size+=Math.max(0,r-(i?i.value.s:0)),this.ensureSize()&&this.doSetEntry(i,t,n,r),n}},{key:"into",value:function(t){for(var n=0;n<t.length;n++){var r=t[n];this.set(r[0],r[1])}return this}},{key:"getSet",value:function(t,n){var r=this,i=this.map.get(t);return i?Promise.resolve(this.resetEntry(i)):n().then(function(n){return r.set(t,n)})}},{key:"delete",value:function(t){return!!(t=this.map.get(t))&&(this.removeEntry(t),!0)}},{key:"resetEntry",value:function(t){return this.items.asTail(t),t.value.v}},{key:"ensureSize",value:function(){for(var t=this.opts.release,n=this.opts.maxsize,r=this.opts.maxlen;this._size>n||this.length>=r;){var i=this.items.drop();if(!i)return!1;this.map.delete(i.k),t&&t(i.k,i.v),this._size-=i.s}return!0}},{key:"removeEntry",value:function(t){var n=t.value;this.map.delete(n.k),this.items.remove(t),this.opts.release&&this.opts.release(n.k,n.v),this._size-=n.s}},{key:"doSetEntry",value:function(t,n,r,i){t?(t.value.v=r,t.value.s=i,this.items.asTail(t)):(this.items.push({k:n,v:r,s:i}),this.map.set(n,this.items.tail))}}]),t}(),Sx=function(t){function n(t,i){return W(this,n),i=Object.assign({ttl:36e5},i),r.call(this,t,i)}la(n,t);var r=ma(n);return Ha(n,[{key:"empty",value:function(){return new n(null,this.opts)}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"get",value:function(t,n){if(t=this.map.get(t)){if(t.value.t>=Date.now())return this.resetEntry(t);this.removeEntry(t)}return n}},{key:"set",value:function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.opts.ksize(t)+this.opts.vsize(n),o=this.map.get(t);return this._size+=Math.max(0,i-(o?o.value.s:0)),this.ensureSize()&&(r=Date.now()+r,o?(o.value.v=n,o.value.s=i,o.value.t=r,this.items.asTail(o)):(this.items.push({k:t,v:n,s:i,t:r}),this.map.set(t,this.items.tail))),n}},{key:"getSet",value:function(t,n){var r=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,o=this.get(t);return o?Promise.resolve(o):n().then(function(n){return r.set(t,n,i)})}},{key:"prune",value:function(){for(var t=Date.now(),n=this.items.head;n;)n.value.t<t&&this.removeEntry(n),n=n.next}},{key:"ensureSize",value:function(){for(var t=this.opts.maxsize,r=this.opts.maxlen,i=Date.now(),o=this.items.head;o&&(this._size>t||this.length>=r);)o.value.t<i&&this.removeEntry(o),o=o.next;return Th(wd(n.prototype),"ensureSize",this).call(this)}}]),n}(tc),Tp="object"==X(Ya)&&Ya&&Ya.Object===Object&&Ya,Tx="object"==("undefined"==typeof self?"undefined":X(self))&&self&&self.Object===Object&&self,Cb=Tp||Tx||Function("return this")(),Pb=Cb.Symbol,Up=Object.prototype,Ux=Up.hasOwnProperty,Vx=Up.toString,Yf=Pb?Pb.toStringTag:void 0,Wx=Object.prototype.toString,Vp=Pb?Pb.toStringTag:void 0,Qd=function(t){if(null==t)t=void 0===t?"[object Undefined]":"[object Null]";else if(Vp&&Vp in Object(t)){var n=Ux.call(t,Yf),r=t[Yf];try{t[Yf]=void 0;var i=!0}catch(t){}var o=Vx.call(t);i&&(n?t[Yf]=r:delete t[Yf]),t=o}else t=Wx.call(t);return t},lb=function(t){var n=X(t);return null!=t&&("object"==n||"function"==n)},qi=function(t){return!!lb(t)&&("[object Function]"==(t=Qd(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)},tk=Cb["__core-js_shared__"],Wp=function(){var t=/[^.]+$/.exec(tk&&tk.keys&&tk.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Xx=Function.prototype.toString,Rd=function(t){if(null!=t){try{return Xx.call(t)}catch(t){}return t+""}return""},Yx=/^\[object .+?Constructor\]$/,Zx=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sd=function(t,n){return!lb(t=null==t?void 0:t[n])||Wp&&Wp in t||!(qi(t)?Zx:Yx).test(Rd(t))?void 0:t},Zf=Sd(Object,"create"),$x=Object.prototype.hasOwnProperty,ay=Object.prototype.hasOwnProperty;zd.prototype.clear=function(){this.__data__=Zf?Zf(null):{},this.size=0},zd.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=!!t,t},zd.prototype.get=function(t){var n=this.__data__;return Zf?"__lodash_hash_undefined__"===(t=n[t])?void 0:t:$x.call(n,t)?n[t]:void 0},zd.prototype.has=function(t){var n=this.__data__;return Zf?void 0!==n[t]:ay.call(n,t)},zd.prototype.set=function(t,n){var r=this.__data__;return this.size+=+!this.has(t),r[t]=Zf&&void 0===n?"__lodash_hash_undefined__":n,this};var $f=function(t,n){return t===n||t!=t&&n!=n},wh=function(t,n){for(var r=t.length;r--;)if($f(t[r][0],n))return r;return -1},by=Array.prototype.splice;ce.prototype.clear=function(){this.__data__=[],this.size=0},ce.prototype.delete=function(t){var n=this.__data__;return!(0>(t=wh(n,t)))&&(t==n.length-1?n.pop():by.call(n,t,1),--this.size,!0)},ce.prototype.get=function(t){var n=this.__data__;return 0>(t=wh(n,t))?void 0:n[t][1]},ce.prototype.has=function(t){return -1<wh(this.__data__,t)},ce.prototype.set=function(t,n){var r=this.__data__,i=wh(r,t);return 0>i?(++this.size,r.push([t,n])):r[i][1]=n,this};var rg=ce,ag=Sd(Cb,"Map"),xh=function(t,n){t=t.__data__;var r=X(n);return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?t["string"==typeof n?"string":"hash"]:t.map};de.prototype.clear=function(){this.size=0,this.__data__={hash:new zd,map:new(ag||rg),string:new zd}},de.prototype.delete=function(t){return t=xh(this,t).delete(t),this.size-=!!t,t},de.prototype.get=function(t){return xh(this,t).get(t)},de.prototype.has=function(t){return xh(this,t).has(t)},de.prototype.set=function(t,n){var r=xh(this,t),i=r.size;return r.set(t,n),this.size+=+(r.size!=i),this};var qg=de;gf.prototype.add=gf.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},gf.prototype.has=function(t){return this.__data__.has(t)};var Xp=function(t,n,r,i){var o=t.length;for(r+=i?1:-1;i?r--:++r<o;)if(n(t[r],r,t))return r;return -1},cy=function(t){return t!=t},dy=function(t,n){var r;if(r=!(null==t||!t.length)){if(n==n)e:{r=-1;for(var i=t.length;++r<i;)if(t[r]===n){t=r;break e}t=-1}else t=Xp(t,cy,0);r=-1<t}return r},ey=function(t,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1},fy=function(t,n){return t.has(n)},Re=Sd(Cb,"Set"),gy=function(){},uk=function(t){var n=-1,r=Array(t.size);return t.forEach(function(t){r[++n]=t}),r},hy=1/0,iy=Re&&1/uk(new Re([,-0]))[1]==hy?function(t){return new Re(t)}:gy,vk=function(t,n,r){var i=-1,o=dy,s=t.length,a=!0,u=[],c=u;if(r)a=!1,o=ey;else if(200<=s){if(o=n?null:iy(t))return uk(o);a=!1,o=fy,c=new gf}else c=n?[]:u;e:for(;++i<s;){var l=t[i],f=n?n(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var h=c.length;h--;)if(c[h]===f)continue e;n&&c.push(f),u.push(l)}else o(c,f,r)||(c!==u&&c.push(f),u.push(l))}return u},Yp=function(t){for(var n=-1,r=null==t?0:t.length,i={};++n<r;){var o=t[n];i[o[0]]=o[1]}return i},he=function(t,n){for(var r=-1,i=null==t?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o};ee.prototype.clear=function(){this.__data__=new rg,this.size=0},ee.prototype.delete=function(t){var n=this.__data__;return t=n.delete(t),this.size=n.size,t},ee.prototype.get=function(t){return this.__data__.get(t)},ee.prototype.has=function(t){return this.__data__.has(t)},ee.prototype.set=function(t,n){var r=this.__data__;if(r instanceof rg){var i=r.__data__;if(!ag||199>i.length)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new qg(i)}return r.set(t,n),this.size=r.size,this};var ge=ee,Is=function(t,n){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==n(t[r],r,t););return t},yh=function(){try{var t=Sd(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),bg=function(t,n,r){"__proto__"==n&&yh?yh(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r},jy=Object.prototype.hasOwnProperty,Ml=function(t,n,r){var i=t[n];jy.call(t,n)&&$f(i,r)&&(void 0!==r||n in t)||bg(t,n,r)},re=function(t,n,r,i){var o=!r;r||(r={});for(var s=-1,a=n.length;++s<a;){var u=n[s],c=i?i(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?bg(r,u,c):Ml(r,u,c)}return r},gc=function(t){return null!=t&&"object"==X(t)},Zp=function(t){return gc(t)&&"[object Arguments]"==Qd(t)},$p=Object.prototype,ky=$p.hasOwnProperty,ly=$p.propertyIsEnumerable,rf=Zp(function(){return arguments}())?Zp:function(t){return gc(t)&&ky.call(t,"callee")&&!ly.call(t,"callee")},Va=Array.isArray,my=function(){return!1},jf=$a(function(t,n){var r=(n=n&&!n.nodeType&&n)&&t&&!t.nodeType&&t;t.exports=((n=r&&r.exports===n?Cb.Buffer:void 0)?n.isBuffer:void 0)||my}),ny=/^(?:0|[1-9]\d*)$/,wk=function(t,n){var r=X(t);return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&ny.test(t))&&-1<t&&0==t%1&&t<n},xk=function(t){return"number"==typeof t&&-1<t&&0==t%1&&0x1fffffffffffff>=t},Ea={};Ea["[object Float32Array]"]=Ea["[object Float64Array]"]=Ea["[object Int8Array]"]=Ea["[object Int16Array]"]=Ea["[object Int32Array]"]=Ea["[object Uint8Array]"]=Ea["[object Uint8ClampedArray]"]=Ea["[object Uint16Array]"]=Ea["[object Uint32Array]"]=!0,Ea["[object Arguments]"]=Ea["[object Array]"]=Ea["[object ArrayBuffer]"]=Ea["[object Boolean]"]=Ea["[object DataView]"]=Ea["[object Date]"]=Ea["[object Error]"]=Ea["[object Function]"]=Ea["[object Map]"]=Ea["[object Number]"]=Ea["[object Object]"]=Ea["[object RegExp]"]=Ea["[object Set]"]=Ea["[object String]"]=Ea["[object WeakMap]"]=!1;var oy=function(t){return gc(t)&&xk(t.length)&&!!Ea[Qd(t)]},zh=function(t){return function(n){return t(n)}},Se=$a(function(t,n){var r=n&&!n.nodeType&&n;r=(n=r&&t&&!t.nodeType&&t)&&n.exports===r&&Tp.process;e:{try{var i=n&&n.require&&n.require("util").types;if(i){var o=i;break e}o=r&&r.binding&&r.binding("util");break e}catch(t){}o=void 0}t.exports=o}),aq=Se&&Se.isTypedArray,bi=aq?zh(aq):oy,py=Object.prototype.hasOwnProperty,bq=function(t,n){var r=Va(t),i=!r&&rf(t),o=!r&&!i&&jf(t),s=!r&&!i&&!o&&bi(t);if(r=r||i||o||s){i=t.length;for(var a=String,u=-1,c=Array(i);++u<i;)c[u]=a(u);i=c}else i=[];for(var l in a=i.length,t)!n&&!py.call(t,l)||r&&("length"==l||o&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||wk(l,a))||i.push(l);return i},qy=Object.prototype,yk=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||qy)},cq=function(t,n){return function(r){return t(n(r))}},ry=cq(Object.keys,Object),sy=Object.prototype.hasOwnProperty,Ed=function(t){return null!=t&&xk(t.length)&&!qi(t)},Ad=function(t){if(Ed(t))t=bq(t);else if(yk(t)){var n,r=[];for(n in Object(t))sy.call(t,n)&&"constructor"!=n&&r.push(n);t=r}else t=ry(t);return t},Es=function(t,n){return t&&re(n,Ad(n),t)},ty=Object.prototype.hasOwnProperty,kf=function(t){if(Ed(t))t=bq(t,!0);else if(lb(t)){var n=yk(t),r=[];for(i in t)("constructor"!=i||!n&&ty.call(t,i))&&r.push(i);t=r}else{var i=[];if(null!=t)for(n in Object(t))i.push(n);t=i}return t},Cs=function(t,n){return t&&re(n,kf(n),t)},Jl=$a(function(t,n){var r=(n=n&&!n.nodeType&&n)&&t&&!t.nodeType&&t,i=(n=r&&r.exports===n?Cb.Buffer:void 0)?n.allocUnsafe:void 0;t.exports=function(t,n){return n?t.slice():(n=t.length,n=i?i(n):new t.constructor(n),t.copy(n),n)}}),Xh=function(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n},uy=function(t,n){for(var r=-1,i=null==t?0:t.length,o=0,s=[];++r<i;){var a=t[r];n(a,r,t)&&(s[o++]=a)}return s},dq=function(){return[]},vy=Object.prototype.propertyIsEnumerable,eq=Object.getOwnPropertySymbols,zk=eq?function(t){return null==t?[]:uy(eq(t=Object(t)),function(n){return vy.call(t,n)})}:dq,Ds=function(t,n){return re(t,zk(t),n)},ai=function(t,n){for(var r=-1,i=n.length,o=t.length;++r<i;)t[o+r]=n[r];return t},Ak=cq(Object.getPrototypeOf,Object),fq=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)ai(n,zk(t)),t=Ak(t);return n}:dq,Bs=function(t,n){return re(t,fq(t),n)},gq=function(t,n,r){return n=n(t),Va(t)?n:ai(n,r(t))},Yh=function(t){return gq(t,Ad,zk)},Ll=function(t){return gq(t,kf,fq)},Bk=Sd(Cb,"DataView"),Ck=Sd(Cb,"Promise"),Dk=Sd(Cb,"WeakMap"),wy=Rd(Bk),xy=Rd(ag),yy=Rd(Ck),zy=Rd(Re),Ay=Rd(Dk),Td=Qd;(Bk&&"[object DataView]"!=Td(new Bk(new ArrayBuffer(1)))||ag&&"[object Map]"!=Td(new ag)||Ck&&"[object Promise]"!=Td(Ck.resolve())||Re&&"[object Set]"!=Td(new Re)||Dk&&"[object WeakMap]"!=Td(new Dk))&&(Td=function(t){var n=Qd(t);if(t=(t="[object Object]"==n?t.constructor:void 0)?Rd(t):"")switch(t){case wy:return"[object DataView]";case xy:return"[object Map]";case yy:return"[object Promise]";case zy:return"[object Set]";case Ay:return"[object WeakMap]"}return n});var hf=Td,By=Object.prototype.hasOwnProperty,As=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&By.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Ah=Cb.Uint8Array,Ek=function(t){var n=new t.constructor(t.byteLength);return new Ah(n).set(new Ah(t)),n},Cy=/\w*$/,hq=Pb?Pb.prototype:void 0,iq=hq?hq.valueOf:void 0,vm=function(t,n){return n=n?Ek(t.buffer):t.buffer,new t.constructor(n,t.byteOffset,t.length)},Fs=function(t,n,r){var i=t.constructor;switch(n){case"[object ArrayBuffer]":return Ek(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return n=r?Ek(t.buffer):t.buffer,new t.constructor(n,t.byteOffset,t.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vm(t,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return(n=new t.constructor(t.source,Cy.exec(t))).lastIndex=t.lastIndex,n;case"[object Symbol]":return iq?Object(iq.call(t)):{}}},jq=Object.create,Dy=function(){function t(){}return function(n){return lb(n)?jq?jq(n):(t.prototype=n,n=new t,t.prototype=void 0,n):{}}}(),Kl=function(t){return"function"!=typeof t.constructor||yk(t)?{}:Dy(Ak(t))},Ey=function(t){return gc(t)&&"[object Map]"==hf(t)},kq=Se&&Se.isMap,Hs=kq?zh(kq):Ey,Fy=function(t){return gc(t)&&"[object Set]"==hf(t)},lq=Se&&Se.isSet,Gs=lq?zh(lq):Fy,wa={};wa["[object Arguments]"]=wa["[object Array]"]=wa["[object ArrayBuffer]"]=wa["[object DataView]"]=wa["[object Boolean]"]=wa["[object Date]"]=wa["[object Float32Array]"]=wa["[object Float64Array]"]=wa["[object Int8Array]"]=wa["[object Int16Array]"]=wa["[object Int32Array]"]=wa["[object Map]"]=wa["[object Number]"]=wa["[object Object]"]=wa["[object RegExp]"]=wa["[object Set]"]=wa["[object String]"]=wa["[object Symbol]"]=wa["[object Uint8Array]"]=wa["[object Uint8ClampedArray]"]=wa["[object Uint16Array]"]=wa["[object Uint32Array]"]=!0,wa["[object Error]"]=wa["[object Function]"]=wa["[object WeakMap]"]=!1;var ie=function(t){return"symbol"==X(t)||gc(t)&&"[object Symbol]"==Qd(t)},Gy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hy=/^\w*$/,Fk=function(t,n){if(Va(t))return!1;var r=X(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ie(t))||Hy.test(t)||!Gy.test(t)||null!=n&&t in Object(n)};Zh.Cache=qg;var Iy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jy=/\\(\\)?/g,Ky=function(t){var n=(t=Zh(t,function(t){return 500===n.size&&n.clear(),t})).cache;return t}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Iy,function(t,r,i,o){n.push(i?o.replace(Jy,"$1"):r||t)}),n}),Js=1/0,mq=Pb?Pb.prototype:void 0,Ol=mq?mq.toString:void 0,Bh=function(t,n){return Va(t)?t:Fk(t,n)?[t]:Ky(null==t?"":Nl(t))},Ly=1/0,cg=function(t){if("string"==typeof t||ie(t))return t;var n=t+"";return"0"==n&&1/t==-Ly?"-0":n},Ch=function(t,n){for(var r=0,i=(n=Bh(n,t)).length;null!=t&&r<i;)t=t[cg(n[r++])];return r&&r==i?t:void 0},My=function(t,n){if(!(2>(n=Bh(n,t)).length)){var r=n,i=0,o=-1,s=-1,a=r.length;for(0>i&&(i=-i>a?0:a+i),0>(o=o>a?a:o)&&(o+=a),a=i>o?0:o-i>>>0,i>>>=0,o=Array(a);++s<a;)o[s]=r[s+i];t=Ch(t,o)}return(r=null==t)||(r=null==n?0:n.length,r=delete t[cg(r?n[r-1]:void 0)]),r},nq=Function.prototype.toString,Ny=Object.prototype.hasOwnProperty,Oy=nq.call(Object),wm=function(t){return!(!gc(t)||"[object Object]"!=Qd(t))&&(null===(t=Ak(t))||"function"==typeof(t=Ny.call(t,"constructor")&&t.constructor)&&t instanceof t&&nq.call(t)==Oy)},Py=function(t){return wm(t)?void 0:t},oq=Pb?Pb.isConcatSpreadable:void 0,Ks=function(t){return Va(t)||rf(t)||!!(oq&&t&&t[oq])},Qy=function(t){return null!=t&&t.length?$h(t,1):[]},Ry=function(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)},pq=Math.max,qq=function(t,n,r){return n=pq(void 0===n?t.length-1:n,0),function(){for(var i=arguments,o=-1,s=pq(i.length-n,0),a=Array(s);++o<s;)a[o]=i[n+o];for(o=-1,s=Array(n+1);++o<n;)s[o]=i[o];return s[n]=r(a),Ry(t,this,s)}},Sy=function(t){return function(){return t}},Dh=function(t){return t},Ty=Date.now,rq=function(t){var n=0,r=0;return function(){var i=Ty(),o=16-(i-r);if(r=i,0<o){if(800<=++n)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(yh?function(t,n){return yh(t,"toString",{configurable:!0,enumerable:!1,value:Sy(n),writable:!0})}:Dh),Gk=function(t){return rq(qq(t,void 0,Qy),t+"")}(function(t,n){var r={};if(null==t)return r;var i=!1;n=he(n,function(n){return n=Bh(n,t),i||(i=1<n.length),n}),re(t,Ll(t),r),i&&(r=fe(r,7,Py));for(var o=n.length;o--;)My(r,n[o]);return r}),Uy=function(t,n,r,i){for(var o=-1,s=null==t?0:t.length;++o<s;){var a=t[o];n(i,a,r(a),t)}return i},um=function(t,n,r){for(var i=-1,o=Object(t),s=(r=r(t)).length;s--;){var a=r[++i];if(!1===n(o[a],a,o))break}return t},sq=function(t,n){return t&&um(t,n,Ad)},Hk=function(t,n){return function(n,r){if(null==n)return n;if(!Ed(n))return t(n,r);for(var i=n.length,o=-1,s=Object(n);++o<i&&!1!==r(s[o],o,s););return n}}(sq),Vy=function(t,n,r,i){return Hk(t,function(t,o,s){n(i,t,r(t),s)}),i},tq=function(t,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1},Pl=function(t,n,r,i,o,s){var a=1&r,u=t.length,c=n.length;if(u!=c&&!(a&&c>u))return!1;c=s.get(t);var l=s.get(n);if(c&&l)return c==n&&l==t;c=-1,l=!0;var f=2&r?new gf:void 0;for(s.set(t,n),s.set(n,t);++c<u;){var h=t[c],p=n[c];if(i)var d=a?i(p,h,c,n,t,s):i(h,p,c,t,n,s);if(void 0!==d){if(d)continue;l=!1;break}if(f){if(!tq(n,function(t,n){if(!f.has(n)&&(h===t||o(h,t,r,i,s)))return f.push(n)})){l=!1;break}}else if(h!==p&&!o(h,p,r,i,s)){l=!1;break}}return s.delete(t),s.delete(n),l},Wy=function(t){var n=-1,r=Array(t.size);return t.forEach(function(t,i){r[++n]=[i,t]}),r},uq=Pb?Pb.prototype:void 0,Ik=uq?uq.valueOf:void 0,Ls=function(t,n,r,i,o,s,a){switch(r){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)break;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":if(t.byteLength!=n.byteLength||!s(new Ah(t),new Ah(n)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return $f(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var u=Wy;case"[object Set]":if(u||(u=uk),t.size!=n.size&&!(1&i))break;return(r=a.get(t))?r==n:(i|=2,a.set(t,n),n=Pl(u(t),u(n),i,o,s,a),a.delete(t),n);case"[object Symbol]":if(Ik)return Ik.call(t)==Ik.call(n)}return!1},Ms=Object.prototype.hasOwnProperty,Ql=Object.prototype.hasOwnProperty,Xy=function(t,n,r,i){var o=r.length,s=o,a=!i;if(null==t)return!s;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=r[o])[0],l=t[c],f=u[1];if(a&&u[2]){if(void 0===l&&!(c in t))return!1}else{if(u=new ge,i)var h=i(l,f,c,t,n,u);if(void 0===h?!je(f,l,3,i,u):!h)return!1}}return!0},Yy=function(t){for(var n=Ad(t),r=n.length;r--;){var i=n[r],o=t[i];n[r]=[i,o,o==o&&!lb(o)]}return n},vq=function(t,n){return function(r){return null!=r&&r[t]===n&&(void 0!==n||t in Object(r))}},Zy=function(t){var n=Yy(t);return 1==n.length&&n[0][2]?vq(n[0][0],n[0][1]):function(r){return r===t||Xy(r,t,n)}},$y=function(t,n){return Fk(t)&&n==n&&!lb(n)?vq(cg(t),n):function(r){var i=null==r?void 0:Ch(r,t);if(void 0===(i=void 0===i?void 0:i)&&i===n){if(i=null!=r){for(var o=-1,s=(i=Bh(i=t,r)).length,a=!1;++o<s;){var u=cg(i[o]);if(!(a=null!=r&&null!=r&&u in Object(r)))break;r=r[u]}i=a||++o!=s?a:!!(s=null==r?0:r.length)&&xk(s)&&wk(u,s)&&(Va(r)||rf(r))}u=i}else u=je(n,i,3);return u}},az=function(t){return function(n){return null==n?void 0:n[t]}},bz=function(t){return function(n){return Ch(n,t)}},Te=function(t){return"function"==typeof t?t:null==t?Dh:"object"==X(t)?Va(t)?$y(t[0],t[1]):Zy(t):Fk(t)?az(cg(t)):bz(t)},Jk=function(t,n){return function(n,r){var i={};return(Va(n)?Uy:Vy)(n,t,Te(r),i)}}(function(t,n,r){bg(t,r,n)}),uc=function(t,n){var r={};return n=Te(n),sq(t,function(t,i,o){bg(r,i,n(t,i,o))}),r};N({target:"String",proto:!0,forced:R(function(){var t="".sub('"');return t!==t.toLowerCase()||3<t.split('"').length})},{sub:function(){return"<sub>"+String(jb(this))+"</sub>"}});var U=xa,Qb=null;try{Qb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c){}xa.prototype.__isLong__,Object.defineProperty(xa.prototype,"__isLong__",{value:!0}),xa.isLong=mb;var Sl={},Rl={};xa.fromInt=Bd,xa.fromNumber=Gb,xa.fromBits=ya;var sg=Math.pow;xa.fromString=ci,xa.fromValue=Wb;var ke=0x100000000,Tl=ke*ke,Vl=Tl/2,wq=Bd(0x1000000),Hb=Bd(0);xa.ZERO=Hb;var Cd=Bd(0,!0);xa.UZERO=Cd;var Ue=Bd(1);xa.ONE=Ue;var xq=Bd(1,!0);xa.UONE=xq;var Kk=Bd(-1);xa.NEG_ONE=Kk;var Wl=ya(-1,0x7fffffff,!1);xa.MAX_VALUE=Wl;var Ul=ya(-1,-1,!0);xa.MAX_UNSIGNED_VALUE=Ul;var nb=ya(0,-0x80000000,!1);xa.MIN_VALUE=nb;var D=xa.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*ke+(this.low>>>0):this.high*ke+(this.low>>>0)},D.toString=function(t){if(2>(t=t||10)||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(nb)){var n=Gb(t),r=this.div(n);return n=r.mul(n).sub(this),r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}r=Gb(sg(t,6),this.unsigned),n=this;for(var i="";;){var o=n.div(r),s=(n.sub(o.mul(r)).toInt()>>>0).toString(t);if((n=o).isZero())return s+i;for(;6>s.length;)s="0"+s;i=""+s+i}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nb)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;0<n&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},D.isZero=function(){return 0===this.high&&0===this.low},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&0>this.high},D.isPositive=function(){return this.unsigned||0<=this.high},D.isOdd=function(){return 1==(1&this.low)},D.isEven=function(){return 0==(1&this.low)},D.equals=function(t){return mb(t)||(t=Wb(t)),(this.unsigned===t.unsigned||1!=this.high>>>31||1!=t.high>>>31)&&this.high===t.high&&this.low===t.low},D.eq=D.equals,D.notEquals=function(t){return!this.eq(t)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(t){return 0>this.comp(t)},D.lt=D.lessThan,D.lessThanOrEqual=function(t){return 0>=this.comp(t)},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(t){return 0<this.comp(t)},D.gt=D.greaterThan,D.greaterThanOrEqual=function(t){return 0<=this.comp(t)},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(t){if(mb(t)||(t=Wb(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(nb)?nb:this.not().add(Ue)},D.neg=D.negate,D.add=function(t){mb(t)||(t=Wb(t));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=t.high>>>16,s=65535&t.high,a=t.low>>>16;return i=(a=((t=(65535&this.low)+(65535&t.low))>>>16)+(i+a))>>>16,ya((65535&a)<<16|65535&t,(n=((i+=r+s)>>>16)+(n+o)&65535)<<16|65535&i,this.unsigned)},D.subtract=function(t){return mb(t)||(t=Wb(t)),this.add(t.neg())},D.sub=D.subtract,D.multiply=function(t){if(this.isZero())return Hb;if(mb(t)||(t=Wb(t)),Qb){var n=Qb.mul(this.low,this.high,t.low,t.high);return ya(n,Qb.get_high(),this.unsigned)}if(t.isZero())return Hb;if(this.eq(nb))return t.isOdd()?nb:Hb;if(t.eq(nb))return this.isOdd()?nb:Hb;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(wq)&&t.lt(wq))return Gb(this.toNumber()*t.toNumber(),this.unsigned);n=this.high>>>16;var r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=o*(t=65535&t.low),l=(c>>>16)+i*t,f=l>>>16,h=(f+=((l=(65535&l)+o*u)>>>16)+r*t)>>>16;return ya((65535&l)<<16|65535&c,(h=(h+=(f=(65535&f)+i*u)>>>16)+((f=(65535&f)+o*a)>>>16)+(n*t+r*u+i*a+o*s)&65535)<<16|65535&f,this.unsigned)},D.mul=D.multiply,D.divide=function(t){if(mb(t)||(t=Wb(t)),t.isZero())throw Error("division by zero");if(Qb)return this.unsigned||-0x80000000!==this.high||-1!==t.low||-1!==t.high?ya(t=(this.unsigned?Qb.div_u:Qb.div_s)(this.low,this.high,t.low,t.high),Qb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Cd:Hb;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Cd;if(t.gt(this.shru(1)))return xq;var n=Cd}else{if(this.eq(nb)){if(t.eq(Ue)||t.eq(Kk))return nb;if(t.eq(nb))return Ue;var r=this.shr(1).div(t).shl(1);if(r.eq(Hb))return t.isNegative()?Ue:Kk;var i=this.sub(t.mul(r));return r.add(i.div(t))}if(t.eq(nb))return this.unsigned?Cd:Hb;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();n=Hb}for(i=this;i.gte(t);){var o=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/t.toNumber())))/Math.LN2);o=48>=o?1:sg(2,o-48);for(var s=Gb(r),a=s.mul(t);a.isNegative()||a.gt(i);)a=(s=Gb(r-=o,this.unsigned)).mul(t);s.isZero()&&(s=Ue),n=n.add(s),i=i.sub(a)}return n},D.div=D.divide,D.modulo=function(t){return mb(t)||(t=Wb(t)),Qb?ya(t=(this.unsigned?Qb.rem_u:Qb.rem_s)(this.low,this.high,t.low,t.high),Qb.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return ya(~this.low,~this.high,this.unsigned)},D.and=function(t){return mb(t)||(t=Wb(t)),ya(this.low&t.low,this.high&t.high,this.unsigned)},D.or=function(t){return mb(t)||(t=Wb(t)),ya(this.low|t.low,this.high|t.high,this.unsigned)},D.xor=function(t){return mb(t)||(t=Wb(t)),ya(this.low^t.low,this.high^t.high,this.unsigned)},D.shiftLeft=function(t){return mb(t)&&(t=t.toInt()),0==(t&=63)?this:32>t?ya(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ya(0,this.low<<t-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(t){return mb(t)&&(t=t.toInt()),0==(t&=63)?this:32>t?ya(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ya(this.high>>t-32,0<=this.high?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(t){if(mb(t)&&(t=t.toInt()),0==(t&=63))return this;var n=this.high;return 32>t?ya(this.low>>>t|n<<32-t,n>>>t,this.unsigned):ya(32===t?n:n>>>t-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?ya(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:ya(this.low,this.high,!0)},D.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var t=this.high,n=this.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},D.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]},xa.fromBytes=function(t,n,r){return r?xa.fromBytesLE(t,n):xa.fromBytesBE(t,n)},xa.fromBytesLE=function(t,n){return new xa(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)},xa.fromBytesBE=function(t,n){return new xa(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var di=function(t,n){return(di=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)},Lk=!1,Ib={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):Lk&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),Lk=e},get useDeprecatedSynchronousErrorHandling(){return Lk}},Eh={closed:!0,next:function(t){},error:function(t){if(Ib.useDeprecatedSynchronousErrorHandling)throw t;me(t)},complete:function(){}},Jb=Array.isArray||function(t){return t&&"number"==typeof t.length},lf=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Oa=function(){function t(t){this.closed=!1,this._subscriptions=this._parentOrParents=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(le(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(t){var a=t instanceof lf?Xl(t.errors):[t]}}if(Jb(o)){for(s=-1,n=o.length;++s<n;)if(ei(r=o[s]))try{r.unsubscribe()}catch(t){a=a||[],t instanceof lf?a=a.concat(Xl(t.errors)):a.push(t)}}if(a)throw new lf(a)}},t.prototype.add=function(n){var r=n;if(!n)return t.EMPTY;switch(X(n)){case"function":r=new t(n);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;r instanceof t||(n=r,(r=new t)._subscriptions=[n]);break;default:throw Error("unrecognized teardown "+n+" added to Subscription.")}if(null===(n=r._parentOrParents))r._parentOrParents=this;else if(n instanceof t){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}return null===(n=this._subscriptions)?this._subscriptions=[r]:n.push(r),r},t.prototype.remove=function(t){var n=this._subscriptions;n&&-1!==(t=n.indexOf(t))&&n.splice(t,1)},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}(),Fh="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ia=function(t){function n(r,i,o){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Eh;break;case 1:if(!r){s.destination=Eh;break}if("object"===X(r)){r instanceof n?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new yq(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new yq(s,r,i,o)}return s}return O(n,t),n.prototype[Fh]=function(){return this},n.create=function(t,r,i){return(t=new n(t,r,i)).syncErrorThrowable=!1,t},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=t,this},n}(Oa),yq=function(t){function n(n,r,i,o){var s=t.call(this)||this;if(s._parentSubscriber=n,n=s,le(r))var a=r;else r&&(a=r.next,i=r.error,o=r.complete,r!==Eh&&(le((n=Object.create(r)).unsubscribe)&&s.add(n.unsubscribe.bind(n)),n.unsubscribe=s.unsubscribe.bind(s)));return s._context=n,s._next=a,s._error=i,s._complete=o,s}return O(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;Ib.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,r=Ib.useDeprecatedSynchronousErrorHandling;if(this._error)r&&n.syncErrorThrowable?this.__tryOrSetError(n,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(n.syncErrorThrowable)r?(n.syncErrorValue=t,n.syncErrorThrown=!0):me(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;me(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};Ib.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,r):this.__tryOrUnsub(r)}this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),Ib.useDeprecatedSynchronousErrorHandling)throw t;me(t)}},n.prototype.__tryOrSetError=function(t,n,r){if(!Ib.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{n.call(this._context,r)}catch(n){return Ib.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0):me(n),!0}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._parentSubscriber=this._context=null,t.unsubscribe()},n}(ia),ne="function"==typeof Symbol&&Symbol.observable||"@@observable",Y=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var r=new t;return r.source=this,r.operator=n,r},t.prototype.subscribe=function(t,n,r){var i=this.operator;e:{if(t){if(t instanceof ia)break e;if(t[Fh]){t=t[Fh]();break e}}t=t||n||r?new ia(t,n,r):new ia(Eh)}if(i?t.add(i.call(t,this.source)):t.add(this.source||Ib.useDeprecatedSynchronousErrorHandling&&!t.syncErrorThrowable?this._subscribe(t):this._trySubscribe(t)),Ib.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable&&(t.syncErrorThrowable=!1,t.syncErrorThrown))throw t.syncErrorValue;return t},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){Ib.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),fi(t)?t.error(n):console.warn(n)}},t.prototype.forEach=function(t,n){var r=this;return new(n=Zl(n))(function(n,i){var o=r.subscribe(function(n){try{t(n)}catch(t){i(t),o&&o.unsubscribe()}},i,n)})},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[ne]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:Yl(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=Zl(t))(function(t,r){var i;n.subscribe(function(t){return i=t},function(t){return r(t)},function(){return t(i)})})},t.create=function(n){return new t(n)},t}(),qd=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),zq=function(t){function n(n,r){var i=t.call(this)||this;return i.subject=n,i.subscriber=r,i.closed=!1,i}return O(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;this.subject=null,!n||0===n.length||t.isStopped||t.closed||-1!==(t=n.indexOf(this.subscriber))&&n.splice(t,1)}},n}(Oa),Aq=function(t){function n(n){var r=t.call(this,n)||this;return r.destination=n,r}return O(n,t),n}(ia),Pa=function(t){function n(){var n=t.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return O(n,t),n.prototype[Fh]=function(){return new Aq(this)},n.prototype.lift=function(t){var n=new Bq(this,this);return n.operator=t,n},n.prototype.next=function(t){if(this.closed)throw new qd;if(!this.isStopped){var n=this.observers,r=n.length;n=n.slice();for(var i=0;i<r;i++)n[i].next(t)}},n.prototype.error=function(t){if(this.closed)throw new qd;this.hasError=!0,this.thrownError=t,this.isStopped=!0;var n=this.observers,r=n.length;n=n.slice();for(var i=0;i<r;i++)n[i].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new qd;this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new qd;return t.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(t){if(this.closed)throw new qd;return this.hasError?(t.error(this.thrownError),Oa.EMPTY):this.isStopped?(t.complete(),Oa.EMPTY):(this.observers.push(t),new zq(this,t))},n.prototype.asObservable=function(){var t=new Y;return t.source=this,t},n.create=function(t,n){return new Bq(t,n)},n}(Y),Bq=function(t){function n(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return O(n,t),n.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},n.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Oa.EMPTY},n}(Pa),Ns=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,n){var r=this.connectable;return r._refCount++,t=new cz(t,r),n=n.subscribe(t),t.closed||(t.connection=r.connect()),n},t}(),cz=function(t){function n(n,r){return(n=t.call(this,n)||this).connectable=r,n}return O(n,t),n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var n=t._refCount;0>=n?this.connection=null:(t._refCount=n-1,1<n?this.connection=null:(n=this.connection,t=t._connection,this.connection=null,!t||n&&t!==n||t.unsubscribe()))}else this.connection=null},n}(ia),Cq=function(t){function n(n,r){var i=t.call(this)||this;return i.source=n,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return O(n,t),n.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},n.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new Oa).add(this.source.subscribe(new dz(this.getSubject(),this))),t.closed&&(this._connection=null,t=Oa.EMPTY)),t},n.prototype.refCount=function(){return $l()(this)},n}(Y),At=function(){var t=Cq.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),dz=function(t){function n(n,r){return(n=t.call(this,n)||this).connectable=r,n}return O(n,t),n.prototype._error=function(n){this._unsubscribe(),t.prototype._error.call(this,n)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}},n}(Aq);!function(t){function n(n,r){return(n=t.call(this,n)||this).connectable=r,n}O(n,t),n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var n=t._refCount;0>=n?this.connection=null:(t._refCount=n-1,1<n?this.connection=null:(n=this.connection,t=t._connection,this.connection=null,!t||n&&t!==n||t.unsubscribe()))}else this.connection=null}}(ia),function(t){function n(n,r,i,o,s){return(n=t.call(this,n)||this).keySelector=r,n.elementSelector=i,n.durationSelector=o,n.subjectSelector=s,n.groups=null,n.attemptedToUnsubscribe=!1,n.count=0,n}O(n,t),n.prototype._next=function(t){try{var n=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,n)},n.prototype._group=function(t,n){var r=this.groups;r||(r=this.groups=new Map);var i=r.get(n);if(this.elementSelector)try{var o=this.elementSelector(t)}catch(t){this.error(t)}else o=t;if(!i&&(i=this.subjectSelector?this.subjectSelector():new Pa,r.set(n,i),t=new Mk(n,i,this),this.destination.next(t),this.durationSelector)){t=void 0;try{t=this.durationSelector(new Mk(n,i))}catch(t){return void this.error(t)}this.add(t.subscribe(new ez(n,i,this)))}i.closed||i.next(o)},n.prototype._error=function(t){var n=this.groups;n&&(n.forEach(function(n,r){n.error(t)}),n.clear()),this.destination.error(t)},n.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,n){t.complete()}),t.clear()),this.destination.complete()},n.prototype.removeGroup=function(t){this.groups.delete(t)},n.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))}}(ia);var Ok,ez=function(t){function n(n,r,i){var o=t.call(this,r)||this;return o.key=n,o.group=r,o.parent=i,o}return O(n,t),n.prototype._next=function(t){this.complete()},n.prototype._unsubscribe=function(){var t=this.parent,n=this.key;this.key=this.parent=null,t&&t.removeGroup(n)},n}(ia),Mk=function(t){function n(n,r,i){var o=t.call(this)||this;return o.key=n,o.groupSubject=r,o.refCountSubscription=i,o}return O(n,t),n.prototype._subscribe=function(t){var n=new Oa,r=this.refCountSubscription,i=this.groupSubject;return r&&!r.closed&&n.add(new fz(r)),n.add(i.subscribe(t)),n},n}(Y),fz=function(t){function n(n){var r=t.call(this)||this;return r.parent=n,n.count++,r}return O(n,t),n.prototype.unsubscribe=function(){var n=this.parent;n.closed||this.closed||(t.prototype.unsubscribe.call(this),--n.count,0===n.count&&n.attemptedToUnsubscribe&&n.unsubscribe())},n}(Oa),gz=function(t){function n(n){var r=t.call(this)||this;return r._value=n,r}return O(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return r&&!r.closed&&n.next(this._value),r},n.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new qd;return this._value},n.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},n}(Pa),dg=function(t){function n(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return O(n,t),n.prototype.schedule=function(t,n){if(void 0===n&&(n=0),this.closed)return this;this.state=t,t=this.id;var r=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(r,t,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(r,this.id,n),this},n.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},n.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)},n.prototype.execute=function(t,n){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(t=this._execute(t,n))?t:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},n.prototype._execute=function(t,n){n=!1;var r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||Error(t)}if(n)return this.unsubscribe(),r},n.prototype._unsubscribe=function(){var t=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null},n}(function(t){function n(n,r){return t.call(this)||this}return O(n,t),n.prototype.schedule=function(t,n){return this},n}(Oa)),hz=function(t){function n(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return O(n,t),n.prototype.schedule=function(n,r){return void 0===r&&(r=0),0<r?t.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},n.prototype.execute=function(n,r){return 0<r||this.closed?t.prototype.execute.call(this,n,r):this._execute(n,r)},n.prototype.requestAsyncId=function(n,r,i){return void 0===i&&(i=0),null!==i&&0<i||null===i&&0<this.delay?t.prototype.requestAsyncId.call(this,n,r,i):n.flush(this)},n}(dg),Nk=function(){function t(n,r){void 0===r&&(r=t.now),this.SchedulerAction=n,this.now=r}return t.prototype.schedule=function(t,n,r){return void 0===n&&(n=0),new this.SchedulerAction(this,t).schedule(r,n)},t.now=function(){return Date.now()},t}(),eg=function(t){function n(r,i){void 0===i&&(i=Nk.now);var o=t.call(this,r,function(){return n.delegate&&n.delegate!==o?n.delegate.now():i()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return O(n,t),n.prototype.schedule=function(r,i,o){return void 0===i&&(i=0),n.delegate&&n.delegate!==this?n.delegate.schedule(r,i,o):t.prototype.schedule.call(this,r,i,o)},n.prototype.flush=function(t){var n,r=this.actions;if(this.active)r.push(t);else{this.active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=r.shift());if(this.active=!1,n){for(;t=r.shift();)t.unsubscribe();throw n}}},n}(Nk),fg=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return O(n,t),n}(eg))(hz),vb=new Y(function(t){return t.complete()}),am=function(t){return function(n){for(var r=0,i=t.length;r<i&&!n.closed;r++)n.next(t[r]);n.complete()}};!function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"}(Ok||(Ok={}));var Ve=function(){function t(t,n,r){this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,n,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,n,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,n,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return bb(this.value);case"E":return Z(this.error);case"C":return mf()}throw Error("unexpected notification kind value")},t.createNext=function(n){return void 0!==n?new t("N",n):t.undefinedValueNotification},t.createError=function(n){return new t("E",void 0,n)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Rs=function(){function t(t,n){void 0===n&&(n=0),this.scheduler=t,this.delay=n}return t.prototype.call=function(t,n){return n.subscribe(new Dq(t,this.scheduler,this.delay))},t}(),Dq=function(t){function n(n,r,i){return void 0===i&&(i=0),(n=t.call(this,n)||this).scheduler=r,n.delay=i,n}return O(n,t),n.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},n.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new iz(t,this.destination)))},n.prototype._next=function(t){this.scheduleMessage(Ve.createNext(t))},n.prototype._error=function(t){this.scheduleMessage(Ve.createError(t)),this.unsubscribe()},n.prototype._complete=function(){this.scheduleMessage(Ve.createComplete()),this.unsubscribe()},n}(ia),iz=function(t,n){this.notification=t,this.destination=n},qe=function(t){function n(n,r,i){void 0===n&&(n=1/0),void 0===r&&(r=1/0);var o=t.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=1>n?1:n,o._windowTime=1>r?1:r,r===1/0?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return O(n,t),n.prototype.nextInfiniteTimeWindow=function(n){if(!this.isStopped){var r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}t.prototype.next.call(this,n)},n.prototype.nextTimeWindow=function(n){this.isStopped||(this._events.push(new jz(this._getNow(),n)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,n)},n.prototype._subscribe=function(t){var n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new qd;if(this.isStopped||this.hasError)var s=Oa.EMPTY;else this.observers.push(t),s=new zq(this,t);if(i&&t.add(t=new Dq(t,i)),n)for(n=0;n<o&&!t.closed;n++)t.next(r[n]);else for(n=0;n<o&&!t.closed;n++)t.next(r[n].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s},n.prototype._getNow=function(){return(this.scheduler||fg).now()},n.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length,s=0;s<o&&!(t-i[s].time<r);)s++;return o>n&&(s=Math.max(s,o-n)),0<s&&i.splice(0,s),i},n}(Pa),jz=function(t,n){this.time=t,this.value=n},of=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.value=null,n.hasNext=!1,n.hasCompleted=!1,n}return O(n,t),n.prototype._subscribe=function(n){return this.hasError?(n.error(this.thrownError),Oa.EMPTY):this.hasCompleted&&this.hasNext?(n.next(this.value),n.complete(),Oa.EMPTY):t.prototype._subscribe.call(this,n)},n.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},n.prototype.error=function(n){this.hasCompleted||t.prototype.error.call(this,n)},n.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},n}(Pa),kz=1,lz=Promise.resolve(),ii={},Eq={setImmediate:function(t){var n=kz++;return ii[n]=!0,lz.then(function(){return bm(n)&&t()}),n},clearImmediate:function(t){bm(t)}},mz=function(t){function n(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return O(n,t),n.prototype.requestAsyncId=function(n,r,i){return void 0===i&&(i=0),null!==i&&0<i?t.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n.scheduled||(n.scheduled=Eq.setImmediate(n.flush.bind(n,null))))},n.prototype.recycleAsyncId=function(n,r,i){if(void 0===i&&(i=0),null!==i&&0<i||null===i&&0<this.delay)return t.prototype.recycleAsyncId.call(this,n,r,i);0===n.actions.length&&(Eq.clearImmediate(r),n.scheduled=void 0)},n}(dg),ri=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return O(n,t),n.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var n,r=this.actions,i=-1,o=r.length;t=t||r.shift();do if(n=t.execute(t.state,t.delay))break;while(++i<o&&(t=r.shift()));if(this.active=!1,n){for(;++i<o&&(t=r.shift());)t.unsubscribe();throw n}},n}(eg))(mz),nz=ri,Pk=new eg(dg),bd=Pk,oz=function(t){function n(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return O(n,t),n.prototype.requestAsyncId=function(n,r,i){return void 0===i&&(i=0),null!==i&&0<i?t.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(function(){return n.flush(null)})))},n.prototype.recycleAsyncId=function(n,r,i){if(void 0===i&&(i=0),null!==i&&0<i||null===i&&0<this.delay)return t.prototype.recycleAsyncId.call(this,n,r,i);0===n.actions.length&&(cancelAnimationFrame(r),n.scheduled=void 0)},n}(dg),Fq=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return O(n,t),n.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var n,r=this.actions,i=-1,o=r.length;t=t||r.shift();do if(n=t.execute(t.state,t.delay))break;while(++i<o&&(t=r.shift()));if(this.active=!1,n){for(;++i<o&&(t=r.shift());)t.unsubscribe();throw n}},n}(eg))(oz),pz=function(t){function n(n,r){void 0===n&&(n=Gq),void 0===r&&(r=1/0);var i=t.call(this,n,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return O(n,t),n.prototype.flush=function(){for(var t,n,r=this.actions,i=this.maxFrames;(n=r[0])&&n.delay<=i&&(r.shift(),this.frame=n.delay,!(t=n.execute(n.state,n.delay))););if(t){for(;n=r.shift();)n.unsubscribe();throw t}},n.frameTimeFactor=10,n}(eg),Gq=function(t){function n(n,r,i){void 0===i&&(i=n.index+=1);var o=t.call(this,n,r)||this;return o.scheduler=n,o.work=r,o.index=i,o.active=!0,o.index=n.index=i,o}return O(n,t),n.prototype.schedule=function(r,i){if(void 0===i&&(i=0),!this.id)return t.prototype.schedule.call(this,r,i);this.active=!1;var o=new n(this.scheduler,this.work);return this.add(o),o.schedule(r,i)},n.prototype.requestAsyncId=function(t,r,i){return void 0===i&&(i=0),this.delay=t.frame+i,(t=t.actions).push(this),t.sort(n.sortActions),!0},n.prototype.recycleAsyncId=function(t,n,r){},n.prototype._execute=function(n,r){if(!0===this.active)return t.prototype._execute.call(this,n,r)},n.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},n}(dg),Qk=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),vg=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),pb=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}(),Ss=function(){function t(t,n){this.project=t,this.thisArg=n}return t.prototype.call=function(t,n){return n.subscribe(new qz(t,this.project,this.thisArg))},t}(),qz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).project=r,n.count=0,n.thisArg=i||n,n}return O(n,t),n.prototype._next=function(t){try{var n=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(ia),Rk=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return O(n,t),n.prototype.notifyNext=function(t,n,r,i,o){this.destination.next(n)},n.prototype.notifyError=function(t,n){this.destination.error(t)},n.prototype.notifyComplete=function(t){this.destination.complete()},n}(ia),Xs=function(t){function n(n,r,i){var o=t.call(this)||this;return o.parent=n,o.outerValue=r,o.outerIndex=i,o.index=0,o}return O(n,t),n.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},n.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(ia),rz=function(t){return function(n){return t.then(function(t){n.closed||(n.next(t),n.complete())},function(t){return n.error(t)}).then(null,me),n}},$c="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",sz=function(t){return function(n){for(var r=t[$c]();;){var i=void 0;try{i=r.next()}catch(t){return n.error(t),n}if(i.done){n.complete();break}if(n.next(i.value),n.closed)break}return"function"==typeof r.return&&n.add(function(){r.return&&r.return()}),n}},tz=function(t){return function(n){var r=t[ne]();if("function"!=typeof r.subscribe)throw TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(n)}},hm=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t},pf=function(t){if(t&&"function"==typeof t[ne])return tz(t);if(hm(t))return am(t);if(fm(t))return rz(t);if(t&&"function"==typeof t[$c])return sz(t);throw TypeError("You provided "+(t=ei(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Hq={},vz=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,n){return n.subscribe(new uz(t,this.resultSelector))},t}(),uz=function(t){function n(n,r){return(n=t.call(this,n)||this).resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return O(n,t),n.prototype._next=function(t){this.values.push(Hq),this.observables.push(t)},n.prototype._complete=function(){var t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.toRespond=this.active=n;for(var r=0;r<n;r++)this.add(ji(this,t[r],void 0,r))}},n.prototype.notifyComplete=function(t){0==--this.active&&this.destination.complete()},n.prototype.notifyNext=function(t,n,r){var i=(t=this.values)[r];i=this.toRespond?i===Hq?--this.toRespond:this.toRespond:0,t[r]=n,0===i&&(this.resultSelector?this._tryResultSelector(t):this.destination.next(t.slice()))},n.prototype._tryResultSelector=function(t){try{var n=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(Rk),vc=function(t){function n(n){var r=t.call(this)||this;return r.parent=n,r}return O(n,t),n.prototype._next=function(t){this.parent.notifyNext(t)},n.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},n}(ia);!function(t){function n(n,r,i){var o=t.call(this)||this;return o.parent=n,o.outerValue=r,o.outerIndex=i,o}O(n,t),n.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this)},n.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(ia);var wc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return O(n,t),n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyError=function(t){this.destination.error(t)},n.prototype.notifyComplete=function(){this.destination.complete()},n}(ia);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}O(n,t),n.prototype.notifyNext=function(t,n,r,i){this.destination.next(n)},n.prototype.notifyError=function(t){this.destination.error(t)},n.prototype.notifyComplete=function(t){this.destination.complete()}}(ia);var at=function(){function t(t,n){void 0===n&&(n=1/0),this.project=t,this.concurrent=n}return t.prototype.call=function(t,n){return n.subscribe(new wz(t,this.project,this.concurrent))},t}(),wz=function(t){function n(n,r,i){return void 0===i&&(i=1/0),(n=t.call(this,n)||this).project=r,n.concurrent=i,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return O(n,t),n.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},n.prototype._tryNext=function(t){var n=this.index++;try{var r=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(r)},n.prototype._innerSub=function(t){var n=new vc(this),r=this.destination;r.add(n),(t=ic(t,n))!==n&&r.add(t)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyComplete=function(){var t=this.buffer;this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(wc),Sk=y.parseFloat,Iq=-1/0!=1/Sk("	\n\v\f\r \xa0áââââââââââââ¯âã\u2028\u2029\uFEFF-0")?function(t){var n=Sk(t=ik(String(t)));return 0===n&&"-"==t.charAt(0)?-0:n}:Sk;N({global:!0,forced:parseFloat!=Iq},{parseFloat:Iq});var Tk=new Y(hc),ft=function(){function t(t,n){this.predicate=t,this.thisArg=n}return t.prototype.call=function(t,n){return n.subscribe(new xz(t,this.predicate,this.thisArg))},t}(),xz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).predicate=r,n.thisArg=i,n.count=0,n}return O(n,t),n.prototype._next=function(t){try{var n=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}n&&this.destination.next(t)},n}(ia),gt=function(){function t(){}return t.prototype.call=function(t,n){return n.subscribe(new yz(t))},t}(),yz=function(t){function n(n){return(n=t.call(this,n)||this).hasFirst=!1,n.observables=[],n.subscriptions=[],n}return O(n,t),n.prototype._next=function(t){this.observables.push(t)},n.prototype._complete=function(){var t=this.observables,n=t.length;if(0===n)this.destination.complete();else{for(var r=0;r<n&&!this.hasFirst;r++){var i=ji(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},n.prototype.notifyNext=function(t,n,r){if(!this.hasFirst){for(this.hasFirst=!0,t=0;t<this.subscriptions.length;t++)if(t!==r){var i=this.subscriptions[t];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(n)},n}(Rk),jt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,n){return n.subscribe(new zz(t,this.resultSelector))},t}(),zz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).resultSelector=r,n.iterators=[],n.active=0,n.resultSelector="function"==typeof r?r:void 0,n}return O(n,t),n.prototype._next=function(t){var n=this.iterators;Jb(t)?n.push(new Az(t)):"function"==typeof t[$c]?n.push(new Bz(t[$c]())):n.push(new Cz(this.destination,this,t))},n.prototype._complete=function(){var t=this.iterators,n=t.length;if(this.unsubscribe(),0===n)this.destination.complete();else{this.active=n;for(var r=0;r<n;r++){var i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}},n.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},n.prototype.checkIterators=function(){for(var t=this.iterators,n=t.length,r=this.destination,i=0;i<n;i++){var o=t[i];if("function"==typeof o.hasValue&&!o.hasValue())return}var s=!1,a=[];for(i=0;i<n;i++){var u=(o=t[i]).next();if(o.hasCompleted()&&(s=!0),u.done)return void r.complete();a.push(u.value)}this.resultSelector?this._tryresultSelector(a):r.next(a),s&&r.complete()},n.prototype._tryresultSelector=function(t){try{var n=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(ia),Bz=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return!(!t||!t.done)},t}(),Az=function(){function t(t){this.array=t,this.length=this.index=0,this.length=t.length}return t.prototype[$c]=function(){return this},t.prototype.next=function(t){t=this.index++;var n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Cz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).parent=r,n.observable=i,n.stillUnsubscribed=!0,n.buffer=[],n.isComplete=!1,n}return O(n,t),n.prototype[$c]=function(){return this},n.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},n.prototype.hasValue=function(){return 0<this.buffer.length},n.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},n.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},n.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},n.prototype.subscribe=function(){return ic(this.observable,new vc(this))},n}(wc),Dz=Object.freeze({__proto__:null,Observable:Y,ConnectableObservable:Cq,GroupedObservable:Mk,observable:ne,Subject:Pa,BehaviorSubject:gz,ReplaySubject:qe,AsyncSubject:of,asap:nz,asapScheduler:ri,async:bd,asyncScheduler:Pk,queue:fg,queueScheduler:fg,animationFrame:Fq,animationFrameScheduler:Fq,VirtualTimeScheduler:pz,VirtualAction:Gq,Scheduler:Nk,Subscription:Oa,Subscriber:ia,Notification:Ve,get NotificationKind(){return Ok},pipe:gi,noop:hc,identity:Yc,isObservable:function(t){return!!t&&(t instanceof Y||"function"==typeof t.lift&&"function"==typeof t.subscribe)},ArgumentOutOfRangeError:Qk,EmptyError:vg,ObjectUnsubscribedError:qd,UnsubscriptionError:lf,TimeoutError:pb,bindCallback:cm,bindNodeCallback:dm,combineLatest:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=n=void 0;return Zc(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Jb(t[0])&&(t=t[0]),nf(t,r).lift(new vz(n))},concat:im,defer:ad,empty:mf,forkJoin:jm,from:Kb,fromEvent:gb,fromEventPattern:lm,generate:function(t,n,r,i,o){if(1==arguments.length){var s=t.initialState;n=t.condition,r=t.iterate;var a=t.resultSelector||Yc;o=t.scheduler}else void 0===i||Zc(i)?(s=t,a=Yc,o=i):(s=t,a=i);return new Y(function(t){var i=s;if(o)return o.schedule(bt,0,{subscriber:t,iterate:r,condition:n,resultSelector:a,state:i});for(;;){if(n){var u=void 0;try{u=n(i)}catch(n){t.error(n);break}if(!u){t.complete();break}}u=void 0;try{u=a(i)}catch(n){t.error(n);break}if(t.next(u),t.closed)break;try{i=r(i)}catch(n){t.error(n);break}}})},iif:function(t,n,r){return void 0===n&&(n=vb),void 0===r&&(r=vb),ad(function(){return t()?n:r})},interval:mm,merge:Xb,never:function(){return Tk},of:bb,onErrorResumeNext:li,pairs:function(t,n){return new Y(n?function(r){var i=Object.keys(t),o=new Oa;return o.add(n.schedule(dt,0,{keys:i,index:0,subscriber:r,subscription:o,obj:t})),o}:function(n){for(var r=Object.keys(t),i=0;i<r.length&&!n.closed;i++){var o=r[i];t.hasOwnProperty(o)&&n.next([o,t[o]])}n.complete()})},partition:function(t,n,r){return[wb(n,r)(new Y(pf(t))),wb(et(n,r))(new Y(pf(t)))]},race:Ca,range:function(t,n,r){return void 0===t&&(t=0),new Y(function(i){void 0===n&&(n=t,t=0);var o=0,s=t;if(r)return r.schedule(ht,0,{index:o,count:n,start:t,subscriber:i});for(;;){if(o++>=n){i.complete();break}if(i.next(s++),i.closed)break}})},throwError:Z,timer:Bc,using:function(t,n){return new Y(function(r){try{var i=t()}catch(t){return void r.error(t)}try{var o=n(i)}catch(t){return void r.error(t)}var s=(o?Kb(o):vb).subscribe(r);return function(){s.unsubscribe(),i&&i.unsubscribe()}})},zip:mi,scheduled:gm,EMPTY:vb,NEVER:Tk,config:Ib}),kt=function(){function t(t){this.selector=t}return t.prototype.call=function(t,n){return n.subscribe(new Ez(t,this.selector,this.caught))},t}(),Ez=function(t){function n(n,r,i){return(n=t.call(this,n)||this).selector=r,n.caught=i,n}return O(n,t),n.prototype.error=function(n){if(!this.isStopped){var r=void 0;try{r=this.selector(n,this.caught)}catch(n){return void t.prototype.error.call(this,n)}this._unsubscribeAndRecycle(),n=new vc(this),this.add(n),(r=ic(r,n))!==n&&this.add(r)}},n}(wc),lt=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,n){return n.subscribe(new Fz(t,this.defaultValue))},t}(),Fz=function(t){function n(n,r){return(n=t.call(this,n)||this).defaultValue=r,n.isEmpty=!0,n}return O(n,t),n.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},n.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},n}(ia),mt=function(){function t(t,n){this.delay=t,this.scheduler=n}return t.prototype.call=function(t,n){return n.subscribe(new Gz(t,this.delay,this.scheduler))},t}(),Gz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).delay=r,n.scheduler=i,n.queue=[],n.active=!1,n.errored=!1,n}return O(n,t),n.dispatch=function(t){for(var n=t.source,r=n.queue,i=t.scheduler,o=t.destination;0<r.length&&0>=r[0].time-i.now();)r.shift().notification.observe(o);0<r.length?(n=Math.max(0,r[0].time-i.now()),this.schedule(t,n)):(this.unsubscribe(),n.active=!1)},n.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},n.prototype.scheduleNotification=function(t){if(!0!==this.errored){var n=this.scheduler;t=new Hz(n.now()+this.delay,t),this.queue.push(t),!1===this.active&&this._schedule(n)}},n.prototype._next=function(t){this.scheduleNotification(Ve.createNext(t))},n.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.scheduleNotification(Ve.createComplete()),this.unsubscribe()},n}(ia),Hz=function(t,n){this.time=t,this.notification=n},nt=function(){function t(t,n){this.keySelector=t,this.flushes=n}return t.prototype.call=function(t,n){return n.subscribe(new Iz(t,this.keySelector,this.flushes))},t}(),Iz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).keySelector=r,n.values=new Set,i&&n.add(ic(i,new vc(n))),n}return O(n,t),n.prototype.notifyNext=function(){this.values.clear()},n.prototype.notifyError=function(t){this._error(t)},n.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},n.prototype._useKeySelector=function(t){var n=this.destination;try{var r=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(r,t)},n.prototype._finalizeNext=function(t,n){var r=this.values;r.has(t)||(r.add(t),this.destination.next(n))},n}(wc),pt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,n){return n.subscribe(new Jz(t,this.errorFactory))},t}(),Jz=function(t){function n(n,r){return(n=t.call(this,n)||this).errorFactory=r,n.hasValue=!1,n}return O(n,t),n.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},n.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)},n}(ia),qt=function(){function t(t){if(this.total=t,0>this.total)throw new Qk}return t.prototype.call=function(t,n){return n.subscribe(new Kz(t,this.total))},t}(),Kz=function(t){function n(n,r){return(n=t.call(this,n)||this).total=r,n.count=0,n}return O(n,t),n.prototype._next=function(t){var n=this.total,r=++this.count;r<=n&&(this.destination.next(t),r===n&&(this.destination.complete(),this.unsubscribe()))},n}(ia),rt=function(){function t(t){this.project=t}return t.prototype.call=function(t,n){return n.subscribe(new Lz(t,this.project))},t}(),Lz=function(t){function n(n,r){return(n=t.call(this,n)||this).project=r,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return O(n,t),n.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},n.prototype.tryNext=function(t){var n=this.index++;try{var r=this.project(t,n)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(r)},n.prototype._innerSub=function(t){var n=new vc(this),r=this.destination;r.add(n),(t=ic(t,n))!==n&&r.add(t)},n.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(t){this.destination.next(t)},n.prototype.notifyError=function(t){this.destination.error(t)},n.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},n}(wc),st=function(){function t(t){this.callback=t}return t.prototype.call=function(t,n){return n.subscribe(new Mz(t,this.callback))},t}(),Mz=function(t){function n(n,r){return(n=t.call(this,n)||this).add(new Oa(r)),n}return O(n,t),n}(ia),ut=function(){function t(){}return t.prototype.call=function(t,n){return n.subscribe(new Nz(t))},t}(),Nz=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return O(n,t),n.prototype._next=function(t){},n}(ia),vt=function(){function t(t){if(this.total=t,0>this.total)throw new Qk}return t.prototype.call=function(t,n){return n.subscribe(new Oz(t,this.total))},t}(),Oz=function(t){function n(n,r){return(n=t.call(this,n)||this).total=r,n.ring=[],n.count=0,n}return O(n,t),n.prototype._next=function(t){var n=this.ring,r=this.total,i=this.count++;n.length<r?n.push(t):n[i%r]=t},n.prototype._complete=function(){var t=this.destination,n=this.count;if(0<n)for(var r=this.count>=this.total?this.total:this.count,i=this.ring,o=0;o<r;o++){var s=n++%r;t.next(i[s])}t.complete()},n}(ia),wt=function(){function t(t){this.value=t}return t.prototype.call=function(t,n){return n.subscribe(new Pz(t,this.value))},t}(),Pz=function(t){function n(n,r){return(n=t.call(this,n)||this).value=r,n}return O(n,t),n.prototype._next=function(t){this.destination.next(this.value)},n}(ia),xt=function(){function t(t,n,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=n,this.hasSeed=r}return t.prototype.call=function(t,n){return n.subscribe(new Qz(t,this.accumulator,this.seed,this.hasSeed))},t}(),Qz=function(t){function n(n,r,i,o){return(n=t.call(this,n)||this).accumulator=r,n._seed=i,n.hasSeed=o,n.index=0,n}return O(n,t),Object.defineProperty(n.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),n.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},n.prototype._tryNext=function(t){var n=this.index++;try{var r=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=r,this.destination.next(r)},n}(ia),zt=function(){function t(t,n){this.subjectFactory=t,this.selector=n}return t.prototype.call=function(t,n){var r=this.selector,i=this.subjectFactory();return(t=r(i).subscribe(t)).add(n.subscribe(i)),t},t}(),Bt=function(){function t(t,n){this.notifier=t,this.source=n}return t.prototype.call=function(t,n){return n.subscribe(new Rz(t,this.notifier,this.source))},t}(),Rz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).notifier=r,n.source=i,n}return O(n,t),n.prototype.error=function(n){if(!this.isStopped){var r=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.retriesSubscription=this.errors=void 0;else{r=new Pa;try{i=(0,this.notifier)(r)}catch(n){return t.prototype.error.call(this,n)}o=ic(i,new vc(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=i,this.retriesSubscription=o,r.next(n)}},n.prototype._unsubscribe=function(){var t=this.errors,n=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),n&&(n.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},n.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},n}(wc),Et=function(){function t(t){this.project=t}return t.prototype.call=function(t,n){return n.subscribe(new Sz(t,this.project))},t}(),Sz=function(t){function n(n,r){return(n=t.call(this,n)||this).project=r,n.index=0,n}return O(n,t),n.prototype._next=function(t){var n=this.index++;try{var r=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(r)},n.prototype._innerSub=function(t){var n=this.innerSubscription;n&&n.unsubscribe(),n=new vc(this);var r=this.destination;r.add(n),this.innerSubscription=ic(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},n.prototype._complete=function(){var n=this.innerSubscription;n&&!n.closed||t.prototype._complete.call(this),this.unsubscribe()},n.prototype._unsubscribe=function(){this.innerSubscription=void 0},n.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},n.prototype.notifyNext=function(t){this.destination.next(t)},n}(wc),Ft=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,n){t=new Tz(t);var r=ic(this.notifier,new vc(t));return r&&!t.seenValue?(t.add(r),n.subscribe(t)):t},t}(),Tz=function(t){function n(n){return(n=t.call(this,n)||this).seenValue=!1,n}return O(n,t),n.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},n.prototype.notifyComplete=function(){},n}(wc),Ht=function(){function t(t,n){this.predicate=t,this.inclusive=n}return t.prototype.call=function(t,n){return n.subscribe(new Uz(t,this.predicate,this.inclusive))},t}(),Uz=function(t){function n(n,r,i){return(n=t.call(this,n)||this).predicate=r,n.inclusive=i,n.index=0,n}return O(n,t),n.prototype._next=function(t){var n=this.destination;try{var r=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,r)},n.prototype.nextOrComplete=function(t,n){var r=this.destination;n?r.next(t):(this.inclusive&&r.next(t),r.complete())},n}(ia),It=function(){function t(t,n,r){this.nextOrObserver=t,this.error=n,this.complete=r}return t.prototype.call=function(t,n){return n.subscribe(new Vz(t,this.nextOrObserver,this.error,this.complete))},t}(),Vz=function(t){function n(n,r,i,o){return(n=t.call(this,n)||this)._tapNext=hc,n._tapError=hc,n._tapComplete=hc,n._tapError=i||hc,n._tapComplete=o||hc,le(r)?(n._context=n,n._tapNext=r):r&&(n._context=r,n._tapNext=r.next||hc,n._tapError=r.error||hc,n._tapComplete=r.complete||hc),n}return O(n,t),n.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},n.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},n.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},n}(ia),Kt={leading:!0,trailing:!1};!function(t){function n(n,r,i,o){var s=t.call(this,n)||this;return s.destination=n,s.durationSelector=r,s._leading=i,s._trailing=o,s._hasValue=!1,s}O(n,t),n.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},n.prototype.send=function(){var t=this._sendValue;this._hasValue&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0},n.prototype.throttle=function(t){(t=this.tryDurationSelector(t))&&this.add(this._throttled=ic(t,new vc(this)))},n.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},n.prototype.throttlingDone=function(){var t=this._throttled,n=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,n&&this.send()},n.prototype.notifyNext=function(){this.throttlingDone()},n.prototype.notifyComplete=function(){this.throttlingDone()}}(wc);for(var Lt=function(){function t(t,n,r,i){this.duration=t,this.scheduler=n,this.leading=r,this.trailing=i}return t.prototype.call=function(t,n){return n.subscribe(new Wz(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Wz=function(t){function n(n,r,i,o,s){return(n=t.call(this,n)||this).duration=r,n.scheduler=i,n.leading=o,n.trailing=s,n._hasTrailingValue=!1,n._trailingValue=null,n}return O(n,t),n.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Mt,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},n.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},n.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},n}(ia),Ot=function(){function t(t,n,r,i){this.waitFor=t,this.absoluteTimeout=n,this.withObservable=r,this.scheduler=i}return t.prototype.call=function(t,n){return n.subscribe(new Xz(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Xz=function(t){function n(n,r,i,o,s){return(n=t.call(this,n)||this).absoluteTimeout=r,n.waitFor=i,n.withObservable=o,n.scheduler=s,n.scheduleTimeout(),n}return O(n,t),n.dispatchTimeout=function(t){var n=t.withObservable;t._unsubscribeAndRecycle(),t.add(ic(n,new vc(t)))},n.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(n.dispatchTimeout,this.waitFor,this))},n.prototype._next=function(n){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,n)},n.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},n}(wc),Qt=function(){function t(t,n){this.observables=t,this.project=n}return t.prototype.call=function(t,n){return n.subscribe(new Yz(t,this.observables,this.project))},t}(),Yz=function(t){function n(n,r,i){(n=t.call(this,n)||this).observables=r,n.project=i,n.toRespond=[],i=r.length,n.values=Array(i);for(var o=0;o<i;o++)n.toRespond.push(o);for(o=0;o<i;o++)n.add(ji(n,r[o],void 0,o));return n}return O(n,t),n.prototype.notifyNext=function(t,n,r){this.values[r]=n,0<(t=this.toRespond).length&&-1!==(r=t.indexOf(r))&&t.splice(r,1)},n.prototype.notifyComplete=function(){},n.prototype._next=function(t){0===this.toRespond.length&&(t=[t].concat(this.values),this.project?this._tryProject(t):this.destination.next(t))},n.prototype._tryProject=function(t){try{var n=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(Rk),Jq=$a(function(t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=Array(16);t.exports=function(){for(var t,n=0;16>n;n++)0==(3&n)&&(t=0x100000000*Math.random()),i[n]=t>>>((3&n)<<3)&255;return i}}}),ab=[],Gh=0;256>Gh;++Gh)ab[Gh]=(Gh+256).toString(16).substr(1);var Pc,rd,Vk,Wk,sd,Vd,ec,We,Rb,Xk,Qc,Wd,Rc,Sc,Tc,Xe,Uc,Vc,Kq=function(t,n){return n=n||0,""+ab[t[n++]]+ab[t[n++]]+ab[t[n++]]+ab[t[n++]]+"-"+ab[t[n++]]+ab[t[n++]]+"-"+ab[t[n++]]+ab[t[n++]]+"-"+ab[t[n++]]+ab[t[n++]]+"-"+ab[t[n++]]+ab[t[n++]]+ab[t[n++]]+ab[t[n++]]+ab[t[n++]]+ab[t[n++]]},Ud=function(t,n,r){if(r=n&&r||0,"string"==typeof t&&(n="binary"===t?Array(16):null,t=null),(t=(t=t||{}).random||(t.rng||Jq)())[6]=15&t[6]|64,t[8]=63&t[8]|128,n)for(var i=0;16>i;++i)n[r+i]=t[i];return n||Kq(t)},gg=Ud(),Uk=!1;!function(t){t[t.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",t[t.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",t[t.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",t[t.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",t[t.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",t[t.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",t[t.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(Pc||(Pc={})),function(t){t[t.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",t[t.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",t[t.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",t[t.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",t[t.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",t[t.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(rd||(rd={})),function(t){t[t.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Vk||(Vk={})),function(t){t[t.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Wk||(Wk={})),function(t){t[t.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",t[t.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",t[t.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",t[t.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",t[t.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",t[t.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(sd||(sd={})),function(t){t[t.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",t[t.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",t[t.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",t[t.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",t[t.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(Vd||(Vd={})),function(t){t[t.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",t[t.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",t[t.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",t[t.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",t[t.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",t[t.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",t[t.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",t[t.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",t[t.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",t[t.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",t[t.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(ec||(ec={})),function(t){t[t.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",t[t.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",t[t.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",t[t.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(We||(We={})),function(t){t[t.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",t[t.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",t[t.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",t[t.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",t[t.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",t[t.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",t[t.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",t[t.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",t[t.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",t[t.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",t[t.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Rb||(Rb={})),function(t){t[t.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Xk||(Xk={})),function(t){t[t.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",t[t.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",t[t.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",t[t.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",t[t.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",t[t.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",t[t.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Qc||(Qc={})),function(t){t[t.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",t[t.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",t[t.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",t[t.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",t[t.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(Wd||(Wd={})),function(t){t[t.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",t[t.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",t[t.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",t[t.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",t[t.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",t[t.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",t[t.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",t[t.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Rc||(Rc={})),function(t){t[t.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",t[t.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",t[t.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",t[t.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",t[t.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",t[t.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",t[t.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Sc||(Sc={})),function(t){t[t.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",t[t.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",t[t.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",t[t.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",t[t.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",t[t.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",t[t.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Tc||(Tc={})),function(t){t[t.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",t[t.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",t[t.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",t[t.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(Xe||(Xe={})),function(t){t[t.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",t[t.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",t[t.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",t[t.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",t[t.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",t[t.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",t[t.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Uc||(Uc={})),function(t){t[t.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",t[t.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",t[t.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",t[t.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",t[t.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",t[t.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",t[t.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Vc||(Vc={}));var Sb=Pc.ATTRIBUTE_OPERATION_ERR_FAILURE,Ja=Pc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,se=Pc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Pc.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Lq=Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Tb=Pc.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Ub=Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,hg=rd.CHANNEL_MESSAGE_ERR_FAILURE,Yk=rd.CHANNEL_MESSAGE_ERR_TIMEOUT,Mq=rd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,Hh=rd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;rd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;var ig=rd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,Zz=Vk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Nq=Wk.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Oq=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Pq=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,$z=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var aA=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,bA=sd.GET_MEMBERS_ERR_FAILURE,cA=sd.GET_MEMBERS_ERR_REJECTED;sd.GET_MEMBERS_ERR_TIMEOUT,sd.GET_MEMBERS_ERR_TOO_OFTEN;var dA=sd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,eA=sd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,xc=Vd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,fA=Vd.INVITATION_API_CALL_ERR_NOT_STARTED,Ih=Vd.INVITATION_API_CALL_ERR_ALREADY_END,Qq=Vd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,gA=Vd.INVITATION_API_CALL_ERR_ALREADY_SENT,Rq=ec.JOIN_CHANNEL_ERR_FAILURE;ec.JOIN_CHANNEL_ERR_REJECTED;var hA=ec.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Sq=ec.JOIN_CHANNEL_TIMEOUT,Tq=ec.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Uq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED;ec.JOIN_CHANNEL_ERR_TOO_OFTEN;var Vq=ec.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Wq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Xq=We.LEAVE_CHANNEL_ERR_FAILURE,Yq=We.LEAVE_CHANNEL_ERR_REJECTED,iA=We.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,jA=We.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,Zq=Rb.LOGIN_ERR_UNKNOWN,jg=Rb.LOGIN_ERR_REJECTED,Jh=Rb.LOGIN_ERR_INVALID_ARGUMENT,$q=Rb.LOGIN_ERR_INVALID_APP_ID,ar=Rb.LOGIN_ERR_INVALID_TOKEN,Kh=Rb.LOGIN_ERR_TOKEN_EXPIRED;Rb.LOGIN_ERR_NOT_AUTHORIZED;var kA=Rb.LOGIN_ERR_ALREADY_LOGIN,lA=Rb.LOGIN_ERR_TIMEOUT,mA=Rb.LOGIN_ERR_TOO_OFTEN,br=Xk.LOGOUT_ERR_USER_NOT_LOGGED_IN,cr=Qc.PEER_MESSAGE_ERR_FAILURE,Zk=Qc.PEER_MESSAGE_ERR_TIMEOUT,dr=Qc.PEER_MESSAGE_ERR_TOO_OFTEN,$k=Qc.PEER_MESSAGE_ERR_INVALID_USERID,ve=Qc.PEER_MESSAGE_ERR_INVALID_MESSAGE,al=Qc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,nA=Qc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,er=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var oA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var pA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,qA=Rc.RENEW_TOKEN_ERR_FAILURE,rA=Rc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Rc.RENEW_TOKEN_ERR_REJECTED,Rc.RENEW_TOKEN_ERR_TOO_OFTEN;var sA=Rc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,tA=Rc.RENEW_TOKEN_ERR_INVALID_TOKEN,uA=Rc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,fr=Tc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,kg=Tc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Tc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var vA=Tc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Tc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var gr=Tc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,bl=Tc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var lg=Uc.UPLOAD_MEDIA_ERR_FAILURE,wf=Uc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,Lh=Uc.UPLOAD_MEDIA_ERR_TIMEOUT,wA=Uc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,xA=Uc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,hr=Uc.UPLOAD_MEDIA_ERR_INTERRUPTED,yA=Uc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,mg=Vc.DOWNLOAD_MEDIA_ERR_FAILURE,cl=Vc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,zA=Vc.DOWNLOAD_MEDIA_ERR_TIMEOUT,AA=Vc.DOWNLOAD_MEDIA_ERR_NOT_EXIST,BA=Vc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ir=Vc.DOWNLOAD_MEDIA_ERR_INTERRUPTED,CA=Vc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,DA=function(t,n){var r;return Hk(t,function(t,i,o){return!(r=n(t,i,o))}),!!r},Mh=function(t,n,r){if(!lb(r))return!1;var i=X(n);return!!("number"==i?Ed(r)&&wk(n,r.length):"string"==i&&n in r)&&$f(r[n],t)},dl=function(t,n,r){var i=Va(t)?tq:DA;return r&&Mh(t,n,r)&&(n=void 0),i(t,Te(n))},EA=function(t,n){var r=-1,i=Ed(t)?Array(t.length):[];return Hk(t,function(t,o,s){i[++r]=n(t,o,s)}),i},FA=function(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t},GA=function(t,n,r){n=n.length?he(n,function(t){return Va(t)?function(n){return Ch(n,1===t.length?t[0]:t)}:t}):[Dh];var i=-1;return n=he(n,zh(Te)),FA(t=EA(t,function(t,r,o){return{criteria:he(n,function(n){return n(t)}),index:++i,value:t}}),function(t,n){e:{for(var i=-1,o=t.criteria,s=n.criteria,a=o.length,u=r.length;++i<a;){t:{var c=o[i],l=s[i];if(c!==l){var f=void 0!==c,h=null===c,p=c==c,d=ie(c),v=void 0!==l,g=null===l,b=l==l,y=ie(l);if(!g&&!y&&!d&&c>l||d&&v&&b&&!g&&!y||h&&v&&b||!f&&b||!p){c=1;break t}if(!h&&!d&&!y&&c<l||y&&f&&p&&!h&&!d||g&&f&&p||!v&&p||!b){c=-1;break t}}c=0}if(c){t=i>=u?c:c*("desc"==r[i]?-1:1);break e}}t=t.index-n.index}return t})},jr=function(t,n){return rq(qq(t,n,Dh),t+"")},kr=jr(function(t,n){if(null==t)return[];var r=n.length;return 1<r&&Mh(t,n[0],n[1])?n=[]:2<r&&Mh(n[0],n[1],n[2])&&(n=[n[0]]),GA(t,$h(n,1),[])}),lr=function(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}(Dz),mr=$a(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=[],i=function(t,n){return new WebSocket(t,n)};n.normalClosureMessage="Normal closure",n.default=function(t,o){var s=(o=void 0===o?{protocols:r,makeWebSocket:i}:o).protocols,a=void 0===s?r:s,u=void 0===(o=o.makeWebSocket)?i:o;return new lr.Observable(function(r){var i,o=new lr.Subject,s=u(t,a),c=!1,l=!1,f=function(t){if(i)throw c=!0,t=Error("Web socket message factory function called more than once"),r.error(t),t;return i=t.subscribe(function(t){s.send(t)}),o};return s.onopen=function(){l?(c=!0,s.close()):r.next(f)},s.onmessage=function(t){o.next(t.data)},s.onerror=function(t){c=!0,r.error(Error(t.message))},s.onclose=function(t){c||(c=!0,l?(r.complete(),o.complete()):r.error(Error(1e3===t.code?n.normalClosureMessage:t.reason)))},function(){l=!0,i&&i.unsubscribe(),c||(c=!0,s.close())}})}});!function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")&&t.default}(mr);var pi=function(t,n,r){(void 0===r||$f(t[n],r))&&(void 0!==r||n in t)||bg(t,n,r)},oi=function(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]},HA=function(t){return jr(function(n,r){var i=-1,o=r.length,s=1<o?r[o-1]:void 0,a=2<o?r[2]:void 0;for(s=3<t.length&&"function"==typeof s?(o--,s):void 0,a&&Mh(r[0],r[1],a)&&(s=3>o?void 0:s,o=1),n=Object(n);++i<o;)(a=r[i])&&t(n,a,i,s);return n})}(function(t,n,r,i){tm(t,n,r,i)}),IA=Math.floor,JA=Math.random,nr=function(t,n){return t+IA(JA()*(n-t+1))},or=function(t){var n=t.length;return n?t[nr(0,n-1)]:void 0},KA=function(t,n){return he(n,function(n){return t[n]})},Ni=function(t){return null==t?[]:KA(t,Ad(t))},LA=function(t){return or(Ni(t))},bn=function(t){return(Va(t)?or:LA)(t)},xm=[],ym=function(t,n){return new WebSocket(t,n)},MA=Math.floor;N({target:"Number",stat:!0},{isInteger:function(t){return!ha(t)&&isFinite(t)&&MA(t)===t}}),Oo("from",Ej,Dj);var NA=function(t,n){for(var r=Array(arguments.length-1),i=0,o=2,s=!0;o<arguments.length;)r[i++]=arguments[o++];return new Promise(function(o,a){r[i]=function(t){if(s)if(s=!1,t)a(t);else{for(var n=Array(arguments.length-1),r=0;r<n.length;)n[r++]=arguments[r];o.apply(null,n)}};try{t.apply(n||null,r)}catch(t){s&&(s=!1,a(t))}})},OA=$a(function(t,n){n.length=function(t){var n=t.length;if(!n)return 0;for(var r=0;1<--n%4&&"="===t.charAt(n);)++r;return Math.ceil(3*t.length)/4-r};var r=Array(64),i=Array(123);for(t=0;64>t;)i[r[t]=26>t?t+65:52>t?t+71:62>t?t-4:t-59|43]=t++;n.encode=function(t,n,i){for(var o,s=null,a=[],u=0,c=0;n<i;){var l=t[n++];switch(c){case 0:a[u++]=r[l>>2],o=(3&l)<<4,c=1;break;case 1:a[u++]=r[o|l>>4],o=(15&l)<<2,c=2;break;case 2:a[u++]=r[o|l>>6],a[u++]=r[63&l],c=0}8191<u&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),u=0)}return c&&(a[u++]=r[o],a[u++]=61,1===c&&(a[u++]=61)),s?(u&&s.push(String.fromCharCode.apply(String,a.slice(0,u))),s.join("")):String.fromCharCode.apply(String,a.slice(0,u))},n.decode=function(t,n,r){for(var o,s=r,a=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&1<a)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(a){case 0:o=c,a=1;break;case 1:n[r++]=o<<2|(48&c)>>4,o=c,a=2;break;case 2:n[r++]=(15&o)<<4|(60&c)>>2,o=c,a=3;break;case 3:n[r++]=(3&o)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return r-s},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});yg.prototype.on=function(t,n,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:r||this}),this},yg.prototype.off=function(t,n){if(void 0===t)this._listeners={};else if(void 0===n)this._listeners[t]=[];else{t=this._listeners[t];for(var r=0;r<t.length;)t[r].fn===n?t.splice(r,1):++r}return this},yg.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<n.length;)n[i].fn.apply(n[i++].ctx,r)}return this};var PA=zm(zm),QA=function(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(e){}return null},RA=$a(function(t,n){n.length=function(t){for(var n,r=0,i=0;i<t.length;++i)128>(n=t.charCodeAt(i))?r+=1:2048>n?r+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(i+1))?(++i,r+=4):r+=3;return r},n.read=function(t,n,r){if(1>r-n)return"";for(var i,o=null,s=[],a=0;n<r;)128>(i=t[n++])?s[a++]=i:191<i&&224>i?s[a++]=(31&i)<<6|63&t[n++]:239<i&&365>i?(i=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,s[a++]=55296+(i>>10),s[a++]=56320+(1023&i)):s[a++]=(15&i)<<12|(63&t[n++])<<6|63&t[n++],8191<a&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},n.write=function(t,n,r){for(var i,o,s=r,a=0;a<t.length;++a)128>(i=t.charCodeAt(a))?n[r++]=i:(2048>i?n[r++]=i>>6|192:(55296==(64512&i)&&56320==(64512&(o=t.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&o),++a,n[r++]=i>>18|240,n[r++]=i>>12&63|128):n[r++]=i>>12|224,n[r++]=i>>6&63|128),n[r++]=63&i|128);return r-s}}),SA=function(t,n,r){var i=r||8192,o=i>>>1,s=null,a=i;return function(r){return 1>r||r>o?t(r):(a+r>i&&(s=t(i),a=0),r=n.call(s,a,a+=r),7&a&&(a=1+(7|a)),r)}},Xd=Wa.zero=new Wa(0,0);Xd.toNumber=function(){return 0},Xd.zzEncode=Xd.zzDecode=function(){return this},Xd.length=function(){return 1};var TA=Wa.zeroHash="\0\0\0\0\0\0\0\0";Wa.fromNumber=function(t){if(0===t)return Xd;var n=0>t;n&&(t=-t);var r=t>>>0;return t=(t-r)/0x100000000>>>0,n&&(t=~t>>>0,r=~r>>>0,0xffffffff<++r&&(r=0,0xffffffff<++t&&(t=0))),new Wa(r,t)},Wa.from=function(t){if("number"==typeof t)return Wa.fromNumber(t);if(V.isString(t)){if(!V.Long)return Wa.fromNumber(parseInt(t,10));t=V.Long.fromString(t)}return t.low||t.high?new Wa(t.low>>>0,t.high>>>0):Xd},Wa.prototype.toNumber=function(t){if(!t&&this.hi>>>31){t=1+~this.lo>>>0;var n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+0x100000000*n)}return this.lo+0x100000000*this.hi},Wa.prototype.toLong=function(t){return V.Long?new V.Long(0|this.lo,0|this.hi,!!t):{low:0|this.lo,high:0|this.hi,unsigned:!!t}};var td=String.prototype.charCodeAt;Wa.fromHash=function(t){return t===TA?Xd:new Wa((td.call(t,0)|td.call(t,1)<<8|td.call(t,2)<<16|td.call(t,3)<<24)>>>0,(td.call(t,4)|td.call(t,5)<<8|td.call(t,6)<<16|td.call(t,7)<<24)>>>0)},Wa.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Wa.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},Wa.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},Wa.prototype.length=function(){var t=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===n?16384>t?128>t?1:2:2097152>t?3:4:16384>n?128>n?5:6:2097152>n?7:8:128>r?9:10};var el,V=$a(function(t,n){function r(t,n,r){for(var i=Object.keys(n),o=0;o<i.length;++o)void 0!==t[i[o]]&&r||(t[i[o]]=n[i[o]]);return t}function i(t){function n(t,i){if(!(this instanceof n))return new n(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:Error().stack||""}),i&&r(this,i)}return(n.prototype=Object.create(Error.prototype)).constructor=n,Object.defineProperty(n.prototype,"name",{get:function(){return t}}),n.prototype.toString=function(){return this.name+": "+this.message},n}n.asPromise=NA,n.base64=OA,n.EventEmitter=yg,n.float=PA,n.inquire=QA,n.utf8=RA,n.pool=SA,n.LongBits=Wa,n.isNode=!!(void 0!==Ya&&Ya&&Ya.process&&Ya.process.versions&&Ya.process.versions.node),n.global=n.isNode&&Ya||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ya,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"===X(t)},n.isset=n.isSet=function(t,n){var r=t[n];return!(null==r||!t.hasOwnProperty(n))&&("object"!==X(r)||0<(Array.isArray(r)?r.length:Object.keys(r).length))},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,r){return t=n.LongBits.fromHash(t),n.Long?n.Long.fromBits(t.lo,t.hi,r):t.toNumber(!!r)},n.merge=r,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(t){for(var n={},r=0;r<t.length;++r)n[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;-1<r;--r)if(1===n[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(n){for(var r=0;r<t.length;++r)t[r]!==n&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(n,r){return new t(n,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(n){return new t(n)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),xi=ja,Nh=V.LongBits,pr=V.base64,qr=V.utf8,rr=function(){return V.Buffer?function(){return(ja.create=function(){return new el})()}:function(){return new ja}};ja.create=rr(),ja.alloc=function(t){return new V.Array(t)},V.Array!==Array&&(ja.alloc=V.pool(ja.alloc,V.Array.prototype.subarray)),ja.prototype._push=function(t,n,r){return this.tail=this.tail.next=new sf(t,n,r),this.len+=n,this},ui.prototype=Object.create(sf.prototype),ui.prototype.fn=function(t,n,r){for(;127<t;)n[r++]=127&t|128,t>>>=7;n[r]=t},ja.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new ui(128>(t>>>=0)?1:16384>t?2:2097152>t?3:0x10000000>t?4:5,t)).len,this},ja.prototype.int32=function(t){return 0>t?this._push(vi,10,Nh.fromNumber(t)):this.uint32(t)},ja.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},ja.prototype.uint64=function(t){return t=Nh.from(t),this._push(vi,t.length(),t)},ja.prototype.int64=ja.prototype.uint64,ja.prototype.sint64=function(t){return t=Nh.from(t).zzEncode(),this._push(vi,t.length(),t)},ja.prototype.bool=function(t){return this._push(ti,1,+!!t)},ja.prototype.fixed32=function(t){return this._push(wi,4,t>>>0)},ja.prototype.sfixed32=ja.prototype.fixed32,ja.prototype.fixed64=function(t){return t=Nh.from(t),this._push(wi,4,t.lo)._push(wi,4,t.hi)},ja.prototype.sfixed64=ja.prototype.fixed64,ja.prototype.float=function(t){return this._push(V.float.writeFloatLE,4,t)},ja.prototype.double=function(t){return this._push(V.float.writeDoubleLE,8,t)};var UA=V.Array.prototype.set?function(t,n,r){n.set(t,r)}:function(t,n,r){for(var i=0;i<t.length;++i)n[r+i]=t[i]};ja.prototype.bytes=function(t){var n=t.length>>>0;if(!n)return this._push(ti,1,0);if(V.isString(t)){var r=ja.alloc(n=pr.length(t));pr.decode(t,r,0),t=r}return this.uint32(n)._push(UA,n,t)},ja.prototype.string=function(t){var n=qr.length(t);return n?this.uint32(n)._push(qr.write,n,t):this._push(ti,1,0)},ja.prototype.fork=function(){return this.states=new Tt(this),this.head=this.tail=new sf(si,0,0),this.len=0,this},ja.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new sf(si,0,0),this.len=0),this},ja.prototype.ldelim=function(){var t=this.head,n=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=n,this.len+=r),this},ja.prototype.finish=function(){for(var t=this.head.next,n=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,n,r),r+=t.len,t=t.next;return n},ja._configure=function(t){el=t,ja.create=rr(),el._configure()},(jc.prototype=Object.create(xi.prototype)).constructor=jc,jc._configure=function(){jc.alloc=V._Buffer_allocUnsafe,jc.writeBytesBuffer=V.Buffer&&V.Buffer.prototype instanceof Uint8Array&&"set"===V.Buffer.prototype.set.name?function(t,n,r){n.set(t,r)}:function(t,n,r){if(t.copy)t.copy(n,r,0,t.length);else for(var i=0;i<t.length;)n[r++]=t[i++]}},jc.prototype.bytes=function(t){V.isString(t)&&(t=V._Buffer_from(t,"base64"));var n=t.length>>>0;return this.uint32(n),n&&this._push(jc.writeBytesBuffer,n,t),this},jc.prototype.string=function(t){var n=V.Buffer.byteLength(t);return this.uint32(n),n&&this._push(Ut,n,t),this},jc._configure();var fl,zi=La,Em=V.LongBits,VA=V.utf8,sr="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new La(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new La(t);throw Error("illegal buffer")},tr=function(){return V.Buffer?function(t){return(La.create=function(t){return V.Buffer.isBuffer(t)?new fl(t):sr(t)})(t)}:sr};La.create=tr(),La.prototype._slice=V.Array.prototype.subarray||V.Array.prototype.slice,La.prototype.uint32=function(){var t=0xffffffff;return function(){if(t=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++]||(t=(t|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])||(t=(t|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])||(t=(t|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])||(t=(t|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++]))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Yb(this,10);return t}}(),La.prototype.int32=function(){return 0|this.uint32()},La.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)},La.prototype.bool=function(){return 0!==this.uint32()},La.prototype.fixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return zg(this.buf,this.pos+=4)},La.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return 0|zg(this.buf,this.pos+=4)},La.prototype.float=function(){if(this.pos+4>this.len)throw Yb(this,4);var t=V.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},La.prototype.double=function(){if(this.pos+8>this.len)throw Yb(this,4);var t=V.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},La.prototype.bytes=function(){var t=this.uint32(),n=this.pos,r=this.pos+t;if(r>this.len)throw Yb(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(n,r):n===r?new this.buf.constructor(0):this._slice.call(this.buf,n,r)},La.prototype.string=function(){var t=this.bytes();return VA.read(t,0,t.length)},La.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw Yb(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Yb(this);while(128&this.buf[this.pos++]);return this},La.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},La._configure=function(t){fl=t,La.create=tr(),fl._configure();var n=V.Long?"toLong":"toNumber";V.merge(La.prototype,{int64:function(){return yi.call(this)[n](!1)},uint64:function(){return yi.call(this)[n](!0)},sint64:function(){return yi.call(this).zzDecode()[n](!1)},fixed64:function(){return Fm.call(this)[n](!0)},sfixed64:function(){return Fm.call(this)[n](!1)}})},(Fd.prototype=Object.create(zi.prototype)).constructor=Fd,Fd._configure=function(){V.Buffer&&(Fd.prototype._slice=V.Buffer.prototype.slice)},Fd.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},Fd._configure(),(tf.prototype=Object.create(V.EventEmitter.prototype)).constructor=tf,tf.prototype.rpcCall=function t(n,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return V.asPromise(t,a,n,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(n,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,r){if(t)return a.emit("error",t,n),s(t);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,n),s(t)}return a.emit("data",r,n),s(null,r)}a.end(!0)})}catch(t){a.emit("error",t,n),setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},tf.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var WA=$a(function(t,n){n.Service=tf}),XA={},fc=$a(function(t,n){function r(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}var i=n;i.build="minimal",i.Writer=xi,i.BufferWriter=jc,i.Reader=zi,i.BufferReader=Fd,i.util=V,i.rpc=WA,i.roots=XA,i.configure=r,r()});fc.util.Long=U,fc.configure();var u=fc.Reader,L=fc.Writer,q=fc.util,t=fc.roots.default||(fc.roots.default={}),YA=t.URI=function(){var t={},n=Object.create(t);return n[t[0]="Unknown"]=0,n[t[1]="PingUri"]=1,n[t[2]="PongUri"]=2,n[t[11]="UserJoinUri"]=11,n[t[12]="UserRespUri"]=12,n[t[21]="UserQuitUri"]=21,n[t[22]="UserDropUri"]=22,n[t[31]="GroupEnterUri"]=31,n[t[32]="GroupLeaveUri"]=32,n[t[33]="GroupReplyUri"]=33,n[t[36]="GroupEnterNoticeUri"]=36,n[t[37]="GroupLeaveNoticeUri"]=37,n[t[38]="GroupEventNoticeUri"]=38,n[t[39]="GroupCountNoticeUri"]=39,n[t[41]="UserStatusListUri"]=41,n[t[42]="UserStatusResultUri"]=42,n[t[51]="GroupStatusListUri"]=51,n[t[52]="GroupStatusResultUri"]=52,n[t[55]="GroupAllUsersListUri"]=55,n[t[56]="GroupAllUsersResultUri"]=56,n[t[100]="MessageUri"]=100,n[t[101]="AckUri"]=101,n[t[115]="FileUploadIndexGetUri"]=115,n[t[116]="FileUploadIndexRetUri"]=116,n[t[117]="FileUploadIndexSetUri"]=117,n[t[118]="FileUploadIndexFinUri"]=118,n[t[119]="FileUploadIndexErrUri"]=119,n[t[125]="FileDownloadIndexGetUri"]=125,n[t[126]="FileDownloadIndexRetUri"]=126,n[t[127]="FileDownloadIndexErrUri"]=127,n[t[201]="UserJoinNoticeUri"]=201,n[t[202]="UserQuitNoticeUri"]=202,n[t[203]="UserWaitNoticeUri"]=203,n[t[301]="UserAttributeGetUri"]=301,n[t[302]="UserAttributeRetUri"]=302,n[t[303]="UserAttributeSetUri"]=303,n[t[304]="UserAttributeModUri"]=304,n[t[305]="UserAttributeDelUri"]=305,n[t[307]="UserAttributeRspUri"]=307,n[t[308]="UserAttributeErrUri"]=308,n[t[311]="UserAttributeKeysGetUri"]=311,n[t[312]="UserAttributeKeysRetUri"]=312,n[t[351]="GroupAttributeGetUri"]=351,n[t[352]="GroupAttributeRetUri"]=352,n[t[353]="GroupAttributeSetUri"]=353,n[t[354]="GroupAttributeModUri"]=354,n[t[355]="GroupAttributeDelUri"]=355,n[t[356]="GroupAttributeAltUri"]=356,n[t[357]="GroupAttributeRspUri"]=357,n[t[358]="GroupAttributeErrUri"]=358,n[t[361]="GroupAttributeKeysGetUri"]=361,n[t[362]="GroupAttributeKeysRetUri"]=362,n[t[401]="SubscribeUserStatusUri"]=401,n[t[402]="UnsubscribeUserStatusUri"]=402,n[t[499]="SubscribeResponseUri"]=499,n}(),Oh=t.Wrapper=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.uri=0,n.prototype.data=q.newBuffer([]),n.encode=function(n,r){return r||(r=L.create()),null!=n.uri&&Object.hasOwnProperty.call(n,"uri")&&r.uint32(8).int32(n.uri),null!=n.data&&Object.hasOwnProperty.call(n,"data")&&r.uint32(18).bytes(n.data),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.Wrapper;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.uri=n.int32();break;case 2:i.data=n.bytes();break;default:n.skipType(7&o)}}return i},n}(),ZA=t.Ping=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.ms&&Object.hasOwnProperty.call(n,"ms")&&r.uint32(16).uint64(n.ms),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.Ping;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.ms=n.uint64();break;default:n.skipType(7&o)}}return i},n}(),$A=t.Pong=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.ms&&Object.hasOwnProperty.call(n,"ms")&&r.uint32(16).uint64(n.ms),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.Pong;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.ms=n.uint64();break;default:n.skipType(7&o)}}return i},n}(),aB=t.UserJoin=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.opt=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.ticket="",n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.opt&&Object.hasOwnProperty.call(n,"opt")&&r.uint32(16).uint64(n.opt),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(24).uint64(n.instance),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(34).string(n.account),null!=n.ticket&&Object.hasOwnProperty.call(n,"ticket")&&r.uint32(42).string(n.ticket),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserJoin;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.opt=n.uint64();break;case 3:i.instance=n.uint64();break;case 4:i.account=n.string();break;case 5:i.ticket=n.string();break;default:n.skipType(7&o)}}return i},n}(),bB=t.UserResp=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(24).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserResp;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;case 3:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),cB=t.UserQuit=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.encode=function(n,r){return r||(r=L.create()),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserQuit;n.pos<r;){var o=n.uint32();n.skipType(7&o)}return i},n}(),dB=t.UserDrop=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(8).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserDrop;n.pos<r;){var o=n.uint32();o>>>3==1?i.code=n.uint32():n.skipType(7&o)}return i},n}(),eB=t.GroupEnter=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupEnter;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;default:n.skipType(7&o)}}return i},n}(),fB=t.GroupLeave=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.account="",n.encode=function(n,r){return r||(r=L.create()),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(10).string(n.account),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupLeave;n.pos<r;){var o=n.uint32();o>>>3==1?i.account=n.string():n.skipType(7&o)}return i},n}(),gB=t.GroupReply=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(24).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupReply;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;case 3:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),ur=t.GroupLeaveNotice=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.user="",n.prototype.group="",n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.size=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.user&&Object.hasOwnProperty.call(n,"user")&&r.uint32(18).string(n.user),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(26).string(n.group),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(32).uint64(n.instance),null!=n.size&&Object.hasOwnProperty.call(n,"size")&&r.uint32(40).uint32(n.size),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupLeaveNotice;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.user=n.string();break;case 3:i.group=n.string();break;case 4:i.instance=n.uint64();break;case 5:i.size=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),vr=t.GroupEnterNotice=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.user="",n.prototype.group="",n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.size=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.user&&Object.hasOwnProperty.call(n,"user")&&r.uint32(18).string(n.user),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(26).string(n.group),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(32).uint64(n.instance),null!=n.size&&Object.hasOwnProperty.call(n,"size")&&r.uint32(40).uint32(n.size),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupEnterNotice;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.user=n.string();break;case 3:i.group=n.string();break;case 4:i.instance=n.uint64();break;case 5:i.size=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),wr=t.Message=function(){function n(n){if(this.MiscMap={},n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.options=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.src="",n.prototype.dst="",n.prototype.payload=q.newBuffer([]),n.prototype.MiscMap=q.emptyObject,n.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){if(r||(r=L.create()),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(8).uint64(n.instance),null!=n.dialogue&&Object.hasOwnProperty.call(n,"dialogue")&&r.uint32(16).uint64(n.dialogue),null!=n.sequence&&Object.hasOwnProperty.call(n,"sequence")&&r.uint32(24).uint64(n.sequence),null!=n.options&&Object.hasOwnProperty.call(n,"options")&&r.uint32(32).uint64(n.options),null!=n.src&&Object.hasOwnProperty.call(n,"src")&&r.uint32(42).string(n.src),null!=n.dst&&Object.hasOwnProperty.call(n,"dst")&&r.uint32(50).string(n.dst),null!=n.payload&&Object.hasOwnProperty.call(n,"payload")&&r.uint32(58).bytes(n.payload),null!=n.MiscMap&&Object.hasOwnProperty.call(n,"MiscMap"))for(var i=Object.keys(n.MiscMap),o=0;o<i.length;++o)r.uint32(66).fork().uint32(10).string(i[o]).uint32(18).bytes(n.MiscMap[i[o]]).ldelim();return null!=n.ms&&Object.hasOwnProperty.call(n,"ms")&&r.uint32(72).uint64(n.ms),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i,o,s=new t.Message;n.pos<r;)switch((i=n.uint32())>>>3){case 1:s.instance=n.uint64();break;case 2:s.dialogue=n.uint64();break;case 3:s.sequence=n.uint64();break;case 4:s.options=n.uint64();break;case 5:s.src=n.string();break;case 6:s.dst=n.string();break;case 7:s.payload=n.bytes();break;case 8:s.MiscMap===q.emptyObject&&(s.MiscMap={});var a=n.uint32()+n.pos;for(i="",o=[];n.pos<a;){var c=n.uint32();switch(c>>>3){case 1:i=n.string();break;case 2:o=n.bytes();break;default:n.skipType(7&c)}}s.MiscMap[i]=o;break;case 9:s.ms=n.uint64();break;default:n.skipType(7&i)}return s},n}(),xr=t.Ack=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(8).uint64(n.instance),null!=n.dialogue&&Object.hasOwnProperty.call(n,"dialogue")&&r.uint32(16).uint64(n.dialogue),null!=n.sequence&&Object.hasOwnProperty.call(n,"sequence")&&r.uint32(24).uint64(n.sequence),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(32).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.Ack;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.instance=n.uint64();break;case 2:i.dialogue=n.uint64();break;case 3:i.sequence=n.uint64();break;case 4:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),hB=t.FileUploadIndexGet=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.hash=q.newBuffer([]),n.prototype.size=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.hash&&Object.hasOwnProperty.call(n,"hash")&&r.uint32(18).bytes(n.hash),null!=n.size&&Object.hasOwnProperty.call(n,"size")&&r.uint32(24).uint32(n.size),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileUploadIndexGet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.hash=n.bytes();break;case 3:i.size=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),iB=t.FileUploadIndexRet=function(){function n(n){if(this.servers=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.unit=0,n.prototype.servers=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.unit&&Object.hasOwnProperty.call(n,"unit")&&r.uint32(16).uint32(n.unit),null!=n.servers&&n.servers.length){r.uint32(26).fork();for(var i=0;i<n.servers.length;++i)r.uint32(n.servers[i]);r.ldelim()}return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileUploadIndexRet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.unit=n.uint32();break;case 3:if(i.servers&&i.servers.length||(i.servers=[]),2==(7&o))for(o=n.uint32()+n.pos;n.pos<o;)i.servers.push(n.uint32());else i.servers.push(n.uint32());break;default:n.skipType(7&o)}}return i},n}(),jB=t.FileUploadIndexSet=function(){function n(n){if(this.servers=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.hash=q.newBuffer([]),n.prototype.unit=0,n.prototype.servers=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.hash&&Object.hasOwnProperty.call(n,"hash")&&r.uint32(18).bytes(n.hash),null!=n.unit&&Object.hasOwnProperty.call(n,"unit")&&r.uint32(24).uint32(n.unit),null!=n.servers&&n.servers.length){r.uint32(34).fork();for(var i=0;i<n.servers.length;++i)r.uint32(n.servers[i]);r.ldelim()}return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileUploadIndexSet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.hash=n.bytes();break;case 3:i.unit=n.uint32();break;case 4:if(i.servers&&i.servers.length||(i.servers=[]),2==(7&o))for(o=n.uint32()+n.pos;n.pos<o;)i.servers.push(n.uint32());else i.servers.push(n.uint32());break;default:n.skipType(7&o)}}return i},n}(),kB=t.FileUploadIndexFin=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.zone=0,n.prototype.unit=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.zone&&Object.hasOwnProperty.call(n,"zone")&&r.uint32(16).uint32(n.zone),null!=n.unit&&Object.hasOwnProperty.call(n,"unit")&&r.uint32(24).uint32(n.unit),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileUploadIndexFin;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.zone=n.uint32();break;case 3:i.unit=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),lB=t.FileUploadIndexErr=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(16).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileUploadIndexErr;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),mB=t.FileDownloadIndexGet=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.zone=0,n.prototype.hash=q.newBuffer([]),n.prototype.size=0,n.prototype.unit=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.zone&&Object.hasOwnProperty.call(n,"zone")&&r.uint32(16).uint32(n.zone),null!=n.hash&&Object.hasOwnProperty.call(n,"hash")&&r.uint32(26).bytes(n.hash),null!=n.size&&Object.hasOwnProperty.call(n,"size")&&r.uint32(32).uint32(n.size),null!=n.unit&&Object.hasOwnProperty.call(n,"unit")&&r.uint32(40).uint32(n.unit),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileDownloadIndexGet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.zone=n.uint32();break;case 3:i.hash=n.bytes();break;case 4:i.size=n.uint32();break;case 5:i.unit=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),nB=t.FileDownloadIndexRet=function(){function n(n){if(this.servers=[],this.backups=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.unit=0,n.prototype.zone=0,n.prototype.servers=q.emptyArray,n.prototype.backups=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.unit&&Object.hasOwnProperty.call(n,"unit")&&r.uint32(16).uint32(n.unit),null!=n.zone&&Object.hasOwnProperty.call(n,"zone")&&r.uint32(24).uint32(n.zone),null!=n.servers&&n.servers.length){r.uint32(34).fork();for(var i=0;i<n.servers.length;++i)r.uint32(n.servers[i]);r.ldelim()}if(null!=n.backups&&n.backups.length){for(r.uint32(42).fork(),i=0;i<n.backups.length;++i)r.uint32(n.backups[i]);r.ldelim()}return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileDownloadIndexRet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.unit=n.uint32();break;case 3:i.zone=n.uint32();break;case 4:if(i.servers&&i.servers.length||(i.servers=[]),2==(7&o))for(o=n.uint32()+n.pos;n.pos<o;)i.servers.push(n.uint32());else i.servers.push(n.uint32());break;case 5:if(i.backups&&i.backups.length||(i.backups=[]),2==(7&o))for(o=n.uint32()+n.pos;n.pos<o;)i.backups.push(n.uint32());else i.backups.push(n.uint32());break;default:n.skipType(7&o)}}return i},n}(),oB=t.FileDownloadIndexErr=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(16).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.FileDownloadIndexErr;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),pB=t.GroupAllUsersList=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.pageSize=0,n.prototype.pageNumber=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.pageSize&&Object.hasOwnProperty.call(n,"pageSize")&&r.uint32(24).uint32(n.pageSize),null!=n.pageNumber&&Object.hasOwnProperty.call(n,"pageNumber")&&r.uint32(32).uint32(n.pageNumber),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAllUsersList;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.pageSize=n.uint32();break;case 4:i.pageNumber=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),qB=t.GroupAllUsersResult=function(){function n(n){if(this.memberInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.totalSize=0,n.prototype.pageSize=0,n.prototype.pageNumber=0,n.prototype.memberInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.totalSize&&Object.hasOwnProperty.call(n,"totalSize")&&r.uint32(24).uint32(n.totalSize),null!=n.pageSize&&Object.hasOwnProperty.call(n,"pageSize")&&r.uint32(32).uint32(n.pageSize),null!=n.pageNumber&&Object.hasOwnProperty.call(n,"pageNumber")&&r.uint32(40).uint32(n.pageNumber),null!=n.memberInfos&&n.memberInfos.length)for(var i=0;i<n.memberInfos.length;++i)t.GroupAllUsersResult.MemberInfo.encode(n.memberInfos[i],r.uint32(50).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAllUsersResult;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.totalSize=n.uint32();break;case 4:i.pageSize=n.uint32();break;case 5:i.pageNumber=n.uint32();break;case 6:i.memberInfos&&i.memberInfos.length||(i.memberInfos=[]),i.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.MemberInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.account="",n.prototype.ts=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(10).string(n.account),null!=n.ts&&Object.hasOwnProperty.call(n,"ts")&&r.uint32(16).uint32(n.ts),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAllUsersResult.MemberInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.account=n.string();break;case 2:i.ts=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),n}(),rB=t.UserStatusList=function(){function n(n){if(this.users=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.users=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.users&&n.users.length)for(var i=0;i<n.users.length;++i)r.uint32(18).string(n.users[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserStatusList;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.users&&i.users.length||(i.users=[]),i.users.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),sB=t.UserStatusResult=function(){function n(n){if(this.userInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.userInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.userInfos&&n.userInfos.length)for(var i=0;i<n.userInfos.length;++i)t.UserStatusResult.UserStatusInfo.encode(n.userInfos[i],r.uint32(18).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserStatusResult;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.userInfos&&i.userInfos.length||(i.userInfos=[]),i.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.UserStatusInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.account="",n.prototype.ts=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(10).string(n.account),null!=n.ts&&Object.hasOwnProperty.call(n,"ts")&&r.uint32(16).uint32(n.ts),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserStatusResult.UserStatusInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.account=n.string();break;case 2:i.ts=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),n}(),tB=t.UserAttributeGet=function(){function n(n){if(this.attributes=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.attributes=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),null!=n.attributes&&n.attributes.length)for(var i=0;i<n.attributes.length;++i)r.uint32(26).string(n.attributes[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeGet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;case 3:i.attributes&&i.attributes.length||(i.attributes=[]),i.attributes.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),uB=t.UserAttributeRet=function(){function n(n){if(this.attributeInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.attributeInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.attributeInfos&&n.attributeInfos.length)for(var i=0;i<n.attributeInfos.length;++i)t.UserAttributeRet.AttributeInfo.encode(n.attributeInfos[i],r.uint32(18).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeRet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.attributeInfos&&i.attributeInfos.length||(i.attributeInfos=[]),i.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeRet.AttributeInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&o)}}return i},n}(),n}(),vB=t.UserAttributeSet=function(){function n(n){if(this.attributeInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.attributeInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),null!=n.attributeInfos&&n.attributeInfos.length)for(var i=0;i<n.attributeInfos.length;++i)t.UserAttributeSet.AttributeInfo.encode(n.attributeInfos[i],r.uint32(26).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeSet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;case 3:i.attributeInfos&&i.attributeInfos.length||(i.attributeInfos=[]),i.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeSet.AttributeInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&o)}}return i},n}(),n}(),wB=t.UserAttributeMod=function(){function n(n){if(this.attributeInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.attributeInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),null!=n.attributeInfos&&n.attributeInfos.length)for(var i=0;i<n.attributeInfos.length;++i)t.UserAttributeMod.AttributeInfo.encode(n.attributeInfos[i],r.uint32(26).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeMod;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;case 3:i.attributeInfos&&i.attributeInfos.length||(i.attributeInfos=[]),i.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeMod.AttributeInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&o)}}return i},n}(),n}(),xB=t.UserAttributeDel=function(){function n(n){if(this.attributes=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.prototype.attributes=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),null!=n.attributes&&n.attributes.length)for(var i=0;i<n.attributes.length;++i)r.uint32(26).string(n.attributes[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeDel;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;case 3:i.attributes&&i.attributes.length||(i.attributes=[]),i.attributes.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),yB=t.UserAttributeErr=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(16).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeErr;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),zB=t.UserAttributeKeysGet=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.account="",n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(18).string(n.account),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeKeysGet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.account=n.string();break;default:n.skipType(7&o)}}return i},n}(),AB=t.UserAttributeKeysRet=function(){function n(n){if(this.keys=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.keys=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.keys&&n.keys.length)for(var i=0;i<n.keys.length;++i)r.uint32(18).string(n.keys[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeKeysRet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.keys&&i.keys.length||(i.keys=[]),i.keys.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),BB=t.UserAttributeRsp=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserAttributeRsp;n.pos<r;){var o=n.uint32();o>>>3==1?i.seq=n.uint64():n.skipType(7&o)}return i},n}(),CB=t.GroupStatusList=function(){function n(n){if(this.groups=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.groups=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.groups&&n.groups.length)for(var i=0;i<n.groups.length;++i)r.uint32(18).string(n.groups[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupStatusList;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.groups&&i.groups.length||(i.groups=[]),i.groups.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),DB=t.GroupStatusResult=function(){function n(n){if(this.groupInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.groupInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.groupInfos&&n.groupInfos.length)for(var i=0;i<n.groupInfos.length;++i)t.GroupStatusResult.GroupInfo.encode(n.groupInfos[i],r.uint32(18).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupStatusResult;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.groupInfos&&i.groupInfos.length||(i.groupInfos=[]),i.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.GroupInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.group="",n.prototype.memberCount=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(10).string(n.group),null!=n.memberCount&&Object.hasOwnProperty.call(n,"memberCount")&&r.uint32(16).uint32(n.memberCount),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupStatusResult.GroupInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.group=n.string();break;case 2:i.memberCount=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),n}(),EB=t.GroupCountNotice=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.size=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(8).uint64(n.instance),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(16).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(26).string(n.group),null!=n.size&&Object.hasOwnProperty.call(n,"size")&&r.uint32(32).uint32(n.size),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupCountNotice;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.instance=n.uint64();break;case 2:i.seq=n.uint64();break;case 3:i.group=n.string();break;case 4:i.size=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),FB=t.GroupAttributeGet=function(){function n(n){if(this.attributes=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.attributes=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.attributes&&n.attributes.length)for(var i=0;i<n.attributes.length;++i)r.uint32(26).string(n.attributes[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeGet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.attributes&&i.attributes.length||(i.attributes=[]),i.attributes.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),GB=t.GroupAttributeRet=function(){function n(n){if(this.attributeMaps=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.attributeMaps=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.attributeMaps&&n.attributeMaps.length)for(var i=0;i<n.attributeMaps.length;++i)t.GroupAttributeRet.AttributeMap.encode(n.attributeMaps[i],r.uint32(18).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeRet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.attributeMaps&&i.attributeMaps.length||(i.attributeMaps=[]),i.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeMap=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.prototype.origin="",n.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),null!=n.origin&&Object.hasOwnProperty.call(n,"origin")&&r.uint32(26).string(n.origin),null!=n.ms&&Object.hasOwnProperty.call(n,"ms")&&r.uint32(32).uint64(n.ms),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeRet.AttributeMap;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;case 3:i.origin=n.string();break;case 4:i.ms=n.uint64();break;default:n.skipType(7&o)}}return i},n}(),n}(),HB=t.GroupAttributeSet=function(){function n(n){if(this.attributeInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.broadcast=!1,n.prototype.attributeInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.broadcast&&Object.hasOwnProperty.call(n,"broadcast")&&r.uint32(24).bool(n.broadcast),null!=n.attributeInfos&&n.attributeInfos.length)for(var i=0;i<n.attributeInfos.length;++i)t.GroupAttributeSet.AttributeInfo.encode(n.attributeInfos[i],r.uint32(34).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeSet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.broadcast=n.bool();break;case 4:i.attributeInfos&&i.attributeInfos.length||(i.attributeInfos=[]),i.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeSet.AttributeInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&o)}}return i},n}(),n}(),IB=t.GroupAttributeMod=function(){function n(n){if(this.attributeInfos=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.broadcast=!1,n.prototype.attributeInfos=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.broadcast&&Object.hasOwnProperty.call(n,"broadcast")&&r.uint32(24).bool(n.broadcast),null!=n.attributeInfos&&n.attributeInfos.length)for(var i=0;i<n.attributeInfos.length;++i)t.GroupAttributeMod.AttributeInfo.encode(n.attributeInfos[i],r.uint32(34).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeMod;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.broadcast=n.bool();break;case 4:i.attributeInfos&&i.attributeInfos.length||(i.attributeInfos=[]),i.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeInfo=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeMod.AttributeInfo;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;default:n.skipType(7&o)}}return i},n}(),n}(),JB=t.GroupAttributeDel=function(){function n(n){if(this.attributes=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.broadcast=!1,n.prototype.attributes=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.broadcast&&Object.hasOwnProperty.call(n,"broadcast")&&r.uint32(24).bool(n.broadcast),null!=n.attributes&&n.attributes.length)for(var i=0;i<n.attributes.length;++i)r.uint32(34).string(n.attributes[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeDel;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.broadcast=n.bool();break;case 4:i.attributes&&i.attributes.length||(i.attributes=[]),i.attributes.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),KB=t.GroupAttributeAlt=function(){function n(n){if(this.attributeMaps=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.attributeMaps=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(24).uint64(n.instance),null!=n.attributeMaps&&n.attributeMaps.length)for(var i=0;i<n.attributeMaps.length;++i)t.GroupAttributeAlt.AttributeMap.encode(n.attributeMaps[i],r.uint32(34).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeAlt;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;case 3:i.instance=n.uint64();break;case 4:i.attributeMaps&&i.attributeMaps.length||(i.attributeMaps=[]),i.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.AttributeMap=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.key="",n.prototype.value="",n.prototype.origin="",n.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){return r||(r=L.create()),null!=n.key&&Object.hasOwnProperty.call(n,"key")&&r.uint32(10).string(n.key),null!=n.value&&Object.hasOwnProperty.call(n,"value")&&r.uint32(18).string(n.value),null!=n.origin&&Object.hasOwnProperty.call(n,"origin")&&r.uint32(26).string(n.origin),null!=n.ms&&Object.hasOwnProperty.call(n,"ms")&&r.uint32(32).uint64(n.ms),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeAlt.AttributeMap;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.key=n.string();break;case 2:i.value=n.string();break;case 3:i.origin=n.string();break;case 4:i.ms=n.uint64();break;default:n.skipType(7&o)}}return i},n}(),n}(),LB=t.GroupAttributeRsp=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeRsp;n.pos<r;){var o=n.uint32();o>>>3==1?i.seq=n.uint64():n.skipType(7&o)}return i},n}(),MB=t.GroupAttributeErr=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(16).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeErr;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),NB=t.GroupAttributeKeysGet=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.group="",n.encode=function(n,r){return r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.group&&Object.hasOwnProperty.call(n,"group")&&r.uint32(18).string(n.group),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeKeysGet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.group=n.string();break;default:n.skipType(7&o)}}return i},n}(),OB=t.GroupAttributeKeysRet=function(){function n(n){if(this.keys=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.keys=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.keys&&n.keys.length)for(var i=0;i<n.keys.length;++i)r.uint32(18).string(n.keys[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.GroupAttributeKeysRet;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.keys&&i.keys.length||(i.keys=[]),i.keys.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),PB=t.SubscribeUserStatus=function(){function n(n){if(this.users=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.users=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.users&&n.users.length)for(var i=0;i<n.users.length;++i)r.uint32(18).string(n.users[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.SubscribeUserStatus;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.users&&i.users.length||(i.users=[]),i.users.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),QB=t.UnsubscribeUserStatus=function(){function n(n){if(this.users=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.users=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.users&&n.users.length)for(var i=0;i<n.users.length;++i)r.uint32(18).string(n.users[i]);return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UnsubscribeUserStatus;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.users&&i.users.length||(i.users=[]),i.users.push(n.string());break;default:n.skipType(7&o)}}return i},n}(),RB=t.UserJoinNotice=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.user="",n.encode=function(n,r){return r||(r=L.create()),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(8).uint64(n.instance),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(16).uint64(n.seq),null!=n.user&&Object.hasOwnProperty.call(n,"user")&&r.uint32(26).string(n.user),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserJoinNotice;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.instance=n.uint64();break;case 2:i.seq=n.uint64();break;case 3:i.user=n.string();break;default:n.skipType(7&o)}}return i},n}(),SB=t.UserQuitNotice=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.user="",n.encode=function(n,r){return r||(r=L.create()),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(8).uint64(n.instance),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(16).uint64(n.seq),null!=n.user&&Object.hasOwnProperty.call(n,"user")&&r.uint32(26).string(n.user),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserQuitNotice;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.instance=n.uint64();break;case 2:i.seq=n.uint64();break;case 3:i.user=n.string();break;default:n.skipType(7&o)}}return i},n}(),TB=t.UserWaitNotice=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.user="",n.encode=function(n,r){return r||(r=L.create()),null!=n.instance&&Object.hasOwnProperty.call(n,"instance")&&r.uint32(8).uint64(n.instance),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(16).uint64(n.seq),null!=n.user&&Object.hasOwnProperty.call(n,"user")&&r.uint32(26).string(n.user),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.UserWaitNotice;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.instance=n.uint64();break;case 2:i.seq=n.uint64();break;case 3:i.user=n.string();break;default:n.skipType(7&o)}}return i},n}(),UB=t.SubscribeResponse=function(){function n(n){if(this.errors=[],n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,n.prototype.errors=q.emptyArray,n.encode=function(n,r){if(r||(r=L.create()),null!=n.seq&&Object.hasOwnProperty.call(n,"seq")&&r.uint32(8).uint64(n.seq),null!=n.errors&&n.errors.length)for(var i=0;i<n.errors.length;++i)t.SubscribeResponse.SubscribeErrorsType.encode(n.errors[i],r.uint32(18).fork()).ldelim();return r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.SubscribeResponse;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.seq=n.uint64();break;case 2:i.errors&&i.errors.length||(i.errors=[]),i.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(n,n.uint32()));break;default:n.skipType(7&o)}}return i},n.SubscribeErrorsType=function(){function n(n){if(n)for(var r=Object.keys(n),i=0;i<r.length;++i)null!=n[r[i]]&&(this[r[i]]=n[r[i]])}return n.prototype.account="",n.prototype.code=0,n.encode=function(n,r){return r||(r=L.create()),null!=n.account&&Object.hasOwnProperty.call(n,"account")&&r.uint32(10).string(n.account),null!=n.code&&Object.hasOwnProperty.call(n,"code")&&r.uint32(16).uint32(n.code),r},n.decode=function(n,r){n instanceof u||(n=u.create(n)),r=void 0===r?n.len:n.pos+r;for(var i=new t.SubscribeResponse.SubscribeErrorsType;n.pos<r;){var o=n.uint32();switch(o>>>3){case 1:i.account=n.string();break;case 2:i.code=n.uint32();break;default:n.skipType(7&o)}}return i},n}(),n}(),VB=Object.freeze({__proto__:null,URI:YA,Wrapper:Oh,Ping:ZA,Pong:$A,UserJoin:aB,UserResp:bB,UserQuit:cB,UserDrop:dB,GroupEnter:eB,GroupLeave:fB,GroupReply:gB,GroupLeaveNotice:ur,GroupEnterNotice:vr,Message:wr,Ack:xr,FileUploadIndexGet:hB,FileUploadIndexRet:iB,FileUploadIndexSet:jB,FileUploadIndexFin:kB,FileUploadIndexErr:lB,FileDownloadIndexGet:mB,FileDownloadIndexRet:nB,FileDownloadIndexErr:oB,GroupAllUsersList:pB,GroupAllUsersResult:qB,UserStatusList:rB,UserStatusResult:sB,UserAttributeGet:tB,UserAttributeRet:uB,UserAttributeSet:vB,UserAttributeMod:wB,UserAttributeDel:xB,UserAttributeErr:yB,UserAttributeKeysGet:zB,UserAttributeKeysRet:AB,UserAttributeRsp:BB,GroupStatusList:CB,GroupStatusResult:DB,GroupCountNotice:EB,GroupAttributeGet:FB,GroupAttributeRet:GB,GroupAttributeSet:HB,GroupAttributeMod:IB,GroupAttributeDel:JB,GroupAttributeAlt:KB,GroupAttributeRsp:LB,GroupAttributeErr:MB,GroupAttributeKeysGet:NB,GroupAttributeKeysRet:OB,SubscribeUserStatus:PB,UnsubscribeUserStatus:QB,UserJoinNotice:RB,UserQuitNotice:SB,UserWaitNotice:TB,SubscribeResponse:UB,default:t}),WB=Math.ceil,yr=function(t){return function(n,r,i){var o=(n=String(jb(n))).length;return i=void 0===i?" ":String(i),(r=ta(r))<=o||""==i?n:(r-=o,(o=Pn.call(i,WB(r/i.length))).length>r&&(o=o.slice(0,r)),t?n+o:o+n)}},XB=yr(!1),YB=yr(!0),zr=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(De);N({target:"String",proto:!0,forced:zr},{padEnd:function(t){return YB(this,t,1<arguments.length?arguments[1]:void 0)}});var ZB=zf,Ar=function(t){return function(n){n=qb(n);for(var r,i=Dc(n),o=i.length,s=0,a=[];o>s;)r=i[s++],ka&&!ZB.call(n,r)||a.push(t?[r,n[r]]:n[r]);return a}},$B=Ar(!0),aC=Ar(!1);N({target:"Object",stat:!0},{entries:function(t){return $B(t)}});var bC=Fb.f,Br="".endsWith,cC=Math.min,Cr=dk("endsWith"),dC=!Cr&&!!function(){var t=bC(String.prototype,"endsWith");return t&&!t.writable}();N({target:"String",proto:!0,forced:!dC&&!Cr},{endsWith:function(t){var n=String(jb(this));ck(t);var r=1<arguments.length?arguments[1]:void 0,i=ta(n.length);return r=void 0===r?i:cC(ta(r),i),i=String(t),Br?Br.call(n,i,r):n.slice(r-i.length,r)===i}}),dh("match",1,function(t,n,r){return[function(n){var r=jb(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(t){var i=r(n,t,this);if(i.done)return i.value;if(t=va(t),i=String(this),!t.global)return Ke(t,i);var o=t.unicode;t.lastIndex=0;for(var s,a=[],u=0;null!==(s=Ke(t,i));)s=String(s[0]),a[u]=s,""===s&&(t.lastIndex=xj(i,ta(t.lastIndex),o)),u++;return 0===u?null:a}]});var eC=Fb.f,Dr="".startsWith,fC=Math.min,Er=dk("startsWith"),gC=!Er&&!!function(){var t=eC(String.prototype,"startsWith");return t&&!t.writable}();N({target:"String",proto:!0,forced:!gC&&!Er},{startsWith:function(t){var n=String(jb(this));ck(t);var r=ta(fC(1<arguments.length?arguments[1]:void 0,n.length)),i=String(t);return Dr?Dr.call(n,i,r):n.slice(r,r+i.length)===i}});var Nm=function(t){var n=/(%?)(%([jds]))/g,r=Array.prototype.slice.call(arguments,1);return r.length&&(t=t.replace(n,function(t,n,i,o){switch(i=r.shift(),o){case"s":i=""+i;break;case"d":i=Number(i);break;case"j":i=JSON.stringify(i)}return n?(r.unshift(i),t):i})),r.length&&(t+=" "+r.join(" ")),""+(t=t.replace(/%{2,2}/g,"%"))},hC=/\s/,iC=function(t){for(var n=t.length;n--&&hC.test(t.charAt(n)););return n},jC=/^\s+/,Fr=NaN,kC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,mC=/^0o[0-7]+$/i,nC=parseInt,gl=function(t){if("number"==typeof t)return t;if(ie(t))return Fr;if(lb(t)&&(t=lb(t="function"==typeof t.valueOf?t.valueOf():t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t?t.slice(0,iC(t)+1).replace(jC,""):t;var n=lC.test(t);return n||mC.test(t)?nC(t.slice(2),n?2:8):kC.test(t)?Fr:+t},oC=Math.max,pC=Math.min,qC=function(t,n,r){function i(n){var r=c,i=l;return c=l=void 0,d=n,f=t.apply(i,r)}function o(t){var r=t-p;return t-=d,void 0===p||r>=n||0>r||g&&t>=y}function s(){var t=Cb.Date.now();if(o(t))return a(t);var r=setTimeout,i=t-d;t=n-(t-p),h=r(s,i=g?pC(t,y-i):t)}function a(t){return h=void 0,b&&c?i(t):(c=l=void 0,f)}function u(){var t=Cb.Date.now(),r=o(t);if(c=arguments,l=this,p=t,r){if(void 0===h)return d=t=p,h=setTimeout(s,n),v?i(t):f;if(g)return clearTimeout(h),h=setTimeout(s,n),i(p)}return void 0===h&&(h=setTimeout(s,n)),f}var c,l,f,h,p,d=0,v=!1,g=!1,b=!0;if("function"!=typeof t)throw TypeError("Expected a function");if(n=gl(n)||0,lb(r)){v=!!r.leading;var y=(g="maxWait"in r)?oC(gl(r.maxWait)||0,n):y;b="trailing"in r?!!r.trailing:b}return u.cancel=function(){void 0!==h&&clearTimeout(h),d=0,c=p=l=h=void 0},u.flush=function(){return void 0===h?f:a(Cb.Date.now())},u},yc=function(t){function r(t,o){return W(this,r),m(n(t=i.call(this,Mm(t,o))),"originalError",void 0),m(n(t),"code",void 0),m(n(t),"serverCode",void 0),"number"==typeof o?t.code=o:"string"==typeof o?t.name=o:void 0!==o&&(o.originalError&&(t.originalError=o.originalError),void 0!==o.code&&(t.code=o.code),void 0!==o.serverCode&&(t.serverCode=o.serverCode)),t}la(r,t);var i=ma(r);return r}(ef(Error)),Ia=function(t){function r(t,o){return W(this,r),m(n(t=i.call(this,Mm(t,o))),"name","RtmInternalError"),m(n(t),"code",void 0),t.code=o,t}la(r,t);var i=ma(r);return r}(ef(Error)),Ph=function(){return function(t){function n(t){W(this,n);var i=Object.keys(t);return r.call(this,t[i[0]],i[0])}la(n,t);var r=ma(n);return n}(Ia)},Fa=Ph(),db=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmTimeoutError"),t}la(r,t);var i=ma(r);return r}(yc),I=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmInvalidArgumentError"),t}la(r,t);var i=ma(r);return r}(yc),K=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmInvalidStatusError"),t}la(r,t);var i=ma(r);return r}(yc),hl=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmInterruptedError"),t}la(r,t);var i=ma(r);return r}(yc),ib=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmLimitExceededError"),t}la(r,t);var i=ma(r);return r}(yc),rC=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmInvokeTooOftenError"),t}la(r,t);var i=ma(r);return r}(yc),da=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmUnavailableError"),m(n(t),"serverCode",void 0),m(n(t),"statusCode",void 0),t}la(r,t);var i=ma(r);return r}(yc),Ye=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmUnauthenticatedError"),m(n(t),"serverCode",void 0),t}la(r,t);var i=ma(r);return r}(yc),Wc=function(t){function r(){W(this,r);for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return m(n(t=i.call.apply(i,[this].concat(o))),"name","RtmUnknownError"),t}la(r,t);var i=ma(r);return r}(yc),Sa=function(t){return t instanceof db||t instanceof pb},sa=function(t){return t instanceof yc},Yd=function(t,n,r){return['Executing "%s.%s" timed out after %ds',t,n,r/1e3]},Lm=new Map,sC=function(){var t=new Date;return"".concat(t.toISOString().split("T")[1].replace(/\..+/,""),".").concat(t.getMilliseconds())},xf=Object.keys,Hg=Object.entries.bind(Object),Cg=function(t){return"string"==typeof t?t.endsWith(".")?t:"".concat(t,"."):t},Sm=function(t){for(var n="",r=(t=new Uint8Array(t)).byteLength,i=-1;++i<r;)n+=String.fromCharCode(t[i]);return n=btoa(n),"data:;base64,".concat(n)},tC=R(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})});N({target:"Date",proto:!0,forced:tC},{toJSON:function(t){var n=lc(t=Qa(this));return"number"!=typeof n||isFinite(n)?t.toISOString():null}}),N({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var $t=Object.prototype.hasOwnProperty,Gr=function(t,n,r){return JSON.stringify(Ym(t),n,r)};Gr.ensureProperties=Ym;var Ze,uC=function(t,n){n=n||{};var r=X(t);if("string"===r&&0<t.length)return au(t);if("number"===r&&isFinite(t))return n.long?864e5<=(n=Math.abs(t))?Jg(t,n,864e5,"day"):36e5<=n?Jg(t,n,36e5,"hour"):6e4<=n?Jg(t,n,6e4,"minute"):1e3<=n?Jg(t,n,1e3,"second"):t+" ms":864e5<=(n=Math.abs(t))?Math.round(t/864e5)+"d":36e5<=n?Math.round(t/36e5)+"h":6e4<=n?Math.round(t/6e4)+"m":1e3<=n?Math.round(t/1e3)+"s":t+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))},vC=function(t){function n(t){function i(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];if(i.enabled){i.diff=(t=Number(new Date))-(o||t),i.prev=o,o=i.curr=t,r[0]=n.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var a=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(t,o){return"%%"===t?"%":(a++,"function"==typeof(o=n.formatters[o])&&(t=o.call(i,r[a]),r.splice(a,1),a--),t)}),n.formatArgs.call(i,r),(i.log||n.log).apply(i,r)}}var o,s=null;return i.namespace=t,i.useColors=n.useColors(),i.color=n.selectColor(t),i.extend=r,i.destroy=n.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===s?n.enabled(t):s},set:function(t){s=t}}),"function"==typeof n.init&&n.init(i),i}function r(t,r){return(t=n(this.namespace+(void 0===r?":":r)+t)).log=this.log,t}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){var t=[].concat(G(n.names.map(i)),G(n.skips.map(i).map(function(t){return"-"+t}))).join(",");return n.enable(""),t},n.enable=function(t){n.save(t),n.names=[],n.skips=[];var r,i=("string"==typeof t?t:"").split(/[\s,]+/),o=i.length;for(r=0;r<o;r++)i[r]&&("-"===(t=i[r].replace(/\*/g,".*?"))[0]?n.skips.push(RegExp("^"+t.substr(1)+"$")):n.names.push(RegExp("^"+t+"$")))},n.enabled=function(t){if("*"===t[t.length-1])return!0;var r,i=0;for(r=n.skips.length;i<r;i++)if(n.skips[i].test(t))return!1;for(i=0,r=n.names.length;i<r;i++)if(n.names[i].test(t))return!0;return!1},n.humanize=uC,n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(function(r){n[r]=t[r]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(t){for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return n.colors[Math.abs(r)%n.colors.length]},n.enable(n.load()),n},Hr=$a(function(t,n){n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;n.splice(1,0,r,"color: inherit");var i=0,o=0;n[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),n.splice(o,0,r)}},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=function(){try{var t=n.storage.getItem("debug")}catch(t){}return!t&&void 0!==process&&"env"in process&&(t=process.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var r=localStorage;break e}catch(t){}r=void 0}n.storage=r,n.destroy=function(){var t=!1;return function(){t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),n.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),n.log=console.debug||console.log||function(){},t.exports=vC(n),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}),Ir=Hr("RTM:DEBUG");Ir.enabled=!1,function(t){t[t.Uploading=0]="Uploading",t[t.Free=1]="Free"}(Ze||(Ze={}));var wC=function(){function t(n){W(this,t),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),m(this,"rtmConfig",void 0),this.processId=n.processId,this.sdkVersion=n.sdkVersion,this.rtmConfig=n.rtmConfig,this.uploadRequest=n.uploadRequest,this.uploadState=Ze.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ha(t,[{key:"upload",value:function(t){this.LogCache.push(t),this.uploadState===Ze.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(t){var n=this;this.uploadState=Ze.Uploading,setTimeout(J(w.mark(function r(){var i,o;return w.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i={sdk_version:n.sdkVersion,process_id:n.processId,payload:JSON.stringify(t)},r.prev=1,r.next=4,n.uploadRequest(i,null!=(o=n.rtmConfig.enableCloudProxy)&&o);case 4:if(!Uk){r.next=6;break}throw Error("RTM is busy");case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(1),setTimeout(function(){return n.postLog(n.LogsToPost)},2>n.uploadResendCount++?2e3:1e4),r.abrupt("return");case 13:if(Ir('The logs uploaded for "process-'.concat(gg,'"')),0!==n.LogCache.length){r.next=17;break}return n.uploadState=Ze.Free,r.abrupt("return");case 17:n.uploadResendCount=0,n.LogsToPost=40>n.LogCache.length?n.LogCache.splice(0,n.LogCache.length):n.LogCache.splice(0,40),n.postLog(n.LogsToPost);case 20:case"end":return r.stop()}},r,null,[[1,8]])})),Zd.getParameter("LOG_UPLOAD_INTERVAL"))}}]),t}(),Jr=function(t,n,r,i,o,s,a,u){var c=0;for(a=!!a&&Id(a,u,3);c<i;){if(c in r){if(u=a?a(r[c],c,n):r[c],0<s&&gd(u))o=Jr(t,n,u,ta(u.length),o,s-1)-1;else{if(0x1fffffffffffff<=o)throw TypeError("Exceed the acceptable array length");t[o]=u}o++}c++}return o},xC=Jr;N({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=Qa(this),r=ta(n.length),i=Sg(n,0);return i.length=xC(i,n,n,r,0,void 0===t?1:$b(t)),i}}),N({target:"Object",stat:!0},{values:function(t){return aC(t)}});var Db,ud,F,yC=["CODE"];!function(t){t.CHINA="CN",t.ASIA="AS",t.NORTH_AMERICA="NA",t.EUROPE="EU",t.JAPAN="JP",t.INDIA="IN",t.OCEANIA="OC",t.SOUTH_AMERICA="SA",t.AFRICA="AF",t.OVERSEA="OVERSEA",t.GLOBAL="GLOBAL"}(F||(F={}));var M,jl,zC={CN:F.CHINA,NA:F.NORTH_AMERICA,EU:F.EUROPE,AS:F.ASIA,JP:F.JAPAN,IN:F.INDIA,GLOB:F.GLOBAL,AF:F.AFRICA,OC:F.OVERSEA,OVS:F.OVERSEA,SA:F.SOUTH_AMERICA},Kg=Wm((Db={},m(Db,F.ASIA,{CODE:F.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.NORTH_AMERICA,{CODE:F.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.EUROPE,{CODE:F.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.JAPAN,{CODE:F.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.INDIA,{CODE:F.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.OVERSEA,{CODE:F.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),m(Db,F.GLOBAL,{CODE:F.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.OCEANIA,{CODE:F.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.SOUTH_AMERICA,{CODE:F.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.AFRICA,{CODE:F.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.CHINA,{CODE:F.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),Db)),yf=(ud={},m(ud,F.ASIA,[F.CHINA,F.JAPAN,F.INDIA]),m(ud,F.EUROPE,[]),m(ud,F.NORTH_AMERICA,[]),m(ud,F.SOUTH_AMERICA,[]),m(ud,F.OCEANIA,[]),m(ud,F.AFRICA,[]),ud),Kr=[F.OVERSEA,F.GLOBAL,F.CHINA,F.NORTH_AMERICA,F.EUROPE,F.ASIA,F.JAPAN,F.INDIA,F.OCEANIA,F.SOUTH_AMERICA,F.AFRICA],Zm=function(t){return Object.values(yf).flat().includes(t)},cu=function(t){var n;return null==(n=Hg(yf).find(function(n){return(n=ra(n,2))[0],n[1].includes(t)}))?void 0:n[0]},AC=function(t){return t.sort(function(t,n){return Kr.indexOf(t)-Kr.indexOf(n)})},xe=function(t){var n=new Set;if(0===(t=AC(t).slice(0,3).map(function(t){var r=Kg[t];if(void 0===r)throw new Ia("invalid area key");return t=r.CODE,r=ff(r,yC),n.add(t),r})).length)throw new Ia("areas cannot be empty");return ua({CODES:n},t.reduce(function(t,n){for(var r=0,i=Hg(t);r<i.length;r++){var o=ra(i[r],2),s=o[0];o=o[1],t[s]=Array.from(new Set([].concat(G(n[s]),G(o))))}return t}))},Lr=function(){var t=J(w.mark(function t(n,r){var i,o,s,a,u,c=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(2<(o=2<c.length&&void 0!==c[2]?c[2]:0))){t.next=3;break}return t.abrupt("return");case 3:return s={withCredentials:!0,body:n,timeout:2e4},a=0<o?(null==M?void 0:M.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==M?void 0:M.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",u=r?"https://".concat(null!=(i=null==M?void 0:M.PROXY_NGINX[0])?i:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(a,"&p=443&d=upload/v1"):"https://".concat(a,"/upload/v1"),t.next=8,te(u,s).catch(function(t){return Lr(n,r,o+1)});case 8:case"end":return t.stop()}},t)}));return function(n,r){return t.apply(this,arguments)}}(),Mr=new wC({processId:"process-".concat(gg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.3-17-g1e27aa38"),uploadRequest:Lr,rtmConfig:{}}),il="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Nr="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Or="serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "),BC="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),ye=function(t){if("string"==typeof t)return oa(t);if(Array.isArray(t)&&t.every(function(t){return"string"==typeof t}))return t.map(function(t){return oa(t)});if(!Il(t)){for(var n={},r=0;r<Or.length;r++){var i=Or[r];i in t&&(n[i]=t[i])}if(0<Object.keys(n).length)return n;if(5>Object.keys(t).length){for(r=0,t=Object.entries(t);r<t.length;r++){var o=ra(t[r],2);i=o[0],o=o[1],il.includes(i)?n[i]="[Hidden Info]":n[oa(i)]="string"==typeof o?oa(o):"[Sensitive Info]"}return n}return"[Sensitive Info]"}return t},Pr=function(t){return"object"===X(t)?yd(t)?Vm(fe(t,5),il,Nr):t.constructor&&t.constructor.name:t},Qr=function(t,n){return t instanceof Error?t.message:"string"!=typeof t?JSON.stringify(Vm(fe(t,5),il,Nr)):(n=n.map(function(t){return t instanceof Error?t.message:"object"===X(t)?Gr(Array.isArray(t)?t.map(Pr):Pr(t)):t}),Nm.apply(void 0,[t.replace(/%[%Oo]/g,function(t){return"%%"===t?"%":"%o"===t||"%O"===t?"%s":t})].concat(G(n))))},CC=1,Rr=function(t,n,r){var i=Hr(t);return i.enabled=!0,i.log=r,i.useColors=!1,function(r){for(var o=arguments.length,s=Array(1<o?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(n.enableLogUpload){var u=Qr(o=Cg(r),s);Mr.upload({log_item_id:"".concat(CC++),log_level:t,payload_str:"[".concat(sC(),"] ").concat(t," - ").concat(256<u.length?u.slice(0,256):u)})}switch(o=function(t){var n=u||Qr(Cg(r),s),o=Nc.LOG_HANDLER;"function"==typeof o&&o({level:t,message:n}),i(n)},t){case"RTM:INFO":n.logFilter.info&&o("log");break;case"RTM:WARN":n.logFilter.warn&&o("warning");break;case"RTM:ERROR":n.logFilter.error&&o("error");break;case"RTM:TRACK":n.logFilter.track&&o("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":n.logFilter.debug&&o("debug")}}},Sr=function(t){return function(n){var r=1===jl||void 0===t?"":"Ins#".concat(t," ");return"".concat(r).concat(n)}},kl=function(t,n,r){var i=Sr(jl);return Rr("RTM:".concat(n),r,function(n){return t(i(n))})},tb=function(){return function(t){function r(t,o){var s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,r);var a=i.call(this);if(m(n(a),"logError",void 0),m(n(a),"invokeTracker",void 0),m(n(a),"resultTracker",void 0),m(n(a),"errorTracker",void 0),m(n(a),"eventTracker",void 0),m(n(a),"info",void 0),m(n(a),"warn",void 0),m(n(a),"log",void 0),m(n(a),"genLogger",void 0),m(n(a),"loggerId",void 0),m(n(a),"logger",void 0),m(n(a),"name",void 0),a.logger=t,a.name=o,a.loggerId=t.loggerId,a.info=t.info,a.warn=t.warn,a.logError=t.logError,a.genLogger=t.genLogger,a.log=t.genLogger("RTM:DEBUG","<".concat(o,"> ")),a.invokeTracker=t.genTracker("Invoke"),a.eventTracker=t.genTracker("Event"),a.resultTracker=t.genTracker("Result"),a.errorTracker=t.genTracker("Error"),s){var u=a.emit.bind(n(a));a.emit=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];t=r[0],i=r.slice(1);var s=BC.includes(t);a.eventTracker.apply(a,["%s: ".concat(0<i.length?"%s emitted with args: ".concat(i.map(function(){return"%o"})):"%s emitted"),o,t].concat(G(s?i.map(ye):i)));try{u.apply(void 0,r)}catch(r){a.logError("Caught in the callback function of the event %s",t,r)}}}return a}la(r,t);var i=ma(r);return r}(ea)},DC=function(t){return kl(console.log.bind(console),"INFO",t)},EC=function(t){return kl(console.warn.bind(console),"WARN",t)},FC=function(t){return kl(console.error.bind(console),"ERROR",t)},Tr=function(t,n){return function(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=Sr(t),s=console.debug.bind(console),a=Rr(r,n,function(t){return s(o(t))});return function(t){for(var n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return a.apply(void 0,[i+t].concat(r))}}},GC=function(t,n){return function(r){return Tr(t,n)("RTM:TRACK","[".concat(r,"] "))}},Li=t.URI,eu=Oh,HC=ff(VB,["Wrapper"]),$m=Gk(HC,"URI"),Ur=function(t,n){var r=-1,i=t.length,o=i-1;for(n=void 0===n?i:n;++r<n;){var s=t[i=nr(r,o)];t[i]=t[r],t[r]=s}return t.length=n,t},IC=function(t){return Ur(Xh(t))},JC=function(t){return Ur(Ni(t))},$e=function(t){return(Va(t)?IC:JC)(t)},af={0:9591,1:9593},$d=function(t){return"https://".concat(t,"/api/v1")},KC=bb.apply(void 0,G($e(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map($d)))),LC=bb.apply(void 0,G($e(["ap-web-1.agora.io","ap-web-2.agora.io"].map($d)))),MC=bb.apply(void 0,G($e(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map($d)))),NC=bb.apply(void 0,G($e(["ap-web-3.agora.io","ap-web-4.agora.io"].map($d)))),ll=Ph(),ml=function(t){function r(t,o,s,a,u,c){W(this,r);var l=i.call(this,u,Ai("Socket-",u.loggerId));if(m(n(l),"isActiveClose",!1),m(n(l),"loggedIn",!1),m(n(l),"useNewDomain",void 0),m(n(l),"receivedPacket",new Pa),m(n(l),"open$",void 0),m(n(l),"input$",new Pa),m(n(l),"userJoin$",new Pa),m(n(l),"attemptsSinceLastError",0),m(n(l),"message$",new Pa),m(n(l),"socket$",void 0),m(n(l),"toClose",new Pa),m(n(l),"toReconnect",new Pa),m(n(l),"sendLogger",void 0),m(n(l),"receiveLogger",void 0),m(n(l),"ip",void 0),m(n(l),"env",void 0),m(n(l),"ticket",void 0),m(n(l),"context",void 0),m(n(l),"getDomain",function(){return an(l.ip,l.useNewDomain)}),m(n(l),"socketReconnector",function(t){var r=function(t){return l.attemptsSinceLastError+=1,l.warn("The %s of Env %d reconnecting %s",l.name,l.env,t.message),Bc(3e3)};return t.pipe(Ga(function(t){return l.log("socket connection closed"),l.loggedIn=!1,2<=l.attemptsSinceLastError?(l.warn("socket connection failure"),l.emit("connectionFailure"),l.close(),Z(t)):l.isActiveClose?vb:(l.emit("reconnect"),l.useNewDomain=!l.useNewDomain,Z(t))}),oe(function(t){return t.pipe(Cc(r))}))}),l.ip=t,l.env=o,l.ticket=s,l.context=a,l.useNewDomain=null!=c?c:.5<=Math.random(),l.sendLogger=l.genLogger("RTM:MSG:SEND"),l.receiveLogger=l.genLogger("RTM:MSG:RECV"),0!==o&&1!==o)throw new ll({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!Gm(t))throw new ll({IP_NOT_VALID:"The ip from ap is not valid"});var f=af[o];l.log("Opening websocket address %s for the Env %d",l.ip,l.env);var h=Xb(l.input$,l.userJoin$.pipe(Rt(2)),l.message$).pipe(ba(function(t){return Oh.encode(t).finish()}));return t=Xb(St("",{protocols:[],makeWebSocket:function(){if(l.context.config.enableCloudProxy){if(0===l.context.cloudProxyServers.length)throw l.logError("No cloud proxy server to connect"),new da;var t="wss://".concat(an(bn(l.context.cloudProxyServers),!1),"/");t=we(t,"sid",l.context.sid),t=we(t,"remote_port",f.toString()),t=we(t,"remote_ip",l.ip),t=new WebSocket(t=we(t,"token",l.context.key))}else t=new WebSocket("wss://".concat(l.getDomain(),":").concat(f));return t.binaryType="arraybuffer",t}}),l.toReconnect),l.socket$=Ca(t,Tk.pipe(hb(15e3),Ga(function(t){return Sa(t)&&l.warn("socket open timed out"),Z(t)}))).pipe(ba(function(t){if(t instanceof Error)throw l.warn("Env_%d: Force reconnect the socket",l.env),t;return t(h).pipe(ba(function(t){return Oh.decode(new Uint8Array(t))}))}),l.socketReconnector),l.open$=l.socket$.pipe(ca(function(t){l.log("Websocket opened",l.name),t.subscribe(function(t){var r=t.data,i=HA({},Gk(r=$m[t=Li[t.uri].slice(0,-3)].decode(r),"toJSON"),function(t,r){return r instanceof U?Km(r):r}),o=!1;if((r instanceof vr||r instanceof ur)&&r.instance.lessThanOrEqual(0xffffffff)&&(o=!0),r instanceof wr||r instanceof xr){var s=r.instance,a=r.sequence;(r.dialogue.lessThanOrEqual(0xffffffff)||s.lessThanOrEqual(0xffffffff)||a.lessThan(1))&&(o=!0)}o?l.warn("Env_%d: Illegal %s, abandoned %o",l.env,t,i):("Pong"!==t&&l.receiveLogger("Env_%d: %s %o",l.env,t,i),l.receivedPacket.next([t,r]))},function(){})}),qf(void 0),ob(l.toClose),pe()),l}la(r,t);var i=ma(r);return Ha(r,[{key:"address",get:function(){return"".concat(this.ip,":").concat(af[this.env])}},{key:"sendPacket",value:function(t,r){if("Ping"!==t){var i=uc(r,function(t){return t instanceof U?Km(t):t});this.sendLogger("Env_%d: %s %o",this.env,t,i)}r=du(t,r),"UserJoin"===t?this.userJoin$.next(r):"Message"===t?this.message$.next(r):this.input$.next(r)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(t){var r=this;return this.receivedPacket.pipe(ca(function(t){var i=ra(t,2);t=i[0],i=i[1],"UserResp"===t&&(r.attemptsSinceLastError=0,r.loggedIn=!0),"UserDrop"===t&&r.emit("socketUserDrop",i)}),wb(function(r){return ra(r,1)[0]===t}),ba(function(t){return ra(t,2)[1]}))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new ll({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),r}(tb());N({target:"String",proto:!0,forced:zr},{padStart:function(t){return XB(this,t,1<arguments.length?arguments[1]:void 0)}});var OC=function(t){var n=xf(Kg);t=Yt(t);for(var r=0;r<n.length;r++){var i=Kg[n[r]];if(null!=i&&i.AP_DOMAINS.includes(t)||null!=i&&i.AP_BACKUP_DOMAINS.includes(t)||null!=i&&i.PROXY_AP.includes(t))return[i.CODE]}return[F.CHINA,F.GLOBAL]},PC={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},Vr={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},QC=[100,101,102],Qh=/web-(\d)/,Wr=function(t){function r(t,o){var s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,r);var a=i.call(this,o,"AccessPoint");return m(n(a),"handleUniLbsError",function(t,r){var i=t;if(4<t.toString().length){var o=t.toString().padStart(8,"0"),s=parseInt(o.slice(0,4),10);if(o=parseInt(o.slice(4,8),10),201===s)i=o;else if(101===s&&!QC.includes(o))return Z(Error("service is currently unavailable"))}if(s=i.toString(),!Object.keys(Vr).includes(s))return(t=new da(["Login is rejected by the server. The response code is %d",t],jg)).serverCode=i,Z(t);switch(i=PC[s=Vr[s]],s){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(r=new Ye(i,$q)).serverCode=t,Z(r);case"INVALID_USER_ID":return(r=new Ye(i,Jh)).serverCode=t,Z(r);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(r=new Ye(i,Kh)).serverCode=t,Z(r);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(r=new Ye(i,ar)).serverCode=t,Z(r);case"CANNOT_MEET_AREA_DEMAND":return(r=OC(r)).forEach(function(t){return a.failedAreas.add(t)}),a.failedAreas.size===(void 0===M?2:M.CODES.size)?((r=new I(i,jg)).serverCode=t,Z(r)):Z(Error("ap ".concat(r.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(r=new da(i,jg)).serverCode=t,Z(r);default:return Z(Im("ApResErrType",s))}}),m(n(a),"getApEdgeInfo$",void 0),m(n(a),"getApEdgeInfoEndFirst$",void 0),m(n(a),"apFinish$",new Pa),m(n(a),"retryCount",0),m(n(a),"failedAreas",new Set),m(n(a),"usedUrl",[]),m(n(a),"newDomainUsed",!1),m(n(a),"backupNewDomainUsed",!1),m(n(a),"genUrl",function(){return void 0===M?mi.apply(void 0,G($e([KC,LC]))).pipe(ni(function(t){return bb.apply(void 0,G(t))})):bb.apply(void 0,G(M.AP_DOMAINS.slice(0,3).map($d)))}),m(n(a),"genBackupUrl",function(){return void 0===M?mi.apply(void 0,G($e([MC,NC]))).pipe(ni(function(t){return bb.apply(void 0,G(t))})):bb.apply(void 0,G(M.AP_BACKUP_DOMAINS.slice(0,3).map($d)))}),m(n(a),"getApUrl$",function(t){var i,o;return a.genUrl().pipe(wb(function(t){return(!a.newDomainUsed||!t.includes("sd-rtn.com"))&&(t.includes("sd-rtn.com")&&(a.newDomainUsed=!0),!dl(a.usedUrl,function(r){var i;return r===(null==(i=t.match(Qh))?void 0:i[1])}))}),ca(function(t){var r;void 0===M&&"string"==typeof(t=null==(r=t.match(Qh))?void 0:r[1])&&a.usedUrl.push(t)}),Ka(t?Math.max(Nc.RECONNECTING_AP_NUM,null!=(i=null==M?void 0:M.CODES.size)?i:0):null!=(o=null==M?void 0:M.CODES.size)?o:2),Dd(function(){return r.runOutOfUrlSymbol}),Ga(function(t,i){return a.newDomainUsed=!1,t===r.runOutOfUrlSymbol?(a.usedUrl=[],i):Z(t)}))}),m(n(a),"getBackupApUrl$",function(t){var i,o;return a.genBackupUrl().pipe(wb(function(t){return(!a.backupNewDomainUsed||!t.includes("sd-rtn.com"))&&(t.includes("sd-rtn.com")&&(a.backupNewDomainUsed=!0),!dl(a.usedUrl,function(r){var i;return r===(null==(i=t.match(Qh))?void 0:i[1])}))}),ca(function(t){var r;void 0===M&&"string"==typeof(t=null==(r=t.match(Qh))?void 0:r[1])&&a.usedUrl.push(t)}),Ka(t?Math.max(Nc.RECONNECTING_AP_NUM,null!=(i=null==M?void 0:M.CODES.size)?i:0):null!=(o=null==M?void 0:M.CODES.size)?o:2),Dd(function(){return r.runOutOfUrlSymbol}),Ga(function(t,i){return a.backupNewDomainUsed=!1,t===r.runOutOfUrlSymbol?(a.usedUrl=[],i):Z(t)}))}),m(n(a),"getProxyApUrl$",function(t){var r,i;return bb.apply(void 0,G(((null==M?void 0:M.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map($d))).pipe(Ka(t?Math.max(Nc.RECONNECTING_AP_NUM,null!=(r=null==M?void 0:M.CODES.size)?r:0):null!=(i=null==M?void 0:M.CODES.size)?i:2))}),m(n(a),"context",void 0),m(n(a),"fetchCloudProxy",function(t,r){var i=Ai("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",t,i);var o=new AbortController;return a.apFinish$.pipe(Ka(1)).subscribe(function(){return o.abort()}),ad(J(w.mark(function s(){var u;return w.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=Ag(0,Number.MAX_SAFE_INTEGER),a.log("%s request opid: %d",i,u),s.abrupt("return",te(t,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:a.context.sid,opid:u,appid:a.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=r?r:a.context.key,cname:a.context.uid,uid:0,detail:ua({},void 0===M?{11:[F.CHINA,F.GLOBAL].join()}:{11:Array.from(M.CODES).map(function(t){return t===F.OVERSEA?"".concat(F.ASIA,",").concat(F.EUROPE,",").concat(F.AFRICA,",").concat(F.NORTH_AMERICA,",").concat(F.SOUTH_AMERICA,",").concat(F.OCEANIA):t}).join(",")})}}]},signal:o.signal}));case 3:case"end":return s.stop()}},s)}))).pipe(Ga(function(r){return"AbortError"!==r.name&&(a.logError(r),a.warn("The AP server %s request failure",t,r)),vb}),cb(function(){var r=J(w.mark(function r(o){var s,u,c,l,f,h,p,d,v,g,b,y,E,_,O,A,R,T;return w.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=JSON.parse(o.responseText),a.log("The %s response is %o",i,s),(void 0===(u=s.response_body)||0===u.length||u.some(function(t){var r;return void 0===(null==(r=t.buffer)?void 0:r.code)||23!==t.uri}))&&Z(new da("cloud proxy response_body not valid",jg)),0===(c=u.filter(function(t){return 0!==t.buffer.code})).length){r.next=14;break}if(void 0===(l=c.find(function(t){return 128===t.buffer.flag}))){r.next=12;break}return r.abrupt("return",a.handleUniLbsError(l.buffer.code,t));case 12:return a.logError("cloud proxy error response"),r.abrupt("return",a.handleUniLbsError(c[0].buffer.code,t));case 14:for(f=[],h=0;h<u.length;h++)if(262144===(null==(v=u[h])||null==(p=v.buffer)?void 0:p.flag))null==(g=v.buffer)||null==(b=g.edges_services)||null==(y=b.forEach)||y.call(b,function(t){Gm(t=t.ip)&&-1===a.context.cloudProxyServers.indexOf(t)&&(a.log("got cloud proxy server: %s",t),a.context.cloudProxyServers.push(t))});else if(128===(null==v||null==(d=v.buffer)?void 0:d.flag)){for(A=function(t,r){var i=r[t];f.some(function(t){return t.ip===i.ip})||f.push({ip:i.ip,ticket:v.buffer.cert})},R=0,T=v.buffer.edges_services;R<T.length;R++)A(R,T);a.context.rtmArea=null!=(E=null==(_=v.buffer)||null==(O=_.detail)?void 0:O[9])?E:""}return r.abrupt("return",bb.apply(void 0,G(f).concat([fg])));case 19:case"end":return r.stop()}},r)}));return function(t){return r.apply(this,arguments)}}()),Ga(function(t){return sa(t)?Z(t):vb}),tg(),wb(function(t){return void 0!==t&&"string"==typeof t.ip&&"string"==typeof t.ticket}))}),m(n(a),"fetchAp",function(t,r){var i=Ai("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",t,i);var o=new AbortController;return a.apFinish$.pipe(Ka(1)).subscribe(function(){return o.abort()}),ad(J(w.mark(function s(){var u;return w.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=Ag(0,Number.MAX_SAFE_INTEGER),a.log("%s request opid: %d",i,u),s.abrupt("return",te(t,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:u,key:r||a.context.key,cname:a.context.uid,detail:ua({},void 0===M?{11:[F.CHINA,F.GLOBAL].join()}:{11:Array.from(M.CODES).map(function(t){return t===F.OVERSEA?"".concat(F.ASIA,",").concat(F.EUROPE,",").concat(F.AFRICA,",").concat(F.NORTH_AMERICA,",").concat(F.SOUTH_AMERICA,",").concat(F.OCEANIA):t}).join(",")}),uid:0,sid:a.context.sid},signal:o.signal}));case 3:case"end":return s.stop()}},s)}))).pipe(Ga(function(r){return"AbortError"!==r.name&&(a.logError(r),a.warn("The AP server %s request failure",t,r)),vb}),cb(function(){var r=J(w.mark(function r(o){var s,u,c,l,f,h;return w.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=JSON.parse(o.responseText),a.log("The %s response is %o",i,s),c=(u=s).code,l=u.addresses,f=u.detail,0===c){r.next=6;break}return r.abrupt("return",a.handleUniLbsError(c,t));case 6:if(0!==(h=l).length){r.next=11;break}return r.abrupt("return",Z(Error("No available edge address to connect")));case 11:return a.context.rtmArea=null==f?void 0:f[9],r.abrupt("return",bb.apply(void 0,G(h).concat([fg])));case 13:case"end":return r.stop()}},r)}));return function(t){return r.apply(this,arguments)}}()),tg(),Ga(function(t){return sa(t)?Z(t):vb}),wb(function(t){return void 0!==t&&"string"==typeof t.ip&&"string"==typeof t.ticket}))}),a.context=t,a.getApEdgeInfoEndFirst$=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Bc(0,t||s?Nc.RECONNECTING_AP_INTERVAL:2e3).pipe(Ka(1),ca(function(){a.retryCount+=1}),cb(function(){return a.context.config.enableCloudProxy?a.getProxyApUrl$(t||s):(4<=a.retryCount&&(a.retryCount=0),3>=a.retryCount?a.getApUrl$(t||s):a.getBackupApUrl$(t||s))}),cb(function(t){return a.context.config.enableCloudProxy?a.fetchCloudProxy(t):a.fetchAp(t)}),Ga(function(t){return t instanceof pb&&a.warn("AP request timeout"),Z(t)}),om(function(t){return t.ip}),ob(a.apFinish$))},a.getApEdgeInfo$=function(t){return Bc(0,t||s?Nc.RECONNECTING_AP_INTERVAL:2e3).pipe(Ka(8),ca(function(){a.retryCount+=1}),cb(function(){return a.context.config.enableCloudProxy?a.getProxyApUrl$(t||s):3>=a.retryCount?a.getApUrl$(t||s):a.getBackupApUrl$(t||s)}),cb(function(t){return(a.context.config.enableCloudProxy?a.fetchCloudProxy(t):a.fetchAp(t)).pipe()}),Ga(function(t){return t instanceof pb&&a.warn("AP request timeout"),Z(t)}),om(function(t){return t.ip}),ob(a.apFinish$))},a}la(r,t);var i=ma(r);return Ha(r,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),r}(tb());m(Wr,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var Xr=Ph(),Yr=function(t){function r(t,o,s){W(this,r);var a=i.call(this,o,"Connection");m(n(a),"apClient",void 0),m(n(a),"lastOpenSockets",[new qe(1),new qe(1)]),m(n(a),"curOpenSockets",[void 0,void 0]),m(n(a),"ipIterator",0),m(n(a),"firstEnv",+(.5<=Math.random())),m(n(a),"firstSocketOpener",void 0),m(n(a),"secondSocketOpener",void 0),m(n(a),"firstOpenKeeperSubject",new Pa),m(n(a),"secondOpenKeeperSubject",new Pa),m(n(a),"edgeInfoReplayed",void 0),m(n(a),"firstEnvOpenSocket",void 0),m(n(a),"firstOpenKeeperSub",void 0),m(n(a),"secondOpenKeeperSub",void 0),m(n(a),"context",void 0),m(n(a),"logger",void 0),a.context=t,a.logger=o,a.apClient=new Wr(a.context,o),a.apClient.apFinish$.subscribe(function(){a.log("Ap client fetch finished")});var u,c=[];return a.edgeInfoReplayed=a.apClient.getApEdgeInfo$(s).pipe(oe(function(t){return t.pipe(ca(function(t){if(sa(t))throw t}),cd(s?Zd.getParameter("RECONNECTING_AP_INTERVAL"):900),ob(Bc(2e4)))}),wb(function(t){return!dl(c,t)}),Dd(function(){return new Xr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),ca(function(t){c.push(t),a.log("An edge info got %o",t)}),ca({error:function(t){a.emit("connectionInitFailure",t)}}),wg(function(){a.apClient.clearUp()}),sm()),a.firstEnvOpenSocket=a.edgeInfoReplayed.pipe(cb(function(t){if(void 0===t)return Z(Error("Invalid edge info"));var r=new ml(t.ip,a.firstEnv,t.ticket,a.context,o,u);return a.firstEnv=+(1!==a.firstEnv),r.on("connectionFailure",function(){return a.onSocketConnectionFailure(r)}),u=!r.useNewDomain,r.open$.pipe(qf(r))}),ca(function(t){a.log("The websocket of ENV_%d opened to %s:%d",t.env,t.ip,af[t.env]),a.curOpenSockets[t.env]=t,a.lastOpenSockets[t.env].next(t),a.firstEnv=t.env,a.openSecondSocket(t.env,t.ip,t.useNewDomain)}),Ka(1),pe()),a.firstSocketOpener=a.firstEnvOpenSocket.pipe(cb(function(t){return t.open$.pipe(ca(function(){a.log("The websocket of first ENV_%d re-opened to %s:%d",t.env,t.ip,af[t.env]),a.curOpenSockets[t.env]=t,a.lastOpenSockets[t.env].next(t)}))})),t=a.firstOpenKeeperSubject.pipe(Cc(Yc)),a.firstOpenKeeperSub=t.subscribe({error:a.logError}),a}la(r,t);var i=ma(r);return Ha(r,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(t,r){if(![0,1].includes(t))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});var i=t===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var o=this.curOpenSockets[t];this.curOpenSockets[t]=void 0,o&&(o.isActiveClose=!0,setTimeout(function(){o.close()},r)),void 0!==i&&setTimeout(function(){null==i||i.unsubscribe()},r)}},{key:"waitClosing",value:function(t){var r=this;return t.isActiveClose=!0,t.open$.pipe(tt(),Ga(function(t){return t.message===mr.normalClosureMessage?vb:Z(t)}),hb(5e3),Ga(function(i){return i instanceof pb?(r.warn("Force closing the ENV_%d connection",t.env),vb):Z(i)}))}},{key:"onSocketConnectionFailure",value:function(t){var r=[0,1].filter(function(r){return r!==t.env})[0];(r=this.curOpenSockets[r])&&r.loggedIn?this.reopenSocketWithApRequest(t.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(t,r,i){var o=this,s=+(1!==t);this.secondSocketOpener=this.edgeInfoReplayed.pipe(rm(function(t,r){return[].concat(G(t),[r])},[]),ba(function(t){return kr(t,function(t){return Jm(r,t.ip)}).slice(-1)[0]}),Ka(1),cb(function(t){if(void 0===t)return Z(Error("Invalid edge info"));var r=new ml(t.ip,s,t.ticket,o.context,o.logger,i);return r.on("connectionFailure",function(){return o.onSocketConnectionFailure(r)}),r.open$.pipe(ca(function(){o.lastOpenSockets[s].next(r),o.curOpenSockets[s]=r}))}),pe()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Cc(Yc)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(t){var r=this,i=[0,1].filter(function(r){return r!==t})[0];if(void 0!==(i=this.curOpenSockets[i])){var o,s=i.ip;i=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Dd(function(){return new Xr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),oe(function(t){return t.pipe(ca(function(t){if(t.code===Kh)r.emit("tokenExpired"),r.apClient.apFinish$.next(void 0);else if(sa(t))throw t}),cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")),ob(Bc(15e3)))}),ca(function(t){r.log("An edge info got %o",t)}),wg(function(){r.apClient.clearUp()})).pipe(rm(function(t,r){return[].concat(G(t),[r])},[]),ba(function(t){return(t=kr(t,function(t){return Jm(s,t.ip)})).length-1>=r.ipIterator?t.slice(-r.ipIterator++-1)[0]:(r.ipIterator=0,t.slice(-1)[0])}),Dd(),cb(function(i){if(void 0===i)return Z(Error("Invalid edge info"));var s=new ml(i.ip,t,i.ticket,r.context,r.logger,o);return s.on("connectionFailure",function(){return r.onSocketConnectionFailure(s)}),o=!s.useNewDomain,s.open$.pipe(qf(s))}),ca(function(i){r.log("The websocket of ENV_%d re-opened to %s:%d using ap",i.env,i.ip,af[i.env]),r.curOpenSockets[t]=i,r.lastOpenSockets[t].next(i)}),cb(function(i){return i.open$.pipe(ca(function(){r.log("The websocket of ENV_%d re-opened to %s:%d",i.env,i.ip,af[i.env]),r.curOpenSockets[t]=i,r.lastOpenSockets[t].next(i)}))}),pe()),t===this.firstEnv?this.firstOpenKeeperSubject.next(i):this.secondOpenKeeperSubject.next(i)}}}]),r}(tb()),Xc=fc.Writer,na=fc.util,zc=fc.roots.default||(fc.roots.default={}),RC=zc.Session=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.appId="",t.prototype.ver="",t.prototype.buildno=0,t.prototype.installId="",t.prototype.os=0,t.prototype.did="",t.prototype.index=null,t.prototype.token="",t.prototype.version=0,t.prototype.subVersion=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.appId&&Object.hasOwnProperty.call(t,"appId")&&n.uint32(42).string(t.appId),null!=t.ver&&Object.hasOwnProperty.call(t,"ver")&&n.uint32(50).string(t.ver),null!=t.buildno&&Object.hasOwnProperty.call(t,"buildno")&&n.uint32(56).int32(t.buildno),null!=t.installId&&Object.hasOwnProperty.call(t,"installId")&&n.uint32(66).string(t.installId),null!=t.os&&Object.hasOwnProperty.call(t,"os")&&n.uint32(128).int32(t.os),null!=t.did&&Object.hasOwnProperty.call(t,"did")&&n.uint32(138).string(t.did),null!=t.index&&Object.hasOwnProperty.call(t,"index")&&zc.Session.CommonIndex.encode(t.index,n.uint32(162).fork()).ldelim(),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&n.uint32(170).string(t.token),null!=t.version&&Object.hasOwnProperty.call(t,"version")&&n.uint32(176).int32(t.version),null!=t.subVersion&&Object.hasOwnProperty.call(t,"subVersion")&&n.uint32(184).int32(t.subVersion),n},t.CommonIndex=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.index1="",t.prototype.index2="",t.prototype.index3="",t.encode=function(t,n){return n||(n=Xc.create()),null!=t.index1&&Object.hasOwnProperty.call(t,"index1")&&n.uint32(10).string(t.index1),null!=t.index2&&Object.hasOwnProperty.call(t,"index2")&&n.uint32(18).string(t.index2),null!=t.index3&&Object.hasOwnProperty.call(t,"index3")&&n.uint32(26).string(t.index3),n},t}(),t}(),SC=zc.Link=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.ec=0,t.prototype.sc=0,t.prototype.destServerIp="",t.prototype.ackedServerIp="",t.prototype.responseTime=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.ec&&Object.hasOwnProperty.call(t,"ec")&&n.uint32(40).int32(t.ec),null!=t.sc&&Object.hasOwnProperty.call(t,"sc")&&n.uint32(48).int32(t.sc),null!=t.destServerIp&&Object.hasOwnProperty.call(t,"destServerIp")&&n.uint32(58).string(t.destServerIp),null!=t.ackedServerIp&&Object.hasOwnProperty.call(t,"ackedServerIp")&&n.uint32(66).string(t.ackedServerIp),null!=t.responseTime&&Object.hasOwnProperty.call(t,"responseTime")&&n.uint32(72).int32(t.responseTime),n},t}(),TC=zc.Logout=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),n},t}(),UC=zc.KickedOff=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.linkId=0,t.prototype.code=0,t.prototype.server="",t.prototype.serverCode=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.linkId&&Object.hasOwnProperty.call(t,"linkId")&&n.uint32(48).int32(t.linkId),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&n.uint32(56).int32(t.code),null!=t.server&&Object.hasOwnProperty.call(t,"server")&&n.uint32(66).string(t.server),null!=t.serverCode&&Object.hasOwnProperty.call(t,"serverCode")&&n.uint32(72).int32(t.serverCode),n},t}(),VC=zc.ChnJoin=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.cname="",t.prototype.errCode=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.cname&&Object.hasOwnProperty.call(t,"cname")&&n.uint32(50).string(t.cname),null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&n.uint32(56).int32(t.errCode),n},t}(),WC=zc.ChnJoinRes=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.cname="",t.prototype.errCode=0,t.prototype.serverErrCode=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.cname&&Object.hasOwnProperty.call(t,"cname")&&n.uint32(50).string(t.cname),null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&n.uint32(56).int32(t.errCode),null!=t.serverErrCode&&Object.hasOwnProperty.call(t,"serverErrCode")&&n.uint32(64).int32(t.serverErrCode),n},t}(),XC=zc.ChnLeave=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.cname="",t.prototype.errCode=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.cname&&Object.hasOwnProperty.call(t,"cname")&&n.uint32(50).string(t.cname),null!=t.errCode&&Object.hasOwnProperty.call(t,"errCode")&&n.uint32(56).int32(t.errCode),n},t}(),YC=zc.ConnectionStateChange=function(){function t(t){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)null!=t[n[r]]&&(this[n[r]]=t[n[r]])}return t.prototype.sid="",t.prototype.userId="",t.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,t.prototype.oldState=0,t.prototype.newState=0,t.prototype.reason=0,t.prototype.reconnId=0,t.encode=function(t,n){return n||(n=Xc.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&n.uint32(10).string(t.sid),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&n.uint32(18).string(t.userId),null!=t.lts&&Object.hasOwnProperty.call(t,"lts")&&n.uint32(24).int64(t.lts),null!=t.elapse&&Object.hasOwnProperty.call(t,"elapse")&&n.uint32(32).int64(t.elapse),null!=t.oldState&&Object.hasOwnProperty.call(t,"oldState")&&n.uint32(40).int32(t.oldState),null!=t.newState&&Object.hasOwnProperty.call(t,"newState")&&n.uint32(48).int32(t.newState),null!=t.reason&&Object.hasOwnProperty.call(t,"reason")&&n.uint32(56).int32(t.reason),null!=t.reconnId&&Object.hasOwnProperty.call(t,"reconnId")&&n.uint32(64).int32(t.reconnId),n},t}(),fu=Object.freeze({__proto__:null,Session:RC,Link:SC,Logout:TC,KickedOff:UC,ChnJoin:VC,ChnJoinRes:WC,ChnLeave:XC,ConnectionStateChange:YC,default:zc}),gu=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),ZC=function(t){function r(t,o,s){return W(this,r),m(n(s=i.call(this,s,"Context")),"_token",void 0),m(n(s),"config",void 0),m(n(s),"_uid",void 0),m(n(s),"_sid",void 0),m(n(s),"_area","CN"),m(n(s),"appId",void 0),m(n(s),"enableCloudProxy",!1),m(n(s),"cloudProxyServers",[]),s.appId=t,s.config=o,s}la(r,t);var i=ma(r);return Ha(r,[{key:"token",set:function(t){this._token="string"==typeof t&&t?t:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Ia("Cannot get illegal uid")},set:function(t){if(this.log("The user ID is set to %s",oa(t)),!za(t))throw new Ia;this._uid=t}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Ia("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Ia("Cannot get illegal sid")},set:function(t){if(this.log("sid is set to %s",t),"string"!=typeof t||!t)throw new Ia;this._sid=t}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Ia("Cannot get illegal area")},set:function(t){this.log("area is set to %s",t),"string"==typeof t&&t?this._area=t:this.warn("set area failed")}}]),r}(tb()),$C=!!Fc&&R(function(){Fc.prototype.finally.call({then:function(){}},function(){})});if(N({target:"Promise",proto:!0,real:!0,forced:$C},{finally:function(t){var n=kd(this,mc("Promise")),r="function"==typeof t;return this.then(r?function(r){return mj(n,t()).then(function(){return r})}:t,r?function(r){return mj(n,t()).then(function(){throw r})}:t)}}),"function"==typeof Fc){var Zr=mc("Promise").prototype.finally;Fc.prototype.finally!==Zr&&Ta(Fc.prototype,"finally",Zr,{unsafe:!0})}var aD=function(){var t=J(w.mark(function t(n){return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest("SHA-256",n);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}(),$r=function(t){return Array.from(t).map(function(t){return t.toString(16).padStart(2,"0")}).join("")},bD=function(t){if("string"!=typeof t)throw TypeError("Expected input to be a string");if(0!=t.length%2)throw RangeError("Expected string to be an even number of characters");for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=parseInt(t.substring(r,r+2),16);return n},as=function(t){return btoa(String.fromCharCode.apply(String,G(t))).replace(/={1,2}$/,"")},bs=function(){var t=J(w.mark(function t(n){var r;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,crypto.subtle.digest("SHA-1",n);case 3:r=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),r=sha1.arrayBuffer(n);case 9:return t.abrupt("return",as(new Uint8Array(r)));case 10:case"end":return t.stop()}},t,null,[[0,6]])}));return function(n){return t.apply(this,arguments)}}(),cs=function(t,n,r,i){i[n]=!0,r.has(t)?r.get(t).add(n):r.set(t,new Set([n]))},cD=function(t){switch(t){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},ds=function(t){function r(t,o,s,a){W(this,r);var u=i.call(this,s,"ChunkDownloadManager");if(m(n(u),"abortController",new AbortController),m(n(u),"downloadedSize",0),m(n(u),"successCount",0),m(n(u),"timer",void 0),m(n(u),"chunks",[]),m(n(u),"retUnit",void 0),m(n(u),"singleThread",!1),m(n(u),"initialized",!1),m(n(u),"ee",void 0),m(n(u),"chunkCount",void 0),m(n(u),"aborted",!1),m(n(u),"serverToIndices",new Map),m(n(u),"backupToIndices",new Map),m(n(u),"indexToBackupServers",[]),m(n(u),"busyBackupServers",new Map),m(n(u),"downloadingChunks",new Set),m(n(u),"metaInfo",void 0),m(n(u),"transHandler",void 0),u.metaInfo=t,u.transHandler=o,u.ee=void 0===a?new ea:a,s=t.size,t=t.unit,0===s)throw new Ia("size cannot be 0");return void 0!==o.cancelSignal&&o.cancelSignal.addEventListener("abort",function(){u.abortController.abort()},{once:!0}),u.abortController.signal.addEventListener("abort",function(){u.aborted=!0},{once:!0}),u.chunkCount=Math.ceil(s/(32768*t)),u}la(r,t);var i=ma(r);return Ha(r,[{key:"setInfoByResponse",value:function(t){var r=this,i=t.serverList,o=t.backupList;if(t=t.unit,i.length<this.chunkCount&&o.length<this.chunkCount)throw new Ia("servers is not enough");this.updateProgress(0),this.initialized=!0;var s=Array(this.chunkCount).fill(!1);if(i.forEach(function(t,i){return t.forEach(function(t){return cs(t,i,r.serverToIndices,s)})}),o.forEach(function(t,i){return t.forEach(function(t){return cs(t,i,r.backupToIndices,s)})}),s.some(function(){return!1}))throw new da("Not enough servers to download",mg);this.indexToBackupServers=o.map(function(t){return new Set(t)}),this.retUnit=t}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):1===this.serverToIndices.size&&0===Array.from(this.serverToIndices.keys())[0]?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new da("not enough servers to download",mg))}},{key:"updateProgress",value:function(t){var r=this,i=this.downloadedSize+t;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new Wc("Invalid download size",mg))):(this.downloadedSize=i,void 0!==this.timer&&0!==t&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&this.successCount!==this.chunkCount&&(this.timer=setTimeout(function(){r.ee.emit("timedOut"),r.abortController.abort()},12e4)),this.initialized&&0===t||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var t=0,r=0,i=this.chunks;r<i.length;r++)t+=i[r].byteLength;if(t!==this.metaInfo.size)throw new Ia("invalid chunks total size");t=new Uint8Array(t),i=r=0;for(var o=this.chunks;i<o.length;i++){var s=o[i];t.set(new Uint8Array(s),r),r+=s.byteLength}return r=Array.from(t.subarray(0,4)).map(function(t){return t.toString(16)}).join("").toUpperCase(),Zt(t.buffer,cD(r))}},{key:"getDownloadUrl",value:function(t){var r=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(t).split(".").join("-"),".edge.").concat(r,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var t=J(w.mark(function t(r){var i,o=this,s=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<s.length&&void 0!==s[1]&&s[1],t.next=3,Promise.all(Array.from(r.entries()).map(function(t){return t=ra(t,2),o.postDownloadRequest(t[0],Array.from(t[1]),i).catch(function(t){404===t.statusCode?(o.ee.emit("notExist"),o.abortController.abort()):"AbortError"!==t.name&&(Sa(t)?o.singleThread?(o.abortController.abort(),o.ee.emit("timedOut")):(o.warn("%d download timed out after %d, retrying use single thread",t.index,o.singleThread?6e4:3e4),o.abortController.abort(),o.singleThread=!0,o.ee.emit("multiTimeOut")):(o.ee.emit("error",t),o.abortController.abort()))})}));case 3:case"end":return t.stop()}},t)}));return function(r){return t.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var t=J(w.mark(function t(r,i,o){var s,a,u,c,l,f,h,p,d,v=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d=function(){return(d=J(w.mark(function t(a){var u,d,v,g,b,y,E,_;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==a||0!==r){t.next=5;break}throw new Ia("Invalid serverIp");case 5:u=void 0===a?h.getDownloadUrl(r):a;case 6:return h.downloadingChunks.add(s),t.next=9,f(u);case 9:return d=t.sent.responseData,h.downloadingChunks.delete(s),t.abrupt("return",d);case 15:if(t.prev=15,t.t0=t.catch(0),h.downloadingChunks.delete(s),i.unshift(s),h.metaInfo.useNewDomain=!1,"AbortError"!==t.t0.name){t.next=22;break}throw t.t0;case 22:if(!Sa(t.t0)){t.next=25;break}throw t.t0.index=s,t.t0;case 25:if(v=c,c+=1,!(2>v)){t.next=30;break}return t.t0 instanceof Ia||h.warn("%o, %d download failed, retrying",t.t0,s),t.abrupt("return",p());case 30:if(504!==t.t0.statusCode){t.next=34;break}throw(g=new db("download server timed out",{originalError:t.t0,serverCode:504})).index=s,g;case 34:if(!o||2!==v||0===l[0]){t.next=45;break}return t.t0 instanceof Ia||h.warn("%d download failed, using backup: %d, %o",s,l[0],t.t0),t.next=38,h.busyBackupServers.get(l[0]);case 38:return b=p(h.getDownloadUrl(l[0])),h.busyBackupServers.set(l[0],b),t.next=42,b;case 42:return y=t.sent,h.busyBackupServers.delete(l[0]),t.abrupt("return",y);case 45:if(!(o&&2<v&&void 0!==l[1]&&0!==l[1])){t.next=56;break}return h.warn("%d download failed, using backup 1: %d",s,l[1]),t.next=49,h.busyBackupServers.get(l[1]);case 49:return E=p(h.getDownloadUrl(l[1])),h.busyBackupServers.set(l[1],E),t.next=53,E;case 53:return _=t.sent,h.busyBackupServers.delete(l[1]),t.abrupt("return",_);case 56:throw t.t0.index=s,t.t0;case 58:case"end":return t.stop()}},t,null,[[0,15]])}))).apply(this,arguments)},p=function(t){return d.apply(this,arguments)},!this.aborted){t.next=4;break}throw new Ia("download already aborted");case 4:if(void 0!==(s=i.shift())){t.next=8;break}return this.log("%s download finished",r),t.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){t.next=10;break}return t.abrupt("return");case 10:if(!this.downloadingChunks.has(s)){t.next=13;break}return this.log("%s already downloading, return",s),t.abrupt("return");case 13:if(void 0===this.chunks[s]){t.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",s),t.next=18,this.postDownloadRequest(r,i,o);case 18:return t.abrupt("return");case 19:return a=new FormData,u={hash:hu(this.metaInfo.hashHexStr),unit:void 0===this.retUnit?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:s},a.append("parameter",JSON.stringify(u)),c=0,l=Array.from(this.indexToBackupServers[s]),f=function(t){return te(t,{body:a,signal:v.abortController.signal,timeout:v.singleThread?12e4:3e4},{useBinaryResponse:!0})},h=this,t.next=28,p().then(function(t){return void 0!==v.chunks[s]?v.log("chunk %d download duplicated",s):(v.chunks[s]=t,v.log("chunk %d downloaded",s),v.successCount+=1,v.updateProgress(v.chunks[s].byteLength)),v.successCount===v.chunkCount&&(v.log("chunks all download"),v.ee.emit("finished")),v.singleThread?(v.downloadChunks(),Promise.resolve()):v.postDownloadRequest(r,i,o)});case 28:case"end":return t.stop()}},t,this)}));return function(r,i,o){return t.apply(this,arguments)}}()}]),r}(tb()),es=function(t){function r(t,o,s,a){W(this,r);var u=i.call(this,s,"ChunkUploadManager");if(m(n(u),"chunkCount",0),m(n(u),"chunks",[]),m(n(u),"uploadedChunks",[]),m(n(u),"totalFailures",0),m(n(u),"timer",void 0),m(n(u),"initState","uninitialized"),m(n(u),"ee",void 0),m(n(u),"unit",0),m(n(u),"uploadedSize",0),m(n(u),"singleThread",!1),m(n(u),"abortController",new AbortController),m(n(u),"servers",[]),m(n(u),"aborted",!1),m(n(u),"metaInfo",void 0),m(n(u),"transHandler",void 0),u.metaInfo=t,u.transHandler=o,u.ee=void 0===a?new ea:a,0===t.file.length)throw new I("file not found or is empty",wf);return void 0!==o.cancelSignal&&o.cancelSignal.addEventListener("abort",function(){u.abortController.abort()},{once:!0}),u.abortController.signal.addEventListener("abort",function(){u.aborted=!0},{once:!0}),u}la(r,t);var i=ma(r);return Ha(r,[{key:"initChunks",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("initialized"!==this.initState&&"initializing"!==this.initState){t.next=2;break}throw new Ia("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=r,i=this.sliceFile(r,this.metaInfo.file),this.chunkCount=i.length,o=[],s=function(t,r){var i=(t=ra(r[t],2))[0],s=t[1];t=bs(s).then(function(t){c.chunks[i]={payload:s,sha1:t,uploadedTo:void 0,index:i,processed:!1}}),o.push(t)},a=0,u=Array.from(i.entries());a<u.length;a++)s(a,u);return t.next=11,Promise.all(o);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var t=this;if(!this.aborted){for(var r=this.chunks.filter(function(t){return!t.processed}),i=function(i){var o=r[i],s=t.servers.filter(function(t){return!t.isUploading}).sort(function(t,r){return t.successCount-r.successCount}).sort(function(t,r){return t.failureCount-r.failureCount})[0];if(void 0===s||1<s.failureCount)return t.log("Upload server not available, waiting"),t.ee.emit("serverUsedUp"),Om(1e3).then(function(){t.totalFailures>2*t.chunkCount&&t.ee.emit("error"),t.totalFailures+=1,void 0!==s&&(s.failureCount=0),t.uploadToServers()}).catch(function(){}),"break";o.processed=!0,s.isUploading=!0,t.log("uploading chunk %d to server %s",o.index,Dg(s.ip));var a=t.getUploadUrl(s.ip);return J(w.mark(function r(){var i;return w.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.postChunk(o.payload,a,o.index);case 3:i=t.chunks.findIndex(function(t){return t===o}),o.uploadedTo=s.ip,t.chunks.splice(i,1),t.uploadedChunks.push(o),s.successCount+=1,s.isUploading=!1,t.updateProgress(o.payload.byteLength),t.log("upload chunk %d successfully",o.index),r.next=31;break;case 13:if(r.prev=13,r.t0=r.catch(0),s.isUploading=!1,o.processed=!1,504!==r.t0.statusCode&&!Sa(r.t0)){r.next=27;break}if(t.singleThread){r.next=24;break}return t.warn("%d upload timed out after %d, retrying use single thread",o.index,t.singleThread?12e4:3e4),t.abortController.abort(),t.singleThread=!0,t.ee.emit("multiTimeOut"),r.abrupt("return");case 24:return t.ee.emit("timedOut"),t.abortController.abort(),r.abrupt("return");case 27:return t.metaInfo.useNewDomain=!1,s.failureCount+=1,r.next=31,Om(1e3);case 31:t.uploadedChunks.length===t.chunkCount?(t.log("chunks uploaded"),t.ee.emit("finished")):(t.singleThread||1===t.chunks.filter(function(t){return!t.processed}).length)&&t.uploadToServers();case 32:case"end":return r.stop()}},r,null,[[0,13]])}))(),t.singleThread?"break":void 0},o=0;o<r.length&&"break"!==i(o);o++);0===r.length&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var t=!0,r=[],i=G(this.uploadedChunks).sort(function(t,r){return t.index-r.index}),o=0;for(i=Array.from(i.values());o<i.length;o++){var s=i[o].uploadedTo;if(void 0===s){t=!1;break}r.push(s)}if(!t)throw new Ia("some chunks not uploaded, cannot get upload server ips");return r}},{key:"addServers",value:function(t){var r=this;t.forEach(function(t){var i=r.servers.findIndex(function(r){return r.ip===t});-1!==i?r.servers[i].failureCount=0:(r.log("server %s added",Dg(t)),r.servers.push({successCount:0,isUploading:!1,ip:t,failureCount:0}))})}},{key:"updateProgress",value:function(t){var r=this,i=void 0!==t?this.uploadedSize+t:this.metaInfo.file.length;i>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new Wc("Invalid upload size",lg))):(this.uploadedSize=i,void 0!==this.timer&&0!==t&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&void 0!==t&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout(function(){r.ee.emit("timedOut"),r.abortController.abort()},12e4)),"initialized"===this.initState&&0===t||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(t,r){var i=0,o=[],s=r.length;for(t*=32768;i<s;)o.push(r.slice(i,i+t)),i+=t;return this.log("chunks split into %d",o.length),o}},{key:"postChunk",value:function(){var t=J(w.mark(function t(r,i,o){var s,a,u,c,l,f,h;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.aborted){t.next=2;break}throw new Ia("upload already aborted");case 2:if(void 0!==this.unit){t.next=4;break}throw new Ia("unit is undefined");case 4:return a=(s=this.metaInfo).ticket,u=s.instance,c=s.loginOpt,l=s.hashStr,t.t0=o,t.t1=l,t.next=9,bs(r);case 9:return t.t2=t.sent,t.t3=this.unit,t.t4=a,t.t5=u,t.t6=c,f={index:t.t0,hash:t.t1,sha1:t.t2,unit:t.t3,ticket:t.t4,instance:t.t5,loginOpt:t.t6},(h=new FormData).append("parameter",JSON.stringify(f)),h.append("payload",new Blob([r])),t.next=20,te(i,{headers:{Accept:"application/json"},body:h,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(201===t.sent.status){t.next=24;break}throw new da("uploading chunk ".concat(o," failed"));case 24:case"end":return t.stop()}},t,this)}));return function(r,i,o){return t.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(t){var r=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(t).split(".").join("-"),".edge.").concat(r,":9601/api/v1/chuck/upload")}}]),r}(tb()),fs=function(t){function r(t){W(this,r);var o=i.call(this,t,"MediaTaskManager");return m(n(o),"isProcessing",!1),m(n(o),"authInfo",void 0),m(n(o),"taskFinishers",{}),m(n(o),"mediaTasks",new Map),m(n(o),"ongoingTask",void 0),o.on("connectionStateChanged",function(t){if(t===S.ConnectionState.ABORTED||t===S.ConnectionState.DISCONNECTED){void 0!==o.ongoingTask&&o.cancelTask(o.ongoingTask),t=0;for(var r=Array.from(o.mediaTasks.entries());t<r.length;t++){var i=ra(r[t],2)[1];o.cancelTask(i)}o.mediaTasks.clear(),o.taskFinishers={}}else t===S.ConnectionState.RECONNECTING?void 0!==o.ongoingTask&&o.ongoingTask.manager.abortController.abort():t===S.ConnectionState.CONNECTED&&void 0!==o.ongoingTask&&o.ongoingTask.manager.ee.emit("reconnected")}),o}la(r,t);var i=ma(r);return Ha(r,[{key:"setAuthInfo",value:function(t){this.authInfo=t}},{key:"waitMediaTask",value:function(t){var r=this;return new Promise(function(i,o){r.taskFinishers[t]={resolve:i,reject:o},r.isProcessing||r.processMediaTask()}).finally(function(){void 0!==r.ongoingTask&&void 0!==r.ongoingTask.manager.timer&&clearTimeout(r.ongoingTask.manager.timer),delete r.taskFinishers[t],0!==r.mediaTasks.size?r.processMediaTask():r.isProcessing=!1})}},{key:"addUploadTask",value:function(t,i,o,s){var a=t.file;if(t=t.hash,void 0===this.authInfo)throw new Ia("session not found");if(this.mediaTasks.size>=r.MAX_PENDING_TASK_COUNT-1)throw new ib("Upload media failed, exceed max pending jobs",xA);return s=new es({hashStr:as(t),file:a,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),useNewDomain:this.authInfo.useNewDomain},s,this.logger),a=Ud(),this.mediaTasks.set(a,{type:"UPLOAD",manager:s,hash:t,setter:o,fetcher:i,taskId:a}),a}},{key:"addDownloadTask",value:function(t,i,o){var s=t.hashHexStr,a=t.size,u=t.unit;if(t=t.zone,void 0===this.authInfo)throw new Ia("session not found");if(this.mediaTasks.size>=r.MAX_PENDING_TASK_COUNT-1)throw new ib("Download media failed, exceed max pending jobs",BA);return o=new ds({hashHexStr:s,ticket:this.authInfo.ticket,useNewDomain:this.authInfo.useNewDomain,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:a,zone:t,unit:u},o,this.logger),s=Ud(),this.mediaTasks.set(s,{type:"DOWNLOAD",manager:o,fetcher:i,taskId:s}),s}},{key:"doDownloadTaskImpl",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f,h,p=this,d=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=2<d.length&&void 0!==d[2]&&d[2],a=s=r.manager,o&&(s=new ds(a.metaInfo,a.transHandler,this.logger,a.ee)),u=r.fetcher,t.next=7,u();case 7:if(l=(c=t.sent).serverList,f=c.backupList,h=c.unit,!o||h===a.retUnit){t.next=13;break}throw new da("download unit is different, reject to continue",mg);case 13:o&&(r.manager=s,s.downloadedSize=a.downloadedSize,s.successCount=a.successCount,s.timer=a.timer,s.chunks=a.chunks,s.initialized=a.initialized,s.singleThread=a.singleThread,s.updateProgress(0)),s.ee.once("reconnected",function(){s.ee.removeAllListeners(),p.doDownloadTaskImpl(r,i,!0).catch(function(t){i.reject(t)})}),s.ee.once("multiTimeOut",function(){s.ee.removeAllListeners(),p.doDownloadTaskImpl(r,i,!0).catch(function(t){i.reject(t)})}),s.ee.once("error",function(t){s.ee.removeAllListeners(),i.reject(new da(["download file file, index %d",t.index],{code:mg,originalError:t}))}),s.ee.once("notExist",function(){s.abortController.abort(),s.ee.removeAllListeners(),i.reject(new da("download file not found",AA))}),s.ee.once("timedOut",function(){s.ee.removeAllListeners(),s.abortController.abort(),i.reject(new db("download timed out",zA))}),void 0!==s.transHandler.cancelSignal&&s.transHandler.cancelSignal.addEventListener("abort",function(){i.reject(new hl("Downloading canceled",ir))},{once:!0}),s.ee.once("finished",function(){i.resolve({type:"DOWNLOAD",payload:s.getPayload()})}),s.setInfoByResponse({serverList:l,backupList:f,unit:h}),s.downloadChunks();case 23:case"end":return t.stop()}},t,this)}));return function(r,i){return t.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(t,r){var i=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=t.taskId;return o||(this.mediaTasks.delete(s),this.ongoingTask=t),new Promise(function(s,a){i.doDownloadTaskImpl(t,r,o).then(s).catch(a)})}},{key:"doUploadTaskImpl",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f,h,p=this,d=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=2<d.length&&void 0!==d[2]&&d[2],a=s=r.manager,o&&(s=new es(a.metaInfo,a.transHandler,this.logger,a.ee)),u=r.fetcher,c=new Pa,f=new Promise(function(t,f){var h=u(),p=h.ret,d=h.err,v=h.timeout;h.fin.pipe(ob(c)).subscribe({next:function(t){i.resolve({type:"UPLOAD",retUnit:t.unit,zone:t.zone})},complete:function(){t({hasExist:!0}),c.next(),c.complete()}}),p.pipe(ob(c),cb(function(){var t=J(w.mark(function t(u){var c,f;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=u.servers,f=u.unit,o&&a.unit!==f?i.reject(new da("upload unit is different, reject to continue",lg)):o&&(r.manager=s,s.chunkCount=a.chunkCount,s.chunks=a.chunks,s.totalFailures=a.totalFailures,s.uploadedChunks=a.uploadedChunks,s.timer=a.timer,s.initState=a.initState,s.unit=a.unit,s.uploadedSize=a.uploadedSize,s.singleThread=a.singleThread,s.updateProgress(0)),s.addServers(c),"uninitialized"!==s.initState){t.next=7;break}return l=s.initChunks(f),t.next=7,l;case 7:case"end":return t.stop()}},t)}));return function(r){return t.apply(this,arguments)}}())).subscribe({complete:function(){return t({hasExist:!1})},error:f}),h=function(r){"uninitialized"!==s.initState&&l?t(l.then(function(){return{hasExist:!1}})):f(r)},d.pipe(ob(c)).subscribe({error:h}),v.pipe(ob(c)).subscribe({error:h})}),t.next=9,f;case 9:if(!t.sent.hasExist){t.next=15;break}return s.updateProgress(),this.log("file already exists, skipping upload"),t.abrupt("return");case 15:c.next(),c.complete(),this.log("chunks initialization promise resolved"),h=gb(s.ee,"serverUsedUp").pipe(Gt(function(){return s.chunkCount!==s.uploadedChunks.length}),Jt(5e3,void 0,{leading:!1}),pm(function(){return u().ret})).subscribe(function(t){s.addServers(t.servers)}),s.ee.once("reconnected",function(){s.ee.removeAllListeners(),p.doUploadTask(r,i,!0).catch(function(t){i.reject(t)})}),s.ee.once("multiTimeOut",function(){s.ee.removeAllListeners(),p.doUploadTask(r,i,!0).catch(function(t){i.reject(t)})}),s.ee.once("timedOut",function(){h.unsubscribe(),s.ee.removeAllListeners(),s.abortController.abort(),i.reject(new db("upload timed out",Lh))}),s.ee.once("error",function(t){h.unsubscribe(),s.ee.removeAllListeners(),s.abortController.abort(),i.reject(t||new da("upload error",lg))}),void 0!==s.transHandler.cancelSignal&&s.transHandler.cancelSignal.addEventListener("abort",function(){i.reject(new hl("Uploading canceled",hr))},{once:!0}),s.ee.once("finished",J(w.mark(function t(){var o,a,u;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h.unsubscribe(),t.next=3,r.setter(s.unit,s.getUploadServerIPs());case 3:a=(o=t.sent).zone,u=o.unit,s.ee.removeAllListeners(),i.resolve({type:"UPLOAD",retUnit:u,zone:a});case 8:case"end":return t.stop()}},t)}))),s.uploadToServers();case 26:case"end":return t.stop()}},t,this)}));return function(r,i){return t.apply(this,arguments)}}()},{key:"doUploadTask",value:function(t,r){var i=this,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=t.taskId;return o||(this.mediaTasks.delete(s),this.ongoingTask=t),new Promise(function(s,a){i.doUploadTaskImpl(t,r,o).then(s).catch(a)})}},{key:"processMediaTask",value:function(){var t=J(w.mark(function t(){var r,i,o;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.mediaTasks.size){t.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,r=this.mediaTasks.keys().next().value,void 0!==(i=this.taskFinishers[r])){t.next=7;break}throw Error("top task not found");case 7:if(void 0!==(o=this.mediaTasks.get(r))){t.next=10;break}throw new Ia("task invalid");case 10:if("UPLOAD"!==o.type){t.next=15;break}return t.next=13,this.doUploadTask(o,i).catch(function(t){o.manager.ee.removeAllListeners(),i.reject(t)});case 13:t.next=18;break;case 15:if("DOWNLOAD"!==o.type){t.next=18;break}return t.next=18,this.doDownloadTask(o,i).catch(function(t){o.manager.ee.removeAllListeners(),i.reject(t)});case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancelTask",value:function(t){var r="DOWNLOAD"===t.type?ir:hr;t.manager.ee.removeAllListeners(),t.manager.abortController.abort(),void 0!==this.taskFinishers[t.taskId]&&this.taskFinishers[t.taskId].reject(new hl("User logged out or kicked off, media task canceled",r))}}]),r}(tb());m(fs,"MAX_PENDING_TASK_COUNT",9),Oo("of",function(){for(var t=0,n=arguments.length,r=new(Ne(this))(n);n>t;)r[t]=arguments[t++];return r},Dj);var gs=1/0,dD=Math.max,ju=function(t,n,r){var i=Object(t);if(!Ed(t)){var o=Te(n);t=Ad(t),n=function(t){return o(i[t],t,i)}}return -1<(n=function(t,n,r){var i=null==t?0:t.length;if(!i)return -1;if(null==r)r=0;else{var o=(r=r?(r=gl(r))===gs||r===-gs?17976931348623157e292*(0>r?-1:1):r==r?r:0:0===r?r:0)%1;r=r==r?o?r-o:r:0}return 0>r&&(r=dD(i+r,0)),Xp(t,Te(n),r)}(t,n,r))?i[o?t[n]:n]:void 0},iu=function(t,n){return t&&t.length?vk(t,void 0,"function"==typeof n?n:void 0):[]},hs=function(){function t(){W(this,t),m(this,"size",0),m(this,"fields",new Map)}return Ha(t,[{key:"define",value:function(t,n,r){if(this.size+=r,64<this.size)throw RangeError("the struct over 64 bits is not supported");Mg(n={val:0,isNumber:"number"===n,isBoolean:"boolean"===n,oneof:"number"===n||"boolean"===n?void 0:n,len:r}),this.fields.set(t,n)}},{key:"set",value:function(t,n){if(!(t=this.fields.get(t)))throw Error("field not found");var r=t.oneof;if(!U.isLong(n)&&"number"!=typeof n)if("boolean"==typeof n)n=+!!n;else{if(void 0===r)throw Error("invalid field type");if(void 0===(n=r[n]))throw Error("field type not found")}Mg(t,n),t.val=n}},{key:"toNumber",value:function(){for(var t=0,n=0,r=0,i=Array.from(this.fields);r<i.length;r++){var o=ra(i[r],2)[1],s=o.len;void 0!==(o=o.val)&&(t+=U.fromValue(o).shiftLeft(n).toNumber(),n+=s)}return t}},{key:"toLong",value:function(){for(var t=U.fromNumber(0,!0),n=0,r=0,i=Array.from(this.fields);r<i.length;r++){var o=ra(i[r],2)[1],s=o.len;void 0!==(o=o.val)&&(t=U.fromValue(o).shiftLeft(n).add(t),n+=s)}return t}},{key:"assert",value:function(t,n){function r(t){if(!U.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=+!!t;else{if(void 0===o)throw Error("invalid field type");if(void 0===(t=o[t]))throw Error("field type not found")}return Mg(i,t),Lg(t,i.val)}var i=this.fields.get(t);if(!i)throw Error("field not found");var o=i.oneof;if(!Array.isArray(n))return r(n);if(1===n.length)return r(n[0]);if(n.every(function(t){return"string"==typeof t})&&void 0!==o)return n.some(function(t){return r(t)});throw Error("invalid valueTypes")}},{key:"from",value:function(t){t=U.fromValue(t);for(var n=0,r=0,i=Array.from(this.fields);r<i.length;r++){var o=ra(i[r],2)[1],s=o.len,a=U.fromNumber(Math.pow(2,s)-1,!0).shiftLeft(n);Mg(o,a=t.and(a).shiftRightUnsigned(n)),o.val=a,n+=s}}},{key:"typeOf",value:function(t){if(void 0!==(t=this.fields.get(t))){var n=t.oneof;if(t=t.val,void 0!==n){var r=0;for(n=Object.entries(n);r<n.length;r++){var i=ra(n[r],2),o=i[0];if(Lg(t,i[1]))return o}}}throw TypeError("can only get type of oneof type")}}]),t}(),is=function(t){function n(t){W(this,n);var i=r.call(this);return i.define("Rejoin","boolean",1),i.define("Unused","number",31),i.define("Platform","number",8),i.define("Version","number",12),i.define("Subversion","number",12),i.set("Platform",7),i.set("Version",4),i.set("Subversion",203),i.set("Rejoin",t),i}la(n,t);var r=ma(n);return n}(hs),eD=ua(ua(ua(ua({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),js={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},fD=ua(ua({},eD),js),gD={Uncompressed:0,Zlib:1},ae=function(t){function n(t){W(this,n);var i=r.call(this);if(i.define("MessageType",fD,8),i.define("BroadcastJumps","number",2),i.define("ToCache","boolean",1),i.define("FromCache","boolean",1),i.define("CompressionMethod",gD,2),i.define("IterationNumber","number",4),i.define("BufferedMessage","boolean",1),i.define("ToArchive","boolean",1),i.define("FromArchive","boolean",1),"number"==typeof t||U.isLong(t))i.from(t);else if(void 0!==t){var o=0;for(t=Hg(t);o<t.length;o++){var s=ra(t[o],2);i.set(s[0],s[1])}}return i}la(n,t);var r=ma(n);return Ha(n,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(t){var n=this;return void 0!==t?this.assert("MessageType",t):xf(js).some(function(t){return n.assert("MessageType",t)})}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),n}(hs),hD=function(t){function r(t){return W(this,r),m(n(t=i.call(this,t,"ChatManager")),"dialogueLru",new Sx(void 0,{maxlen:1e4,ttl:1e4})),t}la(r,t);var i=ma(r);return Ha(r,[{key:"getChatInfo",value:function(t){var r=this.dialogueLru.get(t);if(this.dialogueLru.prune(),r){var i=r.dialogue,o={dialogue:i,sequence:r=r.sequence.add(1)};return this.dialogueLru.set(t,{dialogue:i,sequence:r}),o}return i={dialogue:Bg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(t,i),i}}]),r}(tb()),v={};"object"==X(module)&&(module.exports=v),v.parse=function(t,n){var r,i=v.bin.readUshort,o=v.bin.readUint,s={};for(r=(t=new Uint8Array(t)).length-4;0x6054b50!=o(t,r);)r--;var a=i(t,r=r+4+4);i(t,r+=2),o(t,r+=2),r=o(t,r+=4);for(var u=0;u<a;u++){o(t,r),r+=4,r+=4,r+=4,o(t,r+=4);var c=o(t,r+=4),l=o(t,r+=4),f=i(t,r+=4),h=i(t,r+2),p=i(t,r+4);r+=6;var d=o(t,r+=8);r+=4,r+=f+h+p,v._readLocal(t,d,s,c,l,n)}return s},v._readLocal=function(t,n,r,i,o,s){var a=v.bin.readUshort,u=v.bin.readUint;u(t,n),a(t,n+=4),a(t,n+=2);var c=a(t,n+=2);u(t,n+=2),u(t,n+=4),u=a(t,n=n+4+8);var l=a(t,n+=2);if(n+=2,a=v.bin.readUTF8(t,n,u),n=n+u+l,s)r[a]={size:o,csize:i};else if(t=new Uint8Array(t.buffer,n),0==c)r[a]=new Uint8Array(t.buffer.slice(n,n+i));else{if(8!=c)throw"unknown compression method: "+c;n=new Uint8Array(o),v.inflateRaw(t,n),r[a]=n}},v.inflateRaw=function(t,n){return v.F.inflate(t,n)},v.inflate=function(t,n){return t[0],t[1],v.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-2),n)},v.deflate=function(t,n){null==n&&(n={level:6});var r=0,i=new Uint8Array(50+Math.floor(1.1*t.length));return i[r]=120,i[r+1]=156,r=v.F.deflateRaw(t,i,r+2,n.level),t=v.adler(t,0,t.length),i[r+0]=t>>>24&255,i[r+1]=t>>>16&255,i[r+2]=t>>>8&255,i[r+3]=t>>>0&255,new Uint8Array(i.buffer,0,r+4)},v.deflateRaw=function(t,n){null==n&&(n={level:6});var r=new Uint8Array(50+Math.floor(1.1*t.length)),i=v.F.deflateRaw(t,r,i,n.level);return new Uint8Array(r.buffer,0,i)},v.encode=function(t,n){null==n&&(n=!1);var r,i=0,o=v.bin.writeUint,s=v.bin.writeUshort,a={};for(r in t){var u=!v._noNeed(r)&&!n,c=t[r],l=v.crc.crc(c,0,c.length);a[r]={cpr:u,usize:c.length,crc:l,file:u?v.deflateRaw(c):c}}for(r in a)i+=a[r].file.length+30+46+2*v.bin.sizeUTF8(r);for(r in t=new Uint8Array(i+22),n=0,c=[],a)l=a[r],c.push(n),n=v._writeHeader(t,n,r,l,0);for(r in i=0,u=n,a)l=a[r],c.push(n),n=v._writeHeader(t,n,r,l,1,c[i++]);return a=n-u,o(t,n,0x6054b50),s(t,n=n+4+4,i),s(t,n+=2,i),o(t,n+=2,a),o(t,n+4,u),t.buffer},v._noNeed=function(t){return t=t.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(t)},v._writeHeader=function(t,n,r,i,o,s){var a=v.bin.writeUint,u=v.bin.writeUshort,c=i.file;return a(t,n,0==o?0x4034b50:0x2014b50),n+=4,1==o&&(n+=2),u(t,n,20),u(t,n+=2,0),u(t,n+=2,8*!!i.cpr),a(t,n+=2,0),a(t,n+=4,i.crc),a(t,n+=4,c.length),a(t,n+=4,i.usize),u(t,n+=4,v.bin.sizeUTF8(r)),u(t,n+=2,0),n+=2,1==o&&(a(t,n=n+2+2+6,s),n+=4),n+=r=v.bin.writeUTF8(t,n,r),0==o&&(t.set(c,n),n+=c.length),n},v.crc={table:function(){for(var t=new Uint32Array(256),n=0;256>n;n++){for(var r=n,i=0;8>i;i++)r=1&r?0xedb88320^r>>>1:r>>>1;t[n]=r}return t}(),update:function(t,n,r,i){for(var o=0;o<i;o++)t=v.crc.table[255&(t^n[r+o])]^t>>>8;return t},crc:function(t,n,r){return 0xffffffff^v.crc.update(0xffffffff,t,n,r)}},v.adler=function(t,n,r){var i=1,o=0,s=n;for(n+=r;s<n;){for(r=Math.min(s+5552,n);s<r;)o+=i+=t[s++];i%=65521,o%=65521}return o<<16|i},v.bin={readUshort:function(t,n){return t[n]|t[n+1]<<8},writeUshort:function(t,n,r){t[n]=255&r,t[n+1]=r>>8&255},readUint:function(t,n){return 0x1000000*t[n+3]+(t[n+2]<<16|t[n+1]<<8|t[n])},writeUint:function(t,n,r){t[n]=255&r,t[n+1]=r>>8&255,t[n+2]=r>>16&255,t[n+3]=r>>24&255},readASCII:function(t,n,r){for(var i="",o=0;o<r;o++)i+=String.fromCharCode(t[n+o]);return i},writeASCII:function(t,n,r){for(var i=0;i<r.length;i++)t[n+i]=r.charCodeAt(i)},pad:function(t){return 2>t.length?"0"+t:t},readUTF8:function(t,n,r){for(var i,o="",s=0;s<r;s++)o+="%"+v.bin.pad(t[n+s].toString(16));try{i=decodeURIComponent(o)}catch(i){return v.bin.readASCII(t,n,r)}return i},writeUTF8:function(t,n,r){for(var i=r.length,o=0,s=0;s<i;s++){var a=r.charCodeAt(s);if(0==(0xffffff80&a))t[n+o]=a,o++;else if(0==(0xfffff800&a))t[n+o]=192|a>>6,t[n+o+1]=128|(0|a)&63,o+=2;else if(0==(0xffff0000&a))t[n+o]=224|a>>12,t[n+o+1]=128|a>>6&63,t[n+o+2]=128|(0|a)&63,o+=3;else{if(0!=(0xffe00000&a))throw"e";t[n+o]=240|a>>18,t[n+o+1]=128|a>>12&63,t[n+o+2]=128|a>>6&63,t[n+o+3]=128|(0|a)&63,o+=4}}return o},sizeUTF8:function(t){for(var n=t.length,r=0,i=0;i<n;i++){var o=t.charCodeAt(i);if(0==(0xffffff80&o))r++;else if(0==(0xfffff800&o))r+=2;else if(0==(0xffff0000&o))r+=3;else{if(0!=(0xffe00000&o))throw"e";r+=4}}return r}},v.F={},v.F.deflateRaw=function(t,n,r,i){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],s=v.F.U,a=v.F._goodIndex;v.F._hash;var u=v.F._putsE,c=0;r<<=3;var l=0,f=t.length;if(0==i){for(;c<f;){var h=Math.min(65535,f-c);u(n,r,+(c+h==f)),r=v.F._copyExact(t,c,h,n,r+8),c+=h}return r>>>3}u=s.lits,i=s.strt;var p=s.prev,d=0,g=0,b=0,y=0,E=0;for(2<f&&(i[E=v.F._hash(t,0)]=0),c=0;c<f;c++){if(h=E,c+1<f-2){E=v.F._hash(t,c+1);var m=c+1&32767;p[m]=i[E],i[E]=m}if(l<=c){if((14e3<d||26697<g)&&100<f-c&&(l<c&&(u[d]=c-l,d+=2,l=c),r=v.F._writeBlock(+(c==f-1||l==f),u,d,y,t,b,c-b,n,r),d=g=y=0,b=c),m=0,c<f-2&&(m=v.F._bestMatch(t,c,p,h,Math.min(o[2],f-c),o[3])),0!=m){h=m>>>16,m&=65535;var _=a(h,s.of0);s.lhst[257+_]++;var w=a(m,s.df0);s.dhst[w]++,y+=s.exb[_]+s.dxb[w],u[d]=h<<23|c-l,u[d+1]=m<<16|_<<8|w,d+=2,l=c+h}else s.lhst[t[c]]++;g++}}for(b==c&&0!=t.length||(l<c&&(u[d]=c-l,d+=2),r=v.F._writeBlock(1,u,d,y,t,b,c-b,n,r));0!=(7&r);)r++;return r>>>3},v.F._bestMatch=function(t,n,r,i,o,s){var a=32767&n,u=r[a],c=a-u+32768&32767;if(u==a||i!=v.F._hash(t,n-c))return 0;for(var l=i=0,f=Math.min(32767,n);c<=f&&0!=--s&&u!=a;){if((0==i||t[n+i]==t[n+i-c])&&(a=v.F._howLong(t,n,c))>i){if(l=c,(i=a)>=o)break;c+2<a&&(a=c+2);for(var h=0,p=0;p<a-2;p++){var d=n-c+p+32768&32767,g=d-r[d]+32768&32767;g>h&&(h=g,u=d)}}c+=(a=u)-(u=r[a])+32768&32767}return i<<16|l},v.F._howLong=function(t,n,r){if(t[n]!=t[n-r]||t[n+1]!=t[n+1-r]||t[n+2]!=t[n+2-r])return 0;var i=n,o=Math.min(t.length,n+258);for(n+=3;n<o&&t[n]==t[n-r];)n++;return n-i},v.F._hash=function(t,n){return(t[n]<<8|t[n+1])+(t[n+2]<<4)&65535},v.saved=0,v.F._writeBlock=function(t,n,r,i,o,s,a,u,c){var l=v.F.U,f=v.F._putsF,h=v.F._putsE;l.lhst[256]++;var p=v.F.getTrees(),d=p[0],g=p[1],b=p[2],y=p[3],E=p[4],m=p[5],_=p[6];p=p[7];var w=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),O=i+v.F.contSize(l.fltree,l.lhst)+v.F.contSize(l.fdtree,l.dhst);i=i+v.F.contSize(l.ltree,l.lhst)+v.F.contSize(l.dtree,l.dhst)+(14+3*m+v.F.contSize(l.itree,l.ihst)+(2*l.ihst[16]+3*l.ihst[17]+7*l.ihst[18]));for(var I=0;286>I;I++)l.lhst[I]=0;for(I=0;30>I;I++)l.dhst[I]=0;for(I=0;19>I;I++)l.ihst[I]=0;if(w=w<O&&w<i?0:O<i?1:2,f(u,c,t),f(u,c+1,w),c+=3,0==w){for(;0!=(7&c);)c++;c=v.F._copyExact(o,s,a,u,c)}else{if(1==w)var A=l.fltree,R=l.fdtree;if(2==w){for(v.F.makeCodes(l.ltree,d),v.F.revCodes(l.ltree,d),v.F.makeCodes(l.dtree,g),v.F.revCodes(l.dtree,g),v.F.makeCodes(l.itree,b),v.F.revCodes(l.itree,b),A=l.ltree,R=l.dtree,h(u,c,y-257),h(u,c+=5,E-1),h(u,c+=5,m-4),c+=4,t=0;t<m;t++)h(u,c+3*t,l.itree[1+(l.ordr[t]<<1)]);c=v.F._codeTiny(_,l.itree,u,c+3*m),c=v.F._codeTiny(p,l.itree,u,c)}for(m=0;m<r;m+=2){for(_=(t=n[m])>>>23,t=s+(8388607&t);s<t;)c=v.F._writeLit(o[s++],A,u,c);0!=_&&(t=(d=n[m+1])>>16,a=d>>8&255,d&=255,h(u,c=v.F._writeLit(257+a,A,u,c),_-l.of0[a]),c+=l.exb[a],f(u,c=v.F._writeLit(d,R,u,c),t-l.df0[d]),c+=l.dxb[d],s+=_)}c=v.F._writeLit(256,A,u,c)}return c},v.F._copyExact=function(t,n,r,i,o){var s=o>>>3;return i[s]=r,i[s+1]=r>>>8,i[s+2]=255-i[s],i[s+3]=255-i[s+1],s+=4,i.set(new Uint8Array(t.buffer,n,r),s),o+(r+4<<3)},v.F.getTrees=function(){for(var t=v.F.U,n=v.F._hufTree(t.lhst,t.ltree,15),r=v.F._hufTree(t.dhst,t.dtree,15),i=[],o=v.F._lenCodes(t.ltree,i),s=[],a=v.F._lenCodes(t.dtree,s),u=0;u<i.length;u+=2)t.ihst[i[u]]++;for(u=0;u<s.length;u+=2)t.ihst[s[u]]++;u=v.F._hufTree(t.ihst,t.itree,7);for(var c=19;4<c&&0==t.itree[1+(t.ordr[c-1]<<1)];)c--;return[n,r,u,o,a,c,i,s]},v.F.getSecond=function(t){for(var n=[],r=0;r<t.length;r+=2)n.push(t[r+1]);return n},v.F.nonZero=function(t){for(var n="",r=0;r<t.length;r+=2)0!=t[r+1]&&(n+=(r>>1)+",");return n},v.F.contSize=function(t,n){for(var r=0,i=0;i<n.length;i++)r+=n[i]*t[1+(i<<1)];return r},v.F._codeTiny=function(t,n,r,i){for(var o=0;o<t.length;o+=2){var s=t[o],a=t[o+1];i=v.F._writeLit(s,n,r,i);var u=16==s?2:17==s?3:7;15<s&&(v.F._putsE(r,i,a,u),i+=u)}return i},v.F._lenCodes=function(t,n){for(var r=t.length;2!=r&&0==t[r-1];)r-=2;for(var i=0;i<r;i+=2){var o=t[i+1],s=i+3<r?t[i+3]:-1,a=i+5<r?t[i+5]:-1,u=0==i?-1:t[i-1];if(0==o&&s==o&&a==o){for(s=i+5;s+2<r&&t[s+2]==o;)s+=2;11>(o=Math.min(s+1-i>>>1,138))?n.push(17,o-3):n.push(18,o-11),i+=2*o-2}else if(o==u&&s==o&&a==o){for(s=i+5;s+2<r&&t[s+2]==o;)s+=2;o=Math.min(s+1-i>>>1,6),n.push(16,o-3),i+=2*o-2}else n.push(o,0)}return r>>>1},v.F._hufTree=function(t,n,r){var i=[],o=t.length,s=n.length,a=0;for(a=0;a<s;a+=2)n[a]=0,n[a+1]=0;for(a=0;a<o;a++)0!=t[a]&&i.push({lit:a,f:t[a]});if(t=i.length,o=i.slice(0),0==t)return 0;if(1==t)return n[1+((r=i[0].lit)<<1)]=1,n[1+((0==r)<<1)]=1;i.sort(function(t,n){return t.f-n.f}),a=i[0],s=i[1];var u=0,c=1,l=2;for(i[0]={lit:-1,f:a.f+s.f,l:a,r:s,d:0};c!=t-1;)a=u!=c&&(l==t||i[u].f<i[l].f)?i[u++]:i[l++],s=u!=c&&(l==t||i[u].f<i[l].f)?i[u++]:i[l++],i[c++]={lit:-1,f:a.f+s.f,l:a,r:s};for((i=v.F.setDepth(i[c-1],0))>r&&(v.F.restrictDepth(o,r,i),i=r),a=0;a<t;a++)n[1+(o[a].lit<<1)]=o[a].d;return i},v.F.setDepth=function(t,n){return -1!=t.lit?t.d=n:Math.max(v.F.setDepth(t.l,n+1),v.F.setDepth(t.r,n+1))},v.F.restrictDepth=function(t,n,r){var i=0,o=1<<r-n,s=0;for(t.sort(function(t,n){return n.d==t.d?t.f-n.f:n.d-t.d}),i=0;i<t.length&&t[i].d>n;i++){var a=t[i].d;t[i].d=n,s+=o-(1<<r-a)}for(s>>>=r-n;0<s;)(a=t[i].d)<n?(t[i].d++,s-=1<<n-a-1):i++;for(;0<=i;i--)t[i].d==n&&0>s&&(t[i].d--,s++);0!=s&&console.log("debt left")},v.F._goodIndex=function(t,n){var r=0;return n[16]<=t&&(r|=16),n[8|r]<=t&&(r|=8),n[4|r]<=t&&(r|=4),n[2|r]<=t&&(r|=2),n[1|r]<=t&&(r|=1),r},v.F._writeLit=function(t,n,r,i){return v.F._putsF(r,i,n[t<<1]),i+n[1+(t<<1)]},v.F.inflate=function(t,n){var r=Uint8Array;if(3==t[0]&&0==t[1])return n||new r(0);var i=v.F,o=i._bitsF,s=i._bitsE,a=i._decodeTiny,u=i.makeCodes,c=i.codes2map,l=i._get17,f=i.U,h=null==n;h&&(n=new r(t.length>>>2<<3));for(var p,d,g,b,y=0,E=0,m=d=0,_=0;0==y;)if(y=o(t,_,1),p=o(t,_+1,2),_+=3,0==p)0!=(7&_)&&(_+=8-(7&_)),p=t[(_=4+(_>>>3))-4]|t[_-3]<<8,h&&(n=v.F._check(n,m+p)),n.set(new r(t.buffer,t.byteOffset+_,p),m),_=_+p<<3,m+=p;else{if(h&&(n=v.F._check(n,m+131072)),1==p&&(g=f.flmap,b=f.fdmap,E=511,d=31),2==p){for(d=s(t,_,5)+257,p=s(t,_+5,5)+1,g=s(t,_+10,4)+4,_+=14,b=0;38>b;b+=2)f.itree[b]=0,f.itree[b+1]=0;for(E=1,b=0;b<g;b++){var w=s(t,_+3*b,3);f.itree[1+(f.ordr[b]<<1)]=w,w>E&&(E=w)}_+=3*g,u(f.itree,E),c(f.itree,E,f.imap),g=f.lmap,b=f.dmap,_=a(f.imap,(1<<E)-1,d+p,t,_,f.ttree),E=(1<<(w=i._copyOut(f.ttree,0,d,f.ltree)))-1,d=(1<<(p=i._copyOut(f.ttree,d,p,f.dtree)))-1,u(f.ltree,w),c(f.ltree,w,g),u(f.dtree,p),c(f.dtree,p,b)}for(;;)if(_+=15&(p=g[l(t,_)&E]),0==(w=p>>>4)>>>8)n[m++]=w;else{if(256==w)break;p=m+w-254,264<w&&(p=m+((w=f.ldef[w-257])>>>3)+s(t,_,7&w),_+=7&w),_+=15&(w=b[l(t,_)&d]);var O=((w=f.ddef[w>>>4])>>>4)+o(t,_,15&w);for(_+=15&w,h&&(n=v.F._check(n,m+131072));m<p;)n[m]=n[m++-O],n[m]=n[m++-O],n[m]=n[m++-O],n[m]=n[m++-O];m=p}}return n.length==m?n:n.slice(0,m)},v.F._check=function(t,n){var r=t.length;return n<=r?t:((n=new Uint8Array(Math.max(r<<1,n))).set(t,0),n)},v.F._decodeTiny=function(t,n,r,i,o,s){for(var a=v.F._bitsE,u=v.F._get17,c=0;c<r;){var l=t[u(i,o)&n];o+=15&l;var f=l>>>4;if(15>=f)s[c]=f,c++;else{var h=l=0;for(16==f?(h=3+a(i,o,2),o+=2,l=s[c-1]):17==f?(h=3+a(i,o,3),o+=3):18==f&&(h=11+a(i,o,7),o+=7),f=c+h;c<f;)s[c]=l,c++}}return o},v.F._copyOut=function(t,n,r,i){for(var o=0,s=0,a=i.length>>>1;s<r;){var u=t[s+n];i[s<<1]=0,i[1+(s<<1)]=u,u>o&&(o=u),s++}for(;s<a;)i[s<<1]=0,i[1+(s<<1)]=0,s++;return o},v.F.makeCodes=function(t,n){var r,i,o=v.F.U,s=t.length,a=o.bl_count;for(r=0;r<=n;r++)a[r]=0;for(r=1;r<s;r+=2)a[t[r]]++;for(o=o.next_code,r=0,a[0]=0,i=1;i<=n;i++)r=r+a[i-1]<<1,o[i]=r;for(n=0;n<s;n+=2)0!=(a=t[n+1])&&(t[n]=o[a],o[a]++)},v.F.codes2map=function(t,n,r){for(var i=t.length,o=v.F.U.rev15,s=0;s<i;s+=2)if(0!=t[s+1]){var a=t[s+1],u=s>>1<<4|a,c=n-a;for(c=(a=t[s]<<c)+(1<<c);a!=c;)r[o[a]>>>15-n]=u,a++}},v.F.revCodes=function(t,n){for(var r=v.F.U.rev15,i=15-n,o=0;o<t.length;o+=2)t[o]=r[t[o]<<n-t[o+1]]>>>i},v.F._putsE=function(t,n,r){r<<=7&n,t[n>>>=3]|=r,t[n+1]|=r>>>8},v.F._putsF=function(t,n,r){r<<=7&n,t[n>>>=3]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},v.F._bitsE=function(t,n,r){return(t[n>>>3]|t[1+(n>>>3)]<<8)>>>(7&n)&(1<<r)-1},v.F._bitsF=function(t,n,r){return(t[n>>>3]|t[1+(n>>>3)]<<8|t[2+(n>>>3)]<<16)>>>(7&n)&(1<<r)-1},v.F._get17=function(t,n){return(t[n>>>3]|t[1+(n>>>3)]<<8|t[2+(n>>>3)]<<16)>>>(7&n)},v.F._get25=function(t,n){return(t[n>>>3]|t[1+(n>>>3)]<<8|t[2+(n>>>3)]<<16|t[3+(n>>>3)]<<24)>>>(7&n)},v.F.U=function(){var t=Uint16Array,n=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}}(),function(){function t(t,n,r){for(;0!=n--;)t.push(0,r)}for(var n=v.F.U,r=0;32768>r;r++){var i=r;i=(0xff00ff00&(i=(0xf0f0f0f0&(i=(0xcccccccc&(i=(0xaaaaaaaa&i)>>>1|(0x55555555&i)<<1))>>>2|(0x33333333&i)<<2))>>>4|(0xf0f0f0f&i)<<4))>>>8|(0xff00ff&i)<<8,n.rev15[r]=(i>>>16|i<<16)>>>17}for(r=0;32>r;r++)n.ldef[r]=n.of0[r]<<3|n.exb[r],n.ddef[r]=n.df0[r]<<4|n.dxb[r];t(n.fltree,144,8),t(n.fltree,112,9),t(n.fltree,24,7),t(n.fltree,8,8),v.F.makeCodes(n.fltree,9),v.F.codes2map(n.fltree,9,n.flmap),v.F.revCodes(n.fltree,9),t(n.fdtree,32,5),v.F.makeCodes(n.fdtree,5),v.F.codes2map(n.fdtree,5,n.fdmap),v.F.revCodes(n.fdtree,5),t(n.itree,19,0),t(n.ltree,286,0),t(n.dtree,30,0),t(n.ttree,320,0)}();var iD=["backups","servers"],jD=["backups","servers"],kD=["group"],nl=v.inflate,ks=v.deflate,ls=function(t){function r(t,o,s,a){W(this,r);var u=i.call(this,a,"Session");return m(n(u),"chatManager",void 0),m(n(u),"joinedChannels",new Set),m(n(u),"msgDedupLru",new tc(void 0,{maxlen:200})),m(n(u),"startTime",Date.now()),m(n(u),"seq",U.fromNumber(1,!0)),m(n(u),"userJoinOptions",new is(!1)),m(n(u),"seqSentStatuses",[!1,!1]),m(n(u),"dialogueSequenceLru",new tc(void 0,{maxlen:1e4})),m(n(u),"loggedOut",!1),m(n(u),"messageSentTimes",[]),m(n(u),"curLoginSockets",[void 0,void 0]),m(n(u),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(u),"lastLoginSockets",[new qe(1),new qe(1)]),m(n(u),"dialPendingMsgSubjectMap",new Map),m(n(u),"context",void 0),m(n(u),"connection",void 0),m(n(u),"instanceId",void 0),m(n(u),"registerSocketsFailureListener",function(){u.connection.once("socketsFailure",function(){u.log("socketsFailure, creating a new connection"),ad(function(){return u.connection.removeAllListeners(),u.connection=new Yr(u.context,u.logger,!0),u.loginHandler(15e3,!0)}).pipe(oe(function(t){return t.pipe(cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")))}),ob(u.connection.apClient.apFinish$)).subscribe(function(){u.log("new connection connected")})}),0===u.connection.listenerCount("tokenExpired")&&u.connection.on("tokenExpired",function(){u.emit("tokenExpired")})}),u.context=t,u.connection=o,u.instanceId=s,u.chatManager=new hD(a),u.log("The instanceId is %s",u.instanceId.toString()),u}la(r,t);var i=ma(r);return Ha(r,[{key:"fetchFileUploadIndexGet",value:function(t){var i=t.hash,o=t.size;if(0===(t=this.getLoginSockets()).length)throw new K("Client is not logged in");var s=this.incGetSeq();return t.forEach(function(t){t.sendPacket("FileUploadIndexGet",{seq:s,hash:i,size:o})}),{ret:Ca.apply(void 0,G(t.map(function(t){return t.fromReceived("FileUploadIndexRet").pipe(aa(function(t){return s.eq(t.seq)}))}))),fin:Ca.apply(void 0,G(t.map(function(t){return t.fromReceived("FileUploadIndexFin").pipe(aa(function(t){return s.eq(t.seq)}))}))),err:Xb.apply(void 0,G(t.map(function(t){return t.fromReceived("FileUploadIndexErr").pipe(aa(function(t){return s.eq(t.seq)}),ba(function(t){throw new da(["The media message upload failure, code %d",t.code],lg)}))}))),timeout:r.genTimeoutError(Lh)}}},{key:"requestFileUploadIndexSet",value:function(t){var i=t.hash,o=t.unit,s=t.servers;if(0===(t=this.getLoginSockets()).length)throw new K("Client is not logged in");var a=this.incGetSeq();return t.forEach(function(t){t.sendPacket("FileUploadIndexSet",{seq:a,servers:s,hash:i,unit:o})}),Ca.apply(void 0,[r.genTimeoutError(Lh)].concat(G(t.map(function(t){return t.fromReceived("FileUploadIndexErr").pipe(aa(function(t){return a.eq(t.seq)}),ba(function(t){throw new da(["FileUploadIndexSet failure, code %d",t.code],lg)}))})),G(t.map(function(t){return t.fromReceived("FileUploadIndexFin").pipe(aa(function(t){return a.eq(t.seq)}))}))))}},{key:"requestFileDownloadIndexGet",value:function(t){var i=t.size,o=t.zone,s=t.unit,a=t.hash,u=this.getLoginSockets();if(0===u.length)throw new K("Client is not logged in");var c=this.incGetSeq();return u.forEach(function(t){t.sendPacket("FileDownloadIndexGet",{seq:c,size:i,zone:o,unit:s,hash:a})}),t=Ca.apply(void 0,G(u.map(function(t){return t.fromReceived("FileDownloadIndexRet").pipe(aa(function(t){return c.eq(t.seq)}))}))).pipe(ba(function(t){var r=t.backups,i=t.servers;return t=ff(t,iD),ua({backupList:r.map(function(t){return[t]}),serverList:i.map(function(t){return[t]})},t)}),cd(500)),Ca(t,(u=jm(u.map(function(t){return t.fromReceived("FileDownloadIndexRet").pipe(aa(function(t){return c.eq(t.seq)}))}))).pipe(ba(function(t){return t.reduce(function(t,r){var i=t.backupList,o=t.serverList;t=r.backups;var s=r.servers;return r=ff(r,jD),ua({backupList:t.map(function(t,r){return[t].concat(G(void 0!==i&&Array.isArray(i[r])?i[r]:[]))}),serverList:s.map(function(t,r){return[t].concat(G(void 0!==i&&Array.isArray(o[r])?o[r]:[]))})},r)},{})})),r.genTimeoutError(Lh))}},{key:"loginHandler",value:function(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2e4,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&i)throw new K("Already logged out, request ignored");i&&this.registerSocketsFailureListener(),this.connection.initConnection();var o=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),s=Date.now();return o.forEach(function(r,o){var a=t.loginSocketSubs[o].login;void 0!==a&&a.unsubscribe(),t.loginSocketSubs[o].login=r.pipe(ca(function(r){t.curLoginSockets[o]=r;var a,u=Date.now();eb("Link",{ackedServerIp:r.address,destServerIp:r.ip,ec:0,sc:0,elapse:fb(t.startTime),lts:U.fromNumber(u),responseTime:s-u,sid:Xa(t.instanceId),userId:t.context.uid},null!=(a=t.context.config.enableCloudProxy)&&a),t.emit("userJoined",r.env),i&&t.connection.apClient.apFinish$.next(void 0)})).subscribe(t.lastLoginSockets[o])}),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Xb.apply(void 0,G(o).concat([gb(this.connection,"connectionInitFailure").pipe(ca(function(t){if(sa(t)||Sa(t))throw t;throw new da("Login failure",{code:Zq,originalError:t})}))])).pipe(Ka(1),hb(r),Ga(function(r){return r instanceof pb&&t.warn("Client login timeout"),r&&r.code===Kh&&(t.connection.emit("tokenExpired"),t.connection.apClient.apFinish$.next(void 0)),t.clearSockets(0,i),Z(r)}),ca(function(){i||t.registerSocketsFailureListener()}),wg(function(){i||t.connection.apClient.apFinish$.next(void 0)}))}},{key:"logoutHandler",value:function(){var t=J(w.mark(function t(){var r,i,o,s=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),i=(r=this.getLoginSockets()).map(function(t){return t.sendPacket("UserQuit",{}),s.connection.waitClosing(t)}),this.clearSockets(5e3),o=r.map(function(t){return t.env}),[0,1].filter(function(t){return!o.includes(t)}).forEach(function(t){s.connection.closeSocket(t,0)}),t.abrupt("return",Xb.apply(void 0,G(i)).toPromise());case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.getLoginSockets().length){t.next=2;break}throw new K("Client is not logged in. Cannot join the channel",Vq);case 2:return o=gb(this,"channelLeft").pipe(wb(function(t){return t===r}),Ka(1)),s=this.incGetSeq(),(a=this.lastLoginSockets.map(function(t){return t.pipe(Cc(function(t,r){0!==r&&u.incSeqIfNeeded(t.env);var o=0===r?s:u.seq;return t.sendPacket("GroupEnter",{account:i,seq:o}),t.fromReceived("GroupReply").pipe(aa(function(t){return o.eq(t.seq)}),ca(function(t){if(0!==(t=t.code))throw new da(["Channel join failure. The response code is %d",t],Rq)}))}),ob(o),pe())})).forEach(function(t,i){var o=function(){return u.loginSocketSubs[i].channels.delete(r.channelId)};u.loginSocketSubs[i].channels.set(r.channelId,t.subscribe({error:o,complete:o}))}),t.next=8,Xb.apply(void 0,G(a)).pipe(Ka(1),hb(1e4),Ga(function(t){return t instanceof pb&&u.warn("Channel join timeout"),Z(t)})).toPromise();case 8:this.joinedChannels.add(r);case 9:case"end":return t.stop()}},t,this)}));return function(r,i){return t.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(t,r){this.emit("channelLeft",t),this.joinedChannels.delete(t),this.getLoginSockets().forEach(function(t){t.sendPacket("GroupLeave",{account:r})})}},{key:"requestChannelMemberList",value:function(t){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in. Cannot get the channel members",cA);var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("GroupAllUsersList",{group:t,pageNumber:0,pageSize:200,seq:o})}),Ca.apply(void 0,[r.genTimeoutError(Pq)].concat(G(i.map(function(r){return r.fromReceived("GroupAllUsersResult").pipe(aa(function(r){var i=r.seq;return r.group===t&&o.eq(i)}))}))))}},{key:"requestPeersOnlineStatus",value:function(t){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("UserStatusList",{users:t,seq:o})}),Ca.apply(void 0,[r.genTimeoutError(oA)].concat(G(i.map(function(t){return t.fromReceived("UserStatusResult").pipe(aa(function(t){return o.eq(t.seq)}))}))))}},{key:"requestSetLocalUserAttributes",value:function(t,i){var o=this,s=this.getLoginSockets();if(0===s.length)throw new K("Client is not logged in");var a=this.incGetSeq();return s.forEach(function(r,s){void 0!==i&&s!==i||r.sendPacket("UserAttributeSet",{account:o.context.uid,attributeInfos:Object.entries(t).map(function(t){return{key:(t=ra(t,2))[0],value:t[1]}}),seq:a})}),Ca.apply(void 0,G(s.map(function(t){return t.fromReceived("UserAttributeErr").pipe(aa(function(t){return a.eq(t.seq)}),ba(function(t){throw new da(["The user attributes set failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(s.map(function(t){return t.fromReceived("UserAttributeRsp").pipe(aa(function(t){return a.eq(t.seq)}))}))))}},{key:"requestSetChannelAttributes",value:function(t,i,o){var s=this.getLoginSockets();if(0===s.length)throw new K("Client is not logged in");var a=this.incGetSeq();return s.forEach(function(r){r.sendPacket("GroupAttributeSet",{broadcast:o,group:t,attributeInfos:Object.entries(i).map(function(t){return{key:(t=ra(t,2))[0],value:t[1]}}),seq:a})}),Ca.apply(void 0,G(s.map(function(t){return t.fromReceived("GroupAttributeErr").pipe(aa(function(t){return a.eq(t.seq)}),ba(function(t){throw new da(["The group attributes set failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(s.map(function(t){return t.fromReceived("GroupAttributeRsp").pipe(aa(function(t){return a.eq(t.seq)}))}))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(t){var i=this,o=this.getLoginSockets();if(0===o.length)throw new K("Client is not logged in");var s=this.incGetSeq();return o.forEach(function(r){r.sendPacket("UserAttributeMod",{account:i.context.uid,attributeInfos:Object.entries(t).map(function(t){return{key:(t=ra(t,2))[0],value:t[1]}}),seq:s})}),Ca.apply(void 0,G(o.map(function(t){return t.fromReceived("UserAttributeErr").pipe(aa(function(t){return s.eq(t.seq)}),ba(function(t){throw new da(["The user attributes add or update failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(o.map(function(t){return t.fromReceived("UserAttributeRsp").pipe(aa(function(t){return s.eq(t.seq)}))}))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(t,i,o){var s=this.getLoginSockets();if(0===s.length)throw new K("Client is not logged in");var a=this.incGetSeq();return s.forEach(function(r){r.sendPacket("GroupAttributeMod",{broadcast:o,group:t,attributeInfos:Object.entries(i).map(function(t){return{key:(t=ra(t,2))[0],value:t[1]}}),seq:a})}),Ca.apply(void 0,G(s.map(function(t){return t.fromReceived("GroupAttributeErr").pipe(aa(function(t){return a.eq(t.seq)}),ba(function(t){throw new da(["The group attributes add or update failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(s.map(function(t){return t.fromReceived("GroupAttributeRsp").pipe(aa(function(t){return a.eq(t.seq)}))}))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(t){var i=this,o=this.getLoginSockets();if(0===o.length)throw new K("Client is not logged in");var s=this.incGetSeq();return o.forEach(function(r){r.sendPacket("UserAttributeDel",{account:i.context.uid,attributes:t,seq:s})}),Ca.apply(void 0,G(o.map(function(t){return t.fromReceived("UserAttributeErr").pipe(aa(function(t){return s.eq(t.seq)}),ba(function(t){throw new da(["The user attributes delete failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(o.map(function(t){return t.fromReceived("UserAttributeRsp").pipe(aa(function(t){return s.eq(t.seq)}))}))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(t,i,o){var s=this.getLoginSockets();if(0===s.length)throw new K("Client is not logged in");var a=this.incGetSeq();return s.forEach(function(r){r.sendPacket("GroupAttributeDel",{group:t,broadcast:o,attributes:i,seq:a})}),Ca.apply(void 0,G(s.map(function(t){return t.fromReceived("GroupAttributeErr").pipe(aa(function(t){return a.eq(t.seq)}),ba(function(t){throw new da(["The channel attributes delete failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(s.map(function(t){return t.fromReceived("GroupAttributeRsp").pipe(aa(function(t){return a.eq(t.seq)}))}))))}},{key:"requestClearLocalUserAttributes",value:function(){var t=this,i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("UserAttributeSet",{account:t.context.uid,seq:o,attributeInfos:[]})}),Ca.apply(void 0,G(i.map(function(t){return t.fromReceived("UserAttributeErr").pipe(aa(function(t){return o.eq(t.seq)}),ba(function(t){throw new da(["The user attributes clear failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(i.map(function(t){return t.fromReceived("UserAttributeRsp").pipe(aa(function(t){return o.eq(t.seq)}))}))))}},{key:"requestClearChannelAttributes",value:function(t,i){var o=this.getLoginSockets();if(0===o.length)throw new K("Client is not logged in");var s=this.incGetSeq();return o.forEach(function(r){r.sendPacket("GroupAttributeSet",{group:t,seq:s,attributeInfos:[],broadcast:i})}),Ca.apply(void 0,G(o.map(function(t){return t.fromReceived("GroupAttributeErr").pipe(aa(function(t){return s.eq(t.seq)}),ba(function(t){throw new da(["The channel attributes clear failure, code %d",t.code],Sb)}))})).concat([r.genTimeoutError(Tb)],G(o.map(function(t){return t.fromReceived("GroupAttributeRsp").pipe(aa(function(t){return s.eq(t.seq)}))}))))}},{key:"requestGetUserAttributesByKeys",value:function(t,i){var o=this.getLoginSockets();if(0===o.length)throw new K("Client is not logged in");var s=this.incGetSeq();return o.forEach(function(r){r.sendPacket("UserAttributeGet",{account:t,seq:s,attributes:i})}),Ca.apply(void 0,[r.genTimeoutError(Tb)].concat(G(o.map(function(t){return t.fromReceived("UserAttributeErr").pipe(aa(function(t){return s.eq(t.seq)}),ba(function(t){if(10008===(t=t.code))throw new da("The user requested is not online",Lq);throw new Wc(["User attribute operation unknown error code: %d",t],Sb)}))})),G(o.map(function(t){return t.fromReceived("UserAttributeRet").pipe(aa(function(t){return s.eq(t.seq)}))}))))}},{key:"requestGetChannelAttributesByKeys",value:function(t,i){var o=this.getLoginSockets();if(0===o.length)throw new K("Client is not logged in");var s=this.incGetSeq();return o.forEach(function(r){r.sendPacket("GroupAttributeGet",{group:t,seq:s,attributes:i})}),Ca.apply(void 0,[r.genTimeoutError(Tb)].concat(G(o.map(function(t){return t.fromReceived("GroupAttributeErr").pipe(aa(function(t){return s.eq(t.seq)}),ba(function(t){throw new da(["The channel attributes get failure, code %d",t.code],Sb)}))})),G(o.map(function(t){return t.fromReceived("GroupAttributeRet").pipe(aa(function(t){return s.eq(t.seq)}))}))))}},{key:"requestGetUserAttributeKeys",value:function(t){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("UserAttributeKeysGet",{account:t,seq:o})}),Ca.apply(void 0,[r.genTimeoutError(Tb)].concat(G(i.map(function(t){return t.fromReceived("UserAttributeErr").pipe(aa(function(t){return o.eq(t.seq)}),ba(function(t){if(10008===(t=t.code))throw new da("The user requested is not online",Lq);throw new Wc(["User attribute operation unknown error code: %d",t],Sb)}))})),G(i.map(function(t){return t.fromReceived("UserAttributeKeysRet").pipe(aa(function(t){return o.eq(t.seq)}))}))))}},{key:"requestGetChannelAttributesKeys",value:function(t){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("GroupAttributeKeysGet",{group:t,seq:o})}),Ca.apply(void 0,[r.genTimeoutError(Tb)].concat(G(i.map(function(t){return t.fromReceived("GroupAttributeErr").pipe(aa(function(t){return o.eq(t.seq)}),ba(function(t){throw new Wc(["Channel attribute operation unknown error code: %d",t.code],Sb)}))})),G(i.map(function(t){return t.fromReceived("GroupAttributeKeysRet").pipe(aa(function(t){return o.eq(t.seq)}))}))))}},{key:"requestGetChannelMemberCount",value:function(t){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("GroupStatusList",{groups:t,seq:o})}),Ca.apply(void 0,[r.genTimeoutError(Pq)].concat(G(i.map(function(t){return t.fromReceived("GroupStatusResult").pipe(aa(function(t){return o.eq(t.seq)}))}))))}},{key:"requestSubscribePeersOnlineStatus",value:function(t){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach(function(r){r.sendPacket("SubscribeUserStatus",{seq:o,users:t})}),Ca.apply(void 0,[r.genTimeoutError(vA)].concat(G(i.map(function(t){return t.fromReceived("SubscribeResponse").pipe(aa(function(t){return o.eq(t.seq)}))}))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(t){var r=this.getLoginSockets();if(0===r.length)throw new K("Client is not logged in");var i=this.incGetSeq();r.forEach(function(r){r.sendPacket("UnsubscribeUserStatus",{seq:i,users:t})})}},{key:"sendInvitationMessage",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c,l,f,h,p,d,v,g=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.peerId,o=r.callId,s=r.extra,a=r.isAcceptAck,u=r.channelId,c=r.type,l={callId:o},void 0===a){t.next=6;break}if("CallAccept"===c){t.next=5;break}throw Error("invalid invitation type");case 5:l.type=a?"ack":"request";case 6:return l.channel=u,("CallInvite"===c||"CallCancel"===c||"CallReject"===c||"CallAccept"===c&&!1===a)&&void 0!==s&&(l.extra=s),f=Bg(),this.log("The sent invitation body is %o",l),h=function(t){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:f,instance:g.instanceId,dst:i,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:t,MessageType:c}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(l)),src:g.context.uid}},t.next=14,Kb(this.sendMessageToRetry(h,!0)).pipe(hb(1e4),Ga(function(t){return t instanceof pb&&g.warn("Send invitation timeout"),Z(t)})).toPromise();case 14:return d=(p=t.sent).code,v=p.retryTimes,t.abrupt("return",{hasPeerReceived:0===d,hasReSent:0!==v});case 18:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var t=J(w.mark(function t(r,i,o,s,a,u){var c,l,f,h,p,d,v,g,b,y,E,_,O,A,R,T,N,k,C,x,L,P,M,D,j,F,q,B,z=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f=void 0===(l=i.width)?0:l,p=void 0===(h=i.height)?0:h,v=void 0===(d=i.fileName)?"":d,b=void 0===(g=i.description)?"":g,E=void 0===(y=i.thumbnail)?new Blob:y,O=void 0===(_=i.thumbnailHeight)?0:_,R=void 0===(A=i.thumbnailWidth)?0:A,N=void 0===(T=i.size)?0:T,k=i.mediaId,C=a.enableOfflineMessaging,x=a.enableHistoricalMessaging,za(o)){t.next=4;break}throw new I("The send message arguments are not valid",s?$k:hg);case 4:if(!(32768<new Blob([v,E,b]).size)){t.next=6;break}throw new I("The size of message overflowed ",s?ve:Hh);case 6:return P=(L=this.chatManager.getChatInfo(o)).dialogue,M=L.sequence,D=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(D,"-").concat(P,"#").concat(M,'"'),s?" peer":" channel",oa(o)),m(c={},"media_description",b),m(c,"media_width",f),m(c,"media_height",p),m(c,"media_thumbnailwidth",R),m(c,"media_thumbnailheight",O),m(c,"media_size",N),m(c,"media_id",k),m(c,"media_filename",v),j=uc(c,function(t){return(new TextEncoder).encode(t.toString())}),t.t0=Uint8Array,t.next=14,Ji(E);case 14:return t.t1=t.sent,j.media_thumbnail=new t.t0(t.t1),F=s&&"IMAGE"===r?"PeerImageMessage":s&&"FILE"===r?"PeerFileMessage":s||"IMAGE"!==r?"ChannelFileMessage":"ChannelImageMessage",q=function(t){return{MiscMap:j,sequence:M,dialogue:P,instance:D,dst:o,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:t,CompressionMethod:"Uncompressed",MessageType:F,ToCache:C,ToArchive:x}).toLong(),payload:new Uint8Array,src:z.context.uid}},t.next=20,Kb(this.sendMessageToRetry(q,!0)).pipe(hb(void 0===u?1e4:u),Ga(function(t){return t instanceof pb&&z.warn("Send message timeout"),Z(t)})).toPromise();case 20:if(2!==(B=t.sent.code)){t.next=24;break}throw new da("The peer does not support this type of message",nA);case 24:return t.abrupt("return",{hasPeerReceived:0===B});case 25:case"end":return t.stop()}},t,this)}));return function(r,i,o,s,a,u){return t.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var t=J(w.mark(function t(r,i,o,s,a,u){var c,l,f,h,p,d,v,g,b,y=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=a.enableOfflineMessaging,l=a.enableHistoricalMessaging,za(o)&&r instanceof Uint8Array&&"string"==typeof i){t.next=3;break}throw new I("The send message arguments are not valid",s?$k:hg);case 3:if(!(32768<r.byteLength+new Blob([i]).size)){t.next=5;break}throw new ib("The message size is over the 32KB limit",s?ve:Hh);case 5:return f=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=r.byteLength,p=(h=this.chatManager.getChatInfo(o)).dialogue,d=h.sequence,v=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(v,"-").concat(p,"#").concat(d,'"'),f?" compressed":"",s?"peer":"channel",oa(o)),g=function(t){return{MiscMap:{description:(new TextEncoder).encode(i)},sequence:d,dialogue:p,instance:v,dst:o,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:t,CompressionMethod:f?"Zlib":"Uncompressed",MessageType:s?"PeerRawMessage":"ChannelRawMessage",ToCache:c,ToArchive:l}).toLong(),payload:f?ks(r):r,src:y.context.uid}},t.next=12,Kb(this.sendMessageToRetry(g,!0)).pipe(hb(void 0===u?1e4:u),Ga(function(t){return t instanceof pb&&y.warn("Send message timeout"),Z(t)})).toPromise();case 12:return b=t.sent.code,t.abrupt("return",{hasPeerReceived:0===b});case 15:case"end":return t.stop()}},t,this)}));return function(r,i,o,s,a,u){return t.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var t=J(w.mark(function t(r,i,o,s,a){var u,c,l,f,h,p,d,v,g,b,y=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=s.enableOfflineMessaging,c=s.enableHistoricalMessaging,za(i)){t.next=3;break}throw new I("The send message arguments are not valid",o?$k:hg);case 3:if(!(32768<new Blob([r]).size)){t.next=5;break}throw new ib("The message size is over the 32KB limit",o?ve:Hh);case 5:return l=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([r]).size,h=(f=this.chatManager.getChatInfo(i)).dialogue,p=f.sequence,d=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(d,"-").concat(h,"#").concat(p,'"'),l?" compressed":"",o?"peer":"channel",oa(i)),v=(new TextEncoder).encode(r),g=function(t){return{MiscMap:{},sequence:p,dialogue:h,instance:d,dst:i,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:t,CompressionMethod:l?"Zlib":"Uncompressed",MessageType:o?"PeerTextMessage":"ChannelTextMessage",ToCache:u,ToArchive:c}).toLong(),payload:l?ks(v):v,src:y.context.uid}},t.next=13,Kb(this.sendMessageToRetry(g,!0)).pipe(hb(void 0===a?1e4:a),Ga(function(t){return t instanceof pb&&y.warn("Send message timeout"),Z(t)})).toPromise();case 13:return b=t.sent.code,t.abrupt("return",{hasPeerReceived:0===b});case 16:case"end":return t.stop()}},t,this)}));return function(r,i,o,s,a){return t.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(t,r){Object.entries(this.loginSocketSubs[t]).forEach(function(t){var i=(t=ra(t,2))[1];"channels"===t[0]&&r||(Array.isArray(i)||i instanceof Map?i.forEach(function(t){return t.unsubscribe()}):i&&i.unsubscribe())}),this.loginSocketSubs[t]={channels:r?this.loginSocketSubs[t].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f,h,p=this,d=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=2<d.length&&void 0!==d[2]?d[2]:0,this.log("Attempt to send the message ".concat(i?" with retrying, %o":"without retrying"),{retryTimes:o}),0!==(s=this.getLoginSockets()).length){t.next=5;break}throw Error("no logged-in sockets");case 5:return a=r(o),s.forEach(function(t){t.sendPacket("Message",a)}),u=a.dialogue,c=a.sequence,l=a.instance,f=s.map(function(t){return t.fromReceived("Ack").pipe(wb(function(t){return u.eq(t.dialogue)&&c.eq(t.sequence)&&l.eq(t.instance)}))}),t.prev=9,t.next=12,Xb.apply(void 0,G(f)).pipe(hb(6e3),Ga(function(t){return Sa(t)&&p.warn("Message send timeout, retry times %d",o),Z(t)}),Ka(1)).toPromise();case 12:return h=t.sent.code,this.log("The message has been acked, %o",{code:h}),t.abrupt("return",{code:h,retryTimes:o});case 18:if(t.prev=18,t.t0=t.catch(9),!(t.t0 instanceof pb&&i)){t.next=22;break}return t.abrupt("return",this.sendMessageToRetry(r,!1,o+1));case 22:throw t.t0;case 23:case"end":return t.stop()}},t,this,[[9,18]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var t=this;this.lastLoginSockets.map(function(r){return r.pipe(Cc(function(r){return Bc(0,2750).pipe(ca(function(){t.incSeqIfNeeded(r.env),r.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:t.seq})}))}))}).forEach(function(r,i){var o=t.loginSocketSubs[i].keepAlive;void 0!==o&&o.unsubscribe(),t.loginSocketSubs[i].keepAlive=r.subscribe({error:function(){}})})}},{key:"initKeepAliveReconnector",value:function(){var t=this;this.lastLoginSockets.map(function(t){return t.pipe(Cc(function(t){var r,i=!1,o=t.userJoin$.pipe(ca(function(){i=!0})),s=t.input$.pipe(ca(function(t){"Ping"!==Li[t.uri].slice(0,-3)&&(i=!1)}));return Xb(Bc(15e3,1e4).pipe(Pt(t.receivedPacket),ca(function(o){o=ra(o,2),o=ra(o[1],2)[1],r!==o||i||t.forceReconnect(),r=o})),o,s)}))}).forEach(function(r,i){var o=t.loginSocketSubs[i].keepAliveReconnector;void 0!==o&&o.unsubscribe(),t.loginSocketSubs[i].keepAliveReconnector=r.subscribe({error:function(){}})})}},{key:"initLoginReceiver",value:function(){var t=this;this.lastLoginSockets.map(function(r){return r.pipe(Cc(function(r){return Xb(gb(r,"reconnect").pipe(ca(t.onSocketReconnect(r))),r.fromReceived("Message").pipe(ca(t.onMessage(r))),r.fromReceived("GroupEnterNotice").pipe(ca(t.onGroupEnterNotice())),r.fromReceived("GroupLeaveNotice").pipe(ca(t.onGroupLeaveNotice())),r.fromReceived("GroupCountNotice").pipe(ca(t.onGroupCountNotice())),r.fromReceived("GroupAttributeAlt").pipe(ca(t.onGroupAttributeAlt())),r.fromReceived("UserJoinNotice").pipe(ca(t.onUserNotice(S.PeerOnlineState.ONLINE))),r.fromReceived("UserQuitNotice").pipe(ca(t.onUserNotice(S.PeerOnlineState.OFFLINE))),r.fromReceived("UserWaitNotice").pipe(ca(t.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(qf(void 0))}))}).forEach(function(r,i){t.loginSocketSubs[i].receivers.push(r.subscribe({error:function(){}}))})}},{key:"requestSocketLogin",value:function(t,r,i){var o=this;return im(ad(function(){o.userJoinOptions=new is(r),t.sendPacket("UserJoin",{account:o.context.uid,instance:o.instanceId,opt:o.userJoinOptions.toLong(),seq:i,ticket:t.ticket})}),t.fromReceived("UserResp").pipe(aa(function(t){return i.eq(t.seq)}),ca(function(r){if(0!==(r=r.code))throw o.clearSockets(),o.logError("Connected to gateway success but the Rtm server rejected login"),new da(["Login failure. The response code from the RTM service is %d",r],jg);o.log("ENV_%d logged in",t.env)}),qf(t),hb(15e3))).pipe(wb(function(t){return void 0!==t}),Ga(function(t){return t instanceof pb&&o.warn("Login response timeout, rejoin: %s",r),Z(t)}))}},{key:"getSocketLoginObservables",value:function(t,r){var i=this;return t.map(function(t){return t.pipe(ca(function(t){0===t.listenerCount("socketUserDrop")&&t.on("socketUserDrop",function(r){return i.onUserDrop(r,t)})}),Cc(function(t,o){return i.incSeqIfNeeded(t.env),i.requestSocketLogin(t,0!==o,0===o?r:i.seq)}),pe())})}},{key:"incSeqIfNeeded",value:function(t){if(![0,1].includes(t))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[t]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[t]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var t=this.curLoginSockets,r=-1,i=null==t?0:t.length,o=0,s=[];++r<i;){var a=t[r];a&&(s[o++]=a)}return s}},{key:"emitMessage",value:function(t,i){var o=t.options,s=t.payload,a=t.src,u=t.dst,c=t.instance,l=t.dialogue,f=t.sequence,h=t.ms,p=t.MiscMap;this.dialogueSequenceLru.set(l.toString(),f),c="".concat(c,"-").concat(l,"#").concat(f),this.msgDedupLru.has(c)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",i,c):(this.msgDedupLru.set(c,void 0),i=new ae(o),this.lastLoginSockets.forEach(function(){var i=J(w.mark(function i(o){var s;return w.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o.pipe(Ka(1)).toPromise();case 2:s=i.sent,r.sendMessageAck(t,s);case 4:case"end":return i.stop()}},i)}));return function(t){return i.apply(this,arguments)}}()),o=i.isZlibCompressed(),i.isInvitation()?(u=JSON.parse(u=pa(o?nl(Xm(s,Uint8Array.of(0,0,0,0))):s)),this.log("The received invitation body is %o",u),this.emit("invitationMessage",{body:u,type:i.getInvitationType(),peerId:a,serverReceivedTs:h.toNumber()})):i.isTextMessage()?(p=i.isPeerTextMessage(),s=pa(o?nl(Xm(s,Uint8Array.of(0,0,0,0))):s),this.info("Received a %s %s text message from %s to %s, %s",o?" compressed":"",p?"peer":"channel",oa(a),oa(u),c),p?(a={text:s,peerId:a,properties:{serverReceivedTs:h.toNumber(),isOfflineMessage:i.isFromCache()}},this.emit("peerTextMessage",a)):this.emit("channelTextMessage",{channelId:u,memberId:a,text:s,properties:{serverReceivedTs:h.toNumber(),isOfflineMessage:!1}})):i.isRawMessage()?(l=i.isRawPeerMessage(),p=void 0===(p=p.description)?"":pa(p),s=o?nl(s):s,this.info("Received a %s %s raw message from %s to %s, %s",o?" compressed":"",l?"peer":"channel",oa(a),oa(u),c),l?(a={desc:p,raw:s,peerId:a,properties:{serverReceivedTs:h.toNumber(),isOfflineMessage:i.isFromCache()}},this.emit("peerRawMessage",a)):this.emit("channelRawMessage",{desc:p,raw:s,channelId:u,memberId:a,properties:{serverReceivedTs:h.toNumber(),isOfflineMessage:!1}})):(i.isImageMessage()||i.isFileMessage())&&(s=i.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",s?"peer":"channel",oa(a),oa(u),c),s?this.emit("peerMediaMessage",{messageType:i.isImageMessage()?"IMAGE":"FILE",details:p,peerId:a,properties:{serverReceivedTs:h.toNumber(),isOfflineMessage:i.isFromCache()}}):this.emit("channelMediaMessage",{messageType:i.isImageMessage()?"IMAGE":"FILE",details:p,memberId:a,channelId:u,properties:{serverReceivedTs:h.toNumber(),isOfflineMessage:i.isFromCache()}})))}},{key:"onSocketReconnect",value:function(t){var r=this;return function(){var i=[0,1].filter(function(r){return r!==t.env})[0];(i=r.connection.curOpenSockets[i])&&!i.loggedIn&&r.emit("connectionLost")}}},{key:"onUserDrop",value:function(t,r){var i;t=t.code,eb("KickedOff",{code:0,elapse:fb(this.startTime),linkId:parseInt(r.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:r.address,serverCode:t,sid:Xa(this.instanceId),userId:this.context.uid},null!=(i=this.context.config.enableCloudProxy)&&i),10006===t||10001===t?this.warn("Login too often and kicked off, reconnect and login"):10009===t?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=Bg(),this.context.sid=Xa(this.instanceId),this.emit("instanceChanged",this.instanceId)):[11,14,15,16].includes(t)&&(this.emit("userDrop",t),this.clearSockets())}},{key:"clearSockets",value:function(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach(function(o){t.cleanLoginSubs(o,i),t.connection.closeSocket(o,r)})}},{key:"onMessage",value:function(t){var r=this;return function(i){var o=i.dialogue,s=i.instance,a=i.sequence,u=i.options;if(i.src===r.context.uid)r.log("The message is from the local account, ignored");else{var c=o.toString(),l=r.dialPendingMsgSubjectMap.get(c);if(o="".concat(s,"-").concat(o,"#").concat(a),l)l.next(i),r.log("Env_%d: The dialogue has pending messages, next: %s",t.env,o);else{var f=r.dialogueSequenceLru.get(c);if(l=!f&&a.eq(1),s=void 0!==f&&a.sub(f).eq(1),l||s)r.emitMessage(i,t.env);else{if(f){if(a.lte(f))return;r.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",t.env,o)}else r.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",t.env,o);a=new Pa,r.dialPendingMsgSubjectMap.set(c,a);var h=a.pipe(Qs(Pk),xg(function(t,r){return[].concat(G(t),[r])},[]),ba(function(t){return G(t).sort(function(t,r){return t=t.sequence,r=r.sequence,t.eq(r)?0:t.gt(r)?1:-1})}),sm(1));u=!(u=new ae(u)).isFromCache()&&!u.isBufferedMessage(),h.pipe(ob(Bc(u?750:1500)),aa(function(t){if(2>t.length)return!1;for(var r=void 0===f?U.fromNumber(1,!0):f.add(1),i=0;i<t.length;r=r.add(1),i++)if(!t[i].sequence.eq(r))return!1;return!0}),wg(function(){r.dialPendingMsgSubjectMap.delete(c)})).subscribe(function(i){i.forEach(function(i){r.emitMessage(i,t.env),r.log("Env_%d: The message queue has fully ordered, emitting: %s",t.env,"".concat(i.instance,"-").concat(i.dialogue,"#").concat(i.sequence))})},function(i){i instanceof vg&&h.pipe(Ka(1)).subscribe(function(i){return i.forEach(function(i){r.log("Env_%d: The message pending queue expired, emitting: %s",t.env,"".concat(i.instance,"-").concat(i.dialogue,"#").concat(i.sequence)),r.emitMessage(i,t.env)})})}),a.next(i)}}}}}},{key:"onGroupEnterNotice",value:function(){var t=this;return function(r){t.emit("memberNotice",{channelId:r.group,seq:r.seq,instance:r.instance,memberId:r.user,type:"MemberJoined",size:r.size})}}},{key:"onGroupLeaveNotice",value:function(){var t=this;return function(r){t.emit("memberNotice",{channelId:r.group,seq:r.seq,instance:r.instance,memberId:r.user,type:"MemberLeft",size:r.size})}}},{key:"onGroupCountNotice",value:function(){var t=this;return function(r){t.emit("memberNotice",{channelId:r.group,seq:r.seq,instance:r.instance,type:"MemberCountUpdated",size:r.size})}}},{key:"onGroupAttributeAlt",value:function(){var t=this;return function(r){var i=r.group;r=ff(r,kD),t.emit("channelAttributesUpdated",ua({channelId:i},r))}}},{key:"onUserNotice",value:function(t){var r=this;return function(i){r.emit("peerOnlineStatusChanged",{peerId:i.user,instance:i.instance,seq:i.seq,state:t})}}}],[{key:"sendMessageAck",value:function(t,r){var i=new ae(t.options);(i.isInvitation()||i.isPeerMessage())&&r.sendPacket("Ack",{code:0,dialogue:t.dialogue,instance:t.instance,sequence:t.sequence})}}]),r}(tb());m(ls,"genTimeoutError",function(t,n){return bb(void 0).pipe(cd(void 0===n?1e4:n),ba(function(){throw new db(["Request timed out after %ds",void 0===n?1e4:n],t)}))});var ms,ol,pl=0,ql=0;Ud.v1=function(t,n,r){r=n&&r||0;var i=n||[],o=(t=t||{}).node||ms,s=void 0!==t.clockseq?t.clockseq:ol;if(null==o||null==s){var a=Jq();null==o&&(o=ms=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=ol=16383&(a[6]<<8|a[7]))}a=void 0!==t.msecs?t.msecs:(new Date).getTime();var u=void 0!==t.nsecs?t.nsecs:ql+1,c=a-pl+(u-ql)/1e4;if(0>c&&void 0===t.clockseq&&(s=s+1&16383),(0>c||a>pl)&&void 0===t.nsecs&&(u=0),1e4<=u)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(pl=a,ql=u,ol=s,t=(1e4*(0xfffffff&(a+=122192928e5))+u)%0x100000000,i[r++]=t>>>24&255,i[r++]=t>>>16&255,i[r++]=t>>>8&255,i[r++]=255&t,t=a/0x100000000*1e4&0xfffffff,i[r++]=t>>>8&255,i[r++]=255&t,i[r++]=t>>>24&15|16,i[r++]=t>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s,s=0;6>s;++s)i[r+s]=o[s];return n||Kq(i)},Ud.v4=Ud;var vd,ub,cf,rl=Ph(),bf=S.LocalInvitationFailureReason,Ba=S.LocalInvitationState,lD=(vd=function(t){function r(t,o,s){W(this,r);var a=i.call(this,s,"RtmLocalInvitation",!0);return m(n(a),"state",Ba.IDLE),m(n(a),"localInvitationEnd$",Ca(gb(n(a),"LocalInvitationAccepted"),gb(n(a),"LocalInvitationRefused"),gb(n(a),"LocalInvitationFailure"),gb(n(a),"LocalInvitationCanceled")).pipe(Ka(1))),m(n(a),"callId",Ud.v4()),m(n(a),"_content",""),m(n(a),"_channelId",""),m(n(a),"_response",""),m(n(a),"calleeId",void 0),m(n(a),"logger",void 0),m(n(a),"getSession",void 0),a.calleeId=t,a.getSession=o,a.logger=s,a}la(r,t);var i=ma(r);return Ha(r,[{key:"channelId",get:function(){return this._channelId},set:function(t){this.state!==Ba.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=t)}},{key:"content",get:function(){return this._content},set:function(t){this.log("set content for %s",this.callId),this._content=t}},{key:"response",get:function(){return this._response},set:function(t){throw new I('Cannot set the "response" of the LocalInvitation instance.',xc)}},{key:"send",value:function(){var t,r=this;if(this.state===Ba.SENT_TO_REMOTE||this.state===Ba.RECEIVED_BY_REMOTE)throw new K("The local invitation send failure. The call invitation has already been sent.",gA);if(this.isLocalInvitationEnd())throw new K("The local invitation send failure. The call invitation has ended.",Ih);if(0<this._channelId.length&&!za(this._channelId))throw new I("Illegal invitation channel ID",xc);if(!za(this.calleeId))throw new I("Illegal invitation callee user ID",xc);if(8192<Ig(this._content))throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this.state=Ba.SENT_TO_REMOTE,ad(J(w.mark(function i(){var o,s,a;return w.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.getSession().sendInvitationMessage({peerId:r.calleeId,callId:r.callId,extra:r._content,type:"CallInvite",channelId:r._channelId});case 2:if(s=(o=i.sent).hasPeerReceived,a=o.hasReSent,!r.isLocalInvitationEnd()){i.next=7;break}throw new db("send invitation timeout");case 7:if(r.log("The local invitation has sent to the callee"),s||a){i.next=11;break}throw t=new rl({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(s){i.next=14;break}throw t=new rl({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return i.stop()}},i)}))).pipe(oe(function(t){return t.pipe(ca(function(t){if(!(t instanceof rl))throw t}),cd(2e3))}),hb(3e4),Ga(function(t){return Sa(t)&&r.warn("local invitation ack timed out"),Z(t)}),ob(this.localInvitationEnd$)).subscribe({next:function(){r.state===Ba.RECEIVED_BY_REMOTE?r.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):r.state!==Ba.SENT_TO_REMOTE?r.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(r.info("The peer received the local invitation %s.",r.callId),r.state=Ba.RECEIVED_BY_REMOTE,r.emit("LocalInvitationReceivedByPeer"),r.localInvitationEnd$.pipe(hb(6e4),Ga(function(t){return Sa(t)&&r.warn("local invitation expired"),Z(t)})).subscribe({error:function(){r.state=Ba.FAILURE,r.emit("LocalInvitationFailure",bf.INVITATION_EXPIRE)}}))},error:function(i){r.isLocalInvitationEnd()?r.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(r.state=Ba.FAILURE,Sa(i)&&t?"PEER_NOT_ONLINE"===t.code?r.emit("LocalInvitationFailure",bf.PEER_OFFLINE):"RESENT_AND_OFFLINE"===t.code&&r.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):Sa(i)?r.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):"RtmInvalidStatusError"===i.name?r.emit("LocalInvitationFailure",bf.NOT_LOGGEDIN):r.emit("LocalInvitationFailure",bf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new K("The local invitation cancel failure",Ih);if(this.state===Ba.IDLE)throw new K("The local invitation has not been sent",fA);if(8192<Ig(this._content))throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ba.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(t){if(this.isLocalInvitationEnd()&&this.state!==Ba.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ba.IDLE)throw new K("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ba.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ba.ACCEPTED_BY_REMOTE,this._response=t,this.emit("LocalInvitationAccepted",t))}}},{key:"onRefuseReceived",value:function(t){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ba.IDLE)throw new K("the local have not sent the invitation, how can remote refuse it?");this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=t,this.state=Ba.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",t)}}},{key:"isLocalInvitationEnd",value:function(){return[Ba.CANCELED,Ba.FAILURE,Ba.ACCEPTED_BY_REMOTE,Ba.REFUSED_BY_REMOTE].includes(this.state)}}]),r}(tb()),fa(vd.prototype,"send",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"send"),vd.prototype),fa(vd.prototype,"cancel",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"cancel"),vd.prototype),vd),Rh=S.RemoteInvitationFailureReason,kb=S.RemoteInvitationState,mD=function(t){function r(t){var o=t.invitationChannel,s=t.extraContent,a=t.callId,u=t.callerId,c=t.logger;t=t.getSession,W(this,r);var l=i.call(this,c,"RtmRemoteInvitation",!0);return m(n(l),"state",kb.INVITATION_RECEIVED),m(n(l),"remoteInvitationEnd$",Ca(gb(n(l),"RemoteInvitationCanceled"),gb(n(l),"RemoteInvitationRefused"),gb(n(l),"RemoteInvitationAccepted"),gb(n(l),"RemoteInvitationFailure")).pipe(Ka(1))),m(n(l),"callerId",void 0),m(n(l),"callId",void 0),m(n(l),"_getSession",void 0),m(n(l),"logger",void 0),m(n(l),"_content",void 0),m(n(l),"_channelId",void 0),m(n(l),"_response",""),l._channelId=o,l._content=s,l.callId=a,l.callerId=u,l._getSession=t,l.logger=c,l.remoteInvitationEnd$.pipe(hb(6e4),Ga(function(t){return Sa(t)&&l.warn("Remote invitation expired"),Z(t)})).subscribe({error:function(){l.state=kb.FAILURE,l.emit("RemoteInvitationFailure",Rh.INVITATION_EXPIRE)}}),l}la(r,t);var i=ma(r);return Ha(r,[{key:"channelId",get:function(){return this._channelId},set:function(t){throw new I('Cannot set the "response" of the RemoteInvitation instance.',xc)}},{key:"content",get:function(){return this._content},set:function(t){throw new I('Cannot set the "content" of the RemoteInvitation instance.',xc)}},{key:"response",get:function(){return this._response},set:function(t){this._response=t}},{key:"accept",value:function(){var t,r=this;if(this.isRemoteInvitationEnd())throw new K("The local invitation has ended. Cannot accept.",Ih);if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new K("The remote invitation is accepting. Cannot do the operation.",Qq);if(8192<Ig(this._response))throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this.state=kb.ACCEPT_SENT_TO_LOCAL,Xb(mm(1e3).pipe(cb(function(){return ad(J(w.mark(function t(){return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r._getSession().sendInvitationMessage({peerId:r.callerId,callId:r.callId,extra:r.response,type:"CallAccept",isAcceptAck:!1,channelId:r.channelId}));case 1:case"end":return t.stop()}},t)})))}),wb(function(r){return t=r.hasPeerReceived}),Ka(1)),gb(this,"RemoteInvitationAccepted")).pipe(hb(5e3),ob(this.remoteInvitationEnd$)).subscribe({error:function(i){if(r.logError(i),r.state=kb.FAILURE,Sa(i))switch(t){case void 0:case!0:return void r.emit("RemoteInvitationFailure",Rh.ACCEPT_FAILURE);case!1:return void r.emit("RemoteInvitationFailure",Rh.PEER_OFFLINE)}r.emit("RemoteInvitationFailure",Rh.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new K("The remote invitation is accepting. Cannot do the operation.",Qq);if(this.isRemoteInvitationEnd())throw new K("The invitation is end. Cannot refuse",Ih);if(8192<Ig(this._response))throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=kb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(t){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===kb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=t,this.state=kb.CANCELED,this.emit("RemoteInvitationCanceled",t))}},{key:"onAcceptAckReceived",value:function(){this.state!==kb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=kb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[kb.ACCEPTED,kb.REFUSED,kb.CANCELED,kb.FAILURE].includes(this.state)}}]),r}(tb()),nD=function(t){function r(t,o){W(this,r);var s=i.call(this,o,"InvitationManager");return m(n(s),"getSession",void 0),m(n(s),"invitationDispatcher",new ea.EventEmitter),m(n(s),"outgoingLocalInvitations",new Map),m(n(s),"receivedRemoteInvitations",new tc(void 0,{maxlen:1e4})),m(n(s),"logger",void 0),s.getSession=cn(t),s.logger=o,s.invitationDispatcher.on("remoteInvitationToManager",function(t){var r=t.callId,i=t.extra,a=t.callerId;t=t.channelId,s.receivedRemoteInvitations.has(r)||((i=new mD({callerId:a,callId:r,getSession:s.getSession,logger:o,extraContent:i,invitationChannel:t})).remoteInvitationEnd$.subscribe(function(){s.receivedRemoteInvitations.delete(r)}),s.receivedRemoteInvitations.set(r,i),s.emit("remoteInvitationInstance",i))}),s.invitationDispatcher.on("acceptAckToRemoteInvitation",function(t){(t=s.receivedRemoteInvitations.get(t.callId))&&t.onAcceptAckReceived()}),s.invitationDispatcher.on("cancelToRemoteInvitation",function(t){var r=t.extra;(t=s.receivedRemoteInvitations.get(t.callId))&&t.onCancelReceived(r)}),s.invitationDispatcher.on("acceptToLocalInvitation",function(t){var r=t.extra;(t=s.outgoingLocalInvitations.get(t.callId))&&t.onAcceptReceived(r)}),s.invitationDispatcher.on("refuseToLocalInvitation",function(t){var r=t.extra;(t=s.outgoingLocalInvitations.get(t.callId))&&t.onRefuseReceived(r)}),s}la(r,t);var i=ma(r);return Ha(r,[{key:"invitationMessageHandler",value:function(t){var r=t.body,i=r.callId,o=r.extra;o=void 0===o?"":o;var s=r.type,a=void 0===(r=r.channel)?"":r,u=t.type;switch(r=t.peerId,t=t.serverReceivedTs,u){case"CallAccept":"ack"===s?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:i}):"request"===s&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:i,extra:o});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:i,callerId:r,extra:o,channelId:a});break;case"CallCancel":if("0"===i){i="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(a,"_").concat(o),this.getSession().emit("peerTextMessage",{peerId:r,properties:{serverReceivedTs:t,isOfflineMessage:!1},text:i});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:i,extra:o});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:i,extra:o});break;default:throw Im("invitationType",u)}}},{key:"genLocalInvitation",value:function(t){var r=this,i=new lD(t,this.getSession,this.logger);return i.localInvitationEnd$.subscribe(function(){r.outgoingLocalInvitations.delete(i.callId)}),this.outgoingLocalInvitations.set(i.callId,i),i}}]),r}(tb()),oD=function(t,n,r){var i=!0,o=!0;if("function"!=typeof t)throw TypeError("Expected a function");return lb(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),qC(t,n,{leading:i,maxWait:n,trailing:o})};!function(t){t[t.JOINED=0]="JOINED",t[t.LEFT=1]="LEFT"}(cf||(cf={}));var E,ns=S.ConnectionState,pD=(ub=function(t){function r(t,o,s,a){W(this,r);var u=i.call(this,a,"RtmChannel",!0);return m(n(u),"onMemberCountUpdated",oD(function(t){t!==u.memberCount&&(u.memberCount=t,u.emit("MemberCountUpdated",t))},1e3)),m(n(u),"getSession",void 0),m(n(u),"memberCount",0),m(n(u),"memberJoinedLru",new tc(void 0,{maxlen:1e4})),m(n(u),"memberLeftLru",new tc(void 0,{maxlen:1e4})),m(n(u),"memberJoinStateLru",new tc(void 0,{maxlen:1e4})),m(n(u),"attributesSeqLru",new tc(void 0,{maxlen:1e4})),m(n(u),"channelId",void 0),m(n(u),"client",void 0),m(n(u),"onAttributesUpdated",function(t){var r=t.channelId,i=t.attributeMaps,o=t.seq;t=t.instance.toString();var s=u.attributesSeqLru.get(t);if((!s||o.greaterThan(s))&&(u.attributesSeqLru.set(t,o),r===u.channelId)){for(r={},o=0;o<i.length;o++){var a=i[o];t=a.key,s=a.ms;var c=a.value;if(a=a.origin,"string"!=typeof t||!U.isLong(s)||"string"!=typeof c||!za(a))break;r[t]={value:c,lastUpdateUserId:a,lastUpdateTs:s.toNumber()}}u.emit("AttributesUpdated",r)}}),m(n(u),"onChannelTextMessage",function(t){var r=t.memberId,i=t.text,o=t.properties;t.channelId===u.channelId&&u.emit("ChannelMessage",{text:i,messageType:S.MessageType.TEXT},r,o)}),m(n(u),"onChannelMediaMessage",function(t){var r=t.memberId,i=t.properties,o=t.details,s=t.messageType;t.channelId===u.channelId&&("FILE"===s?u.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(pa(o.media_size),10),description:pa(o.media_description),fileName:pa(o.media_filename),mediaId:pa(o.media_id),thumbnail:new Blob([o.media_thumbnail])},r,i):"IMAGE"===s&&u.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(pa(o.media_size),10),description:pa(o.media_description),fileName:pa(o.media_filename),mediaId:pa(o.media_id),thumbnail:new Blob([o.media_thumbnail]),height:parseInt(pa(o.media_height),10),width:parseInt(pa(o.media_width),10),thumbnailHeight:parseInt(pa(o.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(o.media_thumbnailwidth),10)},r,i))}),m(n(u),"onChannelRawMessage",function(t){var r=t.desc,i=t.raw,o=t.memberId,s=t.properties;t.channelId===u.channelId&&u.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:i,description:r},o,s)}),m(n(u),"onMemberNotice",function(t){var r=t.memberId,i=t.type,o=t.size;if(t.channelId===u.channelId){var s=t.instance.toString();t=t.seq.toString();var a={MemberLeft:u.memberLeftLru,MemberJoined:u.memberJoinedLru,MemberCountUpdated:void 0}[i];if(a){if(a.has(s+t))return void u.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",i,t,oa(u.channelId),oa(r||""));if(a.set(s+t,void 0),"string"!=typeof r)return;if(r!==u.getSession().context.uid&&((s=u.memberJoinStateLru.get(r))===cf.JOINED&&"MemberJoined"===i||s===cf.LEFT&&"MemberLeft"===i))return void u.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",i,t,oa(u.channelId),oa(r||""));u.memberJoinStateLru.set(r,"MemberJoined"===i?cf.JOINED:cf.LEFT)}u.info("Channel %s - %s, memberId: %s",i,oa(u.channelId),"MemberCountUpdated"===i?"[unknown]":oa(r||"")),s=r===u.getSession().context.uid,"MemberLeft"===i&&za(r)||"MemberJoined"===i&&za(r)?(s||u.emit(i,r),u.onMemberCountUpdated(o)):"MemberCountUpdated"===i&&"number"==typeof o&&u.onMemberCountUpdated(o)}}),u.getSession=cn(o),u.channelId=t,u.client=s,u.info("A channel created, id %s",oa(t)),u}la(r,t);var i=ma(r);return Ha(r,[{key:"join",value:function(){var t=J(w.mark(function t(){var r,i,o,s,a,u,c;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(za(this.channelId)){t.next=2;break}throw new I(["The %s in the arguments is invalid","channelId"],hA);case 2:t.prev=2,r=this.getSession(),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(2),new K("The client is not logged in. Cannot do the operation",Vq);case 9:if(!r.joinedChannels.has(this)){t.next=12;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:r.context.uid,elapse:fb(r.startTime),errCode:Uq,sid:Xa(r.instanceId)},null!=(i=this.client.context.config.enableCloudProxy)&&i),new K("The channel has joined. Cannot rejoin",Uq);case 12:if(t.prev=12,this.log("Joining the channel %s",oa(this.channelId)),!this.hasOtherChannelJoined()){t.next=17;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:r.context.uid,elapse:fb(r.startTime),errCode:Wq,sid:Xa(r.instanceId)},null!=(a=this.client.context.config.enableCloudProxy)&&a),new K("A channel of the same channel ID has already joined. Cannot rejoin",Wq);case 17:if(20!==r.joinedChannels.size){t.next=20;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:r.context.uid,elapse:fb(r.startTime),errCode:Tq,sid:Xa(r.instanceId)},null!=(u=this.client.context.config.enableCloudProxy)&&u),new ib("The joined channels has exceeded the limit of 20",Tq);case 20:return eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:r.context.uid,elapse:fb(r.startTime),errCode:0,sid:Xa(r.instanceId)},null!=(o=this.client.context.config.enableCloudProxy)&&o),t.next=23,r.requestChannelJoin(this,this.channelId);case 23:eb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(r.startTime),errCode:0,sid:Xa(r.instanceId),serverErrCode:0,userId:r.context.uid},null!=(s=this.client.context.config.enableCloudProxy)&&s),this.info("The channel %s joined successfully",oa(this.channelId)),r.on("channelTextMessage",this.onChannelTextMessage),r.on("channelRawMessage",this.onChannelRawMessage),r.on("channelMediaMessage",this.onChannelMediaMessage),r.on("memberNotice",this.onMemberNotice),r.on("channelAttributesUpdated",this.onAttributesUpdated),t.next=41;break;case 32:if(t.prev=32,t.t1=t.catch(12),this.logError(t.t1),!sa(t.t1)){t.next=37;break}throw t.t1;case 37:if(!Sa(t.t1)){t.next=40;break}throw eb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(r.startTime),errCode:Sq,sid:Xa(r.instanceId),serverErrCode:0,userId:r.context.uid},null!=(c=this.client.context.config.enableCloudProxy)&&c),new db(["Join channel %s timed out",oa(this.channelId)],Sq);case 40:throw new Wc(["The channel %s join failure",oa(this.channelId)],{code:Rq,originalError:t.t1});case 41:case"end":return t.stop()}},t,this,[[2,6],[12,32]])}));return function(){return t.apply(this,arguments)}}()},{key:"leave",value:function(){var t=J(w.mark(function t(){var r,i,o,s;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=this.getSession(),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new K("The client is not logged in. Cannot do the operation",jA);case 7:if(i.joinedChannels.has(this)){t.next=9;break}throw new K("The channel does not join. Cannot do the operation",iA);case 9:t.prev=9,i.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,i.removeListener("channelTextMessage",this.onChannelTextMessage),i.removeListener("channelRawMessage",this.onChannelRawMessage),i.removeListener("channelMediaMessage",this.onChannelMediaMessage),i.removeListener("memberNotice",this.onMemberNotice),i.removeListener("channelAttributesUpdated",this.onAttributesUpdated),t.next=32;break;case 23:if(t.prev=23,t.t1=t.catch(9),this.logError(t.t1),!sa(t.t1)){t.next=30;break}throw void 0===t.t1.code&&(t.t1.code=Yq),eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(i.startTime),errCode:Yq,sid:Xa(i.instanceId),userId:i.context.uid},null!=(s=this.client.context.config.enableCloudProxy)&&s),t.t1;case 30:throw eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(i.startTime),errCode:Xq,sid:Xa(i.instanceId),userId:i.context.uid},null!=(o=this.client.context.config.enableCloudProxy)&&o),new Wc("The channel leave failure",{code:Xq,originalError:t.t1});case 32:eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(i.startTime),errCode:0,sid:Xa(i.instanceId),userId:i.context.uid},null!=(r=this.client.context.config.enableCloudProxy)&&r);case 33:case"end":return t.stop()}},t,this,[[0,4],[9,23]])}));return function(){return t.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u=this,c=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=void 0!==(i=(1<c.length&&void 0!==c[1]?c[1]:{}).enableHistoricalMessaging)&&i,Tm(r,Hh),t.prev=2,s=this.getSession(),t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(2),new K("The client is not logged in. Cannot do the operation",ig);case 9:if(s.joinedChannels.has(this)){t.next=11;break}throw new K("The channel does not join. Cannot do the operation",ig);case 11:if(this.client.connectionState!==ns.RECONNECTING){t.next=16;break}return a=Date.now(),t.next=15,new Promise(function(t,i){var s=function(){var s=J(w.mark(function s(){var l;return w.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l=Date.now()-a,s.prev=1,s.next=4,Gg({message:r,peerId:u.channelId,toPeer:!1,session:u.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Mq},diff:l,logger:u.logger,options:{enableHistoricalMessaging:o,enableOfflineMessaging:!1}});case 4:t(),s.next=12;break;case 7:s.prev=7,s.t0=s.catch(1),Sa(s.t0)&&i(new db(Yd(u.name,"sendMessageToPeer",1e4),Yk)),sa(s.t0)&&i(s.t0),i(new da("Channel message send failure",{code:hg,originalError:s.t0}));case 12:return s.prev=12,clearTimeout(c),s.finish(12);case 15:case"end":return s.stop()}},s,null,[[1,7,12,15]])}));return function(){return s.apply(this,arguments)}}();u.client.internalEmitter.once("RECONNECTED",s);var c=setTimeout(function(){u.client.internalEmitter.off("RECONNECTED",s),i(new db(Yd(u.name,"sendMessageToPeer",1e4),Yk))},9e3)});case 15:return t.abrupt("return");case 16:if(this.client.connectionState===ns.CONNECTED){t.next=18;break}throw new K("The client is not logged in. Cannot do the operation",ig);case 18:return t.prev=18,t.next=21,Gg({message:r,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Mq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:o,enableOfflineMessaging:!1}});case 21:t.next=31;break;case 23:if(t.prev=23,t.t1=t.catch(18),!Sa(t.t1)){t.next=27;break}throw new db(Yd(this.name,"sendMessage",1e4),Yk);case 27:if(!sa(t.t1)){t.next=30;break}throw this.logError(t.t1),t.t1;case 30:throw new Wc("The channel message send failure",hg);case 31:case"end":return t.stop()}},t,this,[[2,6],[18,23]])}));return function(r){return t.apply(this,arguments)}}()},{key:"getMembers",value:function(){var t=J(w.mark(function t(){var r,i,o;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.prev=1,r=this.getSession(),t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(1),new K("The client is not logged in. Cannot do the operation",eA);case 8:if(r.joinedChannels.has(this)){t.next=10;break}throw new K("The channel does not join. Cannot do the operation",dA);case 10:return i=this.getSession().requestChannelMemberList(this.channelId),t.next=13,i.pipe(ba(function(t){return t.memberInfos.map(function(t){return t.account})})).toPromise();case 13:return o=t.sent,this.info("Channel %s - get members success, %o",oa(this.channelId),o.map(oa)),t.abrupt("return",o);case 18:if(t.prev=18,t.t1=t.catch(0),!sa(t.t1)){t.next=23;break}throw this.logError(t.t1),t.t1;case 23:throw new Wc("The channel members get failure",bA);case 24:case"end":return t.stop()}},t,this,[[0,18],[1,5]])}));return function(){return t.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var t=this;return!this.getSession().joinedChannels.has(this)&&Array.from(this.getSession().joinedChannels).some(function(r){return r.channelId===t.channelId})}}]),r}(tb()),fa(ub.prototype,"join",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"join"),ub.prototype),fa(ub.prototype,"leave",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"leave"),ub.prototype),fa(ub.prototype,"sendMessage",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"sendMessage"),ub.prototype),fa(ub.prototype,"getMembers",[Ma],Object.getOwnPropertyDescriptor(ub.prototype,"getMembers"),ub.prototype),ub),Eb=S.ConnectionChangeReason,T=S.ConnectionState,os={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},qD={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},rD=(E=function(t){function r(t,o,s,a){W(this,r);var u=i.call(this,o,"RtmClient",!0);return m(n(u),"connectionState",T.DISCONNECTED),m(n(u),"internalEmitter",new ea),m(n(u),"context",void 0),m(n(u),"attributes",{}),m(n(u),"loginPromise",void 0),m(n(u),"attributeDrafts",new Set),m(n(u),"session",void 0),m(n(u),"lastLoginTime",void 0),m(n(u),"reconnId",0),m(n(u),"channelAttributesCacheLru",new tc(void 0,{maxlen:1e4})),m(n(u),"invitationManager",void 0),m(n(u),"subscribedPeerStatusCache",{}),m(n(u),"peerStatusSeqLru",new tc(void 0,{maxlen:1e4})),m(n(u),"peerUnreachableTimers",{}),m(n(u),"mediaTaskManager",void 0),m(n(u),"setParameters",void 0),m(n(u),"updateConfig",void 0),m(n(u),"userDropHandler",function(t){if(u.connectionState!==T.ABORTED)switch(t){case 11:u.logError("Kicked off by remote session"),u.onConnectionStateChanged(T.ABORTED,Eb.REMOTE_LOGIN);break;case 14:case 15:case 16:u.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[t])),u.onConnectionStateChanged(T.ABORTED,Eb.BANNED_BY_SERVER);break;default:u.logError("User kicked off for unknown code: ".concat(t)),u.onConnectionStateChanged(T.ABORTED,Eb.INTERRUPTED)}}),u.context=new ZC(t,s,o),u.mediaTaskManager=new fs(o),u.context.config=s,u.internalEmitter.setMaxListeners(512),u.setParameters=a.bind(n(u)),u.updateConfig=a.bind(n(u)),u.invitationManager=new nD(function(){return u.session},o),u.invitationManager.on("remoteInvitationInstance",function(t){u.emit("RemoteInvitationReceived",t)}),u}la(r,t);var i=ma(r);return Ha(r,[{key:"renewToken",value:function(){var t=J(w.mark(function t(r){var i,o,s=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof r&&0!==r.length){t.next=2;break}throw new I("Invalid argument",rA);case 2:if(this.connectionState!==T.ABORTED){t.next=5;break}return t.next=5,new Promise(function(){});case 5:if(this.connectionState===T.CONNECTED||this.connectionState===T.RECONNECTING){t.next=7;break}throw new K("The client is not logged in",uA);case 7:if(void 0!==this.session){t.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return t.prev=9,i=this.context.token,this.context.token=r,t.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Dd(function(){return Error("No available edge address to connect")}),oe(function(t){return t.pipe(ca(function(t){if(sa(t))throw t}),cd(2500),Ka(4))}),Ka(1),hb(2e4),Ga(function(t){return Sa(t)&&s.warn("renewToken timed out"),Z(t)})).toPromise();case 14:o=t.sent.ticket,t.next=27;break;case 18:if(t.prev=18,t.t0=t.catch(9),this.context.token=i,t.t0.code!==$q&&t.t0.code!==ar){t.next=23;break}throw new Ye("Invalid token",tA);case 23:if(t.t0.code!==Kh){t.next=25;break}throw new Ye("The token expired",sA);case 25:if(!Sa(t.t0)){t.next=27;break}throw new db("Renew token timed out",qA);case 27:this.session.curLoginSockets.filter(function(t){return void 0!==t}).forEach(function(t){return t.ticket=o});case 28:case"end":return t.stop()}},t,this,[[9,18]])}));return function(r){return t.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var t=J(w.mark(function t(r){var i,o=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",pA);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(r)||0===r.length||r.some(function(t){return!za(t)})||256<r.length)){t.next=6;break}throw new I("invalid arguments",er);case 6:return t.next=8,this.session.requestPeersOnlineStatus(r).toPromise();case 8:return Object.keys(i=uc(Jk(t.sent.userInfos,"account"),function(t){return!!t.ts})).forEach(function(t){if(t in o.subscribedPeerStatusCache&&o.subscribedPeerStatusCache[t]!==S.PeerOnlineState.UNREACHABLE){var r=i[t]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;o.emit("PeersOnlineStatusChanged",m({},t,r)),o.subscribedPeerStatusCache[t]=r}}),t.abrupt("return",i);case 12:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c,l=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",aA);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(r)&&r.every(function(t){return"string"==typeof t})&&0!==r.length){t.next=6;break}throw new I("Invalid arguments: channelIds",Oq);case 6:if(!(32<r.length)){t.next=8;break}throw new I("getChannelMemberCount exceed limit of 32 channelIds",$z);case 8:i=0;case 9:if(!(i<r.length)){t.next=16;break}if(za(o=r[i])){t.next=13;break}throw new I(["getChannelMemberCount channel id %s is invalid",o],Oq);case 13:i++,t.next=9;break;case 16:return t.next=18,this.session.requestGetChannelMemberCount(r).toPromise();case 18:for(s=t.sent.groupInfos,a={},u=function(t){var r=(t=s[t]).group,i=t.memberCount;za(r)&&"number"==typeof i&&(l.session.joinedChannels.forEach(function(t){t.channelId===r&&t.onMemberCountUpdated(i)}),a[r]=i)},c=0;c<s.length;c++)u(c);return t.abrupt("return",a);case 24:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var t=J(w.mark(function t(r){var i,o;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(uf({attributes:r,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){t.next=3;break}throw new K("The client is not logged in",Ub);case 3:if(void 0!==this.session){t.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return i=this.session.requestSetLocalUserAttributes(r).toPromise(),o={attribute:r,promise:i},this.attributeDrafts.add(o),t.prev=8,t.next=11,i;case 11:this.attributes=r,t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(8),!sa(t.t0)){t.next=18;break}throw t.t0;case 18:throw new I("arguments is not valid",Ja);case 19:return t.prev=19,this.attributeDrafts.delete(o),t.finish(19);case 22:case"end":return t.stop()}},t,this,[[8,14,19,22]])}));return function(r){return t.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=void 0!==(o=(2<c.length&&void 0!==c[2]?c[2]:{}).enableNotificationToChannelMembers)&&o,uf({attributes:i,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){t.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){t.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return a=this.session.requestSetChannelAttributes(r,i,s).toPromise(),t.prev=7,t.next=10,a;case 10:u=uc(i,function(t){return new Blob([t]).size}),this.channelAttributesCacheLru.set(r,u),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(7),!sa(t.t0)){t.next=18;break}throw t.t0;case 18:throw new I("arguments is not valid",Ja);case 19:case"end":return t.stop()}},t,this,[[7,14]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var t=J(w.mark(function t(r){var i,o,s;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=ua(ua({},this.attributes),r),uf({attributes:r,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),uf({attributes:i,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){t.next=5;break}throw new K("The client is not logged in",Ub);case 5:if(void 0!==this.session){t.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return o=this.session.requestAddOrUpdateLocalUserAttributes(r).toPromise(),s={attribute:i,promise:o},this.attributeDrafts.add(s),t.prev=10,t.next=13,o;case 13:this.attributes=i,t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(10),!sa(t.t0)){t.next=20;break}throw t.t0;case 20:throw new I("arguments is not valid",er);case 21:return t.prev=21,this.attributeDrafts.delete(s),t.finish(21);case 24:case"end":return t.stop()}},t,this,[[10,16,21,24]])}));return function(r){return t.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=void 0!==(o=(2<f.length&&void 0!==f[2]?f[2]:{}).enableNotificationToChannelMembers)&&o,a=this.channelAttributesCacheLru.get(r,{}),u=uc(i,function(t){return new Blob([t]).size}),uf({attributes:i,attrSizeMap:c=ua(ua({},a),u),maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){t.next=7;break}throw new K("The client is not logged in",Ub);case 7:if(void 0!==this.session){t.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return l=this.session.requestAddOrUpdateChannelAttributes(r,i,s).toPromise(),t.prev=10,t.next=13,l;case 13:this.channelAttributesCacheLru.set(r,c),t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(10),!sa(t.t0)){t.next=20;break}throw t.t0;case 20:throw new I("arguments is not valid",Ja);case 21:case"end":return t.stop()}},t,this,[[10,16]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var t=J(w.mark(function t(r){var i,o,s,a;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(r)&&0!==r.length&&!r.some(function(t){return 0===t.length})){t.next=2;break}throw new K("arguments is not valid",Ja);case 2:if(this.connectionState===T.CONNECTED){t.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){t.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return i=this.session.requestDeleteLocalUserAttributesByKeys(r).toPromise(),o={attribute:Gk(this.attributes,r),promise:i},this.attributeDrafts.add(o),t.prev=9,t.next=12,i;case 12:for(s=0;s<r.length;s++)a=r[s],delete this.attributes[a];t.next=20;break;case 15:if(t.prev=15,t.t0=t.catch(9),!sa(t.t0)){t.next=19;break}throw t.t0;case 19:throw new I("arguments is not valid",Ja);case 20:return t.prev=20,this.attributeDrafts.delete(o),t.finish(20);case 23:case"end":return t.stop()}},t,this,[[9,15,20,23]])}));return function(r){return t.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=void 0!==(o=(2<f.length&&void 0!==f[2]?f[2]:{}).enableNotificationToChannelMembers)&&o,Array.isArray(i)&&0!==i.length&&za(r)&&!i.some(function(t){return 0===t.length||512<t.length})){t.next=3;break}throw new K("arguments is not valid",Ja);case 3:if(this.connectionState===T.CONNECTED){t.next=5;break}throw new K("The client is not logged in",Ub);case 5:if(void 0!==this.session){t.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return a=this.session.requestDeleteChannelAttributesByKeys(r,i,s).toPromise(),t.prev=8,t.next=11,a;case 11:if(u=this.channelAttributesCacheLru.get(r))for(c=0;c<i.length;c++)l=i[c],delete u[l];t.next=20;break;case 15:if(t.prev=15,t.t0=t.catch(8),!sa(t.t0)){t.next=19;break}throw t.t0;case 19:throw new I("arguments is not valid",Ja);case 20:case"end":return t.stop()}},t,this,[[8,15]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var t=J(w.mark(function t(){var r,i;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return i={attribute:{},promise:r=this.session.requestClearLocalUserAttributes().toPromise()},this.attributeDrafts.add(i),t.prev=7,t.next=10,r;case 10:this.attributes={},t.next=18;break;case 13:if(t.prev=13,t.t0=t.catch(7),!sa(t.t0)){t.next=17;break}throw t.t0;case 17:throw new I("arguments is not valid",Ja);case 18:return t.prev=18,this.attributeDrafts.delete(i),t.finish(18);case 21:case"end":return t.stop()}},t,this,[[7,13,18,21]])}));return function(){return t.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var t=J(w.mark(function t(r){var i,o,s,a=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=void 0!==(i=(1<a.length&&void 0!==a[1]?a[1]:{}).enableNotificationToChannelMembers)&&i,this.connectionState===T.CONNECTED){t.next=3;break}throw new K("The client is not logged in",Ub);case 3:if(void 0!==this.session){t.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return s=this.session.requestClearChannelAttributes(r,o).toPromise(),t.prev=6,t.next=9,s;case 9:this.channelAttributesCacheLru.delete(r),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(6),!sa(t.t0)){t.next=16;break}throw t.t0;case 16:throw new I("arguments is not valid",Ja);case 17:case"end":return t.stop()}},t,this,[[6,12]])}));return function(r){return t.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var t=J(w.mark(function t(r){var i,o;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(za(r)){t.next=2;break}throw new I("Not a valid user ID",Ja);case 2:if(this.connectionState===T.CONNECTED){t.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){t.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return t.prev=6,t.next=9,this.session.requestGetUserAttributeKeys(r).toPromise();case 9:return i=t.sent.keys,t.next=13,this.session.requestGetUserAttributesByKeys(r,i.slice(0,512)).toPromise();case 13:o=t.sent,t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(6),!sa(t.t0)){t.next=20;break}throw t.t0;case 20:throw new I("arguments is not valid",Ja);case 21:return t.abrupt("return",Yp(o.attributeInfos.map(function(t){return[t.key,t.value]})));case 22:case"end":return t.stop()}},t,this,[[6,16]])}));return function(r){return t.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c,l,f,h;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(za(r)){t.next=2;break}throw new I("Not a valid channel ID",Ja);case 2:if(this.connectionState===T.CONNECTED){t.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){t.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return t.prev=6,t.next=9,this.session.requestGetChannelAttributesKeys(r).toPromise();case 9:return i=t.sent.keys,t.next=13,this.session.requestGetChannelAttributesByKeys(r,i).toPromise();case 13:o=t.sent.attributeMaps,t.next=22;break;case 17:if(t.prev=17,t.t0=t.catch(6),!sa(t.t0)){t.next=21;break}throw t.t0;case 21:throw new I("arguments is not valid",Ja);case 22:s={},a=0;case 24:if(!(a<o.length)){t.next=32;break}if(c=(u=o[a]).key,l=u.ms,f=u.value,h=u.origin,"string"==typeof c&&U.isLong(l)&&"string"==typeof f&&za(h)){t.next=28;break}return t.abrupt("break",32);case 28:s[c]={value:f,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 29:a++,t.next=24;break;case 32:return this.channelAttributesCacheLru.set(r,uc(s,function(t){return new Blob([t.value]).size})),t.abrupt("return",s);case 34:case"end":return t.stop()}},t,this,[[6,17]])}));return function(r){return t.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f,h,p;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hm(r,i),t.prev=5,t.next=8,this.session.requestGetChannelAttributesByKeys(r,i).toPromise();case 8:o=t.sent.attributeMaps,t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(5),!sa(t.t0)){t.next=16;break}throw t.t0;case 16:throw new I("arguments is not valid",Ja);case 17:s={},a=this.channelAttributesCacheLru.get(r,{}),u=0;case 20:if(!(u<o.length)){t.next=29;break}if(l=(c=o[u]).key,f=c.ms,h=c.value,p=c.origin,"string"==typeof l&&U.isLong(f)&&"string"==typeof h&&za(p)){t.next=24;break}return t.abrupt("break",29);case 24:a[l]=new Blob([h]).size,s[l]={value:h,lastUpdateUserId:p,lastUpdateTs:f.toNumber()};case 26:u++,t.next=20;break;case 29:return this.channelAttributesCacheLru.set(r,a),t.abrupt("return",s);case 31:case"end":return t.stop()}},t,this,[[5,12]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var t=J(w.mark(function t(r,i){var o;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hm(r,i),t.prev=5,t.next=8,this.session.requestGetUserAttributesByKeys(r,i).toPromise();case 8:o=t.sent,t.next=16;break;case 11:if(t.prev=11,t.t0=t.catch(5),!sa(t.t0)){t.next=15;break}throw t.t0;case 15:throw new I("arguments is not valid",Ja);case 16:return t.abrupt("return",Yp(o.attributeInfos.map(function(t){return[t.key,t.value]})));case 17:case"end":return t.stop()}},t,this,[[5,11]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Uk=!0,i=Bg(),o=r.token,r.token===this.context.appId&&(o=void 0),setTimeout(function(){var t;eb("Session",{appId:u.context.appId,did:navigator.userAgent,elapse:fb(u.session&&u.session.startTime),index:{index1:r.uid,index2:u.context.appId,index3:"enableLogUpload=".concat(u.context.config.enableLogUpload)},installId:gg,lts:U.fromNumber(Date.now()),os:7,sid:Xa(i),token:o||"",userId:r.uid,ver:"1.4.3-203",buildno:603,subVersion:203,version:4},null!=(t=u.context.config.enableCloudProxy)&&t)},1e4),yd(r)&&za(r.uid)){t.next=7;break}throw new I("not a valid user id",Jh);case 7:if("string"!=typeof o||!o){t.next=11;break}this.context.token=o,t.next=13;break;case 11:if("string"==typeof o||null==o){t.next=13;break}throw new I('The "token" is not a valid string.',Jh);case 13:return s=Date.now(),this.context.sid=Xa(i),this.loginPromise=this.loginImpl({uid:r.uid,instanceId:i}),this.info("RTM Client logging in as ".concat(oa(r.uid))),t.prev=17,t.next=20,this.loginPromise;case 20:t.next=27;break;case 22:throw t.prev=22,t.t0=t.catch(17),sa(t.t0)&&eb("Link",{ackedServerIp:"",destServerIp:"",ec:t.t0.code||1,sc:t.t0.serverCode,elapse:fb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-s,sid:Xa(i),userId:r.uid},null!=(a=this.context.config.enableCloudProxy)&&a),this.context.token=void 0,t.t0;case 27:return t.prev=27,this.loginPromise=void 0,t.finish(27);case 30:Uk=!1;case 31:case"end":return t.stop()}},t,this,[[17,22,27,30]])}));return function(r){return t.apply(this,arguments)}}()},{key:"logout",value:function(){var t=J(w.mark(function t(){var r;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.loginPromise){t.next=3;break}return t.next=3,this.loginPromise;case 3:if(this.connectionState!==T.DISCONNECTED){t.next=6;break}throw this.logError("Already in logout state"),new K("Logout failure. The client has already been logged out",br);case 6:if(this.connectionState!==T.ABORTED){t.next=10;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),t.abrupt("return");case 10:if(void 0!==this.session){t.next=13;break}return this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),t.abrupt("return");case 13:return eb("Logout",{elapse:fb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},null!=(r=this.context.config.enableCloudProxy)&&r),t.next=16,this.session.logoutHandler();case 16:this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),this.log("Log out success");case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var t,r=this;if(this.connectionState===T.DISCONNECTED)throw this.logError("Already in logout state"),new K("Logout failure. The client has already been logged out",br);this.connectionState===T.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(eb("Logout",{elapse:fb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},null!=(t=this.context.config.enableCloudProxy)&&t),this.session.logoutHandler().then(function(){r.log("Log out success")})),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var t=J(w.mark(function t(r,i){var o,s,a,u,c,l,f=this,h=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=void 0!==(s=(o=2<h.length&&void 0!==h[2]?h[2]:{}).enableOfflineMessaging)&&s,c=void 0!==(u=o.enableHistoricalMessaging)&&u,Tm(r,ve),this.connectionState!==T.RECONNECTING){t.next=5;break}return l=Date.now(),t.abrupt("return",new Promise(function(t,o){var s=function(){var s=J(w.mark(function s(){var h;return w.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0!==f.session){s.next=2;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return h=Date.now()-l,s.prev=3,s.t0=t,s.next=7,Gg({message:r,peerId:i,toPeer:!0,session:f.session,errorCodes:{NOT_LOGGED_IN:al,TOO_OFTEN:dr},diff:h,logger:f.logger,options:{enableHistoricalMessaging:c,enableOfflineMessaging:a}});case 7:s.t1=s.sent,(0,s.t0)(s.t1),s.next=16;break;case 11:s.prev=11,s.t2=s.catch(3),Sa(s.t2)&&o(new db(Yd(f.name,"sendMessageToPeer",1e4),Zk)),sa(s.t2)&&o(s.t2),o(new da("Peer-to-peer message send failure",{code:cr,originalError:s.t2}));case 16:return s.prev=16,clearTimeout(u),s.finish(16);case 19:case"end":return s.stop()}},s,null,[[3,11,16,19]])}));return function(){return s.apply(this,arguments)}}();f.internalEmitter.once("RECONNECTED",s);var u=setTimeout(function(){f.internalEmitter.off("RECONNECTED",s),o(new db(Yd(f.name,"sendMessageToPeer",1e4),Zk))},9e3)}));case 5:if(this.connectionState===T.CONNECTED){t.next=7;break}throw new K("Failed to send the peer-to-peer message. The client is not logged in",al);case 7:if(void 0!==this.session){t.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return t.prev=9,t.next=12,Gg({message:r,peerId:i,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:al,TOO_OFTEN:dr},diff:0,logger:this.logger,options:{enableHistoricalMessaging:c,enableOfflineMessaging:a}});case 12:return t.abrupt("return",t.sent);case 15:if(t.prev=15,t.t0=t.catch(9),!Sa(t.t0)){t.next=19;break}throw new db(Yd(this.name,"sendMessageToPeer",1e4),Zk);case 19:if(!sa(t.t0)){t.next=21;break}throw t.t0;case 21:throw new da("Peer-to-peer message send failure",{code:cr,originalError:t.t0});case 22:case"end":return t.stop()}},t,this,[[9,15]])}));return function(r,i){return t.apply(this,arguments)}}()},{key:"createChannel",value:function(t){var r=this;if(!za(t))throw new I(["The %s in the arguments is invalid","channelId"],Zz);return new pD(t,function(){return r.session},this,this.logger)}},{key:"createLocalInvitation",value:function(t){if(!za(t))throw new I(["The %s in the arguments is invalid","calleeId"],xc);return this.invitationManager.genLocalInvitation(t)}},{key:"subscribePeersOnlineStatus",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c,l,f,h,p,d,v,g=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",bl);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(r)&&0!==r.length){t.next=6;break}throw new I("Invalid arguments: peerIds",kg);case 6:i=0;case 7:if(!(i<r.length)){t.next=14;break}if(za(o=r[i])){t.next=11;break}throw new I(["subscribePeersOnlineStatus peer id %s is invalid",o],kg);case 11:i++,t.next=7;break;case 14:if(!(512<(s=r&&r.length?vk(r):[]).length+Object.keys(this.subscribedPeerStatusCache).length)){t.next=17;break}throw new ib("Subscribed peers overflows",gr);case 17:return t.next=19,this.session.requestSubscribePeersOnlineStatus(s).toPromise();case 19:a=t.sent.errors,u=[],c=[],l=0;case 24:if(!(l<a.length)){t.next=32;break}if(h=(f=a[l]).code,"string"==typeof(p=f.account)){t.next=28;break}throw new da("Returned account is invalid",fr);case 28:0!==h&&u.push(p);case 29:l++,t.next=24;break;case 32:for(d=0;d<s.length;d++)v=s[d],u.includes(v)||(c.push(v),this.subscribedPeerStatusCache[v]=void 0);if(this.session.requestPeersOnlineStatus(c).pipe(ba(function(t){return uc(Jk(t.userInfos,"account"),function(t){return!!t.ts})})).subscribe(function(t){t=uc(t,function(t,r){return t=t?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,g.subscribedPeerStatusCache[r]=t}),g.emit("PeersOnlineStatusChanged",t)}),0===u.length){t.next=36;break}throw new da("Subscription failed",fr);case 36:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",bl);case 2:if(void 0!==this.session){t.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(r)&&0!==r.length){t.next=6;break}throw new I("Invalid arguments: peerIds",kg);case 6:i=0;case 7:if(!(i<r.length)){t.next=14;break}if(za(o=r[i])){t.next=11;break}throw new I(["subscribePeersOnlineStatus peer id %s is invalid",o],kg);case 11:i++,t.next=7;break;case 14:if(!(512<r.length)){t.next=16;break}throw new ib("Unsubscribed peers overflows",gr);case 16:for(s=r&&r.length?vk(r):[],this.session.requestUnsubscribePeersOnlineStatus(s),a=0;a<s.length;a++)u=s[a],delete this.subscribedPeerStatusCache[u];case 19:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var t=J(w.mark(function t(r){return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectionState===T.CONNECTED){t.next=2;break}throw new K("The client is not logged in",bl);case 2:if(r!==S.PeerSubscriptionOption.ONLINE_STATUS){t.next=4;break}return t.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new I("Subscription option not supported",kg);case 5:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"createMessage",value:function(t){return"IMAGE"===t.messageType?ua({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},t):"FILE"===t.messageType?ua({fileName:"",description:"",thumbnail:new Blob,size:0},t):t}},{key:"downloadMedia",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c,l,f,h,p,d,v,g=this,b=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1<b.length&&void 0!==b[1]?b[1]:{},"string"==typeof r){t.next=3;break}throw new I("invalid mediaId format",cl);case 3:if(t.prev=3,s=(o=ra(r.split("z"),3))[0],a=o[1],u=o[2],l=bD(c=s.slice(1,65)),f=parseInt(s.slice(65),10),h=parseInt(a,10),p=parseInt(u,10),!(Number.isNaN(f)||Number.isNaN(h)||Number.isNaN(p))){t.next=12;break}throw new I("Invalid mediaId content",cl);case 12:t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(3),!sa(t.t0)){t.next=18;break}throw t.t0;case 18:throw new I("parse mediaId failure",{code:cl,originalError:t.t0});case 19:if(this.connectionState===T.CONNECTED){t.next=21;break}throw new K("The client is not logged in, cannot download",CA);case 21:if(void 0!==this.session){t.next=23;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return d=this.mediaTaskManager.addDownloadTask({unit:h,zone:f,hashHexStr:c,size:p},function(){if(void 0===g.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return g.session.requestFileDownloadIndexGet({hash:l,zone:f,unit:h,size:p}).toPromise()},i),t.next=26,this.mediaTaskManager.waitMediaTask(d);case 26:return v=t.sent.payload,t.abrupt("return",v);case 29:case"end":return t.stop()}},t,this,[[3,14]])}));return function(r){return t.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u,c,l,f,h,p,d,v,g,b,y,E,_,O,A,R,N,k,C,x,L=this,P=arguments;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1<P.length&&void 0!==P[1]?P[1]:{},o=2<P.length&&void 0!==P[2]?P[2]:{},yd(i)){t.next=4;break}throw new I("Invalid params",wf);case 4:if(s="thumbnailWidth"in i||"thumbnailHeight"in i||"width"in i||"height"in i,u=void 0===(a=i.messageType)?s?"IMAGE":"FILE":a,l=void 0===(c=i.description)?"":c,h=void 0===(f=i.fileName)?"":f,p=i.thumbnail,"string"==typeof i.messageType&&"string"==typeof l&&"string"==typeof h&&(Pm(p)||void 0===p)&&Pm(r)){t.next=8;break}throw new I("Invalid message params type",wf);case 8:if(!s||"FILE"!==u){t.next=10;break}throw new I("Invalid message params, unexpected field in RtmFileMessage",wf);case 10:if(!(0x2000000<(d=r.size))){t.next=13;break}throw new ib("The payload size overflow 32 MB",wA);case 13:return t.next=15,Ji(r);case 15:return v=t.sent,t.next=18,aD(v);case 18:if(g=t.sent,this.connectionState===T.CONNECTED){t.next=21;break}throw new K("The client is not logged in",yA);case 21:if("IMAGE"!==u){t.next=29;break}return t.next=24,Xt(i,v);case 24:y=(b=t.sent).height,E=b.width,_=b.thumbnailWidth,O=b.thumbnailHeight;case 29:return A=this.mediaTaskManager.addUploadTask({file:new Uint8Array(v),hash:g},function(){if(void 0===L.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return L.session.fetchFileUploadIndexGet({hash:g,size:d})},function(t,r){if(void 0===L.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return L.session.requestFileUploadIndexSet({hash:g,unit:t,servers:r}).toPromise()},o),t.next=32,this.mediaTaskManager.waitMediaTask(A);case 32:if(N=(R=t.sent).zone,k=R.retUnit,"IMAGE"!==u){t.next=38;break}return C={height:y,width:E,fileName:h,size:d,description:l,thumbnail:p,messageType:u,thumbnailWidth:_,thumbnailHeight:O,mediaId:"0".concat($r(g)).concat(N,"z").concat(k,"z").concat(d,"z").concat(y,"z").concat(E)},t.abrupt("return",C);case 38:return x={fileName:h,size:d,description:l,mediaId:"0".concat($r(g)).concat(N,"z").concat(k,"z").concat(d),thumbnail:p,messageType:u},t.abrupt("return",x);case 40:case"end":return t.stop()}},t,this)}));return function(r){return t.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var t=J(w.mark(function t(r){var i,o,s,a,u=this;return w.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.uid,o=r.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){t.next=4;break}throw new rC(["The frequency of login exceeded the limit of %d queries per second",2],mA);case 4:if(this.connectionState===T.DISCONNECTED){t.next=6;break}throw new K("The SDK is either logging in or has logged in the Agora RTM system",kA);case 6:t.prev=6,this.context.uid=i,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(6),new I(["The %s in the arguments is invalid","uid"],Jh);case 13:return this.onConnectionStateChanged(T.CONNECTING,Eb.LOGIN),this.session=s=new ls(this.context,new Yr(this.context,this.logger,!1),o,this.logger),a=function(){u.connectionState===T.CONNECTED&&(u.onConnectionStateChanged(T.RECONNECTING,Eb.INTERRUPTED),u.session)&&u.session.once("userJoined",function(){u.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS)})},s.on("connectionLost",a),s.on("tokenExpired",function(){u.emit("TokenExpired")}),s.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",function(t){u.emit("MessageFromPeer",{text:t.text,messageType:S.MessageType.TEXT},t.peerId,t.properties)}),this.session.on("peerMediaMessage",function(t){var r=t.peerId,i=t.properties,o=t.messageType;t=t.details,"FILE"===o?u.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(pa(t.media_size),10),description:pa(t.media_description),fileName:pa(t.media_filename),mediaId:pa(t.media_id),thumbnail:new Blob([t.media_thumbnail])},r,i):"IMAGE"===o&&u.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(pa(t.media_size),10),description:pa(t.media_description),fileName:pa(t.media_filename),mediaId:pa(t.media_id),thumbnail:new Blob([t.media_thumbnail]),height:parseInt(pa(t.media_height),10),width:parseInt(pa(t.media_width),10),thumbnailHeight:parseInt(pa(t.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(t.media_thumbnailwidth),10)},r,i)}),this.session.on("peerRawMessage",function(t){u.emit("MessageFromPeer",{rawMessage:t.raw,description:t.desc,messageType:S.MessageType.RAW},t.peerId,t.properties)}),s.on("instanceChanged",function(t){return o=t}),s.on("peerOnlineStatusChanged",function(t){var r=t.instance.toString()+t.state,i=u.peerStatusSeqLru.get(r);!i||t.seq.greaterThan(i)?(u.peerStatusSeqLru.set(r,t.seq),t.state!==u.subscribedPeerStatusCache[t.peerId]&&u.emit("PeersOnlineStatusChanged",m({},t.peerId,t.state)),u.subscribedPeerStatusCache[t.peerId]=t.state,clearTimeout(u.peerUnreachableTimers[r]),t.state===S.PeerOnlineState.UNREACHABLE&&(u.peerUnreachableTimers[r]=setTimeout(function(){u.subscribedPeerStatusCache[t.peerId]===S.PeerOnlineState.UNREACHABLE&&(u.subscribedPeerStatusCache[t.peerId]=S.PeerOnlineState.ONLINE,u.emit("PeersOnlineStatusChanged",m({},t.peerId,S.PeerOnlineState.ONLINE)))},3e4))):u.log("peerOnlineStatusChanged dedup for %s, %d",r,t.seq.toNumber())}),s.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),s.on("channelAttributesUpdated",function(t){var r=t.channelId;t=t.attributeMaps;for(var i={},o=0;o<t.length;o++){var s=t[o],a=s.key,c=s.ms,l=s.value;if(s=s.origin,"string"!=typeof a||!U.isLong(c)||"string"!=typeof l||!za(s))break;i[a]=new Blob([l]).size}u.channelAttributesCacheLru.set(r,i)}),s.on("userJoined",function(t){if(0!==Object.keys(u.attributes).length){if(void 0===u.session)return;u.session.requestSetLocalUserAttributes(u.attributes,t).toPromise()}if(0!==u.attributeDrafts.size)for(var r=function(r,i){var o=(r=i[r]).attribute;r.promise.then(function(){void 0!==u.session&&u.session.requestSetLocalUserAttributes(o,t).toPromise()})},i=0,o=Array.from(u.attributeDrafts);i<o.length;i++)r(i,o);0!==Object.keys(u.subscribedPeerStatusCache).length&&s.requestSubscribePeersOnlineStatus(Object.keys(u.subscribedPeerStatusCache))}),this.lastLoginTime=Date.now(),t.prev=29,t.next=32,s.loginHandler().toPromise();case 32:this.mediaTaskManager.setAuthInfo({ticket:s.connection.curOpenSockets.filter(function(t){return void 0!==t})[0].ticket,instance:s.instanceId,useNewDomain:.5<=Math.random(),loginOpt:s.userJoinOptions.toLong()}),t.next=44;break;case 35:if(t.prev=35,t.t1=t.catch(29),!Sa(t.t1)){t.next=40;break}throw this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_TIMEOUT),new db(Yd(this.name,"login",2e4),lA);case 40:if(this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_FAILURE),!sa(t.t1)){t.next=43;break}throw t.t1;case 43:throw new da("Login failure",{code:Zq,originalError:t.t1});case 44:this.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS);case 45:case"end":return t.stop()}},t,this,[[6,10],[29,35]])}));return function(r){return t.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(t,r){var i,o=this;t===T.RECONNECTING&&(this.reconnId+=1),eb("ConnectionStateChange",{elapse:fb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:os[t],oldState:os[this.connectionState],reason:qD[r],sid:Xa(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null!=(i=this.context.config.enableCloudProxy)&&i),this.connectionState===T.RECONNECTING&&t===T.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ba(function(t){return uc(Jk(t.userInfos,"account"),function(t){return!!t.ts})})).subscribe(function(t){t=uc(t,function(t,r){return t=t?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,o.subscribedPeerStatusCache[r]=t}),o.emit("PeersOnlineStatusChanged",t)}),this.internalEmitter.emit("RECONNECTED")),this.connectionState=t,t!==T.ABORTED&&t!==T.DISCONNECTED||(this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.session=void 0,this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",t),this.emit("ConnectionStateChanged",t,r)}}]),r}(tb()),fa(E.prototype,"renewToken",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"renewToken"),E.prototype),fa(E.prototype,"queryPeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersOnlineStatus"),E.prototype),fa(E.prototype,"getChannelMemberCount",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelMemberCount"),E.prototype),fa(E.prototype,"setLocalUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"setLocalUserAttributes"),E.prototype),fa(E.prototype,"setChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"setChannelAttributes"),E.prototype),fa(E.prototype,"addOrUpdateLocalUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateLocalUserAttributes"),E.prototype),fa(E.prototype,"addOrUpdateChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateChannelAttributes"),E.prototype),fa(E.prototype,"deleteLocalUserAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"deleteLocalUserAttributesByKeys"),E.prototype),fa(E.prototype,"deleteChannelAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"deleteChannelAttributesByKeys"),E.prototype),fa(E.prototype,"clearLocalUserAttributes",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"clearLocalUserAttributes"),E.prototype),fa(E.prototype,"clearChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"clearChannelAttributes"),E.prototype),fa(E.prototype,"getUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributes"),E.prototype),fa(E.prototype,"getChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributes"),E.prototype),fa(E.prototype,"getChannelAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributesByKeys"),E.prototype),fa(E.prototype,"getUserAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributesByKeys"),E.prototype),fa(E.prototype,"login",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"login"),E.prototype),fa(E.prototype,"logout",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"logout"),E.prototype),fa(E.prototype,"logoutSync",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"logoutSync"),E.prototype),fa(E.prototype,"sendMessageToPeer",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"sendMessageToPeer"),E.prototype),fa(E.prototype,"createChannel",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"createChannel"),E.prototype),fa(E.prototype,"createLocalInvitation",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"createLocalInvitation"),E.prototype),fa(E.prototype,"subscribePeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"subscribePeersOnlineStatus"),E.prototype),fa(E.prototype,"unsubscribePeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"unsubscribePeersOnlineStatus"),E.prototype),fa(E.prototype,"queryPeersBySubscriptionOption",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersBySubscriptionOption"),E.prototype),fa(E.prototype,"createMessage",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"createMessage"),E.prototype),fa(E.prototype,"downloadMedia",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"downloadMedia"),E.prototype),fa(E.prototype,"createMediaMessageByUploading",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"createMediaMessageByUploading"),E.prototype),E),ps={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},qs={enableLogUpload:!1,logFilter:ps.LOG_FILTER_INFO,enableCloudProxy:!1},Zd=ua(ua({createInstance:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(t))throw new I(["The %s in the arguments is invalid","appId"],Nq);var i=Object.keys(n).filter(function(t){return!(t in qs)});if(0!==i.length)throw new I("Invalid RTM config: ".concat(i.join(", ")),Nq);var o=ua(ua({},qs),n);if(void 0!==r&&(!Array.isArray(r)||0===r.length))throw new I("Invalid area config");if(null!=r){if(!r.every(function(t){return t in S.LegacyAreaCode}))throw new I("Invalid area codes: ".concat(r.filter(function(t){return!(t in S)}).join(", ")));M=xe(r.map(function(t){return zC[t]}))}r=jl=Ya.__global_unique_id__=(Ya.__global_unique_id__||0)+1;var s=DC(o);i=EC(o);var a=FC(o),u=GC(r,o),c=Tr(r,o),l=c("RTM:DEBUG","<Entry> ");return Mr.rtmConfig=o,s("The Agora RTM Web SDK version is %s","1.4.3-203"),n.enableCloudProxy&&s("RTM cloud proxy enabled"),n.enableLogUpload&&s("Log upload enabled"),M&&l("Area is set to %s",Array.from(M.CODES).map(function(t){return xf(F).find(function(n){return F[n]===t})}).join(", ")),l("Creating an RtmClient instance"),l('The Git commit ID is "'.concat("v1.4.3-17-g1e27aa38",'"')),l("The App ID is %s",Um(t,4,10,"*".repeat(6))),s("The process ID is %s",gg),l("The build is %s","v1.4.3-17-g1e27aa38"),l("NODE_ENV is %s","production"),new rD(t,{genLogger:c,genTracker:u,info:s,warn:i,logError:a,loggerId:r},o,function(t){for(var n=0,r=xf(t);n<r.length;n++){var i=r[n];try{var a=t[i];null!=a&&(t.enableCloudProxy&&s("RTM cloud proxy enabled"),t.enableLogUpload&&s("Log upload enabled"),o[i]=a)}catch(t){throw new I(["The %s in the arguments is invalid",i],void 0)}}})},BUILD:"v1.4.3-17-g1e27aa38",VERSION:"1.4.3-203",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:gg,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},ps),{},{setParameter:function(t,n){Object.keys(Nc).includes(t)&&(Nc[t]=n)},getParameter:function(t){return Nc[t]},setArea:function(t){var n=t.areaCodes;if(t=t.excludedArea,!Array.isArray(n)||0===n.length||!n.every(function(t){return t in S.AreaCode}))throw new I("Invalid area config");if(void 0!==t&&t===S.AreaCode.GLOBAL)throw new I("Excluded area cannot be global");if(void 0===t)M=xe(n.map(function(t){return F[t]}));else{if(n.includes(t))throw new I("Excluded area cannot be in areaCodes");if(!(t in F))throw new I("Invalid excludedArea:",t);M=bu({areas:n.map(function(t){return F[t]}),excludedArea:F[t]})}}});return Zd})}}]);